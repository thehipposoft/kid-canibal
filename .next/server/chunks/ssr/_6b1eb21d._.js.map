{"version":3,"sources":["../../../../node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../node_modules/next/src/shared/lib/utils/warn-once.ts","../../../../node_modules/next/src/shared/lib/deployment-id.ts","../../../../node_modules/next/src/shared/lib/image-blur-svg.ts","../../../../node_modules/next/src/shared/lib/image-config.ts","../../../../node_modules/next/src/shared/lib/get-img-props.ts","../../../../node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../node_modules/next/src/shared/lib/side-effect.tsx","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/head-manager-context.ts","../../../../node_modules/next/src/shared/lib/head.tsx","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/image-config-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/router-context.ts","../../../../node_modules/next/src/shared/lib/find-closest-quality.ts","../../../../node_modules/next/src/shared/lib/image-loader.ts","../../../../node_modules/next/src/client/use-merged-ref.ts","../../../../node_modules/next/src/client/image-component.tsx","../../../../node_modules/next/src/shared/lib/image-external.tsx","../../../../node_modules/next/image.js","../../../../components/Banner/index.tsx","../../../../node_modules/next/src/shared/lib/router/utils/querystring.ts","../../../../node_modules/next/src/shared/lib/router/utils/format-url.ts","../../../../node_modules/next/src/shared/lib/utils.ts","../../../../node_modules/next/src/shared/lib/router/utils/parse-path.ts","../../../../node_modules/next/src/shared/lib/router/utils/add-path-prefix.ts","../../../../node_modules/next/src/shared/lib/router/utils/remove-trailing-slash.ts","../../../../node_modules/next/src/client/normalize-trailing-slash.ts","../../../../node_modules/next/src/client/add-base-path.ts","../../../../node_modules/next/src/client/components/segment-cache/types.ts","../../../../node_modules/next/src/client/components/segment-cache/cache-key.ts","../../../../node_modules/next/src/shared/lib/app-router-types.ts","../../../../node_modules/next/src/client/components/match-segments.ts","../../../../node_modules/next/src/client/components/app-router-headers.ts","../../../../node_modules/next/src/client/components/router-reducer/router-reducer-types.ts","../../../../node_modules/next/src/shared/lib/is-thenable.ts","../../../../node_modules/next/src/client/components/use-action-queue.ts","../../../../node_modules/next/src/client/app-call-server.ts","../../../../node_modules/next/src/client/app-find-source-map-url.ts","../../../../node_modules/next/src/shared/lib/segment.ts","../../../../node_modules/next/src/shared/lib/segment-cache/segment-value-encoding.ts","../../../../node_modules/next/src/client/route-params.ts","../../../../node_modules/next/src/client/components/router-reducer/create-href-from-url.ts","../../../../node_modules/next/src/client/flight-data-helpers.ts","../../../../node_modules/next/src/client/app-build-id.ts","../../../../node_modules/next/src/shared/lib/hash.ts","../../../../node_modules/next/src/shared/lib/router/utils/cache-busting-search-param.ts","../../../../node_modules/next/src/client/components/router-reducer/set-cache-busting-search-param.ts","../../../../node_modules/next/src/client/components/router-reducer/fetch-server-response.ts","../../../../node_modules/next/src/client/components/segment-cache/lru.ts","../../../../node_modules/next/src/client/components/segment-cache/cache-map.ts","../../../../node_modules/next/src/client/components/segment-cache/vary-path.ts","../../../../node_modules/next/src/shared/lib/page-path/ensure-leading-slash.ts","../../../../node_modules/next/src/shared/lib/router/utils/app-paths.ts","../../../../node_modules/next/src/shared/lib/router/utils/interception-routes.ts","../../../../node_modules/next/src/client/components/router-reducer/compute-changed-path.ts","../../../../node_modules/next/src/client/components/router-reducer/handle-mutable.ts","../../../../node_modules/next/src/client/components/router-reducer/create-router-cache-key.ts","../../../../node_modules/next/src/client/components/router-reducer/is-navigating-to-new-root-layout.ts","../../../../node_modules/next/src/client/components/router-reducer/ppr-navigations.ts","../../../../node_modules/next/src/client/components/segment-cache/navigation.ts","../../../../node_modules/next/src/client/components/router-reducer/reducers/navigate-reducer.ts","../../../../node_modules/next/src/shared/lib/promise-with-resolvers.ts","../../../../node_modules/next/src/client/components/segment-cache/cache.ts","../../../../node_modules/next/src/client/components/segment-cache/scheduler.ts","../../../../node_modules/next/src/client/components/links.ts","../../../../node_modules/next/src/shared/lib/router/utils/path-has-prefix.ts","../../../../node_modules/next/src/client/has-base-path.ts","../../../../node_modules/next/src/shared/lib/router/utils/is-local-url.ts","../../../../node_modules/next/src/shared/lib/utils/error-once.ts","../../../../node_modules/next/src/client/app-dir/link.tsx","../../../../components/Projects/index.tsx","../../../../node_modules/shared/src/utils/hasA11yProp.ts","../../../../node_modules/shared/src/utils/toKebabCase.ts","../../../../node_modules/shared/src/utils/toCamelCase.ts","../../../../node_modules/lucide-react/src/defaultAttributes.ts","../../../../node_modules/shared/src/utils/mergeClasses.ts","../../../../node_modules/lucide-react/src/icons/arrow-up-right.ts","../../../../node_modules/shared/src/utils/toPascalCase.ts","../../../../node_modules/lucide-react/src/Icon.ts","../../../../node_modules/lucide-react/src/createLucideIcon.ts","../../../../node_modules/matter-js/build/matter.js","../../../../components/Menu/index.tsx"],"sourcesContent":["\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","let warnOnce = (_: string) => {}\nif (process.env.NODE_ENV !== 'production') {\n  const warnings = new Set<string>()\n  warnOnce = (msg: string) => {\n    if (!warnings.has(msg)) {\n      console.warn(msg)\n    }\n    warnings.add(msg)\n  }\n}\n\nexport { warnOnce }\n","// This could also be a variable instead of a function, but some unit tests want to change the ID at\n// runtime. Even though that would never happen in a real deployment.\nexport function getDeploymentId(): string | undefined {\n  return process.env.NEXT_DEPLOYMENT_ID\n}\n\nexport function getDeploymentIdQueryOrEmptyString(): string {\n  let deploymentId = getDeploymentId()\n  if (deploymentId) {\n    return `?dpl=${deploymentId}`\n  }\n  return ''\n}\n","/**\n * A shared function, used on both client and server, to generate a SVG blur placeholder.\n */\nexport function getImageBlurSvg({\n  widthInt,\n  heightInt,\n  blurWidth,\n  blurHeight,\n  blurDataURL,\n  objectFit,\n}: {\n  widthInt?: number\n  heightInt?: number\n  blurWidth?: number\n  blurHeight?: number\n  blurDataURL: string\n  objectFit?: string\n}): string {\n  const std = 20\n  const svgWidth = blurWidth ? blurWidth * 40 : widthInt\n  const svgHeight = blurHeight ? blurHeight * 40 : heightInt\n\n  const viewBox =\n    svgWidth && svgHeight ? `viewBox='0 0 ${svgWidth} ${svgHeight}'` : ''\n  const preserveAspectRatio = viewBox\n    ? 'none'\n    : objectFit === 'contain'\n      ? 'xMidYMid'\n      : objectFit === 'cover'\n        ? 'xMidYMid slice'\n        : 'none'\n\n  return `%3Csvg xmlns='http://www.w3.org/2000/svg' ${viewBox}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='${std}'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='${std}'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${preserveAspectRatio}' style='filter: url(%23b);' href='${blurDataURL}'/%3E%3C/svg%3E`\n}\n","export const VALID_LOADERS = [\n  'default',\n  'imgix',\n  'cloudinary',\n  'akamai',\n  'custom',\n] as const\n\nexport type LoaderValue = (typeof VALID_LOADERS)[number]\n\nexport type ImageLoaderProps = {\n  src: string\n  width: number\n  quality?: number\n}\n\nexport type ImageLoaderPropsWithConfig = ImageLoaderProps & {\n  config: Readonly<ImageConfig>\n}\n\nexport type LocalPattern = {\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single path segment.\n   * Double `**` matches any number of path segments.\n   */\n  pathname?: string\n\n  /**\n   * Can be literal query string such as `?v=1` or\n   * empty string meaning no query string.\n   */\n  search?: string\n}\n\nexport type RemotePattern = {\n  /**\n   * Must be `http` or `https`.\n   */\n  protocol?: 'http' | 'https'\n\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single subdomain.\n   * Double `**` matches any number of subdomains.\n   */\n  hostname: string\n\n  /**\n   * Can be literal port such as `8080` or empty string\n   * meaning no port.\n   */\n  port?: string\n\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single path segment.\n   * Double `**` matches any number of path segments.\n   */\n  pathname?: string\n\n  /**\n   * Can be literal query string such as `?v=1` or\n   * empty string meaning no query string.\n   */\n  search?: string\n}\n\ntype ImageFormat = 'image/avif' | 'image/webp'\n\n/**\n * Image configurations\n *\n * @see [Image configuration options](https://nextjs.org/docs/api-reference/next/image#configuration-options)\n */\nexport type ImageConfigComplete = {\n  /** @see [Device sizes documentation](https://nextjs.org/docs/api-reference/next/image#device-sizes) */\n  deviceSizes: number[]\n\n  /** @see [Image sizing documentation](https://nextjs.org/docs/app/building-your-application/optimizing/images#image-sizing) */\n  imageSizes: number[]\n\n  /** @see [Image loaders configuration](https://nextjs.org/docs/api-reference/next/legacy/image#loader) */\n  loader: LoaderValue\n\n  /** @see [Image loader configuration](https://nextjs.org/docs/app/api-reference/components/image#path) */\n  path: string\n\n  /** @see [Image loader configuration](https://nextjs.org/docs/api-reference/next/image#loader-configuration) */\n  loaderFile: string\n\n  /**\n   * @deprecated Use `remotePatterns` instead.\n   */\n  domains: string[]\n\n  /** @see [Disable static image import configuration](https://nextjs.org/docs/api-reference/next/image#disable-static-imports) */\n  disableStaticImages: boolean\n\n  /** @see [Cache behavior](https://nextjs.org/docs/api-reference/next/image#caching-behavior) */\n  minimumCacheTTL: number\n\n  /** @see [Acceptable formats](https://nextjs.org/docs/api-reference/next/image#acceptable-formats) */\n  formats: ImageFormat[]\n\n  /** @see [Maximum Redirects](https://nextjs.org/docs/api-reference/next/image#maximumredirects) */\n  maximumRedirects: number\n\n  /** @see [Maximum Response Body](https://nextjs.org/docs/api-reference/next/image#maximumresponsebody) */\n  maximumResponseBody: number\n\n  /** @see [Dangerously Allow Local IP](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-local-ip) */\n  dangerouslyAllowLocalIP: boolean\n\n  /** @see [Dangerously Allow SVG](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-svg) */\n  dangerouslyAllowSVG: boolean\n\n  /** @see [Content Security Policy](https://nextjs.org/docs/api-reference/next/image#contentsecuritypolicy) */\n  contentSecurityPolicy: string\n\n  /** @see [Content Disposition Type](https://nextjs.org/docs/api-reference/next/image#contentdispositiontype) */\n  contentDispositionType: 'inline' | 'attachment'\n\n  /** @see [Remote Patterns](https://nextjs.org/docs/api-reference/next/image#remotepatterns) */\n  remotePatterns: Array<URL | RemotePattern>\n\n  /** @see [Local Patterns](https://nextjs.org/docs/api-reference/next/image#localPatterns) */\n  localPatterns: LocalPattern[] | undefined\n\n  /** @see [Qualities](https://nextjs.org/docs/api-reference/next/image#qualities) */\n  qualities: number[] | undefined\n\n  /** @see [Unoptimized](https://nextjs.org/docs/api-reference/next/image#unoptimized) */\n  unoptimized: boolean\n}\n\nexport type ImageConfig = Partial<ImageConfigComplete>\n\nexport const imageConfigDefault: ImageConfigComplete = {\n  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n  imageSizes: [32, 48, 64, 96, 128, 256, 384],\n  path: '/_next/image',\n  loader: 'default',\n  loaderFile: '',\n  /**\n   * @deprecated Use `remotePatterns` instead to protect your application from malicious users.\n   */\n  domains: [],\n  disableStaticImages: false,\n  minimumCacheTTL: 14400, // 4 hours\n  formats: ['image/webp'],\n  maximumRedirects: 3,\n  maximumResponseBody: 50_000_000, // 50 MB\n  dangerouslyAllowLocalIP: false,\n  dangerouslyAllowSVG: false,\n  contentSecurityPolicy: `script-src 'none'; frame-src 'none'; sandbox;`,\n  contentDispositionType: 'attachment',\n  localPatterns: undefined, // default: allow all local images\n  remotePatterns: [], // default: allow no remote images\n  qualities: [75],\n  unoptimized: false,\n}\n","import { warnOnce } from './utils/warn-once'\nimport { getDeploymentId } from './deployment-id'\nimport { getImageBlurSvg } from './image-blur-svg'\nimport { imageConfigDefault } from './image-config'\nimport type {\n  ImageConfigComplete,\n  ImageLoaderProps,\n  ImageLoaderPropsWithConfig,\n} from './image-config'\n\nimport type { CSSProperties, JSX } from 'react'\n\nexport interface StaticImageData {\n  src: string\n  height: number\n  width: number\n  blurDataURL?: string\n  blurWidth?: number\n  blurHeight?: number\n}\n\nexport interface StaticRequire {\n  default: StaticImageData\n}\n\nexport type StaticImport = StaticRequire | StaticImageData\n\nexport type ImageProps = Omit<\n  JSX.IntrinsicElements['img'],\n  'src' | 'srcSet' | 'ref' | 'alt' | 'width' | 'height' | 'loading'\n> & {\n  src: string | StaticImport\n  alt: string\n  width?: number | `${number}`\n  height?: number | `${number}`\n  fill?: boolean\n  loader?: ImageLoader\n  quality?: number | `${number}`\n  preload?: boolean\n  /**\n   * @deprecated Use `preload` prop instead.\n   * See https://nextjs.org/docs/app/api-reference/components/image#preload\n   */\n  priority?: boolean\n  loading?: LoadingValue\n  placeholder?: PlaceholderValue\n  blurDataURL?: string\n  unoptimized?: boolean\n  overrideSrc?: string\n  /**\n   * @deprecated Use `onLoad` instead.\n   * @see https://nextjs.org/docs/app/api-reference/components/image#onload\n   */\n  onLoadingComplete?: OnLoadingComplete\n  /**\n   * @deprecated Use `fill` prop instead of `layout=\"fill\"` or change import to `next/legacy/image`.\n   * @see https://nextjs.org/docs/api-reference/next/legacy/image\n   */\n  layout?: string\n  /**\n   * @deprecated Use `style` prop instead.\n   */\n  objectFit?: string\n  /**\n   * @deprecated Use `style` prop instead.\n   */\n  objectPosition?: string\n  /**\n   * @deprecated This prop does not do anything.\n   */\n  lazyBoundary?: string\n  /**\n   * @deprecated This prop does not do anything.\n   */\n  lazyRoot?: string\n}\n\nexport type ImgProps = Omit<ImageProps, 'src' | 'loader'> & {\n  loading: LoadingValue\n  width: number | undefined\n  height: number | undefined\n  style: NonNullable<JSX.IntrinsicElements['img']['style']>\n  sizes: string | undefined\n  srcSet: string | undefined\n  src: string\n}\n\nconst VALID_LOADING_VALUES = ['lazy', 'eager', undefined] as const\n\n// Object-fit values that are not valid background-size values\nconst INVALID_BACKGROUND_SIZE_VALUES = [\n  '-moz-initial',\n  'fill',\n  'none',\n  'scale-down',\n  undefined,\n]\ntype LoadingValue = (typeof VALID_LOADING_VALUES)[number]\ntype ImageConfig = ImageConfigComplete & {\n  allSizes: number[]\n  output?: 'standalone' | 'export'\n}\n\nexport type ImageLoader = (p: ImageLoaderProps) => string\n\n// Do not export - this is an internal type only\n// because `next.config.js` is only meant for the\n// built-in loaders, not for a custom loader() prop.\ntype ImageLoaderWithConfig = (p: ImageLoaderPropsWithConfig) => string\n\nexport type PlaceholderValue = 'blur' | 'empty' | `data:image/${string}`\nexport type OnLoad = React.ReactEventHandler<HTMLImageElement> | undefined\nexport type OnLoadingComplete = (img: HTMLImageElement) => void\n\nexport type PlaceholderStyle = Partial<\n  Pick<\n    CSSProperties,\n    | 'backgroundSize'\n    | 'backgroundPosition'\n    | 'backgroundRepeat'\n    | 'backgroundImage'\n  >\n>\n\nfunction isStaticRequire(\n  src: StaticRequire | StaticImageData\n): src is StaticRequire {\n  return (src as StaticRequire).default !== undefined\n}\n\nfunction isStaticImageData(\n  src: StaticRequire | StaticImageData\n): src is StaticImageData {\n  return (src as StaticImageData).src !== undefined\n}\n\nfunction isStaticImport(src: string | StaticImport): src is StaticImport {\n  return (\n    !!src &&\n    typeof src === 'object' &&\n    (isStaticRequire(src as StaticImport) ||\n      isStaticImageData(src as StaticImport))\n  )\n}\n\nconst allImgs = new Map<\n  string,\n  { src: string; loading: LoadingValue; placeholder: PlaceholderValue }\n>()\nlet perfObserver: PerformanceObserver | undefined\n\nfunction getInt(x: unknown): number | undefined {\n  if (typeof x === 'undefined') {\n    return x\n  }\n  if (typeof x === 'number') {\n    return Number.isFinite(x) ? x : NaN\n  }\n  if (typeof x === 'string' && /^[0-9]+$/.test(x)) {\n    return parseInt(x, 10)\n  }\n  return NaN\n}\n\nfunction getWidths(\n  { deviceSizes, allSizes }: ImageConfig,\n  width: number | undefined,\n  sizes: string | undefined\n): { widths: number[]; kind: 'w' | 'x' } {\n  if (sizes) {\n    // Find all the \"vw\" percent sizes used in the sizes prop\n    const viewportWidthRe = /(^|\\s)(1?\\d?\\d)vw/g\n    const percentSizes = []\n    for (let match; (match = viewportWidthRe.exec(sizes)); match) {\n      percentSizes.push(parseInt(match[2]))\n    }\n    if (percentSizes.length) {\n      const smallestRatio = Math.min(...percentSizes) * 0.01\n      return {\n        widths: allSizes.filter((s) => s >= deviceSizes[0] * smallestRatio),\n        kind: 'w',\n      }\n    }\n    return { widths: allSizes, kind: 'w' }\n  }\n  if (typeof width !== 'number') {\n    return { widths: deviceSizes, kind: 'w' }\n  }\n\n  const widths = [\n    ...new Set(\n      // > This means that most OLED screens that say they are 3x resolution,\n      // > are actually 3x in the green color, but only 1.5x in the red and\n      // > blue colors. Showing a 3x resolution image in the app vs a 2x\n      // > resolution image will be visually the same, though the 3x image\n      // > takes significantly more data. Even true 3x resolution screens are\n      // > wasteful as the human eye cannot see that level of detail without\n      // > something like a magnifying glass.\n      // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\n      [width, width * 2 /*, width * 3*/].map(\n        (w) => allSizes.find((p) => p >= w) || allSizes[allSizes.length - 1]\n      )\n    ),\n  ]\n  return { widths, kind: 'x' }\n}\n\ntype GenImgAttrsData = {\n  config: ImageConfig\n  src: string\n  unoptimized: boolean\n  loader: ImageLoaderWithConfig\n  width?: number\n  quality?: number\n  sizes?: string\n}\n\ntype GenImgAttrsResult = {\n  src: string\n  srcSet: string | undefined\n  sizes: string | undefined\n}\n\nfunction generateImgAttrs({\n  config,\n  src,\n  unoptimized,\n  width,\n  quality,\n  sizes,\n  loader,\n}: GenImgAttrsData): GenImgAttrsResult {\n  if (unoptimized) {\n    const deploymentId = getDeploymentId()\n    if (src.startsWith('/') && !src.startsWith('//') && deploymentId) {\n      const sep = src.includes('?') ? '&' : '?'\n      src = `${src}${sep}dpl=${deploymentId}`\n    }\n    return { src, srcSet: undefined, sizes: undefined }\n  }\n\n  const { widths, kind } = getWidths(config, width, sizes)\n  const last = widths.length - 1\n\n  return {\n    sizes: !sizes && kind === 'w' ? '100vw' : sizes,\n    srcSet: widths\n      .map(\n        (w, i) =>\n          `${loader({ config, src, quality, width: w })} ${\n            kind === 'w' ? w : i + 1\n          }${kind}`\n      )\n      .join(', '),\n\n    // It's intended to keep `src` the last attribute because React updates\n    // attributes in order. If we keep `src` the first one, Safari will\n    // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n    // updated by React. That causes multiple unnecessary requests if `srcSet`\n    // and `sizes` are defined.\n    // This bug cannot be reproduced in Chrome or Firefox.\n    src: loader({ config, src, quality, width: widths[last] }),\n  }\n}\n\n/**\n * A shared function, used on both client and server, to generate the props for <img>.\n */\nexport function getImgProps(\n  {\n    src,\n    sizes,\n    unoptimized = false,\n    priority = false,\n    preload = false,\n    loading,\n    className,\n    quality,\n    width,\n    height,\n    fill = false,\n    style,\n    overrideSrc,\n    onLoad,\n    onLoadingComplete,\n    placeholder = 'empty',\n    blurDataURL,\n    fetchPriority,\n    decoding = 'async',\n    layout,\n    objectFit,\n    objectPosition,\n    lazyBoundary,\n    lazyRoot,\n    ...rest\n  }: ImageProps,\n  _state: {\n    defaultLoader: ImageLoaderWithConfig\n    imgConf: ImageConfigComplete\n    showAltText?: boolean\n    blurComplete?: boolean\n  }\n): {\n  props: ImgProps\n  meta: {\n    unoptimized: boolean\n    preload: boolean\n    placeholder: NonNullable<ImageProps['placeholder']>\n    fill: boolean\n  }\n} {\n  const { imgConf, showAltText, blurComplete, defaultLoader } = _state\n  let config: ImageConfig\n  let c = imgConf || imageConfigDefault\n  if ('allSizes' in c) {\n    config = c as ImageConfig\n  } else {\n    const allSizes = [...c.deviceSizes, ...c.imageSizes].sort((a, b) => a - b)\n    const deviceSizes = c.deviceSizes.sort((a, b) => a - b)\n    const qualities = c.qualities?.sort((a, b) => a - b)\n    config = { ...c, allSizes, deviceSizes, qualities }\n  }\n\n  if (typeof defaultLoader === 'undefined') {\n    throw new Error(\n      'images.loaderFile detected but the file is missing default export.\\nRead more: https://nextjs.org/docs/messages/invalid-images-config'\n    )\n  }\n  let loader: ImageLoaderWithConfig = rest.loader || defaultLoader\n\n  // Remove property so it's not spread on <img> element\n  delete rest.loader\n  delete (rest as any).srcSet\n\n  // This special value indicates that the user\n  // didn't define a \"loader\" prop or \"loader\" config.\n  const isDefaultLoader = '__next_img_default' in loader\n\n  if (isDefaultLoader) {\n    if (config.loader === 'custom') {\n      throw new Error(\n        `Image with src \"${src}\" is missing \"loader\" prop.` +\n          `\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader`\n      )\n    }\n  } else {\n    // The user defined a \"loader\" prop or config.\n    // Since the config object is internal only, we\n    // must not pass it to the user-defined \"loader\".\n    const customImageLoader = loader as ImageLoader\n    loader = (obj) => {\n      const { config: _, ...opts } = obj\n      return customImageLoader(opts)\n    }\n  }\n\n  if (layout) {\n    if (layout === 'fill') {\n      fill = true\n    }\n    const layoutToStyle: Record<string, Record<string, string> | undefined> = {\n      intrinsic: { maxWidth: '100%', height: 'auto' },\n      responsive: { width: '100%', height: 'auto' },\n    }\n    const layoutToSizes: Record<string, string | undefined> = {\n      responsive: '100vw',\n      fill: '100vw',\n    }\n    const layoutStyle = layoutToStyle[layout]\n    if (layoutStyle) {\n      style = { ...style, ...layoutStyle }\n    }\n    const layoutSizes = layoutToSizes[layout]\n    if (layoutSizes && !sizes) {\n      sizes = layoutSizes\n    }\n  }\n\n  let staticSrc = ''\n  let widthInt = getInt(width)\n  let heightInt = getInt(height)\n  let blurWidth: number | undefined\n  let blurHeight: number | undefined\n  if (isStaticImport(src)) {\n    const staticImageData = isStaticRequire(src) ? src.default : src\n\n    if (!staticImageData.src) {\n      throw new Error(\n        `An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(\n          staticImageData\n        )}`\n      )\n    }\n    if (!staticImageData.height || !staticImageData.width) {\n      throw new Error(\n        `An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(\n          staticImageData\n        )}`\n      )\n    }\n\n    blurWidth = staticImageData.blurWidth\n    blurHeight = staticImageData.blurHeight\n    blurDataURL = blurDataURL || staticImageData.blurDataURL\n    staticSrc = staticImageData.src\n\n    if (!fill) {\n      if (!widthInt && !heightInt) {\n        widthInt = staticImageData.width\n        heightInt = staticImageData.height\n      } else if (widthInt && !heightInt) {\n        const ratio = widthInt / staticImageData.width\n        heightInt = Math.round(staticImageData.height * ratio)\n      } else if (!widthInt && heightInt) {\n        const ratio = heightInt / staticImageData.height\n        widthInt = Math.round(staticImageData.width * ratio)\n      }\n    }\n  }\n  src = typeof src === 'string' ? src : staticSrc\n\n  let isLazy =\n    !priority &&\n    !preload &&\n    (loading === 'lazy' || typeof loading === 'undefined')\n  if (!src || src.startsWith('data:') || src.startsWith('blob:')) {\n    // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    unoptimized = true\n    isLazy = false\n  }\n  if (config.unoptimized) {\n    unoptimized = true\n  }\n  if (\n    isDefaultLoader &&\n    !config.dangerouslyAllowSVG &&\n    src.split('?', 1)[0].endsWith('.svg')\n  ) {\n    // Special case to make svg serve as-is to avoid proxying\n    // through the built-in Image Optimization API.\n    unoptimized = true\n  }\n\n  const qualityInt = getInt(quality)\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (config.output === 'export' && isDefaultLoader && !unoptimized) {\n      throw new Error(\n        `Image Optimization using the default loader is not compatible with \\`{ output: 'export' }\\`.\n  Possible solutions:\n    - Remove \\`{ output: 'export' }\\` and run \"next start\" to run server mode including the Image Optimization API.\n    - Configure \\`{ images: { unoptimized: true } }\\` in \\`next.config.js\\` to disable the Image Optimization API.\n  Read more: https://nextjs.org/docs/messages/export-image-api`\n      )\n    }\n    if (!src) {\n      // React doesn't show the stack trace and there's\n      // no `src` to help identify which image, so we\n      // instead console.error(ref) during mount.\n      unoptimized = true\n    } else {\n      if (fill) {\n        if (width) {\n          throw new Error(\n            `Image with src \"${src}\" has both \"width\" and \"fill\" properties. Only one should be used.`\n          )\n        }\n        if (height) {\n          throw new Error(\n            `Image with src \"${src}\" has both \"height\" and \"fill\" properties. Only one should be used.`\n          )\n        }\n        if (style?.position && style.position !== 'absolute') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.position\" properties. Images with \"fill\" always use position absolute - it cannot be modified.`\n          )\n        }\n        if (style?.width && style.width !== '100%') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.width\" properties. Images with \"fill\" always use width 100% - it cannot be modified.`\n          )\n        }\n        if (style?.height && style.height !== '100%') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.height\" properties. Images with \"fill\" always use height 100% - it cannot be modified.`\n          )\n        }\n      } else {\n        if (typeof widthInt === 'undefined') {\n          throw new Error(\n            `Image with src \"${src}\" is missing required \"width\" property.`\n          )\n        } else if (isNaN(widthInt)) {\n          throw new Error(\n            `Image with src \"${src}\" has invalid \"width\" property. Expected a numeric value in pixels but received \"${width}\".`\n          )\n        }\n        if (typeof heightInt === 'undefined') {\n          throw new Error(\n            `Image with src \"${src}\" is missing required \"height\" property.`\n          )\n        } else if (isNaN(heightInt)) {\n          throw new Error(\n            `Image with src \"${src}\" has invalid \"height\" property. Expected a numeric value in pixels but received \"${height}\".`\n          )\n        }\n        // eslint-disable-next-line no-control-regex\n        if (/^[\\x00-\\x20]/.test(src)) {\n          throw new Error(\n            `Image with src \"${src}\" cannot start with a space or control character. Use src.trimStart() to remove it or encodeURIComponent(src) to keep it.`\n          )\n        }\n        // eslint-disable-next-line no-control-regex\n        if (/[\\x00-\\x20]$/.test(src)) {\n          throw new Error(\n            `Image with src \"${src}\" cannot end with a space or control character. Use src.trimEnd() to remove it or encodeURIComponent(src) to keep it.`\n          )\n        }\n      }\n    }\n    if (!VALID_LOADING_VALUES.includes(loading)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"loading\" property. Provided \"${loading}\" should be one of ${VALID_LOADING_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (priority && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"priority\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (preload && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"preload\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (preload && priority) {\n      throw new Error(\n        `Image with src \"${src}\" has both \"preload\" and \"priority\" properties. Only \"preload\" should be used.`\n      )\n    }\n    if (\n      placeholder !== 'empty' &&\n      placeholder !== 'blur' &&\n      !placeholder.startsWith('data:image/')\n    ) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"placeholder\" property \"${placeholder}\".`\n      )\n    }\n    if (placeholder !== 'empty') {\n      if (widthInt && heightInt && widthInt * heightInt < 1600) {\n        warnOnce(\n          `Image with src \"${src}\" is smaller than 40x40. Consider removing the \"placeholder\" property to improve performance.`\n        )\n      }\n    }\n    if (\n      qualityInt &&\n      config.qualities &&\n      !config.qualities.includes(qualityInt)\n    ) {\n      warnOnce(\n        `Image with src \"${src}\" is using quality \"${qualityInt}\" which is not configured in images.qualities [${config.qualities.join(', ')}]. Please update your config to [${[...config.qualities, qualityInt].sort().join(', ')}].` +\n          `\\nRead more: https://nextjs.org/docs/messages/next-image-unconfigured-qualities`\n      )\n    }\n    if (placeholder === 'blur' && !blurDataURL) {\n      const VALID_BLUR_EXT = ['jpeg', 'png', 'webp', 'avif'] // should match next-image-loader\n\n      throw new Error(\n        `Image with src \"${src}\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.\n        Possible solutions:\n          - Add a \"blurDataURL\" property, the contents should be a small Data URL to represent the image\n          - Change the \"src\" property to a static import with one of the supported file types: ${VALID_BLUR_EXT.join(\n            ','\n          )} (animated images not supported)\n          - Remove the \"placeholder\" property, effectively no blur effect\n        Read more: https://nextjs.org/docs/messages/placeholder-blur-data-url`\n      )\n    }\n    if ('ref' in rest) {\n      warnOnce(\n        `Image with src \"${src}\" is using unsupported \"ref\" property. Consider using the \"onLoad\" property instead.`\n      )\n    }\n\n    if (!unoptimized && !isDefaultLoader) {\n      const urlStr = loader({\n        config,\n        src,\n        width: widthInt || 400,\n        quality: qualityInt || 75,\n      })\n      let url: URL | undefined\n      try {\n        url = new URL(urlStr)\n      } catch (err) {}\n      if (urlStr === src || (url && url.pathname === src && !url.search)) {\n        warnOnce(\n          `Image with src \"${src}\" has a \"loader\" property that does not implement width. Please implement it or use the \"unoptimized\" property instead.` +\n            `\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader-width`\n        )\n      }\n    }\n\n    if (onLoadingComplete) {\n      warnOnce(\n        `Image with src \"${src}\" is using deprecated \"onLoadingComplete\" property. Please use the \"onLoad\" property instead.`\n      )\n    }\n\n    for (const [legacyKey, legacyValue] of Object.entries({\n      layout,\n      objectFit,\n      objectPosition,\n      lazyBoundary,\n      lazyRoot,\n    })) {\n      if (legacyValue) {\n        warnOnce(\n          `Image with src \"${src}\" has legacy prop \"${legacyKey}\". Did you forget to run the codemod?` +\n            `\\nRead more: https://nextjs.org/docs/messages/next-image-upgrade-to-13`\n        )\n      }\n    }\n\n    if (\n      typeof window !== 'undefined' &&\n      !perfObserver &&\n      window.PerformanceObserver\n    ) {\n      perfObserver = new PerformanceObserver((entryList) => {\n        for (const entry of entryList.getEntries()) {\n          // @ts-ignore - missing \"LargestContentfulPaint\" class with \"element\" prop\n          const imgSrc = entry?.element?.src || ''\n          const lcpImage = allImgs.get(imgSrc)\n          if (\n            lcpImage &&\n            lcpImage.loading === 'lazy' &&\n            lcpImage.placeholder === 'empty' &&\n            !lcpImage.src.startsWith('data:') &&\n            !lcpImage.src.startsWith('blob:')\n          ) {\n            // https://web.dev/lcp/#measure-lcp-in-javascript\n            warnOnce(\n              `Image with src \"${lcpImage.src}\" was detected as the Largest Contentful Paint (LCP). Please add the \\`loading=\"eager\"\\` property if this image is above the fold.` +\n                `\\nRead more: https://nextjs.org/docs/app/api-reference/components/image#loading`\n            )\n          }\n        }\n      })\n      try {\n        perfObserver.observe({\n          type: 'largest-contentful-paint',\n          buffered: true,\n        })\n      } catch (err) {\n        // Log error but don't crash the app\n        console.error(err)\n      }\n    }\n  }\n  const imgStyle = Object.assign(\n    fill\n      ? {\n          position: 'absolute',\n          height: '100%',\n          width: '100%',\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n          objectFit,\n          objectPosition,\n        }\n      : {},\n    showAltText ? {} : { color: 'transparent' },\n    style\n  )\n\n  const backgroundImage =\n    !blurComplete && placeholder !== 'empty'\n      ? placeholder === 'blur'\n        ? `url(\"data:image/svg+xml;charset=utf-8,${getImageBlurSvg({\n            widthInt,\n            heightInt,\n            blurWidth,\n            blurHeight,\n            blurDataURL: blurDataURL || '', // assume not undefined\n            objectFit: imgStyle.objectFit,\n          })}\")`\n        : `url(\"${placeholder}\")` // assume `data:image/`\n      : null\n\n  const backgroundSize = !INVALID_BACKGROUND_SIZE_VALUES.includes(\n    imgStyle.objectFit\n  )\n    ? imgStyle.objectFit\n    : imgStyle.objectFit === 'fill'\n      ? '100% 100%' // the background-size equivalent of `fill`\n      : 'cover'\n\n  let placeholderStyle: PlaceholderStyle = backgroundImage\n    ? {\n        backgroundSize,\n        backgroundPosition: imgStyle.objectPosition || '50% 50%',\n        backgroundRepeat: 'no-repeat',\n        backgroundImage,\n      }\n    : {}\n\n  if (process.env.NODE_ENV === 'development') {\n    if (\n      placeholderStyle.backgroundImage &&\n      placeholder === 'blur' &&\n      blurDataURL?.startsWith('/')\n    ) {\n      // During `next dev`, we don't want to generate blur placeholders with webpack\n      // because it can delay starting the dev server. Instead, `next-image-loader.js`\n      // will inline a special url to lazily generate the blur placeholder at request time.\n      placeholderStyle.backgroundImage = `url(\"${blurDataURL}\")`\n    }\n  }\n\n  const imgAttributes = generateImgAttrs({\n    config,\n    src,\n    unoptimized,\n    width: widthInt,\n    quality: qualityInt,\n    sizes,\n    loader,\n  })\n\n  const loadingFinal = isLazy ? 'lazy' : loading\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof window !== 'undefined') {\n      let fullUrl: URL\n      try {\n        fullUrl = new URL(imgAttributes.src)\n      } catch (e) {\n        fullUrl = new URL(imgAttributes.src, window.location.href)\n      }\n      allImgs.set(fullUrl.href, { src, loading: loadingFinal, placeholder })\n    }\n  }\n\n  const props: ImgProps = {\n    ...rest,\n    loading: loadingFinal,\n    fetchPriority,\n    width: widthInt,\n    height: heightInt,\n    decoding,\n    className,\n    style: { ...imgStyle, ...placeholderStyle },\n    sizes: imgAttributes.sizes,\n    srcSet: imgAttributes.srcSet,\n    src: overrideSrc || imgAttributes.src,\n  }\n  const meta = { unoptimized, preload: preload || priority, placeholder, fill }\n  return { props, meta }\n}\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","import type React from 'react'\nimport { Children, useEffect, useLayoutEffect, type JSX } from 'react'\n\ntype State = JSX.Element[] | undefined\n\nexport type SideEffectProps = {\n  reduceComponentsToState: (components: Array<React.ReactElement<any>>) => State\n  handleStateChange?: (state: State) => void\n  headManager: any\n  children: React.ReactNode\n}\n\nconst isServer = typeof window === 'undefined'\nconst useClientOnlyLayoutEffect = isServer ? () => {} : useLayoutEffect\nconst useClientOnlyEffect = isServer ? () => {} : useEffect\n\nexport default function SideEffect(props: SideEffectProps) {\n  const { headManager, reduceComponentsToState } = props\n\n  function emitChange() {\n    if (headManager && headManager.mountedInstances) {\n      const headElements = Children.toArray(\n        Array.from(headManager.mountedInstances as Set<React.ReactNode>).filter(\n          Boolean\n        )\n      ) as React.ReactElement[]\n      headManager.updateHead(reduceComponentsToState(headElements))\n    }\n  }\n\n  if (isServer) {\n    headManager?.mountedInstances?.add(props.children)\n    emitChange()\n  }\n\n  useClientOnlyLayoutEffect(() => {\n    headManager?.mountedInstances?.add(props.children)\n    return () => {\n      headManager?.mountedInstances?.delete(props.children)\n    }\n  })\n\n  // We need to call `updateHead` method whenever the `SideEffect` is trigger in all\n  // life-cycles: mount, update, unmount. However, if there are multiple `SideEffect`s\n  // being rendered, we only trigger the method from the last one.\n  // This is ensured by keeping the last unflushed `updateHead` in the `_pendingUpdate`\n  // singleton in the layout effect pass, and actually trigger it in the effect pass.\n  useClientOnlyLayoutEffect(() => {\n    if (headManager) {\n      headManager._pendingUpdate = emitChange\n    }\n    return () => {\n      if (headManager) {\n        headManager._pendingUpdate = emitChange\n      }\n    }\n  })\n\n  useClientOnlyEffect(() => {\n    if (headManager && headManager._pendingUpdate) {\n      headManager._pendingUpdate()\n      headManager._pendingUpdate = null\n    }\n    return () => {\n      if (headManager && headManager._pendingUpdate) {\n        headManager._pendingUpdate()\n        headManager._pendingUpdate = null\n      }\n    }\n  })\n\n  return null\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HeadManagerContext\n","'use client'\n\nimport React, { useContext, type JSX } from 'react'\nimport Effect from './side-effect'\nimport { HeadManagerContext } from './head-manager-context.shared-runtime'\nimport { warnOnce } from './utils/warn-once'\n\nexport function defaultHead(): JSX.Element[] {\n  const head = [\n    <meta charSet=\"utf-8\" key=\"charset\" />,\n    <meta name=\"viewport\" content=\"width=device-width\" key=\"viewport\" />,\n  ]\n  return head\n}\n\nfunction onlyReactElement(\n  list: Array<React.ReactElement<any>>,\n  child: React.ReactElement | number | string\n): Array<React.ReactElement<any>> {\n  // React children can be \"string\" or \"number\" in this case we ignore them for backwards compat\n  if (typeof child === 'string' || typeof child === 'number') {\n    return list\n  }\n  // Adds support for React.Fragment\n  if (child.type === React.Fragment) {\n    return list.concat(\n      // @ts-expect-error @types/react does not remove fragments but this could also return ReactPortal[]\n      React.Children.toArray(child.props.children).reduce(\n        // @ts-expect-error @types/react does not remove fragments but this could also return ReactPortal[]\n        (\n          fragmentList: Array<React.ReactElement<any>>,\n          fragmentChild: React.ReactElement | number | string\n        ): Array<React.ReactElement<any>> => {\n          if (\n            typeof fragmentChild === 'string' ||\n            typeof fragmentChild === 'number'\n          ) {\n            return fragmentList\n          }\n          return fragmentList.concat(fragmentChild)\n        },\n        []\n      )\n    )\n  }\n  return list.concat(child)\n}\n\nconst METATYPES = ['name', 'httpEquiv', 'charSet', 'itemProp']\n\n/*\n returns a function for filtering head child elements\n which shouldn't be duplicated, like <title/>\n Also adds support for deduplicated `key` properties\n*/\nfunction unique() {\n  const keys = new Set()\n  const tags = new Set()\n  const metaTypes = new Set()\n  const metaCategories: { [metatype: string]: Set<string> } = {}\n\n  return (h: React.ReactElement<any>) => {\n    let isUnique = true\n    let hasKey = false\n\n    if (h.key && typeof h.key !== 'number' && h.key.indexOf('$') > 0) {\n      hasKey = true\n      const key = h.key.slice(h.key.indexOf('$') + 1)\n      if (keys.has(key)) {\n        isUnique = false\n      } else {\n        keys.add(key)\n      }\n    }\n\n    // eslint-disable-next-line default-case\n    switch (h.type) {\n      case 'title':\n      case 'base':\n        if (tags.has(h.type)) {\n          isUnique = false\n        } else {\n          tags.add(h.type)\n        }\n        break\n      case 'meta':\n        for (let i = 0, len = METATYPES.length; i < len; i++) {\n          const metatype = METATYPES[i]\n          if (!h.props.hasOwnProperty(metatype)) continue\n\n          if (metatype === 'charSet') {\n            if (metaTypes.has(metatype)) {\n              isUnique = false\n            } else {\n              metaTypes.add(metatype)\n            }\n          } else {\n            const category = h.props[metatype]\n            const categories = metaCategories[metatype] || new Set()\n            if ((metatype !== 'name' || !hasKey) && categories.has(category)) {\n              isUnique = false\n            } else {\n              categories.add(category)\n              metaCategories[metatype] = categories\n            }\n          }\n        }\n        break\n    }\n\n    return isUnique\n  }\n}\n\n/**\n *\n * @param headChildrenElements List of children of <Head>\n */\nfunction reduceComponents(\n  headChildrenElements: Array<React.ReactElement<any>>\n) {\n  return headChildrenElements\n    .reduce(onlyReactElement, [])\n    .reverse()\n    .concat(defaultHead().reverse())\n    .filter(unique())\n    .reverse()\n    .map((c: React.ReactElement<any>, i: number) => {\n      const key = c.key || i\n      if (process.env.NODE_ENV === 'development') {\n        // omit JSON-LD structured data snippets from the warning\n        if (c.type === 'script' && c.props['type'] !== 'application/ld+json') {\n          const srcMessage = c.props['src']\n            ? `<script> tag with src=\"${c.props['src']}\"`\n            : `inline <script>`\n          warnOnce(\n            `Do not add <script> tags using next/head (see ${srcMessage}). Use next/script instead. \\nSee more info here: https://nextjs.org/docs/messages/no-script-tags-in-head-component`\n          )\n        } else if (c.type === 'link' && c.props['rel'] === 'stylesheet') {\n          warnOnce(\n            `Do not add stylesheets using next/head (see <link rel=\"stylesheet\"> tag with href=\"${c.props['href']}\"). Use Document instead. \\nSee more info here: https://nextjs.org/docs/messages/no-stylesheets-in-head-component`\n          )\n        }\n      }\n      return React.cloneElement(c, { key })\n    })\n}\n\n/**\n * This component injects elements to `<head>` of your page.\n * To avoid duplicated `tags` in `<head>` you can use the `key` property, which will make sure every tag is only rendered once.\n */\nfunction Head({ children }: { children: React.ReactNode }) {\n  const headManager = useContext(HeadManagerContext)\n  return (\n    <Effect\n      reduceComponentsToState={reduceComponents}\n      headManager={headManager}\n    >\n      {children}\n    </Effect>\n  )\n}\n\nexport default Head\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ImageConfigContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].RouterContext\n","import type { NextConfig } from '../../server/config-shared'\n\n/**\n * Find the closest matching `quality` in the list of `config.qualities`\n * @param quality the quality prop passed to the image component\n * @param config the \"images\" configuration from next.config.js\n * @returns the closest matching quality value\n */\nexport function findClosestQuality(\n  quality: number | undefined,\n  config: NextConfig['images'] | undefined\n): number {\n  const q = quality || 75\n  if (!config?.qualities?.length) {\n    return q\n  }\n  return config.qualities.reduce(\n    (prev, cur) => (Math.abs(cur - q) < Math.abs(prev - q) ? cur : prev),\n    0\n  )\n}\n","import type { ImageLoaderPropsWithConfig } from './image-config'\nimport { findClosestQuality } from './find-closest-quality'\nimport { getDeploymentId } from './deployment-id'\n\nfunction defaultLoader({\n  config,\n  src,\n  width,\n  quality,\n}: ImageLoaderPropsWithConfig): string {\n  if (\n    src.startsWith('/') &&\n    src.includes('?') &&\n    config.localPatterns?.length === 1 &&\n    config.localPatterns[0].pathname === '**' &&\n    config.localPatterns[0].search === ''\n  ) {\n    throw new Error(\n      `Image with src \"${src}\" is using a query string which is not configured in images.localPatterns.` +\n        `\\nRead more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`\n    )\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const missingValues = []\n\n    // these should always be provided but make sure they are\n    if (!src) missingValues.push('src')\n    if (!width) missingValues.push('width')\n\n    if (missingValues.length > 0) {\n      throw new Error(\n        `Next Image Optimization requires ${missingValues.join(\n          ', '\n        )} to be provided. Make sure you pass them as props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { src, width, quality }\n        )}`\n      )\n    }\n\n    if (src.startsWith('//')) {\n      throw new Error(\n        `Failed to parse src \"${src}\" on \\`next/image\\`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)`\n      )\n    }\n\n    if (src.startsWith('/') && config.localPatterns) {\n      if (\n        process.env.NODE_ENV !== 'test' &&\n        // micromatch isn't compatible with edge runtime\n        process.env.NEXT_RUNTIME !== 'edge'\n      ) {\n        // We use dynamic require because this should only error in development\n        const { hasLocalMatch } =\n          require('./match-local-pattern') as typeof import('./match-local-pattern')\n        if (!hasLocalMatch(config.localPatterns, src)) {\n          throw new Error(\n            `Invalid src prop (${src}) on \\`next/image\\` does not match \\`images.localPatterns\\` configured in your \\`next.config.js\\`\\n` +\n              `See more info: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`\n          )\n        }\n      }\n    }\n\n    if (!src.startsWith('/') && (config.domains || config.remotePatterns)) {\n      let parsedSrc: URL\n      try {\n        parsedSrc = new URL(src)\n      } catch (err) {\n        console.error(err)\n        throw new Error(\n          `Failed to parse src \"${src}\" on \\`next/image\\`, if using relative image it must start with a leading slash \"/\" or be an absolute URL (http:// or https://)`\n        )\n      }\n\n      if (\n        process.env.NODE_ENV !== 'test' &&\n        // micromatch isn't compatible with edge runtime\n        process.env.NEXT_RUNTIME !== 'edge'\n      ) {\n        // We use dynamic require because this should only error in development\n        const { hasRemoteMatch } =\n          require('./match-remote-pattern') as typeof import('./match-remote-pattern')\n        if (\n          !hasRemoteMatch(config.domains!, config.remotePatterns!, parsedSrc)\n        ) {\n          throw new Error(\n            `Invalid src prop (${src}) on \\`next/image\\`, hostname \"${parsedSrc.hostname}\" is not configured under images in your \\`next.config.js\\`\\n` +\n              `See more info: https://nextjs.org/docs/messages/next-image-unconfigured-host`\n          )\n        }\n      }\n    }\n  }\n\n  const q = findClosestQuality(quality, config)\n\n  let deploymentId = getDeploymentId()\n  return `${config.path}?url=${encodeURIComponent(src)}&w=${width}&q=${q}${\n    src.startsWith('/') && deploymentId ? `&dpl=${deploymentId}` : ''\n  }`\n}\n\n// We use this to determine if the import is the default loader\n// or a custom loader defined by the user in next.config.js\ndefaultLoader.__next_img_default = true\n\nexport default defaultLoader\n","import { useCallback, useRef, type Ref } from 'react'\n\n// This is a compatibility hook to support React 18 and 19 refs.\n// In 19, a cleanup function from refs may be returned.\n// In 18, returning a cleanup function creates a warning.\n// Since we take userspace refs, we don't know ahead of time if a cleanup function will be returned.\n// This implements cleanup functions with the old behavior in 18.\n// We know refs are always called alternating with `null` and then `T`.\n// So a call with `null` means we need to call the previous cleanup functions.\nexport function useMergedRef<TElement>(\n  refA: Ref<TElement>,\n  refB: Ref<TElement>\n): Ref<TElement> {\n  const cleanupA = useRef<(() => void) | null>(null)\n  const cleanupB = useRef<(() => void) | null>(null)\n\n  // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n  // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n  // But this can cause us to leak a cleanup-ref into user code (previously via `<Link legacyBehavior>`),\n  // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n  // (because it hasn't been updated for React 19)\n  // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n  // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n  return useCallback(\n    (current: TElement | null): void => {\n      if (current === null) {\n        const cleanupFnA = cleanupA.current\n        if (cleanupFnA) {\n          cleanupA.current = null\n          cleanupFnA()\n        }\n        const cleanupFnB = cleanupB.current\n        if (cleanupFnB) {\n          cleanupB.current = null\n          cleanupFnB()\n        }\n      } else {\n        if (refA) {\n          cleanupA.current = applyRef(refA, current)\n        }\n        if (refB) {\n          cleanupB.current = applyRef(refB, current)\n        }\n      }\n    },\n    [refA, refB]\n  )\n}\n\nfunction applyRef<TElement>(\n  refA: NonNullable<Ref<TElement>>,\n  current: TElement\n) {\n  if (typeof refA === 'function') {\n    const cleanup = refA(current)\n    if (typeof cleanup === 'function') {\n      return cleanup\n    } else {\n      return () => refA(null)\n    }\n  } else {\n    refA.current = current\n    return () => {\n      refA.current = null\n    }\n  }\n}\n","'use client'\n\nimport React, {\n  useRef,\n  useEffect,\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n  forwardRef,\n  use,\n} from 'react'\nimport ReactDOM from 'react-dom'\nimport Head from '../shared/lib/head'\nimport { getImgProps } from '../shared/lib/get-img-props'\nimport type {\n  ImageProps,\n  ImgProps,\n  OnLoad,\n  OnLoadingComplete,\n  PlaceholderValue,\n} from '../shared/lib/get-img-props'\nimport type {\n  ImageConfigComplete,\n  ImageLoaderProps,\n} from '../shared/lib/image-config'\nimport { imageConfigDefault } from '../shared/lib/image-config'\nimport { ImageConfigContext } from '../shared/lib/image-config-context.shared-runtime'\nimport { warnOnce } from '../shared/lib/utils/warn-once'\nimport { RouterContext } from '../shared/lib/router-context.shared-runtime'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\nimport { useMergedRef } from './use-merged-ref'\n\n// This is replaced by webpack define plugin\nconst configEnv = process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete\n\nif (typeof window === 'undefined') {\n  ;(globalThis as any).__NEXT_IMAGE_IMPORTED = true\n}\n\nexport type { ImageLoaderProps }\nexport type ImageLoader = (p: ImageLoaderProps) => string\n\ntype ImgElementWithDataProp = HTMLImageElement & {\n  'data-loaded-src': string | undefined\n}\n\ntype ImageElementProps = ImgProps & {\n  unoptimized: boolean\n  placeholder: PlaceholderValue\n  onLoadRef: React.MutableRefObject<OnLoad | undefined>\n  onLoadingCompleteRef: React.MutableRefObject<OnLoadingComplete | undefined>\n  setBlurComplete: (b: boolean) => void\n  setShowAltText: (b: boolean) => void\n  sizesInput: string | undefined\n}\n\n// See https://stackoverflow.com/q/39777833/266535 for why we use this ref\n// handler instead of the img's onLoad attribute.\nfunction handleLoading(\n  img: ImgElementWithDataProp,\n  placeholder: PlaceholderValue,\n  onLoadRef: React.MutableRefObject<OnLoad | undefined>,\n  onLoadingCompleteRef: React.MutableRefObject<OnLoadingComplete | undefined>,\n  setBlurComplete: (b: boolean) => void,\n  unoptimized: boolean,\n  sizesInput: string | undefined\n) {\n  const src = img?.src\n  if (!img || img['data-loaded-src'] === src) {\n    return\n  }\n  img['data-loaded-src'] = src\n  const p = 'decode' in img ? img.decode() : Promise.resolve()\n  p.catch(() => {}).then(() => {\n    if (!img.parentElement || !img.isConnected) {\n      // Exit early in case of race condition:\n      // - onload() is called\n      // - decode() is called but incomplete\n      // - unmount is called\n      // - decode() completes\n      return\n    }\n    if (placeholder !== 'empty') {\n      setBlurComplete(true)\n    }\n    if (onLoadRef?.current) {\n      // Since we don't have the SyntheticEvent here,\n      // we must create one with the same shape.\n      // See https://reactjs.org/docs/events.html\n      const event = new Event('load')\n      Object.defineProperty(event, 'target', { writable: false, value: img })\n      let prevented = false\n      let stopped = false\n      onLoadRef.current({\n        ...event,\n        nativeEvent: event,\n        currentTarget: img,\n        target: img,\n        isDefaultPrevented: () => prevented,\n        isPropagationStopped: () => stopped,\n        persist: () => {},\n        preventDefault: () => {\n          prevented = true\n          event.preventDefault()\n        },\n        stopPropagation: () => {\n          stopped = true\n          event.stopPropagation()\n        },\n      })\n    }\n    if (onLoadingCompleteRef?.current) {\n      onLoadingCompleteRef.current(img)\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      const origSrc = new URL(src, 'http://n').searchParams.get('url') || src\n      if (img.getAttribute('data-nimg') === 'fill') {\n        if (!unoptimized && (!sizesInput || sizesInput === '100vw')) {\n          let widthViewportRatio =\n            img.getBoundingClientRect().width / window.innerWidth\n          if (widthViewportRatio < 0.6) {\n            if (sizesInput === '100vw') {\n              warnOnce(\n                `Image with src \"${origSrc}\" has \"fill\" prop and \"sizes\" prop of \"100vw\", but image is not rendered at full viewport width. Please adjust \"sizes\" to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes`\n              )\n            } else {\n              warnOnce(\n                `Image with src \"${origSrc}\" has \"fill\" but is missing \"sizes\" prop. Please add it to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes`\n              )\n            }\n          }\n        }\n        if (img.parentElement) {\n          const { position } = window.getComputedStyle(img.parentElement)\n          const valid = ['absolute', 'fixed', 'relative']\n          if (!valid.includes(position)) {\n            warnOnce(\n              `Image with src \"${origSrc}\" has \"fill\" and parent element with invalid \"position\". Provided \"${position}\" should be one of ${valid\n                .map(String)\n                .join(',')}.`\n            )\n          }\n        }\n        if (img.height === 0) {\n          warnOnce(\n            `Image with src \"${origSrc}\" has \"fill\" and a height value of 0. This is likely because the parent element of the image has not been styled to have a set height.`\n          )\n        }\n      }\n\n      const heightModified =\n        img.height.toString() !== img.getAttribute('height')\n      const widthModified = img.width.toString() !== img.getAttribute('width')\n      if (\n        (heightModified && !widthModified) ||\n        (!heightModified && widthModified)\n      ) {\n        warnOnce(\n          `Image with src \"${origSrc}\" has either width or height modified, but not the other. If you use CSS to change the size of your image, also include the styles 'width: \"auto\"' or 'height: \"auto\"' to maintain the aspect ratio.`\n        )\n      }\n    }\n  })\n}\n\nfunction getDynamicProps(\n  fetchPriority?: string\n): Record<string, string | undefined> {\n  if (Boolean(use)) {\n    // In React 19.0.0 or newer, we must use camelCase\n    // prop to avoid \"Warning: Invalid DOM property\".\n    // See https://github.com/facebook/react/pull/25927\n    return { fetchPriority }\n  }\n  // In React 18.2.0 or older, we must use lowercase prop\n  // to avoid \"Warning: Invalid DOM property\".\n  return { fetchpriority: fetchPriority }\n}\n\nconst ImageElement = forwardRef<HTMLImageElement | null, ImageElementProps>(\n  (\n    {\n      src,\n      srcSet,\n      sizes,\n      height,\n      width,\n      decoding,\n      className,\n      style,\n      fetchPriority,\n      placeholder,\n      loading,\n      unoptimized,\n      fill,\n      onLoadRef,\n      onLoadingCompleteRef,\n      setBlurComplete,\n      setShowAltText,\n      sizesInput,\n      onLoad,\n      onError,\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    const ownRef = useCallback(\n      (img: ImgElementWithDataProp | null) => {\n        if (!img) {\n          return\n        }\n        if (onError) {\n          // If the image has an error before react hydrates, then the error is lost.\n          // The workaround is to wait until the image is mounted which is after hydration,\n          // then we set the src again to trigger the error handler (if there was an error).\n          // eslint-disable-next-line no-self-assign\n          img.src = img.src\n        }\n        if (process.env.NODE_ENV !== 'production') {\n          if (!src) {\n            console.error(`Image is missing required \"src\" property:`, img)\n          }\n          if (img.getAttribute('alt') === null) {\n            console.error(\n              `Image is missing required \"alt\" property. Please add Alternative Text to describe the image for screen readers and search engines.`\n            )\n          }\n        }\n        if (img.complete) {\n          handleLoading(\n            img,\n            placeholder,\n            onLoadRef,\n            onLoadingCompleteRef,\n            setBlurComplete,\n            unoptimized,\n            sizesInput\n          )\n        }\n      },\n      [\n        src,\n        placeholder,\n        onLoadRef,\n        onLoadingCompleteRef,\n        setBlurComplete,\n        onError,\n        unoptimized,\n        sizesInput,\n      ]\n    )\n\n    const ref = useMergedRef(forwardedRef, ownRef)\n\n    return (\n      <img\n        {...rest}\n        {...getDynamicProps(fetchPriority)}\n        // It's intended to keep `loading` before `src` because React updates\n        // props in order which causes Safari/Firefox to not lazy load properly.\n        // See https://github.com/facebook/react/issues/25883\n        loading={loading}\n        width={width}\n        height={height}\n        decoding={decoding}\n        data-nimg={fill ? 'fill' : '1'}\n        className={className}\n        style={style}\n        // It's intended to keep `src` the last attribute because React updates\n        // attributes in order. If we keep `src` the first one, Safari will\n        // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n        // updated by React. That causes multiple unnecessary requests if `srcSet`\n        // and `sizes` are defined.\n        // This bug cannot be reproduced in Chrome or Firefox.\n        sizes={sizes}\n        srcSet={srcSet}\n        src={src}\n        ref={ref}\n        onLoad={(event) => {\n          const img = event.currentTarget as ImgElementWithDataProp\n          handleLoading(\n            img,\n            placeholder,\n            onLoadRef,\n            onLoadingCompleteRef,\n            setBlurComplete,\n            unoptimized,\n            sizesInput\n          )\n        }}\n        onError={(event) => {\n          // if the real image fails to load, this will ensure \"alt\" is visible\n          setShowAltText(true)\n          if (placeholder !== 'empty') {\n            // If the real image fails to load, this will still remove the placeholder.\n            setBlurComplete(true)\n          }\n          if (onError) {\n            onError(event)\n          }\n        }}\n      />\n    )\n  }\n)\n\nfunction ImagePreload({\n  isAppRouter,\n  imgAttributes,\n}: {\n  isAppRouter: boolean\n  imgAttributes: ImgProps\n}) {\n  const opts: ReactDOM.PreloadOptions = {\n    as: 'image',\n    imageSrcSet: imgAttributes.srcSet,\n    imageSizes: imgAttributes.sizes,\n    crossOrigin: imgAttributes.crossOrigin,\n    referrerPolicy: imgAttributes.referrerPolicy,\n    ...getDynamicProps(imgAttributes.fetchPriority),\n  }\n\n  if (isAppRouter && ReactDOM.preload) {\n    ReactDOM.preload(imgAttributes.src, opts)\n    return null\n  }\n\n  return (\n    <Head>\n      <link\n        key={\n          '__nimg-' +\n          imgAttributes.src +\n          imgAttributes.srcSet +\n          imgAttributes.sizes\n        }\n        rel=\"preload\"\n        // Note how we omit the `href` attribute, as it would only be relevant\n        // for browsers that do not support `imagesrcset`, and in those cases\n        // it would cause the incorrect image to be preloaded.\n        //\n        // https://html.spec.whatwg.org/multipage/semantics.html#attr-link-imagesrcset\n        href={imgAttributes.srcSet ? undefined : imgAttributes.src}\n        {...opts}\n      />\n    </Head>\n  )\n}\n\n/**\n * The `Image` component is used to optimize images.\n *\n * Read more: [Next.js docs: `Image`](https://nextjs.org/docs/app/api-reference/components/image)\n */\nexport const Image = forwardRef<HTMLImageElement | null, ImageProps>(\n  (props, forwardedRef) => {\n    const pagesRouter = useContext(RouterContext)\n    // We're in the app directory if there is no pages router.\n    const isAppRouter = !pagesRouter\n\n    const configContext = useContext(ImageConfigContext)\n    const config = useMemo(() => {\n      const c = configEnv || configContext || imageConfigDefault\n\n      const allSizes = [...c.deviceSizes, ...c.imageSizes].sort((a, b) => a - b)\n      const deviceSizes = c.deviceSizes.sort((a, b) => a - b)\n      const qualities = c.qualities?.sort((a, b) => a - b)\n      return {\n        ...c,\n        allSizes,\n        deviceSizes,\n        qualities,\n        // During the SSR, configEnv (__NEXT_IMAGE_OPTS) does not include\n        // security sensitive configs like `localPatterns`, which is needed\n        // during the server render to ensure it's validated. Therefore use\n        // configContext, which holds the config from the server for validation.\n        localPatterns:\n          typeof window === 'undefined'\n            ? configContext?.localPatterns\n            : c.localPatterns,\n      }\n    }, [configContext])\n\n    const { onLoad, onLoadingComplete } = props\n    const onLoadRef = useRef(onLoad)\n\n    useEffect(() => {\n      onLoadRef.current = onLoad\n    }, [onLoad])\n\n    const onLoadingCompleteRef = useRef(onLoadingComplete)\n\n    useEffect(() => {\n      onLoadingCompleteRef.current = onLoadingComplete\n    }, [onLoadingComplete])\n\n    const [blurComplete, setBlurComplete] = useState(false)\n    const [showAltText, setShowAltText] = useState(false)\n    const { props: imgAttributes, meta: imgMeta } = getImgProps(props, {\n      defaultLoader,\n      imgConf: config,\n      blurComplete,\n      showAltText,\n    })\n\n    return (\n      <>\n        {\n          <ImageElement\n            {...imgAttributes}\n            unoptimized={imgMeta.unoptimized}\n            placeholder={imgMeta.placeholder}\n            fill={imgMeta.fill}\n            onLoadRef={onLoadRef}\n            onLoadingCompleteRef={onLoadingCompleteRef}\n            setBlurComplete={setBlurComplete}\n            setShowAltText={setShowAltText}\n            sizesInput={props.sizes}\n            ref={forwardedRef}\n          />\n        }\n        {imgMeta.preload ? (\n          <ImagePreload\n            isAppRouter={isAppRouter}\n            imgAttributes={imgAttributes}\n          />\n        ) : null}\n      </>\n    )\n  }\n)\n","import type { ImageConfigComplete, ImageLoaderProps } from './image-config'\nimport type { ImageProps, ImageLoader, StaticImageData } from './get-img-props'\n\nimport { getImgProps } from './get-img-props'\nimport { Image } from '../../client/image-component'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\n\n/**\n * For more advanced use cases, you can call `getImageProps()`\n * to get the props that would be passed to the underlying `<img>` element,\n * and instead pass to them to another component, style, canvas, etc.\n *\n * Read more: [Next.js docs: `getImageProps`](https://nextjs.org/docs/app/api-reference/components/image#getimageprops)\n */\nexport function getImageProps(imgProps: ImageProps) {\n  const { props } = getImgProps(imgProps, {\n    defaultLoader,\n    // This is replaced by webpack define plugin\n    imgConf: process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete,\n  })\n  // Normally we don't care about undefined props because we pass to JSX,\n  // but this exported function could be used by the end user for anything\n  // so we delete undefined props to clean it up a little.\n  for (const [key, value] of Object.entries(props)) {\n    if (value === undefined) {\n      delete props[key as keyof typeof props]\n    }\n  }\n  return { props }\n}\n\nexport default Image\n\nexport type { ImageProps, ImageLoaderProps, ImageLoader, StaticImageData }\n","module.exports = require('./dist/shared/lib/image-external')\n"," 'use client';\nimport { useState, useEffect } from 'react';\nimport Image from 'next/image';\n\nconst Banner = () => {\n  const images = [\n    '/assets/images/logo/logo.webp',\n    '/assets/images/banner/banner-text.png',\n    '/assets/images/banner/kid1.png',\n    '/assets/images/banner/kid2.png',\n    '/assets/images/banner/kid3.png',\n  ];\n\n  const [index, setIndex] = useState(0);\n  const [isVisible, setIsVisible] = useState(true); // Controla la visibilidad global\n\n  useEffect(() => {\n    // Intervalo para el cambio de imgenes\n    const interval = setInterval(() => {\n      setIndex((prev) => (prev + 1) % images.length);\n    }, 1000);\n\n    // Timer para ocultar el componente a los 6 segundos\n    const exitTimer = setTimeout(() => {\n      setIsVisible(false);\n    }, 6000);\n\n    return () => {\n      clearInterval(interval);\n      clearTimeout(exitTimer);\n    };\n  }, [images.length]);\n\n  return (\n    <div \n      className={`\n        flex absolute top-0 flex-col justify-between w-full h-screen bg-black overflow-hidden z-50\n        transition-all duration-1000 ease-in-out\n        ${isVisible \n          ? 'opacity-100 translate-y-0' \n          : 'opacity-0 -translate-y-full pointer-events-none'\n        }\n      `}\n    >\n      {/* Header */}\n      <div className='p-6' />\n\n      <div className='h-[80vh] relative flex justify-center items-center'>\n        <Image \n          src=\"/assets/images/banner/banner-1.png\" \n          alt=\"Banner BG\" \n          fill \n          className='object-cover opacity-30 blur-[1px]' \n          priority \n        />\n        \n        <div className='relative z-10 w-full h-full flex justify-center items-center'>\n          {images.map((src, i) => (\n            <div\n              key={i}\n              className={`\n                absolute transition-all duration-500\n                ${i === index \n                  ? 'opacity-100 blur-none scale-100' \n                  : 'opacity-0 blur-sm scale-95 pointer-events-none'\n                }\n              `}\n            >\n              <div className=\"relative w-[300px] h-[300px] lg:w-[800px] lg:h-[600px]\">\n                <Image \n                  src={src} \n                  alt={`Loop element ${i}`} \n                  fill \n                  className=\"object-contain\" \n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className='flex justify-between p-6 text-brand-white/60 text-sm uppercase font-light'>\n        <p> 2026 kidcanibal. Todos los derechos reservados</p>\n        <div>\n          <span>INSTAGRAM</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Banner;","import type { ParsedUrlQuery } from 'querystring'\n\nexport function searchParamsToUrlQuery(\n  searchParams: URLSearchParams\n): ParsedUrlQuery {\n  const query: ParsedUrlQuery = {}\n  for (const [key, value] of searchParams.entries()) {\n    const existing = query[key]\n    if (typeof existing === 'undefined') {\n      query[key] = value\n    } else if (Array.isArray(existing)) {\n      existing.push(value)\n    } else {\n      query[key] = [existing, value]\n    }\n  }\n  return query\n}\n\nfunction stringifyUrlQueryParam(param: unknown): string {\n  if (typeof param === 'string') {\n    return param\n  }\n\n  if (\n    (typeof param === 'number' && !isNaN(param)) ||\n    typeof param === 'boolean'\n  ) {\n    return String(param)\n  } else {\n    return ''\n  }\n}\n\nexport function urlQueryToSearchParams(query: ParsedUrlQuery): URLSearchParams {\n  const searchParams = new URLSearchParams()\n  for (const [key, value] of Object.entries(query)) {\n    if (Array.isArray(value)) {\n      for (const item of value) {\n        searchParams.append(key, stringifyUrlQueryParam(item))\n      }\n    } else {\n      searchParams.set(key, stringifyUrlQueryParam(value))\n    }\n  }\n  return searchParams\n}\n\nexport function assign(\n  target: URLSearchParams,\n  ...searchParamsList: URLSearchParams[]\n): URLSearchParams {\n  for (const searchParams of searchParamsList) {\n    for (const key of searchParams.keys()) {\n      target.delete(key)\n    }\n\n    for (const [key, value] of searchParams.entries()) {\n      target.append(key, value)\n    }\n  }\n\n  return target\n}\n","// Format function modified from nodejs\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport type { UrlObject } from 'url'\nimport type { ParsedUrlQuery } from 'querystring'\nimport * as querystring from './querystring'\n\nconst slashedProtocols = /https?|ftp|gopher|file/\n\nexport function formatUrl(urlObj: UrlObject) {\n  let { auth, hostname } = urlObj\n  let protocol = urlObj.protocol || ''\n  let pathname = urlObj.pathname || ''\n  let hash = urlObj.hash || ''\n  let query = urlObj.query || ''\n  let host: string | false = false\n\n  auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : ''\n\n  if (urlObj.host) {\n    host = auth + urlObj.host\n  } else if (hostname) {\n    host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname)\n    if (urlObj.port) {\n      host += ':' + urlObj.port\n    }\n  }\n\n  if (query && typeof query === 'object') {\n    query = String(querystring.urlQueryToSearchParams(query as ParsedUrlQuery))\n  }\n\n  let search = urlObj.search || (query && `?${query}`) || ''\n\n  if (protocol && !protocol.endsWith(':')) protocol += ':'\n\n  if (\n    urlObj.slashes ||\n    ((!protocol || slashedProtocols.test(protocol)) && host !== false)\n  ) {\n    host = '//' + (host || '')\n    if (pathname && pathname[0] !== '/') pathname = '/' + pathname\n  } else if (!host) {\n    host = ''\n  }\n\n  if (hash && hash[0] !== '#') hash = '#' + hash\n  if (search && search[0] !== '?') search = '?' + search\n\n  pathname = pathname.replace(/[?#]/g, encodeURIComponent)\n  search = search.replace('#', '%23')\n\n  return `${protocol}${host}${pathname}${search}${hash}`\n}\n\nexport const urlObjectKeys = [\n  'auth',\n  'hash',\n  'host',\n  'hostname',\n  'href',\n  'path',\n  'pathname',\n  'port',\n  'protocol',\n  'query',\n  'search',\n  'slashes',\n]\n\nexport function formatWithValidation(url: UrlObject): string {\n  if (process.env.NODE_ENV === 'development') {\n    if (url !== null && typeof url === 'object') {\n      Object.keys(url).forEach((key) => {\n        if (!urlObjectKeys.includes(key)) {\n          console.warn(\n            `Unknown key passed via urlObject into url.format: ${key}`\n          )\n        }\n      })\n    }\n  }\n\n  return formatUrl(url)\n}\n","import type { HtmlProps } from './html-context.shared-runtime'\nimport type { ComponentType, JSX } from 'react'\nimport type { DomainLocale } from '../../server/config'\nimport type { Env } from '@next/env'\nimport type { IncomingMessage, ServerResponse } from 'http'\nimport type { NextRouter } from './router/router'\nimport type { ParsedUrlQuery } from 'querystring'\nimport type { PreviewData } from '../../types'\nimport type { COMPILER_NAMES } from './constants'\nimport type fs from 'fs'\n\nexport type NextComponentType<\n  Context extends BaseContext = NextPageContext,\n  InitialProps = {},\n  Props = {},\n> = ComponentType<Props> & {\n  /**\n   * Used for initial page load data population. Data returned from `getInitialProps` is serialized when server rendered.\n   * Make sure to return plain `Object` without using `Date`, `Map`, `Set`.\n   * @param context Context of `page`\n   */\n  getInitialProps?(context: Context): InitialProps | Promise<InitialProps>\n}\n\nexport type DocumentType = NextComponentType<\n  DocumentContext,\n  DocumentInitialProps,\n  DocumentProps\n>\n\nexport type AppType<P = {}> = NextComponentType<\n  AppContextType,\n  P,\n  AppPropsType<any, P>\n>\n\nexport type AppTreeType = ComponentType<\n  AppInitialProps & { [name: string]: any }\n>\n\n/**\n * Web vitals provided to _app.reportWebVitals by Core Web Vitals plugin developed by Google Chrome team.\n * https://nextjs.org/blog/next-9-4#integrated-web-vitals-reporting\n */\nexport const WEB_VITALS = ['CLS', 'FCP', 'FID', 'INP', 'LCP', 'TTFB'] as const\nexport type NextWebVitalsMetric = {\n  id: string\n  startTime: number\n  value: number\n  attribution?: { [key: string]: unknown }\n} & (\n  | {\n      label: 'web-vital'\n      name: (typeof WEB_VITALS)[number]\n    }\n  | {\n      label: 'custom'\n      name:\n        | 'Next.js-hydration'\n        | 'Next.js-route-change-to-render'\n        | 'Next.js-render'\n    }\n)\n\nexport type Enhancer<C> = (Component: C) => C\n\nexport type ComponentsEnhancer =\n  | {\n      enhanceApp?: Enhancer<AppType>\n      enhanceComponent?: Enhancer<NextComponentType>\n    }\n  | Enhancer<NextComponentType>\n\nexport type RenderPageResult = {\n  html: string\n  head?: Array<JSX.Element | null>\n}\n\nexport type RenderPage = (\n  options?: ComponentsEnhancer\n) => DocumentInitialProps | Promise<DocumentInitialProps>\n\nexport type BaseContext = {\n  res?: ServerResponse\n  [k: string]: any\n}\n\nexport type NEXT_DATA = {\n  props: Record<string, any>\n  page: string\n  query: ParsedUrlQuery\n  buildId: string\n  assetPrefix?: string\n  nextExport?: boolean\n  autoExport?: boolean\n  isFallback?: boolean\n  isExperimentalCompile?: boolean\n  dynamicIds?: (string | number)[]\n  err?: Error & {\n    statusCode?: number\n    source?: typeof COMPILER_NAMES.server | typeof COMPILER_NAMES.edgeServer\n  }\n  gsp?: boolean\n  gssp?: boolean\n  customServer?: boolean\n  gip?: boolean\n  appGip?: boolean\n  locale?: string\n  locales?: readonly string[]\n  defaultLocale?: string\n  domainLocales?: readonly DomainLocale[]\n  scriptLoader?: any[]\n  isPreview?: boolean\n  notFoundSrcPage?: string\n}\n\n/**\n * `Next` context\n */\nexport interface NextPageContext {\n  /**\n   * Error object if encountered during rendering\n   */\n  err?: (Error & { statusCode?: number }) | null\n  /**\n   * `HTTP` request object.\n   */\n  req?: IncomingMessage\n  /**\n   * `HTTP` response object.\n   */\n  res?: ServerResponse\n  /**\n   * Path section of `URL`.\n   */\n  pathname: string\n  /**\n   * Query string section of `URL` parsed as an object.\n   */\n  query: ParsedUrlQuery\n  /**\n   * `String` of the actual path including query.\n   */\n  asPath?: string\n  /**\n   * The currently active locale\n   */\n  locale?: string\n  /**\n   * All configured locales\n   */\n  locales?: readonly string[]\n  /**\n   * The configured default locale\n   */\n  defaultLocale?: string\n  /**\n   * `Component` the tree of the App to use if needing to render separately\n   */\n  AppTree: AppTreeType\n}\n\nexport type AppContextType<Router extends NextRouter = NextRouter> = {\n  Component: NextComponentType<NextPageContext>\n  AppTree: AppTreeType\n  ctx: NextPageContext\n  router: Router\n}\n\nexport type AppInitialProps<PageProps = any> = {\n  pageProps: PageProps\n}\n\nexport type AppPropsType<\n  Router extends NextRouter = NextRouter,\n  PageProps = {},\n> = AppInitialProps<PageProps> & {\n  Component: NextComponentType<NextPageContext, any, any>\n  router: Router\n  __N_SSG?: boolean\n  __N_SSP?: boolean\n}\n\nexport type DocumentContext = NextPageContext & {\n  renderPage: RenderPage\n  defaultGetInitialProps(\n    ctx: DocumentContext,\n    options?: { nonce?: string }\n  ): Promise<DocumentInitialProps>\n}\n\nexport type DocumentInitialProps = RenderPageResult & {\n  styles?: React.ReactElement[] | Iterable<React.ReactNode> | JSX.Element\n}\n\nexport type DocumentProps = DocumentInitialProps & HtmlProps\n\n/**\n * Next `API` route request\n */\nexport interface NextApiRequest extends IncomingMessage {\n  /**\n   * Object of `query` values from url\n   */\n  query: Partial<{\n    [key: string]: string | string[]\n  }>\n  /**\n   * Object of `cookies` from header\n   */\n  cookies: Partial<{\n    [key: string]: string\n  }>\n\n  body: any\n\n  env: Env\n\n  draftMode?: boolean\n\n  preview?: boolean\n  /**\n   * Preview data set on the request, if any\n   * */\n  previewData?: PreviewData\n}\n\n/**\n * Send body of response\n */\ntype Send<T> = (body: T) => void\n\n/**\n * Next `API` route response\n */\nexport type NextApiResponse<Data = any> = ServerResponse & {\n  /**\n   * Send data `any` data in response\n   */\n  send: Send<Data>\n  /**\n   * Send data `json` data in response\n   */\n  json: Send<Data>\n  status: (statusCode: number) => NextApiResponse<Data>\n  redirect(url: string): NextApiResponse<Data>\n  redirect(status: number, url: string): NextApiResponse<Data>\n\n  /**\n   * Set draft mode\n   */\n  setDraftMode: (options: { enable: boolean }) => NextApiResponse<Data>\n\n  /**\n   * Set preview data for Next.js' prerender mode\n   */\n  setPreviewData: (\n    data: object | string,\n    options?: {\n      /**\n       * Specifies the number (in seconds) for the preview session to last for.\n       * The given number will be converted to an integer by rounding down.\n       * By default, no maximum age is set and the preview session finishes\n       * when the client shuts down (browser is closed).\n       */\n      maxAge?: number\n      /**\n       * Specifies the path for the preview session to work under. By default,\n       * the path is considered the \"default path\", i.e., any pages under \"/\".\n       */\n      path?: string\n    }\n  ) => NextApiResponse<Data>\n\n  /**\n   * Clear preview data for Next.js' prerender mode\n   */\n  clearPreviewData: (options?: { path?: string }) => NextApiResponse<Data>\n\n  /**\n   * Revalidate a specific page and regenerate it using On-Demand Incremental\n   * Static Regeneration.\n   * The path should be an actual path, not a rewritten path. E.g. for\n   * \"/blog/[slug]\" this should be \"/blog/post-1\".\n   * @link https://nextjs.org/docs/app/building-your-application/data-fetching/incremental-static-regeneration#on-demand-revalidation-with-revalidatepath\n   */\n  revalidate: (\n    urlPath: string,\n    opts?: {\n      unstable_onlyGenerated?: boolean\n    }\n  ) => Promise<void>\n}\n\n/**\n * Next `API` route handler\n */\nexport type NextApiHandler<T = any> = (\n  req: NextApiRequest,\n  res: NextApiResponse<T>\n) => unknown | Promise<unknown>\n\n/**\n * Utils\n */\nexport function execOnce<T extends (...args: any[]) => ReturnType<T>>(\n  fn: T\n): T {\n  let used = false\n  let result: ReturnType<T>\n\n  return ((...args: any[]) => {\n    if (!used) {\n      used = true\n      result = fn(...args)\n    }\n    return result\n  }) as T\n}\n\n// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1\n// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\nconst ABSOLUTE_URL_REGEX = /^[a-zA-Z][a-zA-Z\\d+\\-.]*?:/\nexport const isAbsoluteUrl = (url: string) => ABSOLUTE_URL_REGEX.test(url)\n\nexport function getLocationOrigin() {\n  const { protocol, hostname, port } = window.location\n  return `${protocol}//${hostname}${port ? ':' + port : ''}`\n}\n\nexport function getURL() {\n  const { href } = window.location\n  const origin = getLocationOrigin()\n  return href.substring(origin.length)\n}\n\nexport function getDisplayName<P>(Component: ComponentType<P>) {\n  return typeof Component === 'string'\n    ? Component\n    : Component.displayName || Component.name || 'Unknown'\n}\n\nexport function isResSent(res: ServerResponse) {\n  return res.finished || res.headersSent\n}\n\nexport function normalizeRepeatedSlashes(url: string) {\n  const urlParts = url.split('?')\n  const urlNoQuery = urlParts[0]\n\n  return (\n    urlNoQuery\n      // first we replace any non-encoded backslashes with forward\n      // then normalize repeated forward slashes\n      .replace(/\\\\/g, '/')\n      .replace(/\\/\\/+/g, '/') +\n    (urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '')\n  )\n}\n\nexport async function loadGetInitialProps<\n  C extends BaseContext,\n  IP = {},\n  P = {},\n>(App: NextComponentType<C, IP, P>, ctx: C): Promise<IP> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (App.prototype?.getInitialProps) {\n      const message = `\"${getDisplayName(\n        App\n      )}.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`\n      throw new Error(message)\n    }\n  }\n  // when called from _app `ctx` is nested in `ctx`\n  const res = ctx.res || (ctx.ctx && ctx.ctx.res)\n\n  if (!App.getInitialProps) {\n    if (ctx.ctx && ctx.Component) {\n      // @ts-ignore pageProps default\n      return {\n        pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx),\n      }\n    }\n    return {} as IP\n  }\n\n  const props = await App.getInitialProps(ctx)\n\n  if (res && isResSent(res)) {\n    return props\n  }\n\n  if (!props) {\n    const message = `\"${getDisplayName(\n      App\n    )}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`\n    throw new Error(message)\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (Object.keys(props).length === 0 && !ctx.ctx) {\n      console.warn(\n        `${getDisplayName(\n          App\n        )} returned an empty object from \\`getInitialProps\\`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`\n      )\n    }\n  }\n\n  return props\n}\n\nexport const SP = typeof performance !== 'undefined'\nexport const ST =\n  SP &&\n  (['mark', 'measure', 'getEntriesByName'] as const).every(\n    (method) => typeof performance[method] === 'function'\n  )\n\nexport class DecodeError extends Error {}\nexport class NormalizeError extends Error {}\nexport class PageNotFoundError extends Error {\n  code: string\n\n  constructor(page: string) {\n    super()\n    this.code = 'ENOENT'\n    this.name = 'PageNotFoundError'\n    this.message = `Cannot find module for page: ${page}`\n  }\n}\n\nexport class MissingStaticPage extends Error {\n  constructor(page: string, message: string) {\n    super()\n    this.message = `Failed to load static file for page: ${page} ${message}`\n  }\n}\n\nexport class MiddlewareNotFoundError extends Error {\n  code: string\n  constructor() {\n    super()\n    this.code = 'ENOENT'\n    this.message = `Cannot find the middleware module`\n  }\n}\n\nexport interface CacheFs {\n  existsSync: typeof fs.existsSync\n  readFile: typeof fs.promises.readFile\n  readFileSync: typeof fs.readFileSync\n  writeFile(f: string, d: any): Promise<void>\n  mkdir(dir: string): Promise<void | string>\n  stat(f: string): Promise<{ mtime: Date }>\n}\n\nexport function stringifyError(error: Error) {\n  return JSON.stringify({ message: error.message, stack: error.stack })\n}\n","/**\n * Given a path this function will find the pathname, query and hash and return\n * them. This is useful to parse full paths on the client side.\n * @param path A path to parse e.g. /foo/bar?id=1#hash\n */\nexport function parsePath(path: string) {\n  const hashIndex = path.indexOf('#')\n  const queryIndex = path.indexOf('?')\n  const hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex)\n\n  if (hasQuery || hashIndex > -1) {\n    return {\n      pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n      query: hasQuery\n        ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : undefined)\n        : '',\n      hash: hashIndex > -1 ? path.slice(hashIndex) : '',\n    }\n  }\n\n  return { pathname: path, query: '', hash: '' }\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Adds the provided prefix to the given path. It first ensures that the path\n * is indeed starting with a slash.\n */\nexport function addPathPrefix(path: string, prefix?: string) {\n  if (!path.startsWith('/') || !prefix) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  return `${prefix}${pathname}${query}${hash}`\n}\n","/**\n * Removes the trailing slash for a given route or page path. Preserves the\n * root page. Examples:\n *   - `/foo/bar/` -> `/foo/bar`\n *   - `/foo/bar` -> `/foo/bar`\n *   - `/` -> `/`\n */\nexport function removeTrailingSlash(route: string) {\n  return route.replace(/\\/$/, '') || '/'\n}\n","import { removeTrailingSlash } from '../shared/lib/router/utils/remove-trailing-slash'\nimport { parsePath } from '../shared/lib/router/utils/parse-path'\n\n/**\n * Normalizes the trailing slash of a path according to the `trailingSlash` option\n * in `next.config.js`.\n */\nexport const normalizePathTrailingSlash = (path: string) => {\n  if (!path.startsWith('/') || process.env.__NEXT_MANUAL_TRAILING_SLASH) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  if (process.env.__NEXT_TRAILING_SLASH) {\n    if (/\\.[^/]+\\/?$/.test(pathname)) {\n      return `${removeTrailingSlash(pathname)}${query}${hash}`\n    } else if (pathname.endsWith('/')) {\n      return `${pathname}${query}${hash}`\n    } else {\n      return `${pathname}/${query}${hash}`\n    }\n  }\n\n  return `${removeTrailingSlash(pathname)}${query}${hash}`\n}\n","import { addPathPrefix } from '../shared/lib/router/utils/add-path-prefix'\nimport { normalizePathTrailingSlash } from './normalize-trailing-slash'\n\nconst basePath = (process.env.__NEXT_ROUTER_BASEPATH as string) || ''\n\nexport function addBasePath(path: string, required?: boolean): string {\n  return normalizePathTrailingSlash(\n    process.env.__NEXT_MANUAL_CLIENT_BASE_PATH && !required\n      ? path\n      : addPathPrefix(path, basePath)\n  )\n}\n","/**\n * Shared types and constants for the Segment Cache.\n */\n\nexport const enum NavigationResultTag {\n  MPA,\n  Success,\n  NoOp,\n  Async,\n}\n\n/**\n * The priority of the prefetch task. Higher numbers are higher priority.\n */\nexport const enum PrefetchPriority {\n  /**\n   * Assigned to the most recently hovered/touched link. Special network\n   * bandwidth is reserved for this task only. There's only ever one Intent-\n   * priority task at a time; when a new Intent task is scheduled, the previous\n   * one is bumped down to Default.\n   */\n  Intent = 2,\n  /**\n   * The default priority for prefetch tasks.\n   */\n  Default = 1,\n  /**\n   * Assigned to tasks when they spawn non-blocking background work, like\n   * revalidating a partially cached entry to see if more data is available.\n   */\n  Background = 0,\n}\n\nexport const enum FetchStrategy {\n  // Deliberately ordered so we can easily compare two segments\n  // and determine if one segment is \"more specific\" than another\n  // (i.e. if it's likely that it contains more data)\n  LoadingBoundary = 0,\n  PPR = 1,\n  PPRRuntime = 2,\n  Full = 3,\n}\n\n/**\n * A subset of fetch strategies used for prefetch tasks.\n * A prefetch task can't know if it should use `PPR` or `LoadingBoundary`\n * until we complete the initial tree prefetch request, so we use `PPR` to signal both cases\n * and adjust it based on the route when actually fetching.\n * */\nexport type PrefetchTaskFetchStrategy =\n  | FetchStrategy.PPR\n  | FetchStrategy.PPRRuntime\n  | FetchStrategy.Full\n","// TypeScript trick to simulate opaque types, like in Flow.\ntype Opaque<K, T> = T & { __brand: K }\n\n// Only functions in this module should be allowed to create CacheKeys.\nexport type NormalizedPathname = Opaque<'NormalizedPathname', string>\nexport type NormalizedSearch = Opaque<'NormalizedSearch', string>\nexport type NormalizedNextUrl = Opaque<'NormalizedNextUrl', string>\n\nexport type RouteCacheKey = Opaque<\n  'RouteCacheKey',\n  {\n    pathname: NormalizedPathname\n    search: NormalizedSearch\n    nextUrl: NormalizedNextUrl | null\n\n    // TODO: Eventually the dynamic params will be added here, too.\n  }\n>\n\nexport function createCacheKey(\n  originalHref: string,\n  nextUrl: string | null\n): RouteCacheKey {\n  const originalUrl = new URL(originalHref)\n  const cacheKey = {\n    pathname: originalUrl.pathname as NormalizedPathname,\n    search: originalUrl.search as NormalizedSearch,\n    nextUrl: nextUrl as NormalizedNextUrl | null,\n  } as RouteCacheKey\n  return cacheKey\n}\n","/**\n * App Router types - Client-safe types for the Next.js App Router\n *\n * This file contains type definitions that can be safely imported\n * by both client-side and server-side code without circular dependencies.\n */\n\nimport type React from 'react'\n\nexport type LoadingModuleData =\n  | [React.JSX.Element, React.ReactNode, React.ReactNode]\n  | null\n\n/** viewport metadata node */\nexport type HeadData = React.ReactNode\n\nexport type ChildSegmentMap = Map<string, CacheNode>\n\n/**\n * Cache node used in app-router / layout-router.\n */\n\nexport type CacheNode = {\n  /**\n   * When rsc is not null, it represents the RSC data for the\n   * corresponding segment.\n   *\n   * `null` is a valid React Node but because segment data is always a\n   * <LayoutRouter> component, we can use `null` to represent empty. When it is\n   * null, it represents missing data, and rendering should suspend.\n   */\n  rsc: React.ReactNode\n\n  /**\n   * Represents a static version of the segment that can be shown immediately,\n   * and may or may not contain dynamic holes. It's prefetched before a\n   * navigation occurs.\n   *\n   * During rendering, we will choose whether to render `rsc` or `prefetchRsc`\n   * with `useDeferredValue`. As with the `rsc` field, a value of `null` means\n   * no value was provided. In this case, the LayoutRouter will go straight to\n   * rendering the `rsc` value; if that one is also missing, it will suspend and\n   * trigger a lazy fetch.\n   */\n  prefetchRsc: React.ReactNode\n\n  prefetchHead: HeadData | null\n\n  head: HeadData\n\n  loading: LoadingModuleData | Promise<LoadingModuleData>\n\n  parallelRoutes: Map<string, ChildSegmentMap>\n\n  /**\n   * The timestamp of the navigation that last updated the CacheNode's data. If\n   * a CacheNode is reused from a previous navigation, this value is not\n   * updated. Used to track the staleness of the data.\n   */\n  navigatedAt: number\n}\n\nexport type DynamicParamTypes =\n  | 'catchall'\n  | 'catchall-intercepted-(..)(..)'\n  | 'catchall-intercepted-(.)'\n  | 'catchall-intercepted-(..)'\n  | 'catchall-intercepted-(...)'\n  | 'optional-catchall'\n  | 'dynamic'\n  | 'dynamic-intercepted-(..)(..)'\n  | 'dynamic-intercepted-(.)'\n  | 'dynamic-intercepted-(..)'\n  | 'dynamic-intercepted-(...)'\n\nexport type DynamicParamTypesShort =\n  | 'c'\n  | 'ci(..)(..)'\n  | 'ci(.)'\n  | 'ci(..)'\n  | 'ci(...)'\n  | 'oc'\n  | 'd'\n  | 'di(..)(..)'\n  | 'di(.)'\n  | 'di(..)'\n  | 'di(...)'\n\nexport type Segment =\n  | string\n  | [\n      // Param name\n      paramName: string,\n      // Param cache key (almost the same as the value, but arrays are\n      // concatenated into strings)\n      // TODO: We should change this to just be the value. Currently we convert\n      // it back to a value when passing to useParams. It only needs to be\n      // a string when converted to a a cache key, but that doesn't mean we\n      // need to store it as that representation.\n      paramCacheKey: string,\n      // Dynamic param type\n      dynamicParamType: DynamicParamTypesShort,\n    ]\n\n/**\n * Router state\n */\nexport type FlightRouterState = [\n  segment: Segment,\n  parallelRoutes: { [parallelRouterKey: string]: FlightRouterState },\n  url?: string | null,\n  /**\n   * \"refresh\" and \"refetch\", despite being similarly named, have different\n   * semantics:\n   * - \"refetch\" is used during a request to inform the server where rendering\n   *   should start from.\n   *\n   * - \"refresh\" is used by the client to mark that a segment should re-fetch the\n   *   data from the server for the current segment. It uses the \"url\" property\n   *   above to determine where to fetch from.\n   *\n   * - \"inside-shared-layout\" is used during a prefetch request to inform the\n   *   server that even if the segment matches, it should be treated as if it's\n   *   within the \"new\" part of a navigation  inside the shared layout. If\n   *   the segment doesn't match, then it has no effect, since it would be\n   *   treated as new regardless. If it does match, though, the server does not\n   *   need to render it, because the client already has it.\n   *\n   * - \"metadata-only\" instructs the server to skip rendering the segments and\n   *   only send the head data.\n   *\n   *   A bit confusing, but that's because it has only one extremely narrow use\n   *   case  during a non-PPR prefetch, the server uses it to find the first\n   *   loading boundary beneath a shared layout.\n   *\n   *   TODO: We should rethink the protocol for dynamic requests. It might not\n   *   make sense for the client to send a FlightRouterState, since this type is\n   *   overloaded with concerns.\n   */\n  refresh?:\n    | 'refetch'\n    | 'refresh'\n    | 'inside-shared-layout'\n    | 'metadata-only'\n    | null,\n  isRootLayout?: boolean,\n  /**\n   * Only present when responding to a tree prefetch request. Indicates whether\n   * there is a loading boundary somewhere in the tree. The client cache uses\n   * this to determine if it can skip the data prefetch request.\n   */\n  hasLoadingBoundary?: HasLoadingBoundary,\n]\n\nexport const enum HasLoadingBoundary {\n  // There is a loading boundary in this particular segment\n  SegmentHasLoadingBoundary = 1,\n  // There is a loading boundary somewhere in the subtree (but not in\n  // this segment)\n  SubtreeHasLoadingBoundary = 2,\n  // There is no loading boundary in this segment or any of its descendants\n  SubtreeHasNoLoadingBoundary = 3,\n}\n\n/**\n * Individual Flight response path\n */\nexport type FlightSegmentPath =\n  // Uses `any` as repeating pattern can't be typed.\n  | any[]\n  // Looks somewhat like this\n  | [\n      segment: Segment,\n      parallelRouterKey: string,\n      segment: Segment,\n      parallelRouterKey: string,\n      segment: Segment,\n      parallelRouterKey: string,\n    ]\n\n/**\n * Represents a tree of segments and the Flight data (i.e. React nodes) that\n * correspond to each one. The tree is isomorphic to the FlightRouterState;\n * however in the future we want to be able to fetch arbitrary partial segments\n * without having to fetch all its children. So this response format will\n * likely change.\n */\nexport type CacheNodeSeedData = [\n  node: React.ReactNode | null,\n  parallelRoutes: {\n    [parallelRouterKey: string]: CacheNodeSeedData | null\n  },\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  isPartial: boolean,\n  /** TODO: this doesn't feel like it belongs here, because it's only used during build, in `collectSegmentData` */\n  hasRuntimePrefetch: boolean,\n]\n\nexport type FlightDataSegment = [\n  /* segment of the rendered slice: */ Segment,\n  /* treePatch */ FlightRouterState,\n  /* cacheNodeSeedData */ CacheNodeSeedData | null, // Can be null during prefetch if there's no loading component\n  /* head: viewport */ HeadData,\n  /* isHeadPartial */ boolean,\n]\n\nexport type FlightDataPath =\n  // Uses `any` as repeating pattern can't be typed.\n  | any[]\n  // Looks somewhat like this\n  | [\n      // Holds full path to the segment.\n      ...FlightSegmentPath[],\n      ...FlightDataSegment,\n    ]\n\n/**\n * The Flight response data\n */\nexport type FlightData = Array<FlightDataPath> | string\n\nexport type ActionResult = Promise<any>\n\nexport type InitialRSCPayload = {\n  /** buildId */\n  b: string\n  /** initialCanonicalUrlParts */\n  c: string[]\n  /** initialRenderedSearch */\n  q: string\n  /** couldBeIntercepted */\n  i: boolean\n  /** initialFlightData */\n  f: FlightDataPath[]\n  /** missingSlots */\n  m: Set<string> | undefined\n  /** GlobalError */\n  G: [React.ComponentType<any>, React.ReactNode | undefined]\n  /** prerendered */\n  S: boolean\n}\n\n// Response from `createFromFetch` for normal rendering\nexport type NavigationFlightResponse = {\n  /** buildId */\n  b: string\n  /** flightData */\n  f: FlightData\n  /** prerendered */\n  S: boolean\n  /** renderedSearch */\n  q: string\n  /** couldBeIntercepted */\n  i: boolean\n  /** runtimePrefetch - [isPartial, staleTime]. Only present in runtime prefetch responses. */\n  rp?: [boolean, number]\n}\n\n// Response from `createFromFetch` for server actions. Action's flight data can be null\nexport type ActionFlightResponse = {\n  /** actionResult */\n  a: ActionResult\n  /** buildId */\n  b: string\n  /** flightData */\n  f: FlightData\n  /** renderedSearch */\n  q: string\n  /** couldBeIntercepted */\n  i: boolean\n}\n\nexport type RSCPayload =\n  | InitialRSCPayload\n  | NavigationFlightResponse\n  | ActionFlightResponse\n","import type { Segment } from '../../shared/lib/app-router-types'\n\nexport const matchSegment = (\n  existingSegment: Segment,\n  segment: Segment\n): boolean => {\n  // segment is either Array or string\n  if (typeof existingSegment === 'string') {\n    if (typeof segment === 'string') {\n      // Common case: segment is just a string\n      return existingSegment === segment\n    }\n    return false\n  }\n\n  if (typeof segment === 'string') {\n    return false\n  }\n  return existingSegment[0] === segment[0] && existingSegment[1] === segment[1]\n}\n","export const RSC_HEADER = 'rsc' as const\nexport const ACTION_HEADER = 'next-action' as const\n// TODO: Instead of sending the full router state, we only need to send the\n// segment path. Saves bytes. Then we could also use this field for segment\n// prefetches, which also need to specify a particular segment.\nexport const NEXT_ROUTER_STATE_TREE_HEADER = 'next-router-state-tree' as const\nexport const NEXT_ROUTER_PREFETCH_HEADER = 'next-router-prefetch' as const\n// This contains the path to the segment being prefetched.\n// TODO: If we change next-router-state-tree to be a segment path, we can use\n// that instead. Then next-router-prefetch and next-router-segment-prefetch can\n// be merged into a single enum.\nexport const NEXT_ROUTER_SEGMENT_PREFETCH_HEADER =\n  'next-router-segment-prefetch' as const\nexport const NEXT_HMR_REFRESH_HEADER = 'next-hmr-refresh' as const\nexport const NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__' as const\nexport const NEXT_URL = 'next-url' as const\nexport const RSC_CONTENT_TYPE_HEADER = 'text/x-component' as const\n\nexport const FLIGHT_HEADERS = [\n  RSC_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_HMR_REFRESH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n] as const\n\nexport const NEXT_RSC_UNION_QUERY = '_rsc' as const\n\nexport const NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time' as const\nexport const NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed' as const\nexport const NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path' as const\nexport const NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query' as const\nexport const NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender' as const\nexport const NEXT_ACTION_NOT_FOUND_HEADER = 'x-nextjs-action-not-found' as const\nexport const NEXT_REQUEST_ID_HEADER = 'x-nextjs-request-id' as const\nexport const NEXT_HTML_REQUEST_ID_HEADER = 'x-nextjs-html-request-id' as const\n\n// TODO: Should this include nextjs in the name, like the others?\nexport const NEXT_ACTION_REVALIDATED_HEADER = 'x-action-revalidated' as const\n","import type { CacheNode } from '../../../shared/lib/app-router-types'\nimport type {\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type { NavigationSeed } from '../segment-cache/navigation'\nimport type { FetchServerResponseResult } from './fetch-server-response'\n\nexport const ACTION_REFRESH = 'refresh'\nexport const ACTION_NAVIGATE = 'navigate'\nexport const ACTION_RESTORE = 'restore'\nexport const ACTION_SERVER_PATCH = 'server-patch'\nexport const ACTION_HMR_REFRESH = 'hmr-refresh'\nexport const ACTION_SERVER_ACTION = 'server-action'\n\nexport type RouterChangeByServerResponse = ({\n  navigatedAt,\n  previousTree,\n  serverResponse,\n}: {\n  navigatedAt: number\n  previousTree: FlightRouterState\n  serverResponse: FetchServerResponseResult\n}) => void\n\nexport interface Mutable {\n  mpaNavigation?: boolean\n  patchedTree?: FlightRouterState\n  renderedSearch?: string\n  canonicalUrl?: string\n  scrollableSegments?: FlightSegmentPath[]\n  pendingPush?: boolean\n  cache?: CacheNode\n  hashFragment?: string\n  shouldScroll?: boolean\n  preserveCustomHistoryState?: boolean\n  onlyHashChange?: boolean\n  collectedDebugInfo?: Array<unknown>\n}\n\nexport interface ServerActionMutable extends Mutable {\n  inFlightServerAction?: Promise<any> | null\n}\n\n/**\n * Refresh triggers a refresh of the full page data.\n * - fetches the Flight data and fills rsc at the root of the cache.\n * - The router state is updated at the root.\n */\nexport interface RefreshAction {\n  type: typeof ACTION_REFRESH\n}\n\nexport interface HmrRefreshAction {\n  type: typeof ACTION_HMR_REFRESH\n}\n\nexport type ServerActionDispatcher = (\n  args: Omit<\n    ServerActionAction,\n    'type' | 'mutable' | 'navigate' | 'changeByServerResponse' | 'cache'\n  >\n) => void\n\nexport interface ServerActionAction {\n  type: typeof ACTION_SERVER_ACTION\n  actionId: string\n  actionArgs: any[]\n  resolve: (value: any) => void\n  reject: (reason?: any) => void\n  didRevalidate?: boolean\n}\n\n/**\n * Navigate triggers a navigation to the provided url. It supports two types: `push` and `replace`.\n *\n * `navigateType`:\n * - `push` - pushes a new history entry in the browser history\n * - `replace` - replaces the current history entry in the browser history\n *\n * Navigate has multiple cache heuristics:\n * - page was prefetched\n *  - Apply router state tree from prefetch\n *  - Apply Flight data from prefetch to the cache\n *  - If Flight data is a string, it's a redirect and the state is updated to trigger a redirect\n *  - Check if hard navigation is needed\n *    - Hard navigation happens when a dynamic parameter below the common layout changed\n *    - When hard navigation is needed the cache is invalidated below the flightSegmentPath\n *    - The missing cache nodes of the page will be fetched in layout-router and trigger the SERVER_PATCH action\n *  - If hard navigation is not needed\n *    - The cache is reused\n *    - If any cache nodes are missing they'll be fetched in layout-router and trigger the SERVER_PATCH action\n * - page was not prefetched\n *  - The navigate was called from `next/router` (`router.push()` / `router.replace()`) / `next/link` without prefetched data available (e.g. the prefetch didn't come back from the server before clicking the link)\n *    - Flight data is fetched in the reducer (suspends the reducer)\n *    - Router state tree is created based on Flight data\n *    - Cache is filled based on the Flight data\n *\n * Above steps explain 3 cases:\n * - `soft` - Reuses the existing cache and fetches missing nodes in layout-router.\n * - `hard` - Creates a new cache where cache nodes are removed below the common layout and fetches missing nodes in layout-router.\n * - `optimistic` (explicit no prefetch) - Creates a new cache and kicks off the data fetch in the reducer. The data fetch is awaited in the layout-router.\n */\nexport interface NavigateAction {\n  type: typeof ACTION_NAVIGATE\n  url: URL\n  isExternalUrl: boolean\n  locationSearch: Location['search']\n  navigateType: 'push' | 'replace'\n  shouldScroll: boolean\n}\n\n/**\n * Restore applies the provided router state.\n * - Used for `popstate` (back/forward navigation) where a known router state has to be applied.\n * - Also used when syncing the router state with `pushState`/`replaceState` calls.\n * - Router state is applied as-is from the history state, if available.\n * - If the history state does not contain the router state, the existing router state is used.\n * - If any cache node is missing it will be fetched in layout-router during rendering and the server-patch case.\n * - If existing cache nodes match these are used.\n */\nexport interface RestoreAction {\n  type: typeof ACTION_RESTORE\n  url: URL\n  historyState: AppHistoryState | undefined\n}\n\nexport type AppHistoryState = {\n  tree: FlightRouterState\n  renderedSearch: string\n}\n\n/**\n * Server-patch applies the provided Flight data to the cache and router tree.\n */\nexport interface ServerPatchAction {\n  type: typeof ACTION_SERVER_PATCH\n  previousTree: FlightRouterState\n  url: URL\n  nextUrl: string | null\n  seed: NavigationSeed | null\n  mpa: boolean\n}\n\n/**\n * PrefetchKind defines the type of prefetching that should be done.\n * - `auto` - if the page is dynamic, prefetch the page data partially, if static prefetch the page data fully.\n * - `full` - prefetch the page data fully.\n */\n\nexport enum PrefetchKind {\n  AUTO = 'auto',\n  FULL = 'full',\n}\n\n/**\n * Prefetch adds the provided FlightData to the prefetch cache\n * - Creates the router state tree based on the patch in FlightData\n * - Adds the FlightData to the prefetch cache\n * - In ACTION_NAVIGATE the prefetch cache is checked and the router state tree and FlightData are applied.\n */\n\nexport interface PushRef {\n  /**\n   * If the app-router should push a new history entry in app-router's useEffect()\n   */\n  pendingPush: boolean\n  /**\n   * Multi-page navigation through location.href.\n   */\n  mpaNavigation: boolean\n  /**\n   * Skip applying the router state to the browser history state.\n   */\n  preserveCustomHistoryState: boolean\n}\n\nexport type FocusAndScrollRef = {\n  /**\n   * If focus and scroll should be set in the layout-router's useEffect()\n   */\n  apply: boolean\n  /**\n   * The hash fragment that should be scrolled to.\n   */\n  hashFragment: string | null\n  /**\n   * The paths of the segments that should be focused.\n   */\n  segmentPaths: FlightSegmentPath[]\n  /**\n   * If only the URLs hash fragment changed\n   */\n  onlyHashChange: boolean\n}\n\n/**\n * Handles keeping the state of app-router.\n */\nexport type AppRouterState = {\n  /**\n   * The router state, this is written into the history state in app-router using replaceState/pushState.\n   * - Has to be serializable as it is written into the history state.\n   * - Holds which segments and parallel routes are shown on the screen.\n   */\n  tree: FlightRouterState\n  /**\n   * The cache holds React nodes for every segment that is shown on screen as well as previously shown segments.\n   * It also holds in-progress data requests.\n   */\n  cache: CacheNode\n  /**\n   * Decides if the update should create a new history entry and if the navigation has to trigger a browser navigation.\n   */\n  pushRef: PushRef\n  /**\n   * Decides if the update should apply scroll and focus management.\n   */\n  focusAndScrollRef: FocusAndScrollRef\n  /**\n   * The canonical url that is pushed/replaced.\n   * - This is the url you see in the browser.\n   */\n  canonicalUrl: string\n  renderedSearch: string\n  /**\n   * The underlying \"url\" representing the UI state, which is used for intercepting routes.\n   */\n  nextUrl: string | null\n\n  /**\n   * The previous next-url that was used previous to a dynamic navigation.\n   */\n  previousNextUrl: string | null\n\n  debugInfo: Array<unknown> | null\n}\n\nexport type ReadonlyReducerState = Readonly<AppRouterState>\nexport type ReducerState =\n  | (Promise<AppRouterState> & { _debugInfo?: Array<unknown> })\n  | AppRouterState\nexport type ReducerActions = Readonly<\n  | RefreshAction\n  | NavigateAction\n  | RestoreAction\n  | ServerPatchAction\n  | HmrRefreshAction\n  | ServerActionAction\n>\n","/**\n * Check to see if a value is Thenable.\n *\n * @param promise the maybe-thenable value\n * @returns true if the value is thenable\n */\nexport function isThenable<T = unknown>(\n  promise: Promise<T> | T\n): promise is Promise<T> {\n  return (\n    promise !== null &&\n    typeof promise === 'object' &&\n    'then' in promise &&\n    typeof promise.then === 'function'\n  )\n}\n","import type { Dispatch } from 'react'\nimport React, { use, useMemo } from 'react'\nimport { isThenable } from '../../shared/lib/is-thenable'\nimport type { AppRouterActionQueue } from './app-router-instance'\nimport type {\n  AppRouterState,\n  ReducerActions,\n  ReducerState,\n} from './router-reducer/router-reducer-types'\n\n// The app router state lives outside of React, so we can import the dispatch\n// method directly wherever we need it, rather than passing it around via props\n// or context.\nlet dispatch: Dispatch<ReducerActions> | null = null\n\nexport function dispatchAppRouterAction(action: ReducerActions) {\n  if (dispatch === null) {\n    throw new Error(\n      'Internal Next.js error: Router action dispatched before initialization.'\n    )\n  }\n  dispatch(action)\n}\n\nconst __DEV__ = process.env.NODE_ENV !== 'production'\nconst promisesWithDebugInfo: WeakMap<\n  Promise<AppRouterState>,\n  Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n> = __DEV__ ? new WeakMap() : (null as any)\n\nexport function useActionQueue(\n  actionQueue: AppRouterActionQueue\n): AppRouterState {\n  const [state, setState] = React.useState<ReducerState>(actionQueue.state)\n\n  // Because of a known issue that requires to decode Flight streams inside the\n  // render phase, we have to be a bit clever and assign the dispatch method to\n  // a module-level variable upon initialization. The useState hook in this\n  // module only exists to synchronize state that lives outside of React.\n  // Ideally, what we'd do instead is pass the state as a prop to root.render;\n  // this is conceptually how we're modeling the app router state, despite the\n  // weird implementation details.\n  if (process.env.NODE_ENV !== 'production') {\n    const { useAppDevRenderingIndicator } =\n      require('../../next-devtools/userspace/use-app-dev-rendering-indicator') as typeof import('../../next-devtools/userspace/use-app-dev-rendering-indicator')\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const appDevRenderingIndicator = useAppDevRenderingIndicator()\n\n    dispatch = (action: ReducerActions) => {\n      appDevRenderingIndicator(() => {\n        actionQueue.dispatch(action, setState)\n      })\n    }\n  } else {\n    dispatch = (action: ReducerActions) =>\n      actionQueue.dispatch(action, setState)\n  }\n\n  // When navigating to a non-prefetched route, then App Router state will be\n  // blocked until the server responds. We need to transfer the `_debugInfo`\n  // from the underlying Flight response onto the top-level promise that is\n  // passed to React (via `use`) so that the latency is accurately represented\n  // in the React DevTools.\n  const stateWithDebugInfo = useMemo(() => {\n    if (!__DEV__) {\n      return state\n    }\n\n    if (isThenable(state)) {\n      // useMemo can't be used to cache a Promise since the memoized value is thrown\n      // away when we suspend. So we use a WeakMap to cache the Promise with debug info.\n      let promiseWithDebugInfo = promisesWithDebugInfo.get(state)\n      if (promiseWithDebugInfo === undefined) {\n        const debugInfo: Array<unknown> = []\n        promiseWithDebugInfo = Promise.resolve(state).then((asyncState) => {\n          if (asyncState.debugInfo !== null) {\n            debugInfo.push(...asyncState.debugInfo)\n          }\n          return asyncState\n        }) as Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n        promiseWithDebugInfo._debugInfo = debugInfo\n\n        promisesWithDebugInfo.set(state, promiseWithDebugInfo)\n      }\n\n      return promiseWithDebugInfo\n    }\n    return state\n  }, [state])\n\n  return isThenable(stateWithDebugInfo)\n    ? use(stateWithDebugInfo)\n    : stateWithDebugInfo\n}\n","import { startTransition } from 'react'\nimport { ACTION_SERVER_ACTION } from './components/router-reducer/router-reducer-types'\nimport { dispatchAppRouterAction } from './components/use-action-queue'\n\nexport async function callServer(actionId: string, actionArgs: any[]) {\n  return new Promise((resolve, reject) => {\n    startTransition(() => {\n      dispatchAppRouterAction({\n        type: ACTION_SERVER_ACTION,\n        actionId,\n        actionArgs,\n        resolve,\n        reject,\n      })\n    })\n  })\n}\n","const basePath = process.env.__NEXT_ROUTER_BASEPATH || ''\nconst pathname = `${basePath}/__nextjs_source-map`\n\nexport const findSourceMapURL =\n  process.env.NODE_ENV === 'development'\n    ? function findSourceMapURL(filename: string): string | null {\n        if (filename === '') {\n          return null\n        }\n\n        if (\n          filename.startsWith(document.location.origin) &&\n          filename.includes('/_next/static')\n        ) {\n          // This is a request for a client chunk. This can only happen when\n          // using Turbopack. In this case, since we control how those source\n          // maps are generated, we can safely assume that the sourceMappingURL\n          // is relative to the filename, with an added `.map` extension. The\n          // browser can just request this file, and it gets served through the\n          // normal dev server, without the need to route this through\n          // the `/__nextjs_source-map` dev middleware.\n          return `${filename}.map`\n        }\n\n        const url = new URL(pathname, document.location.origin)\n        url.searchParams.set('filename', filename)\n\n        return url.href\n      }\n    : undefined\n","import type { FlightRouterState, Segment } from './app-router-types'\n\nexport function getSegmentValue(segment: Segment) {\n  return Array.isArray(segment) ? segment[1] : segment\n}\n\nexport function isGroupSegment(segment: string) {\n  // Use array[0] for performant purpose\n  return segment[0] === '(' && segment.endsWith(')')\n}\n\nexport function isParallelRouteSegment(segment: string) {\n  return segment.startsWith('@') && segment !== '@children'\n}\n\nexport function addSearchParamsIfPageSegment(\n  segment: Segment,\n  searchParams: Record<string, string | string[] | undefined>\n) {\n  const isPageSegment = segment.includes(PAGE_SEGMENT_KEY)\n\n  if (isPageSegment) {\n    const stringifiedQuery = JSON.stringify(searchParams)\n    return stringifiedQuery !== '{}'\n      ? PAGE_SEGMENT_KEY + '?' + stringifiedQuery\n      : PAGE_SEGMENT_KEY\n  }\n\n  return segment\n}\n\nexport function computeSelectedLayoutSegment(\n  segments: string[] | null,\n  parallelRouteKey: string\n): string | null {\n  if (!segments || segments.length === 0) {\n    return null\n  }\n\n  // For 'children', use first segment; for other parallel routes, use last segment\n  const rawSegment =\n    parallelRouteKey === 'children'\n      ? segments[0]\n      : segments[segments.length - 1]\n\n  // If the default slot is showing, return null since it's not technically \"selected\" (it's a fallback)\n  // Returning an internal value like `__DEFAULT__` would be confusing\n  return rawSegment === DEFAULT_SEGMENT_KEY ? null : rawSegment\n}\n\n/** Get the canonical parameters from the current level to the leaf node. */\nexport function getSelectedLayoutSegmentPath(\n  tree: FlightRouterState,\n  parallelRouteKey: string,\n  first = true,\n  segmentPath: string[] = []\n): string[] {\n  let node: FlightRouterState\n  if (first) {\n    // Use the provided parallel route key on the first parallel route\n    node = tree[1][parallelRouteKey]\n  } else {\n    // After first parallel route prefer children, if there's no children pick the first parallel route.\n    const parallelRoutes = tree[1]\n    node = parallelRoutes.children ?? Object.values(parallelRoutes)[0]\n  }\n\n  if (!node) return segmentPath\n  const segment = node[0]\n\n  let segmentValue = getSegmentValue(segment)\n\n  if (!segmentValue || segmentValue.startsWith(PAGE_SEGMENT_KEY)) {\n    return segmentPath\n  }\n\n  segmentPath.push(segmentValue)\n\n  return getSelectedLayoutSegmentPath(\n    node,\n    parallelRouteKey,\n    false,\n    segmentPath\n  )\n}\n\nexport const PAGE_SEGMENT_KEY = '__PAGE__'\nexport const DEFAULT_SEGMENT_KEY = '__DEFAULT__'\nexport const NOT_FOUND_SEGMENT_KEY = '/_not-found'\n","import { PAGE_SEGMENT_KEY } from '../segment'\nimport type { Segment as FlightRouterStateSegment } from '../app-router-types'\n\n// TypeScript trick to simulate opaque types, like in Flow.\ntype Opaque<K, T> = T & { __brand: K }\n\nexport type SegmentRequestKeyPart = Opaque<'SegmentRequestKeyPart', string>\nexport type SegmentRequestKey = Opaque<'SegmentRequestKey', string>\n\nexport const ROOT_SEGMENT_REQUEST_KEY = '' as SegmentRequestKey\n\nexport const HEAD_REQUEST_KEY = '/_head' as SegmentRequestKey\n\nexport function createSegmentRequestKeyPart(\n  segment: FlightRouterStateSegment\n): SegmentRequestKeyPart {\n  if (typeof segment === 'string') {\n    if (segment.startsWith(PAGE_SEGMENT_KEY)) {\n      // The Flight Router State type sometimes includes the search params in\n      // the page segment. However, the Segment Cache tracks this as a separate\n      // key. So, we strip the search params here, and then add them back when\n      // the cache entry is turned back into a FlightRouterState. This is an\n      // unfortunate consequence of the FlightRouteState being used both as a\n      // transport type and as a cache key; we'll address this once more of the\n      // Segment Cache implementation has settled.\n      // TODO: We should hoist the search params out of the FlightRouterState\n      // type entirely, This is our plan for dynamic route params, too.\n      return PAGE_SEGMENT_KEY as SegmentRequestKeyPart\n    }\n    const safeName =\n      // TODO: FlightRouterState encodes Not Found routes as \"/_not-found\".\n      // But params typically don't include the leading slash. We should use\n      // a different encoding to avoid this special case.\n      segment === '/_not-found'\n        ? '_not-found'\n        : encodeToFilesystemAndURLSafeString(segment)\n    // Since this is not a dynamic segment, it's fully encoded. It does not\n    // need to be \"hydrated\" with a param value.\n    return safeName as SegmentRequestKeyPart\n  }\n\n  const name = segment[0]\n  const paramType = segment[2]\n  const safeName = encodeToFilesystemAndURLSafeString(name)\n\n  const encodedName = '$' + paramType + '$' + safeName\n  return encodedName as SegmentRequestKeyPart\n}\n\nexport function appendSegmentRequestKeyPart(\n  parentRequestKey: SegmentRequestKey,\n  parallelRouteKey: string,\n  childRequestKeyPart: SegmentRequestKeyPart\n): SegmentRequestKey {\n  // Aside from being filesystem safe, segment keys are also designed so that\n  // each segment and parallel route creates its own subdirectory. Roughly in\n  // the same shape as the source app directory. This is mostly just for easier\n  // debugging (you can open up the build folder and navigate the output); if\n  // we wanted to do we could just use a flat structure.\n\n  // Omit the parallel route key for children, since this is the most\n  // common case. Saves some bytes (and it's what the app directory does).\n  const slotKey =\n    parallelRouteKey === 'children'\n      ? childRequestKeyPart\n      : `@${encodeToFilesystemAndURLSafeString(parallelRouteKey)}/${childRequestKeyPart}`\n  return (parentRequestKey + '/' + slotKey) as SegmentRequestKey\n}\n\n// Define a regex pattern to match the most common characters found in a route\n// param. It excludes anything that might not be cross-platform filesystem\n// compatible, like |. It does not need to be precise because the fallback is to\n// just base64url-encode the whole parameter, which is fine; we just don't do it\n// by default for compactness, and for easier debugging.\nconst simpleParamValueRegex = /^[a-zA-Z0-9\\-_@]+$/\n\nfunction encodeToFilesystemAndURLSafeString(value: string) {\n  if (simpleParamValueRegex.test(value)) {\n    return value\n  }\n  // If there are any unsafe characters, base64url-encode the entire value.\n  // We also add a ! prefix so it doesn't collide with the simple case.\n  const base64url = btoa(value)\n    .replace(/\\+/g, '-') // Replace '+' with '-'\n    .replace(/\\//g, '_') // Replace '/' with '_'\n    .replace(/=+$/, '') // Remove trailing '='\n  return '!' + base64url\n}\n\nexport function convertSegmentPathToStaticExportFilename(\n  segmentPath: string\n): string {\n  return `__next${segmentPath.replace(/\\//g, '.')}.txt`\n}\n","import type { DynamicParamTypesShort } from '../shared/lib/app-router-types'\nimport {\n  addSearchParamsIfPageSegment,\n  DEFAULT_SEGMENT_KEY,\n  PAGE_SEGMENT_KEY,\n} from '../shared/lib/segment'\nimport { ROOT_SEGMENT_REQUEST_KEY } from '../shared/lib/segment-cache/segment-value-encoding'\nimport {\n  NEXT_REWRITTEN_PATH_HEADER,\n  NEXT_REWRITTEN_QUERY_HEADER,\n  NEXT_RSC_UNION_QUERY,\n} from './components/app-router-headers'\nimport type {\n  NormalizedPathname,\n  NormalizedSearch,\n} from './components/segment-cache/cache-key'\nimport type { RSCResponse } from './components/router-reducer/fetch-server-response'\nimport type { ParsedUrlQuery } from 'querystring'\n\nexport type RouteParamValue = string | Array<string> | null\n\nexport function getRenderedSearch(\n  response: RSCResponse<unknown> | Response\n): NormalizedSearch {\n  // If the server performed a rewrite, the search params used to render the\n  // page will be different from the params in the request URL. In this case,\n  // the response will include a header that gives the rewritten search query.\n  const rewrittenQuery = response.headers.get(NEXT_REWRITTEN_QUERY_HEADER)\n  if (rewrittenQuery !== null) {\n    return (\n      rewrittenQuery === '' ? '' : '?' + rewrittenQuery\n    ) as NormalizedSearch\n  }\n  // If the header is not present, there was no rewrite, so we use the search\n  // query of the response URL.\n  return urlToUrlWithoutFlightMarker(new URL(response.url))\n    .search as NormalizedSearch\n}\n\nexport function getRenderedPathname(\n  response: RSCResponse<unknown> | Response\n): NormalizedPathname {\n  // If the server performed a rewrite, the pathname used to render the\n  // page will be different from the pathname in the request URL. In this case,\n  // the response will include a header that gives the rewritten pathname.\n  const rewrittenPath = response.headers.get(NEXT_REWRITTEN_PATH_HEADER)\n  return (rewrittenPath ??\n    urlToUrlWithoutFlightMarker(new URL(response.url))\n      .pathname) as NormalizedPathname\n}\n\nexport function parseDynamicParamFromURLPart(\n  paramType: DynamicParamTypesShort,\n  pathnameParts: Array<string>,\n  partIndex: number\n): RouteParamValue {\n  // This needs to match the behavior in get-dynamic-param.ts.\n  switch (paramType) {\n    // Catchalls\n    case 'c': {\n      // Catchalls receive all the remaining URL parts. If there are no\n      // remaining pathname parts, return an empty array.\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s) => encodeURIComponent(s))\n        : []\n    }\n    // Catchall intercepted\n    case 'ci(..)(..)':\n    case 'ci(.)':\n    case 'ci(..)':\n    case 'ci(...)': {\n      const prefix = paramType.length - 2\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s, i) => {\n            if (i === 0) {\n              return encodeURIComponent(s.slice(prefix))\n            }\n\n            return encodeURIComponent(s)\n          })\n        : []\n    }\n    // Optional catchalls\n    case 'oc': {\n      // Optional catchalls receive all the remaining URL parts, unless this is\n      // the end of the pathname, in which case they return null.\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s) => encodeURIComponent(s))\n        : null\n    }\n    // Dynamic\n    case 'd': {\n      if (partIndex >= pathnameParts.length) {\n        // The route tree expected there to be more parts in the URL than there\n        // actually are. This could happen if the x-nextjs-rewritten-path header\n        // is incorrectly set, or potentially due to bug in Next.js. TODO:\n        // Should this be a hard error? During a prefetch, we can just abort.\n        // During a client navigation, we could trigger a hard refresh. But if\n        // it happens during initial render, we don't really have any\n        // recovery options.\n        return ''\n      }\n      return encodeURIComponent(pathnameParts[partIndex])\n    }\n    // Dynamic intercepted\n    case 'di(..)(..)':\n    case 'di(.)':\n    case 'di(..)':\n    case 'di(...)': {\n      const prefix = paramType.length - 2\n      if (partIndex >= pathnameParts.length) {\n        // The route tree expected there to be more parts in the URL than there\n        // actually are. This could happen if the x-nextjs-rewritten-path header\n        // is incorrectly set, or potentially due to bug in Next.js. TODO:\n        // Should this be a hard error? During a prefetch, we can just abort.\n        // During a client navigation, we could trigger a hard refresh. But if\n        // it happens during initial render, we don't really have any\n        // recovery options.\n        return ''\n      }\n\n      return encodeURIComponent(pathnameParts[partIndex].slice(prefix))\n    }\n    default:\n      paramType satisfies never\n      return ''\n  }\n}\n\nexport function doesStaticSegmentAppearInURL(segment: string): boolean {\n  // This is not a parameterized segment; however, we need to determine\n  // whether or not this segment appears in the URL. For example, this route\n  // groups do not appear in the URL, so they should be skipped. Any other\n  // special cases must be handled here.\n  // TODO: Consider encoding this directly into the router tree instead of\n  // inferring it on the client based on the segment type. Something like\n  // a `doesAppearInURL` flag in FlightRouterState.\n  if (\n    segment === ROOT_SEGMENT_REQUEST_KEY ||\n    // For some reason, the loader tree sometimes includes extra __PAGE__\n    // \"layouts\" when part of a parallel route. But it's not a leaf node.\n    // Otherwise, we wouldn't need this special case because pages are\n    // always leaf nodes.\n    // TODO: Investigate why the loader produces these fake page segments.\n    segment.startsWith(PAGE_SEGMENT_KEY) ||\n    // Route groups.\n    (segment[0] === '(' && segment.endsWith(')')) ||\n    segment === DEFAULT_SEGMENT_KEY ||\n    segment === '/_not-found'\n  ) {\n    return false\n  } else {\n    // All other segment types appear in the URL\n    return true\n  }\n}\n\nexport function getCacheKeyForDynamicParam(\n  paramValue: RouteParamValue,\n  renderedSearch: NormalizedSearch\n): string {\n  // This needs to match the logic in get-dynamic-param.ts, until we're able to\n  // unify the various implementations so that these are always computed on\n  // the client.\n  if (typeof paramValue === 'string') {\n    // TODO: Refactor or remove this helper function to accept a string rather\n    // than the whole segment type. Also we can probably just append the\n    // search string instead of turning it into JSON.\n    const pageSegmentWithSearchParams = addSearchParamsIfPageSegment(\n      paramValue,\n      Object.fromEntries(new URLSearchParams(renderedSearch))\n    ) as string\n    return pageSegmentWithSearchParams\n  } else if (paramValue === null) {\n    return ''\n  } else {\n    return paramValue.join('/')\n  }\n}\n\nexport function urlToUrlWithoutFlightMarker(url: URL): URL {\n  const urlWithoutFlightParameters = new URL(url)\n  urlWithoutFlightParameters.searchParams.delete(NEXT_RSC_UNION_QUERY)\n  if (process.env.NODE_ENV === 'production') {\n    if (\n      process.env.__NEXT_CONFIG_OUTPUT === 'export' &&\n      urlWithoutFlightParameters.pathname.endsWith('.txt')\n    ) {\n      const { pathname } = urlWithoutFlightParameters\n      const length = pathname.endsWith('/index.txt') ? 10 : 4\n      // Slice off `/index.txt` or `.txt` from the end of the pathname\n      urlWithoutFlightParameters.pathname = pathname.slice(0, -length)\n    }\n  }\n  return urlWithoutFlightParameters\n}\n\nexport function getParamValueFromCacheKey(\n  paramCacheKey: string,\n  paramType: DynamicParamTypesShort\n) {\n  // Turn the cache key string sent by the server (as part of FlightRouterState)\n  // into a value that can be passed to `useParams` and client components.\n  const isCatchAll = paramType === 'c' || paramType === 'oc'\n  if (isCatchAll) {\n    // Catch-all param keys are a concatenation of the path segments.\n    // See equivalent logic in `getSelectedParams`.\n    // TODO: We should just pass the array directly, rather than concatenate\n    // it to a string and then split it back to an array. It needs to be an\n    // array in some places, like when passing a key React, but we can convert\n    // it at runtime in those places.\n    return paramCacheKey.split('/')\n  }\n  return paramCacheKey\n}\n\nexport function urlSearchParamsToParsedUrlQuery(\n  searchParams: URLSearchParams\n): ParsedUrlQuery {\n  // Converts a URLSearchParams object to the same type used by the server when\n  // creating search params props, i.e. the type returned by Node's\n  // \"querystring\" module.\n  const result: ParsedUrlQuery = {}\n  for (const [key, value] of searchParams.entries()) {\n    if (result[key] === undefined) {\n      result[key] = value\n    } else if (Array.isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [result[key], value]\n    }\n  }\n  return result\n}\n","export function createHrefFromUrl(\n  url: Pick<URL, 'pathname' | 'search' | 'hash'>,\n  includeHash: boolean = true\n): string {\n  return url.pathname + url.search + (includeHash ? url.hash : '')\n}\n","import type {\n  CacheNodeSeedData,\n  FlightData,\n  FlightDataPath,\n  FlightRouterState,\n  FlightSegmentPath,\n  Segment,\n  HeadData,\n  InitialRSCPayload,\n} from '../shared/lib/app-router-types'\nimport { PAGE_SEGMENT_KEY } from '../shared/lib/segment'\nimport type { NormalizedSearch } from './components/segment-cache/cache-key'\nimport {\n  getCacheKeyForDynamicParam,\n  parseDynamicParamFromURLPart,\n  doesStaticSegmentAppearInURL,\n  getRenderedPathname,\n  getRenderedSearch,\n} from './route-params'\nimport { createHrefFromUrl } from './components/router-reducer/create-href-from-url'\n\nexport type NormalizedFlightData = {\n  /**\n   * The full `FlightSegmentPath` inclusive of the final `Segment`\n   */\n  segmentPath: FlightSegmentPath\n  /**\n   * The `FlightSegmentPath` exclusive of the final `Segment`\n   */\n  pathToSegment: FlightSegmentPath\n  segment: Segment\n  tree: FlightRouterState\n  seedData: CacheNodeSeedData | null\n  head: HeadData\n  isHeadPartial: boolean\n  isRootRender: boolean\n}\n\n// TODO: We should only have to export `normalizeFlightData`, however because the initial flight data\n// that gets passed to `createInitialRouterState` doesn't conform to the `FlightDataPath` type (it's missing the root segment)\n// we're currently exporting it so we can use it directly. This should be fixed as part of the unification of\n// the different ways we express `FlightSegmentPath`.\nexport function getFlightDataPartsFromPath(\n  flightDataPath: FlightDataPath\n): NormalizedFlightData {\n  // Pick the last 4 items from the `FlightDataPath` to get the [tree, seedData, viewport, isHeadPartial].\n  const flightDataPathLength = 4\n  // tree, seedData, and head are *always* the last three items in the `FlightDataPath`.\n  const [tree, seedData, head, isHeadPartial] =\n    flightDataPath.slice(-flightDataPathLength)\n  // The `FlightSegmentPath` is everything except the last three items. For a root render, it won't be present.\n  const segmentPath = flightDataPath.slice(0, -flightDataPathLength)\n\n  return {\n    // TODO: Unify these two segment path helpers. We are inconsistently pushing an empty segment (\"\")\n    // to the start of the segment path in some places which makes it hard to use solely the segment path.\n    // Look for \"// TODO-APP: remove ''\" in the codebase.\n    pathToSegment: segmentPath.slice(0, -1),\n    segmentPath,\n    // if the `FlightDataPath` corresponds with the root, there'll be no segment path,\n    // in which case we default to ''.\n    segment: segmentPath[segmentPath.length - 1] ?? '',\n    tree,\n    seedData,\n    head,\n    isHeadPartial,\n    isRootRender: flightDataPath.length === flightDataPathLength,\n  }\n}\n\nexport function createInitialRSCPayloadFromFallbackPrerender(\n  response: Response,\n  fallbackInitialRSCPayload: InitialRSCPayload\n): InitialRSCPayload {\n  // This is a static fallback page. In order to hydrate the page, we need to\n  // parse the client params from the URL, but to account for the possibility\n  // that the page was rewritten, we need to check the response headers\n  // for x-nextjs-rewritten-path or x-nextjs-rewritten-query headers. Since\n  // we can't access the headers of the initial document response, the client\n  // performs a fetch request to the current location. Since it's possible that\n  // the fetch request will be dynamically rewritten to a different path than\n  // the initial document, this fetch request delivers _all_ the hydration data\n  // for the page; it was not inlined into the document, like it normally\n  // would be.\n  //\n  // TODO: Consider treating the case where fetch is rewritten to a different\n  // path from the document as a special deopt case. We should optimistically\n  // assume this won't happen, inline the data into the document, and perform\n  // a minimal request (like a HEAD or range request) to verify that the\n  // response matches. Tricky to get right because we need to account for\n  // all the different deployment environments we support, like output:\n  // \"export\" mode, where we currently don't assume that custom response\n  // headers are present.\n\n  // Patch the Flight data sent by the server with the correct params parsed\n  // from the URL + response object.\n  const renderedPathname = getRenderedPathname(response)\n  const renderedSearch = getRenderedSearch(response)\n  const canonicalUrl = createHrefFromUrl(new URL(location.href))\n  const originalFlightDataPath = fallbackInitialRSCPayload.f[0]\n  const originalFlightRouterState = originalFlightDataPath[0]\n  return {\n    b: fallbackInitialRSCPayload.b,\n    c: canonicalUrl.split('/'),\n    q: renderedSearch,\n    i: fallbackInitialRSCPayload.i,\n    f: [\n      [\n        fillInFallbackFlightRouterState(\n          originalFlightRouterState,\n          renderedPathname,\n          renderedSearch as NormalizedSearch\n        ),\n        originalFlightDataPath[1],\n        originalFlightDataPath[2],\n        originalFlightDataPath[2],\n      ],\n    ],\n    m: fallbackInitialRSCPayload.m,\n    G: fallbackInitialRSCPayload.G,\n    S: fallbackInitialRSCPayload.S,\n  }\n}\n\nfunction fillInFallbackFlightRouterState(\n  flightRouterState: FlightRouterState,\n  renderedPathname: string,\n  renderedSearch: NormalizedSearch\n): FlightRouterState {\n  const pathnameParts = renderedPathname.split('/').filter((p) => p !== '')\n  const index = 0\n  return fillInFallbackFlightRouterStateImpl(\n    flightRouterState,\n    renderedSearch,\n    pathnameParts,\n    index\n  )\n}\n\nfunction fillInFallbackFlightRouterStateImpl(\n  flightRouterState: FlightRouterState,\n  renderedSearch: NormalizedSearch,\n  pathnameParts: Array<string>,\n  pathnamePartsIndex: number\n): FlightRouterState {\n  const originalSegment = flightRouterState[0]\n  let newSegment: Segment\n  let doesAppearInURL: boolean\n  if (typeof originalSegment === 'string') {\n    newSegment = originalSegment\n    doesAppearInURL = doesStaticSegmentAppearInURL(originalSegment)\n  } else {\n    const paramName = originalSegment[0]\n    const paramType = originalSegment[2]\n    const paramValue = parseDynamicParamFromURLPart(\n      paramType,\n      pathnameParts,\n      pathnamePartsIndex\n    )\n    const cacheKey = getCacheKeyForDynamicParam(paramValue, renderedSearch)\n    newSegment = [paramName, cacheKey, paramType]\n    doesAppearInURL = true\n  }\n\n  // Only increment the index if the segment appears in the URL. If it's a\n  // \"virtual\" segment, like a route group, it remains the same.\n  const childPathnamePartsIndex = doesAppearInURL\n    ? pathnamePartsIndex + 1\n    : pathnamePartsIndex\n\n  const children = flightRouterState[1]\n  const newChildren: { [key: string]: FlightRouterState } = {}\n  for (let key in children) {\n    const childFlightRouterState = children[key]\n    newChildren[key] = fillInFallbackFlightRouterStateImpl(\n      childFlightRouterState,\n      renderedSearch,\n      pathnameParts,\n      childPathnamePartsIndex\n    )\n  }\n\n  const newState: FlightRouterState = [\n    newSegment,\n    newChildren,\n    null,\n    flightRouterState[3],\n    flightRouterState[4],\n  ]\n  return newState\n}\n\nexport function getNextFlightSegmentPath(\n  flightSegmentPath: FlightSegmentPath\n): FlightSegmentPath {\n  // Since `FlightSegmentPath` is a repeated tuple of `Segment` and `ParallelRouteKey`, we slice off two items\n  // to get the next segment path.\n  return flightSegmentPath.slice(2)\n}\n\nexport function normalizeFlightData(\n  flightData: FlightData\n): NormalizedFlightData[] | string {\n  // FlightData can be a string when the server didn't respond with a proper flight response,\n  // or when a redirect happens, to signal to the client that it needs to perform an MPA navigation.\n  if (typeof flightData === 'string') {\n    return flightData\n  }\n\n  return flightData.map((flightDataPath) =>\n    getFlightDataPartsFromPath(flightDataPath)\n  )\n}\n\n/**\n * This function is used to prepare the flight router state for the request.\n * It removes markers that are not needed by the server, and are purely used\n * for stashing state on the client.\n * @param flightRouterState - The flight router state to prepare.\n * @param isHmrRefresh - Whether this is an HMR refresh request.\n * @returns The prepared flight router state.\n */\nexport function prepareFlightRouterStateForRequest(\n  flightRouterState: FlightRouterState,\n  isHmrRefresh?: boolean\n): string {\n  // HMR requests need the complete, unmodified state for proper functionality\n  if (isHmrRefresh) {\n    return encodeURIComponent(JSON.stringify(flightRouterState))\n  }\n\n  return encodeURIComponent(\n    JSON.stringify(stripClientOnlyDataFromFlightRouterState(flightRouterState))\n  )\n}\n\n/**\n * Recursively strips client-only data from FlightRouterState while preserving\n * server-needed information for proper rendering decisions.\n */\nfunction stripClientOnlyDataFromFlightRouterState(\n  flightRouterState: FlightRouterState\n): FlightRouterState {\n  const [\n    segment,\n    parallelRoutes,\n    _url, // Intentionally unused - URLs are client-only\n    refreshMarker,\n    isRootLayout,\n    hasLoadingBoundary,\n  ] = flightRouterState\n\n  // __PAGE__ segments are always fetched from the server, so there's\n  // no need to send them up\n  const cleanedSegment = stripSearchParamsFromPageSegment(segment)\n\n  // Recursively process parallel routes\n  const cleanedParallelRoutes: { [key: string]: FlightRouterState } = {}\n  for (const [key, childState] of Object.entries(parallelRoutes)) {\n    cleanedParallelRoutes[key] =\n      stripClientOnlyDataFromFlightRouterState(childState)\n  }\n\n  const result: FlightRouterState = [\n    cleanedSegment,\n    cleanedParallelRoutes,\n    null, // URLs omitted - server reconstructs paths from segments\n    shouldPreserveRefreshMarker(refreshMarker) ? refreshMarker : null,\n  ]\n\n  // Append optional fields if present\n  if (isRootLayout !== undefined) {\n    result[4] = isRootLayout\n  }\n  if (hasLoadingBoundary !== undefined) {\n    result[5] = hasLoadingBoundary\n  }\n\n  return result\n}\n\n/**\n * Strips search parameters from __PAGE__ segments to prevent sensitive\n * client-side data from being sent to the server.\n */\nfunction stripSearchParamsFromPageSegment(segment: Segment): Segment {\n  if (\n    typeof segment === 'string' &&\n    segment.startsWith(PAGE_SEGMENT_KEY + '?')\n  ) {\n    return PAGE_SEGMENT_KEY\n  }\n  return segment\n}\n\n/**\n * Determines whether the refresh marker should be sent to the server\n * Client-only markers like 'refresh' are stripped, while server-needed markers\n * like 'refetch' and 'inside-shared-layout' are preserved.\n */\nfunction shouldPreserveRefreshMarker(\n  refreshMarker: FlightRouterState[3]\n): boolean {\n  return Boolean(refreshMarker && refreshMarker !== 'refresh')\n}\n","// This gets assigned as a side-effect during app initialization. Because it\n// represents the build used to create the JS bundle, it should never change\n// after being set, so we store it in a global variable.\n//\n// When performing RSC requests, if the incoming data has a different build ID,\n// we perform an MPA navigation/refresh to load the updated build and ensure\n// that the client and server in sync.\n\n// Starts as an empty string. In practice, because setAppBuildId is called\n// during initialization before hydration starts, this will always get\n// reassigned to the actual build ID before it's ever needed by a navigation.\n// If for some reasons it didn't, due to a bug or race condition, then on\n// navigation the build comparision would fail and trigger an MPA navigation.\nlet globalBuildId: string = ''\n\nexport function setAppBuildId(buildId: string) {\n  globalBuildId = buildId\n}\n\nexport function getAppBuildId(): string {\n  return globalBuildId\n}\n","// http://www.cse.yorku.ca/~oz/hash.html\n// More specifically, 32-bit hash via djbxor\n// (ref: https://gist.github.com/eplawless/52813b1d8ad9af510d85?permalink_comment_id=3367765#gistcomment-3367765)\n// This is due to number type differences between rust for turbopack to js number types,\n// where rust does not have easy way to repreesnt js's 53-bit float number type for the matching\n// overflow behavior. This is more `correct` in terms of having canonical hash across different runtime / implementation\n// as can gaurantee determinstic output from 32bit hash.\nexport function djb2Hash(str: string) {\n  let hash = 5381\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = ((hash << 5) + hash + char) & 0xffffffff\n  }\n  return hash >>> 0\n}\n\nexport function hexHash(str: string) {\n  return djb2Hash(str).toString(36).slice(0, 5)\n}\n","import { hexHash } from '../../hash'\n\nexport function computeCacheBustingSearchParam(\n  prefetchHeader: '1' | '2' | '0' | undefined,\n  segmentPrefetchHeader: string | string[] | undefined,\n  stateTreeHeader: string | string[] | undefined,\n  nextUrlHeader: string | string[] | undefined\n): string {\n  if (\n    (prefetchHeader === undefined || prefetchHeader === '0') &&\n    segmentPrefetchHeader === undefined &&\n    stateTreeHeader === undefined &&\n    nextUrlHeader === undefined\n  ) {\n    return ''\n  }\n  return hexHash(\n    [\n      prefetchHeader || '0',\n      segmentPrefetchHeader || '0',\n      stateTreeHeader || '0',\n      nextUrlHeader || '0',\n    ].join(',')\n  )\n}\n","'use client'\n\nimport { computeCacheBustingSearchParam } from '../../../shared/lib/router/utils/cache-busting-search-param'\nimport {\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_URL,\n  NEXT_RSC_UNION_QUERY,\n} from '../app-router-headers'\nimport type { RequestHeaders } from './fetch-server-response'\n\n/**\n * Mutates the provided URL by adding a cache-busting search parameter for CDNs that don't\n * support custom headers. This helps avoid caching conflicts by making each request unique.\n *\n * Rather than relying on the Vary header which some CDNs ignore, we append a search param\n * to create a unique URL that forces a fresh request.\n *\n * Example:\n * URL before: https://example.com/path?query=1\n * URL after: https://example.com/path?query=1&_rsc=abc123\n *\n * Note: This function mutates the input URL directly and does not return anything.\n *\n * TODO: Since we need to use a search param anyway, we could simplify by removing the custom\n * headers approach entirely and just use search params.\n */\nexport const setCacheBustingSearchParam = (\n  url: URL,\n  headers: RequestHeaders\n): void => {\n  const uniqueCacheKey = computeCacheBustingSearchParam(\n    headers[NEXT_ROUTER_PREFETCH_HEADER],\n    headers[NEXT_ROUTER_SEGMENT_PREFETCH_HEADER],\n    headers[NEXT_ROUTER_STATE_TREE_HEADER],\n    headers[NEXT_URL]\n  )\n  setCacheBustingSearchParamWithHash(url, uniqueCacheKey)\n}\n\n/**\n * Sets a cache-busting search parameter on a URL using a provided hash value.\n *\n * This function performs the same logic as `setCacheBustingSearchParam` but accepts\n * a pre-computed hash instead of computing it from headers.\n *\n * Example:\n * URL before: https://example.com/path?query=1\n * hash: \"abc123\"\n * URL after: https://example.com/path?query=1&_rsc=abc123\n *\n * If the hash is null, we will set `_rsc` search param without a value.\n * Like this: https://example.com/path?query=1&_rsc\n *\n * Note: This function mutates the input URL directly and does not return anything.\n */\nexport const setCacheBustingSearchParamWithHash = (\n  url: URL,\n  hash: string\n): void => {\n  /**\n   * Note that we intentionally do not use `url.searchParams.set` here:\n   *\n   * const url = new URL('https://example.com/search?q=custom%20spacing');\n   * url.searchParams.set('_rsc', 'abc123');\n   * console.log(url.toString()); // Outputs: https://example.com/search?q=custom+spacing&_rsc=abc123\n   *                                                                             ^ <--- this is causing confusion\n   * This is in fact intended based on https://url.spec.whatwg.org/#interface-urlsearchparams, but\n   * we want to preserve the %20 as %20 if that's what the user passed in, hence the custom\n   * logic below.\n   */\n  const existingSearch = url.search\n  const rawQuery = existingSearch.startsWith('?')\n    ? existingSearch.slice(1)\n    : existingSearch\n\n  // Always remove any existing cache busting param and add a fresh one to ensure\n  // we have the correct value based on current request headers\n  const pairs = rawQuery\n    .split('&')\n    .filter((pair) => pair && !pair.startsWith(`${NEXT_RSC_UNION_QUERY}=`))\n\n  if (hash.length > 0) {\n    pairs.push(`${NEXT_RSC_UNION_QUERY}=${hash}`)\n  } else {\n    pairs.push(`${NEXT_RSC_UNION_QUERY}`)\n  }\n  url.search = pairs.length ? `?${pairs.join('&')}` : ''\n}\n","'use client'\n\n// TODO: Explicitly import from client.browser\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  createFromReadableStream as createFromReadableStreamBrowser,\n  createFromFetch as createFromFetchBrowser,\n} from 'react-server-dom-webpack/client'\n\nimport type {\n  FlightRouterState,\n  NavigationFlightResponse,\n} from '../../../shared/lib/app-router-types'\n\nimport {\n  type NEXT_ROUTER_PREFETCH_HEADER,\n  type NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_RSC_UNION_QUERY,\n  NEXT_URL,\n  RSC_HEADER,\n  RSC_CONTENT_TYPE_HEADER,\n  NEXT_HMR_REFRESH_HEADER,\n  NEXT_DID_POSTPONE_HEADER,\n  NEXT_ROUTER_STALE_TIME_HEADER,\n  NEXT_HTML_REQUEST_ID_HEADER,\n  NEXT_REQUEST_ID_HEADER,\n} from '../app-router-headers'\nimport { callServer } from '../../app-call-server'\nimport { findSourceMapURL } from '../../app-find-source-map-url'\nimport {\n  normalizeFlightData,\n  prepareFlightRouterStateForRequest,\n  type NormalizedFlightData,\n} from '../../flight-data-helpers'\nimport { getAppBuildId } from '../../app-build-id'\nimport { setCacheBustingSearchParam } from './set-cache-busting-search-param'\nimport {\n  getRenderedSearch,\n  urlToUrlWithoutFlightMarker,\n} from '../../route-params'\nimport type { NormalizedSearch } from '../segment-cache/cache-key'\nimport { getDeploymentId } from '../../../shared/lib/deployment-id'\n\nconst createFromReadableStream =\n  createFromReadableStreamBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromReadableStream']\nconst createFromFetch =\n  createFromFetchBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromFetch']\n\nlet createDebugChannel:\n  | typeof import('../../dev/debug-channel').createDebugChannel\n  | undefined\n\nif (\n  process.env.NODE_ENV !== 'production' &&\n  process.env.__NEXT_REACT_DEBUG_CHANNEL\n) {\n  createDebugChannel = (\n    require('../../dev/debug-channel') as typeof import('../../dev/debug-channel')\n  ).createDebugChannel\n}\n\nexport interface FetchServerResponseOptions {\n  readonly flightRouterState: FlightRouterState\n  readonly nextUrl: string | null\n  readonly isHmrRefresh?: boolean\n}\n\ntype SpaFetchServerResponseResult = {\n  flightData: NormalizedFlightData[]\n  canonicalUrl: URL\n  renderedSearch: NormalizedSearch\n  couldBeIntercepted: boolean\n  prerendered: boolean\n  postponed: boolean\n  staleTime: number\n  debugInfo: Array<any> | null\n}\n\ntype MpaFetchServerResponseResult = string\n\nexport type FetchServerResponseResult =\n  | MpaFetchServerResponseResult\n  | SpaFetchServerResponseResult\n\nexport type RequestHeaders = {\n  [RSC_HEADER]?: '1'\n  [NEXT_ROUTER_STATE_TREE_HEADER]?: string\n  [NEXT_URL]?: string\n  [NEXT_ROUTER_PREFETCH_HEADER]?: '1' | '2'\n  [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]?: string\n  'x-deployment-id'?: string\n  [NEXT_HMR_REFRESH_HEADER]?: '1'\n  // A header that is only added in test mode to assert on fetch priority\n  'Next-Test-Fetch-Priority'?: RequestInit['priority']\n  [NEXT_HTML_REQUEST_ID_HEADER]?: string // dev-only\n  [NEXT_REQUEST_ID_HEADER]?: string // dev-only\n}\n\nfunction doMpaNavigation(url: string): FetchServerResponseResult {\n  return urlToUrlWithoutFlightMarker(new URL(url, location.origin)).toString()\n}\n\nlet isPageUnloading = false\n\nif (typeof window !== 'undefined') {\n  // Track when the page is unloading, e.g. due to reloading the page or\n  // performing hard navigations. This allows us to suppress error logging when\n  // the browser cancels in-flight requests during page unload.\n  window.addEventListener('pagehide', () => {\n    isPageUnloading = true\n  })\n\n  // Reset the flag on pageshow, e.g. when navigating back and the JavaScript\n  // execution context is restored by the browser.\n  window.addEventListener('pageshow', () => {\n    isPageUnloading = false\n  })\n}\n\n/**\n * Fetch the flight data for the provided url. Takes in the current router state\n * to decide what to render server-side.\n */\nexport async function fetchServerResponse(\n  url: URL,\n  options: FetchServerResponseOptions\n): Promise<FetchServerResponseResult> {\n  const { flightRouterState, nextUrl } = options\n\n  const headers: RequestHeaders = {\n    // Enable flight response\n    [RSC_HEADER]: '1',\n    // Provide the current router state\n    [NEXT_ROUTER_STATE_TREE_HEADER]: prepareFlightRouterStateForRequest(\n      flightRouterState,\n      options.isHmrRefresh\n    ),\n  }\n\n  if (process.env.NODE_ENV === 'development' && options.isHmrRefresh) {\n    headers[NEXT_HMR_REFRESH_HEADER] = '1'\n  }\n\n  if (nextUrl) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  // In static export mode, we need to modify the URL to request the .txt file,\n  // but we should preserve the original URL for the canonical URL and error handling.\n  const originalUrl = url\n\n  try {\n    if (process.env.NODE_ENV === 'production') {\n      if (process.env.__NEXT_CONFIG_OUTPUT === 'export') {\n        // In \"output: export\" mode, we can't rely on headers to distinguish\n        // between HTML and RSC requests. Instead, we append an extra prefix\n        // to the request.\n        url = new URL(url)\n        if (url.pathname.endsWith('/')) {\n          url.pathname += 'index.txt'\n        } else {\n          url.pathname += '.txt'\n        }\n      }\n    }\n\n    // Typically, during a navigation, we decode the response using Flight's\n    // `createFromFetch` API, which accepts a `fetch` promise.\n    // TODO: Remove this check once the old PPR flag is removed\n    const isLegacyPPR =\n      process.env.__NEXT_PPR && !process.env.__NEXT_CACHE_COMPONENTS\n    const shouldImmediatelyDecode = !isLegacyPPR\n    const res = await createFetch<NavigationFlightResponse>(\n      url,\n      headers,\n      'auto',\n      shouldImmediatelyDecode\n    )\n\n    const responseUrl = urlToUrlWithoutFlightMarker(new URL(res.url))\n    const canonicalUrl = res.redirected ? responseUrl : originalUrl\n\n    const contentType = res.headers.get('content-type') || ''\n    const interception = !!res.headers.get('vary')?.includes(NEXT_URL)\n    const postponed = !!res.headers.get(NEXT_DID_POSTPONE_HEADER)\n    const staleTimeHeaderSeconds = res.headers.get(\n      NEXT_ROUTER_STALE_TIME_HEADER\n    )\n    const staleTime =\n      staleTimeHeaderSeconds !== null\n        ? parseInt(staleTimeHeaderSeconds, 10) * 1000\n        : -1\n    let isFlightResponse = contentType.startsWith(RSC_CONTENT_TYPE_HEADER)\n\n    if (process.env.NODE_ENV === 'production') {\n      if (process.env.__NEXT_CONFIG_OUTPUT === 'export') {\n        if (!isFlightResponse) {\n          isFlightResponse = contentType.startsWith('text/plain')\n        }\n      }\n    }\n\n    // If fetch returns something different than flight response handle it like a mpa navigation\n    // If the fetch was not 200, we also handle it like a mpa navigation\n    if (!isFlightResponse || !res.ok || !res.body) {\n      // in case the original URL came with a hash, preserve it before redirecting to the new URL\n      if (url.hash) {\n        responseUrl.hash = url.hash\n      }\n\n      return doMpaNavigation(responseUrl.toString())\n    }\n\n    // We may navigate to a page that requires a different Webpack runtime.\n    // In prod, every page will have the same Webpack runtime.\n    // In dev, the Webpack runtime is minimal for each page.\n    // We need to ensure the Webpack runtime is updated before executing client-side JS of the new page.\n    // TODO: This needs to happen in the Flight Client.\n    // Or Webpack needs to include the runtime update in the Flight response as\n    // a blocking script.\n    if (process.env.NODE_ENV !== 'production' && !process.env.TURBOPACK) {\n      await (\n        require('../../dev/hot-reloader/app/hot-reloader-app') as typeof import('../../dev/hot-reloader/app/hot-reloader-app')\n      ).waitForWebpackRuntimeHotUpdate()\n    }\n\n    let flightResponsePromise = res.flightResponse\n    if (flightResponsePromise === null) {\n      // Typically, `createFetch` would have already started decoding the\n      // Flight response. If it hasn't, though, we need to decode it now.\n      // TODO: This should only be reachable if legacy PPR is enabled (i.e. PPR\n      // without Cache Components). Remove this branch once legacy PPR\n      // is deleted.\n      const flightStream = postponed\n        ? createUnclosingPrefetchStream(res.body)\n        : res.body\n      flightResponsePromise =\n        createFromNextReadableStream<NavigationFlightResponse>(\n          flightStream,\n          headers\n        )\n    }\n\n    const flightResponse = await flightResponsePromise\n\n    if (getAppBuildId() !== flightResponse.b) {\n      return doMpaNavigation(res.url)\n    }\n\n    const normalizedFlightData = normalizeFlightData(flightResponse.f)\n    if (typeof normalizedFlightData === 'string') {\n      return doMpaNavigation(normalizedFlightData)\n    }\n\n    return {\n      flightData: normalizedFlightData,\n      canonicalUrl: canonicalUrl,\n      renderedSearch: getRenderedSearch(res),\n      couldBeIntercepted: interception,\n      prerendered: flightResponse.S,\n      postponed,\n      staleTime,\n      debugInfo: flightResponsePromise._debugInfo ?? null,\n    }\n  } catch (err) {\n    if (!isPageUnloading) {\n      console.error(\n        `Failed to fetch RSC payload for ${originalUrl}. Falling back to browser navigation.`,\n        err\n      )\n    }\n\n    // If fetch fails handle it like a mpa navigation\n    // TODO-APP: Add a test for the case where a CORS request fails, e.g. external url redirect coming from the response.\n    // See https://github.com/vercel/next.js/issues/43605#issuecomment-1451617521 for a reproduction.\n    return originalUrl.toString()\n  }\n}\n\n// This is a subset of the standard Response type. We use a custom type for\n// this so we can limit which details about the response leak into the rest of\n// the codebase. For example, there's some custom logic for manually following\n// redirects, so \"redirected\" in this type could be a composite of multiple\n// browser fetch calls; however, this fact should not leak to the caller.\nexport type RSCResponse<T> = {\n  ok: boolean\n  redirected: boolean\n  headers: Headers\n  body: ReadableStream<Uint8Array> | null\n  status: number\n  url: string\n  flightResponse: (Promise<T> & { _debugInfo?: Array<any> }) | null\n}\n\nexport async function createFetch<T>(\n  url: URL,\n  headers: RequestHeaders,\n  fetchPriority: 'auto' | 'high' | 'low' | null,\n  shouldImmediatelyDecode: boolean,\n  signal?: AbortSignal\n): Promise<RSCResponse<T>> {\n  // TODO: In output: \"export\" mode, the headers do nothing. Omit them (and the\n  // cache busting search param) from the request so they're\n  // maximally cacheable.\n\n  if (process.env.__NEXT_TEST_MODE && fetchPriority !== null) {\n    headers['Next-Test-Fetch-Priority'] = fetchPriority\n  }\n\n  const deploymentId = getDeploymentId()\n  if (deploymentId) {\n    headers['x-deployment-id'] = deploymentId\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (self.__next_r) {\n      headers[NEXT_HTML_REQUEST_ID_HEADER] = self.__next_r\n    }\n\n    // Create a new request ID for the server action request. The server uses\n    // this to tag debug information sent via WebSocket to the client, which\n    // then routes those chunks to the debug channel associated with this ID.\n    headers[NEXT_REQUEST_ID_HEADER] = crypto\n      .getRandomValues(new Uint32Array(1))[0]\n      .toString(16)\n  }\n\n  const fetchOptions: RequestInit = {\n    // Backwards compat for older browsers. `same-origin` is the default in modern browsers.\n    credentials: 'same-origin',\n    headers,\n    priority: fetchPriority || undefined,\n    signal,\n  }\n  // `fetchUrl` is slightly different from `url` because we add a cache-busting\n  // search param to it. This should not leak outside of this function, so we\n  // track them separately.\n  let fetchUrl = new URL(url)\n  setCacheBustingSearchParam(fetchUrl, headers)\n  let fetchPromise = fetch(fetchUrl, fetchOptions)\n  // Immediately pass the fetch promise to the Flight client so that the debug\n  // info includes the latency from the client to the server. The internal timer\n  // in React starts as soon as `createFromFetch` is called.\n  //\n  // The only case where we don't do this is during a prefetch, because we have\n  // to do some extra processing of the response stream (see\n  // `createUnclosingPrefetchStream`). But this is fine, because a top-level\n  // prefetch response never blocks a navigation; if it hasn't already been\n  // written into the cache by the time the navigation happens, the router will\n  // go straight to a dynamic request.\n  let flightResponsePromise = shouldImmediatelyDecode\n    ? createFromNextFetch<T>(fetchPromise, headers)\n    : null\n  let browserResponse = await fetchPromise\n\n  // If the server responds with a redirect (e.g. 307), and the redirected\n  // location does not contain the cache busting search param set in the\n  // original request, the response is likely invalid  when following the\n  // redirect, the browser forwards the request headers, but since the cache\n  // busting search param is missing, the server will reject the request due to\n  // a mismatch.\n  //\n  // Ideally, we would be able to intercept the redirect response and perform it\n  // manually, instead of letting the browser automatically follow it, but this\n  // is not allowed by the fetch API.\n  //\n  // So instead, we must \"replay\" the redirect by fetching the new location\n  // again, but this time we'll append the cache busting search param to prevent\n  // a mismatch.\n  //\n  // TODO: We can optimize Next.js's built-in middleware APIs by returning a\n  // custom status code, to prevent the browser from automatically following it.\n  //\n  // This does not affect Server Action-based redirects; those are encoded\n  // differently, as part of the Flight body. It only affects redirects that\n  // occur in a middleware or a third-party proxy.\n\n  let redirected = browserResponse.redirected\n  if (process.env.__NEXT_CLIENT_VALIDATE_RSC_REQUEST_HEADERS) {\n    // This is to prevent a redirect loop. Same limit used by Chrome.\n    const MAX_REDIRECTS = 20\n    for (let n = 0; n < MAX_REDIRECTS; n++) {\n      if (!browserResponse.redirected) {\n        // The server did not perform a redirect.\n        break\n      }\n      const responseUrl = new URL(browserResponse.url, fetchUrl)\n      if (responseUrl.origin !== fetchUrl.origin) {\n        // The server redirected to an external URL. The rest of the logic below\n        // is not relevant, because it only applies to internal redirects.\n        break\n      }\n      if (\n        responseUrl.searchParams.get(NEXT_RSC_UNION_QUERY) ===\n        fetchUrl.searchParams.get(NEXT_RSC_UNION_QUERY)\n      ) {\n        // The redirected URL already includes the cache busting search param.\n        // This was probably intentional. Regardless, there's no reason to\n        // issue another request to this URL because it already has the param\n        // value that we would have added below.\n        break\n      }\n      // The RSC request was redirected. Assume the response is invalid.\n      //\n      // Append the cache busting search param to the redirected URL and\n      // fetch again.\n      // TODO: We should abort the previous request.\n      fetchUrl = new URL(responseUrl)\n      setCacheBustingSearchParam(fetchUrl, headers)\n      fetchPromise = fetch(fetchUrl, fetchOptions)\n      flightResponsePromise = shouldImmediatelyDecode\n        ? createFromNextFetch<T>(fetchPromise, headers)\n        : null\n      browserResponse = await fetchPromise\n      // We just performed a manual redirect, so this is now true.\n      redirected = true\n    }\n  }\n\n  // Remove the cache busting search param from the response URL, to prevent it\n  // from leaking outside of this function.\n  const responseUrl = new URL(browserResponse.url, fetchUrl)\n  responseUrl.searchParams.delete(NEXT_RSC_UNION_QUERY)\n\n  const rscResponse: RSCResponse<T> = {\n    url: responseUrl.href,\n\n    // This is true if any redirects occurred, either automatically by the\n    // browser, or manually by us. So it's different from\n    // `browserResponse.redirected`, which only tells us whether the browser\n    // followed a redirect, and only for the last response in the chain.\n    redirected,\n\n    // These can be copied from the last browser response we received. We\n    // intentionally only expose the subset of fields that are actually used\n    // elsewhere in the codebase.\n    ok: browserResponse.ok,\n    headers: browserResponse.headers,\n    body: browserResponse.body,\n    status: browserResponse.status,\n\n    // This is the exact promise returned by `createFromFetch`. It contains\n    // debug information that we need to transfer to any derived promises that\n    // are later rendered by React.\n    flightResponse: flightResponsePromise,\n  }\n\n  return rscResponse\n}\n\nexport function createFromNextReadableStream<T>(\n  flightStream: ReadableStream<Uint8Array>,\n  requestHeaders: RequestHeaders\n): Promise<T> {\n  return createFromReadableStream(flightStream, {\n    callServer,\n    findSourceMapURL,\n    debugChannel: createDebugChannel && createDebugChannel(requestHeaders),\n  })\n}\n\nfunction createFromNextFetch<T>(\n  promiseForResponse: Promise<Response>,\n  requestHeaders: RequestHeaders\n): Promise<T> & { _debugInfo?: Array<any> } {\n  return createFromFetch(promiseForResponse, {\n    callServer,\n    findSourceMapURL,\n    debugChannel: createDebugChannel && createDebugChannel(requestHeaders),\n  })\n}\n\nfunction createUnclosingPrefetchStream(\n  originalFlightStream: ReadableStream<Uint8Array>\n): ReadableStream<Uint8Array> {\n  // When PPR is enabled, prefetch streams may contain references that never\n  // resolve, because that's how we encode dynamic data access. In the decoded\n  // object returned by the Flight client, these are reified into hanging\n  // promises that suspend during render, which is effectively what we want.\n  // The UI resolves when it switches to the dynamic data stream\n  // (via useDeferredValue(dynamic, static)).\n  //\n  // However, the Flight implementation currently errors if the server closes\n  // the response before all the references are resolved. As a cheat to work\n  // around this, we wrap the original stream in a new stream that never closes,\n  // and therefore doesn't error.\n  const reader = originalFlightStream.getReader()\n  return new ReadableStream({\n    async pull(controller) {\n      while (true) {\n        const { done, value } = await reader.read()\n        if (!done) {\n          // Pass to the target stream and keep consuming the Flight response\n          // from the server.\n          controller.enqueue(value)\n          continue\n        }\n        // The server stream has closed. Exit, but intentionally do not close\n        // the target stream.\n        return\n      }\n    },\n  })\n}\n","import { deleteMapEntry } from './cache-map'\nimport type { UnknownMapEntry } from './cache-map'\n\n// We use an LRU for memory management. We must update this whenever we add or\n// remove a new cache entry, or when an entry changes size.\n\nlet head: UnknownMapEntry | null = null\nlet didScheduleCleanup: boolean = false\nlet lruSize: number = 0\n\n// TODO: I chose the max size somewhat arbitrarily. Consider setting this based\n// on navigator.deviceMemory, or some other heuristic. We should make this\n// customizable via the Next.js config, too.\nconst maxLruSize = 50 * 1024 * 1024 // 50 MB\n\nexport function lruPut(node: UnknownMapEntry) {\n  if (head === node) {\n    // Already at the head\n    return\n  }\n  const prev = node.prev\n  const next = node.next\n  if (next === null || prev === null) {\n    // This is an insertion\n    lruSize += node.size\n    // Whenever we add an entry, we need to check if we've exceeded the\n    // max size. We don't evict entries immediately; they're evicted later in\n    // an asynchronous task.\n    ensureCleanupIsScheduled()\n  } else {\n    // This is a move. Remove from its current position.\n    prev.next = next\n    next.prev = prev\n  }\n\n  // Move to the front of the list\n  if (head === null) {\n    // This is the first entry\n    node.prev = node\n    node.next = node\n  } else {\n    // Add to the front of the list\n    const tail = head.prev\n    node.prev = tail\n    // In practice, this is never null, but that isn't encoded in the type\n    if (tail !== null) {\n      tail.next = node\n    }\n    node.next = head\n    head.prev = node\n  }\n  head = node\n}\n\nexport function updateLruSize(node: UnknownMapEntry, newNodeSize: number) {\n  // This is a separate function from `put` so that we can resize the entry\n  // regardless of whether it's currently being tracked by the LRU.\n  const prevNodeSize = node.size\n  node.size = newNodeSize\n  if (node.next === null) {\n    // This entry is not currently being tracked by the LRU.\n    return\n  }\n  // Update the total LRU size\n  lruSize = lruSize - prevNodeSize + newNodeSize\n  ensureCleanupIsScheduled()\n}\n\nexport function deleteFromLru(deleted: UnknownMapEntry) {\n  const next = deleted.next\n  const prev = deleted.prev\n  if (next !== null && prev !== null) {\n    lruSize -= deleted.size\n\n    deleted.next = null\n    deleted.prev = null\n\n    // Remove from the list\n    if (head === deleted) {\n      // Update the head\n      if (next === head) {\n        // This was the last entry\n        head = null\n      } else {\n        head = next\n        prev.next = next\n        next.prev = prev\n      }\n    } else {\n      prev.next = next\n      next.prev = prev\n    }\n  } else {\n    // Already deleted\n  }\n}\n\nfunction ensureCleanupIsScheduled() {\n  if (didScheduleCleanup || lruSize <= maxLruSize) {\n    return\n  }\n  didScheduleCleanup = true\n  requestCleanupCallback(cleanup)\n}\n\nfunction cleanup() {\n  didScheduleCleanup = false\n\n  // Evict entries until we're at 90% capacity. We can assume this won't\n  // infinite loop because even if `maxLruSize` were 0, eventually\n  // `deleteFromLru` sets `head` to `null` when we run out entries.\n  const ninetyPercentMax = maxLruSize * 0.9\n  while (lruSize > ninetyPercentMax && head !== null) {\n    const tail = head.prev\n    // In practice, this is never null, but that isn't encoded in the type\n    if (tail !== null) {\n      // Delete the entry from the map. In turn, this will remove it from\n      // the LRU.\n      deleteMapEntry(tail)\n    }\n  }\n}\n\nconst requestCleanupCallback =\n  typeof requestIdleCallback === 'function'\n    ? requestIdleCallback\n    : (cb: () => void) => setTimeout(cb, 0)\n","import type { VaryPath } from './vary-path'\nimport { lruPut, updateLruSize, deleteFromLru } from './lru'\n\n/**\n * A specialized data type for storing multi-key cache entries.\n *\n * The basic structure is a map whose keys are tuples, called the keypath.\n * When querying the cache, keypaths are compared per-element.\n *\n * Example:\n *   set(map, ['https://localhost', 'foo/bar/baz'], 'yay');\n *   get(map, ['https://localhost', 'foo/bar/baz']) -> 'yay'\n *\n * NOTE: Array syntax is used in these examples for illustration purposes, but\n * in reality the paths are lists.\n * \n * The parts of the keypath represent the different inputs that contribute\n * to the entry value. To illustrate, if you were to use this data type to store\n * HTTP responses, the keypath would include the URL and everything listed by\n * the Vary header.\n * \n * See vary-path.ts for more details.\n *\n * The order of elements in a keypath must be consistent between lookups to\n * be considered the same, but besides that, the order of the keys is not\n * semantically meaningful.\n *\n * Keypaths may include a special kind of key called Fallback. When an entry is\n * stored with Fallback as part of its keypath, it means that the entry does not\n * vary by that key. When querying the cache, if an exact match is not found for\n * a keypath, the cache will check for a Fallback match instead. Each element of\n * the keypath may have a Fallback, so retrieval is an O(n ^ 2) operation, but\n * it's expected that keypaths are relatively short.\n *\n * Example:\n *   set(cacheMap, ['store', 'product', 1], PRODUCT_PAGE_1);\n *   set(cacheMap, ['store', 'product', Fallback], GENERIC_PRODUCT_PAGE);\n *\n *   // Exact match\n *   get(cacheMap, ['store', 'product', 1]) -> PRODUCT_PAGE_1\n *\n *   // Fallback match\n *   get(cacheMap, ['store', 'product', 2]) -> GENERIC_PRODUCT_PAGE\n *\n * Because we have the Fallback mechanism, we can impose a constraint that\n * regular JS maps do not have: a value cannot be stored at multiple keypaths\n * simultaneously. These cases should be expressed with Fallback keys instead.\n *\n * Additionally, because values only exist at a single keypath at a time, we\n * can optimize successive lookups by caching the internal map entry on the\n * value itself, using the `ref` field. This is especially useful because it\n * lets us skip the O(n ^ 2) lookup that occurs when Fallback entries\n * are present.\n *\n\n * How to decide if stuff belongs in here, or in cache.ts?\n * -------------------------------------------------------\n * \n * Anything to do with retrival, lifetimes, or eviction needs to go in this\n * module because it affects the fallback algorithm. For example, when\n * performing a lookup, if an entry is stale, it needs to be treated as\n * semantically equivalent to if the entry was not present at all.\n * \n * If there's logic that's not related to the fallback algorithm, though, we\n * should prefer to put it in cache.ts.\n */\n\n// The protocol that values must implement. In practice, the only two types that\n// we ever actually deal with in this module are RouteCacheEntry and\n// SegmentCacheEntry; this is just to keep track of the coupling so we don't\n// leak concerns between the modules unnecessarily.\nexport interface MapValue {\n  ref: UnknownMapEntry | null\n  size: number\n  staleAt: number\n  version: number\n}\n\n/**\n * Represents a node in the cache map and LRU.\n * MapEntry<V> structurally satisfies this interface for any V extends MapValue.\n *\n * The LRU can contain entries of different value types\n * (e.g., both RouteCacheEntry and SegmentCacheEntry). This interface captures\n * the common structure needed for cache map and LRU operations without\n * requiring knowledge of the specific value type.\n */\nexport interface MapEntry<V extends MapValue> {\n  // Cache map structure fields\n  parent: MapEntry<V> | null\n  key: unknown\n  map: Map<unknown, MapEntry<V>> | null\n  value: V | null\n\n  // LRU linked list fields\n  prev: MapEntry<V> | null\n  next: MapEntry<V> | null\n  size: number\n}\n\n/**\n * A looser type for MapEntry\n * This allows the LRU to work with entries of different\n * value types while still providing type safety.\n *\n * The `map` field lets Map<unknown, MapEntry<V>> be assignable to this\n * type since we're only reading from the map, not inserting into it.\n */\nexport type UnknownMapEntry = {\n  parent: UnknownMapEntry | null\n  key: unknown\n  map: Pick<Map<unknown, UnknownMapEntry>, 'get' | 'delete' | 'size'> | null\n  value: MapValue | null\n\n  prev: UnknownMapEntry | null\n  next: UnknownMapEntry | null\n  size: number\n}\n\n// The CacheMap type is just the root entry of the map.\nexport type CacheMap<V extends MapValue> = MapEntry<V>\n\nexport type FallbackType = { __brand: 'Fallback' }\nexport const Fallback = {} as FallbackType\n\n// This is a special internal key that is used for \"revalidation\" entries. It's\n// an implementation detail that shouldn't leak outside of this module.\nconst Revalidation = {}\n\nexport function createCacheMap<V extends MapValue>(): CacheMap<V> {\n  const cacheMap: MapEntry<V> = {\n    parent: null,\n    key: null,\n    value: null,\n    map: null,\n\n    // LRU-related fields\n    prev: null,\n    next: null,\n    size: 0,\n  }\n  return cacheMap\n}\n\nfunction getOrInitialize<V extends MapValue>(\n  cacheMap: CacheMap<V>,\n  keys: VaryPath,\n  isRevalidation: boolean\n): MapEntry<V> {\n  // Go through each level of keys until we find the entry that matches, or\n  // create a new entry if one doesn't exist.\n  //\n  // This function will only return entries that match the keypath _exactly_.\n  // Unlike getWithFallback, it will not access fallback entries unless it's\n  // explicitly part of the keypath.\n  let entry = cacheMap\n  let remainingKeys: VaryPath | null = keys\n  let key: unknown | null = null\n  while (true) {\n    const previousKey = key\n    if (remainingKeys !== null) {\n      key = remainingKeys.value\n      remainingKeys = remainingKeys.parent\n    } else if (isRevalidation && previousKey !== Revalidation) {\n      // During a revalidation, we append an internal \"Revalidation\" key to\n      // the end of the keypath. The \"normal\" entry is its parent.\n\n      // However, if the parent entry is currently empty, we don't need to store\n      // this as a revalidation entry. Just insert the revalidation into the\n      // normal slot.\n      if (entry.value === null) {\n        return entry\n      }\n\n      // Otheriwse, create a child entry.\n      key = Revalidation\n    } else {\n      // There are no more keys. This is the terminal entry.\n      break\n    }\n\n    let map = entry.map\n    if (map !== null) {\n      const existingEntry = map.get(key)\n      if (existingEntry !== undefined) {\n        // Found a match. Keep going.\n        entry = existingEntry\n        continue\n      }\n    } else {\n      map = new Map()\n      entry.map = map\n    }\n    // No entry exists yet at this level. Create a new one.\n    const newEntry: MapEntry<V> = {\n      parent: entry,\n      key,\n      value: null,\n      map: null,\n\n      // LRU-related fields\n      prev: null,\n      next: null,\n      size: 0,\n    }\n    map.set(key, newEntry)\n    entry = newEntry\n  }\n\n  return entry\n}\n\nexport function getFromCacheMap<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  rootEntry: CacheMap<V>,\n  keys: VaryPath,\n  isRevalidation: boolean\n): V | null {\n  const entry = getEntryWithFallbackImpl(\n    now,\n    currentCacheVersion,\n    rootEntry,\n    keys,\n    isRevalidation,\n    0\n  )\n  if (entry === null || entry.value === null) {\n    return null\n  }\n  // This is an LRU access. Move the entry to the front of the list.\n  lruPut(entry)\n  return entry.value\n}\n\nexport function isValueExpired(\n  now: number,\n  currentCacheVersion: number,\n  value: MapValue\n): boolean {\n  return value.staleAt <= now || value.version < currentCacheVersion\n}\n\nfunction lazilyEvictIfNeeded<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  entry: MapEntry<V>\n) {\n  // We have a matching entry, but before we can return it, we need to check if\n  // it's still fresh. Otherwise it should be treated the same as a cache miss.\n\n  if (entry.value === null) {\n    // This entry has no value, so there's nothing to evict.\n    return entry\n  }\n\n  const value = entry.value\n  if (isValueExpired(now, currentCacheVersion, value)) {\n    // The value expired. Lazily evict it from the cache, and return null. This\n    // is conceptually the same as a cache miss.\n    deleteMapEntry(entry)\n    return null\n  }\n\n  // The matched entry has not expired. Return it.\n  return entry\n}\n\nfunction getEntryWithFallbackImpl<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  entry: MapEntry<V>,\n  keys: VaryPath | null,\n  isRevalidation: boolean,\n  previousKey: unknown | null\n): MapEntry<V> | null {\n  // This is similar to getExactEntry, but if an exact match is not found for\n  // a key, it will return the fallback entry instead. This is recursive at\n  // every level, e.g. an entry with keypath [a, Fallback, c, Fallback] is\n  // valid match for [a, b, c, d].\n  //\n  // It will return the most specific match available.\n  let key\n  let remainingKeys: VaryPath | null\n  if (keys !== null) {\n    key = keys.value\n    remainingKeys = keys.parent\n  } else if (isRevalidation && previousKey !== Revalidation) {\n    // During a revalidation, we append an internal \"Revalidation\" key to\n    // the end of the keypath.\n    key = Revalidation\n    remainingKeys = null\n  } else {\n    // There are no more keys. This is the terminal entry.\n\n    // TODO: When performing a lookup during a navigation, as opposed to a\n    // prefetch, we may want to skip entries that are Pending if there's also\n    // a Fulfilled fallback entry. Tricky to say, though, since if it's\n    // already pending, it's likely to stream in soon. Maybe we could do this\n    // just on slow connections and offline mode.\n\n    return lazilyEvictIfNeeded(now, currentCacheVersion, entry)\n  }\n  const map = entry.map\n  if (map !== null) {\n    const existingEntry = map.get(key)\n    if (existingEntry !== undefined) {\n      // Found an exact match for this key. Keep searching.\n      const result = getEntryWithFallbackImpl(\n        now,\n        currentCacheVersion,\n        existingEntry,\n        remainingKeys,\n        isRevalidation,\n        key\n      )\n      if (result !== null) {\n        return result\n      }\n    }\n    // No match found for this key. Check if there's a fallback.\n    const fallbackEntry = map.get(Fallback)\n    if (fallbackEntry !== undefined) {\n      // Found a fallback for this key. Keep searching.\n      return getEntryWithFallbackImpl(\n        now,\n        currentCacheVersion,\n        fallbackEntry,\n        remainingKeys,\n        isRevalidation,\n        key\n      )\n    }\n  }\n  return null\n}\n\nexport function setInCacheMap<V extends MapValue>(\n  cacheMap: CacheMap<V>,\n  keys: VaryPath,\n  value: V,\n  isRevalidation: boolean\n): void {\n  // Add a value to the map at the given keypath. If the value is already\n  // part of the map, it's removed from its previous keypath. (NOTE: This is\n  // unlike a regular JS map, but the behavior is intentional.)\n  const entry = getOrInitialize(cacheMap, keys, isRevalidation)\n  setMapEntryValue(entry, value)\n\n  // This is an LRU access. Move the entry to the front of the list.\n  lruPut(entry)\n  updateLruSize(entry, value.size)\n}\n\nfunction setMapEntryValue(entry: UnknownMapEntry, value: MapValue): void {\n  if (entry.value !== null) {\n    // There's already a value at the given keypath. Disconnect the old value\n    // from the map. We're not calling `deleteMapEntry` here because the\n    // entry itself is still in the map. We just want to overwrite its value.\n    dropRef(entry.value)\n    entry.value = null\n  }\n\n  // This value may already be in the map at a different keypath.\n  // Grab a reference before we overwrite it.\n  const oldEntry = value.ref\n\n  entry.value = value\n  value.ref = entry\n\n  updateLruSize(entry, value.size)\n\n  if (oldEntry !== null && oldEntry !== entry && oldEntry.value === value) {\n    // This value is already in the map at a different keypath in the map.\n    // Values only exist at a single keypath at a time. Remove it from the\n    // previous keypath.\n    //\n    // Note that only the internal map entry is garbage collected; we don't\n    // call `dropRef` here because it's still in the map, just\n    // at a new keypath (the one we just set, above).\n    deleteMapEntry(oldEntry)\n  }\n}\n\nexport function deleteFromCacheMap(value: MapValue): void {\n  const entry = value.ref\n  if (entry === null) {\n    // This value is not a member of any map.\n    return\n  }\n\n  dropRef(value)\n  deleteMapEntry(entry)\n}\n\nfunction dropRef(value: MapValue): void {\n  // Drop the value from the map by setting its `ref` backpointer to\n  // null. This is a separate operation from `deleteMapEntry` because when\n  // re-keying a value we need to be able to delete the old, internal map\n  // entry without garbage collecting the value itself.\n  value.ref = null\n}\n\nexport function deleteMapEntry(entry: UnknownMapEntry): void {\n  // Delete the entry from the cache.\n  entry.value = null\n\n  deleteFromLru(entry)\n\n  // Check if we can garbage collect the entry.\n  const map = entry.map\n  if (map === null) {\n    // Since this entry has no value, and also no child entries, we can\n    // garbage collect it. Remove it from its parent, and keep garbage\n    // collecting the parents until we reach a non-empty entry.\n    let parent = entry.parent\n    let key = entry.key\n    while (parent !== null) {\n      const parentMap = parent.map\n      if (parentMap !== null) {\n        parentMap.delete(key)\n        if (parentMap.size === 0) {\n          // We just removed the last entry in the parent map.\n          parent.map = null\n          if (parent.value === null) {\n            // The parent node has no child entries, nor does it have a value\n            // on itself. It can be garbage collected. Keep going.\n            key = parent.key\n            parent = parent.parent\n            continue\n          }\n        }\n      }\n      // The parent is not empty. Stop garbage collecting.\n      break\n    }\n  } else {\n    // Check if there's a revalidating entry. If so, promote it to a\n    // \"normal\" entry, since the normal one was just deleted.\n    const revalidatingEntry = map.get(Revalidation)\n    if (revalidatingEntry !== undefined && revalidatingEntry.value !== null) {\n      setMapEntryValue(entry, revalidatingEntry.value)\n    }\n  }\n}\n\nexport function setSizeInCacheMap<V extends MapValue>(\n  value: V,\n  size: number\n): void {\n  const entry = value.ref\n  if (entry === null) {\n    // This value is not a member of any map.\n    return\n  }\n  // Except during initialization (when the size is set to 0), this is the only\n  // place the `size` field should be updated, to ensure it's in sync with the\n  // the LRU.\n  value.size = size\n  updateLruSize(entry, size)\n}\n","import { FetchStrategy } from './types'\nimport type {\n  NormalizedPathname,\n  NormalizedSearch,\n  NormalizedNextUrl,\n} from './cache-key'\nimport type { RouteTree } from './cache'\nimport { Fallback, type FallbackType } from './cache-map'\nimport { HEAD_REQUEST_KEY } from '../../../shared/lib/segment-cache/segment-value-encoding'\n\ntype Opaque<T, K> = T & { __brand: K }\n\n/**\n * A linked-list of all the params (or other param-like) inputs that a cache\n * entry may vary by. This is used by the CacheMap module to reuse cache entries\n * across different param values. If a param has a value of Fallback, it means\n * the cache entry is reusable for all possible values of that param. See\n * cache-map.ts for details.\n *\n * A segment's vary path is a pure function of a segment's position in a\n * particular route tree and the (post-rewrite) URL that is being queried. More\n * concretely, successive queries of the cache for the same segment always use\n * the same vary path.\n *\n * A route's vary path is simpler: it's comprised of the pathname, search\n * string, and Next-URL header.\n */\nexport type VaryPath = {\n  value: string | null | FallbackType\n  parent: VaryPath | null\n}\n\n// Because it's so important for vary paths to line up across cache accesses,\n// we use opaque type aliases to ensure these are only created within\n// this module.\n\n// requestKey -> searchParams -> nextUrl\nexport type RouteVaryPath = Opaque<\n  {\n    value: NormalizedPathname\n    parent: {\n      value: NormalizedSearch\n      parent: {\n        value: NormalizedNextUrl | null | FallbackType\n        parent: null\n      }\n    }\n  },\n  'RouteVaryPath'\n>\n\n// requestKey -> pathParams\nexport type LayoutVaryPath = Opaque<\n  {\n    value: string\n    parent: PartialSegmentVaryPath | null\n  },\n  'LayoutVaryPath'\n>\n\n// requestKey -> searchParams -> pathParams\nexport type PageVaryPath = Opaque<\n  {\n    value: string\n    parent: {\n      value: NormalizedSearch | FallbackType\n      parent: PartialSegmentVaryPath | null\n    }\n  },\n  'PageVaryPath'\n>\n\nexport type SegmentVaryPath = LayoutVaryPath | PageVaryPath\n\n// Intermediate type used when building a vary path during a recursive traversal\n// of the route tree.\nexport type PartialSegmentVaryPath = Opaque<VaryPath, 'PartialSegmentVaryPath'>\n\nexport function getRouteVaryPath(\n  pathname: NormalizedPathname,\n  search: NormalizedSearch,\n  nextUrl: NormalizedNextUrl | null\n): RouteVaryPath {\n  // requestKey -> searchParams -> nextUrl\n  const varyPath: VaryPath = {\n    value: pathname,\n    parent: {\n      value: search,\n      parent: {\n        value: nextUrl,\n        parent: null,\n      },\n    },\n  }\n  return varyPath as RouteVaryPath\n}\n\nexport function getFulfilledRouteVaryPath(\n  pathname: NormalizedPathname,\n  search: NormalizedSearch,\n  nextUrl: NormalizedNextUrl | null,\n  couldBeIntercepted: boolean\n): RouteVaryPath {\n  // This is called when a route's data is fulfilled. The cache entry will be\n  // re-keyed based on which inputs the response varies by.\n  // requestKey -> searchParams -> nextUrl\n  const varyPath: VaryPath = {\n    value: pathname,\n    parent: {\n      value: search,\n      parent: {\n        value: couldBeIntercepted ? nextUrl : Fallback,\n        parent: null,\n      },\n    },\n  }\n  return varyPath as RouteVaryPath\n}\n\nexport function appendLayoutVaryPath(\n  parentPath: PartialSegmentVaryPath | null,\n  cacheKey: string\n): PartialSegmentVaryPath {\n  const varyPathPart: VaryPath = {\n    value: cacheKey,\n    parent: parentPath,\n  }\n  return varyPathPart as PartialSegmentVaryPath\n}\n\nexport function finalizeLayoutVaryPath(\n  requestKey: string,\n  varyPath: PartialSegmentVaryPath | null\n): LayoutVaryPath {\n  const layoutVaryPath: VaryPath = {\n    value: requestKey,\n    parent: varyPath,\n  }\n  return layoutVaryPath as LayoutVaryPath\n}\n\nexport function finalizePageVaryPath(\n  requestKey: string,\n  renderedSearch: NormalizedSearch,\n  varyPath: PartialSegmentVaryPath | null\n): PageVaryPath {\n  // Unlike layouts, a page segment's vary path also includes the search string.\n  // requestKey -> searchParams -> pathParams\n  const pageVaryPath: VaryPath = {\n    value: requestKey,\n    parent: {\n      value: renderedSearch,\n      parent: varyPath,\n    },\n  }\n  return pageVaryPath as PageVaryPath\n}\n\nexport function finalizeMetadataVaryPath(\n  pageRequestKey: string,\n  renderedSearch: NormalizedSearch,\n  varyPath: PartialSegmentVaryPath | null\n): PageVaryPath {\n  // The metadata \"segment\" is not a real segment because it doesn't exist in\n  // the normal structure of the route tree, but in terms of caching, it\n  // behaves like a page segment because it varies by all the same params as\n  // a page.\n  //\n  // To keep the protocol for querying the server simple, the request key for\n  // the metadata does not include any path information. It's unnecessary from\n  // the server's perspective, because unlike page segments, there's only one\n  // metadata response per URL, i.e. there's no need to distinguish multiple\n  // parallel pages.\n  //\n  // However, this means the metadata request key is insufficient for\n  // caching the the metadata in the client cache, because on the client we\n  // use the request key to distinguish the metadata entry from all other\n  // page's metadata entries.\n  //\n  // So instead we create a simulated request key based on the page segment.\n  // Conceptually this is equivalent to the request key the server would have\n  // assigned the metadata segment if it treated it as part of the actual\n  // route structure.\n\n  // If there are multiple parallel pages, we use whichever is the first one.\n  // This is fine because the only difference between request keys for\n  // different parallel pages are things like route groups and parallel\n  // route slots. As long as it's always the same one, it doesn't matter.\n  const pageVaryPath: VaryPath = {\n    // Append the actual metadata request key to the page request key. Note\n    // that we're not using a separate vary path part; it's unnecessary because\n    // these are not conceptually separate inputs.\n    value: pageRequestKey + HEAD_REQUEST_KEY,\n    parent: {\n      value: renderedSearch,\n      parent: varyPath,\n    },\n  }\n  return pageVaryPath as PageVaryPath\n}\n\nexport function getSegmentVaryPathForRequest(\n  fetchStrategy: FetchStrategy,\n  tree: RouteTree\n): SegmentVaryPath {\n  // This is used for storing pending requests in the cache. We want to choose\n  // the most generic vary path based on the strategy used to fetch it, i.e.\n  // static/PPR versus runtime prefetching, so that it can be reused as much\n  // as possible.\n  //\n  // We may be able to re-key the response to something even more generic once\n  // we receive it  for example, if the server tells us that the response\n  // doesn't vary on a particular param  but even before we send the request,\n  // we know some params are reusable based on the fetch strategy alone. For\n  // example, a static prefetch will never vary on search params.\n  //\n  // The original vary path with all the params filled in is stored on the\n  // route tree object. We will clone this one to create a new vary path\n  // where certain params are replaced with Fallback.\n  //\n  // This result of this function is not stored anywhere. It's only used to\n  // access the cache a single time.\n  //\n  // TODO: Rather than create a new list object just to access the cache, the\n  // plan is to add the concept of a \"vary mask\". This will represent all the\n  // params that can be treated as Fallback. (Or perhaps the inverse.)\n  const originalVaryPath = tree.varyPath\n\n  // Only page segments (and the special \"metadata\" segment, which is treated\n  // like a page segment for the purposes of caching) may contain search\n  // params. There's no reason to include them in the vary path otherwise.\n  if (tree.isPage) {\n    // Only a runtime prefetch will include search params in the vary path.\n    // Static prefetches never include search params, so they can be reused\n    // across all possible search param values.\n    const doesVaryOnSearchParams =\n      fetchStrategy === FetchStrategy.Full ||\n      fetchStrategy === FetchStrategy.PPRRuntime\n\n    if (!doesVaryOnSearchParams) {\n      // The response from the the server will not vary on search params. Clone\n      // the end of the original vary path to replace the search params\n      // with Fallback.\n      //\n      // requestKey -> searchParams -> pathParams\n      //               ^ This part gets replaced with Fallback\n      const searchParamsVaryPath = (originalVaryPath as PageVaryPath).parent\n      const pathParamsVaryPath = searchParamsVaryPath.parent\n      const patchedVaryPath: VaryPath = {\n        value: originalVaryPath.value,\n        parent: {\n          value: Fallback,\n          parent: pathParamsVaryPath,\n        },\n      }\n      return patchedVaryPath as SegmentVaryPath\n    }\n  }\n\n  // The request does vary on search params. We don't need to modify anything.\n  return originalVaryPath as SegmentVaryPath\n}\n\nexport function clonePageVaryPathWithNewSearchParams(\n  originalVaryPath: PageVaryPath,\n  newSearch: NormalizedSearch\n): PageVaryPath {\n  // requestKey -> searchParams -> pathParams\n  //               ^ This part gets replaced with newSearch\n  const searchParamsVaryPath = originalVaryPath.parent\n  const clonedVaryPath: VaryPath = {\n    value: originalVaryPath.value,\n    parent: {\n      value: newSearch,\n      parent: searchParamsVaryPath.parent,\n    },\n  }\n  return clonedVaryPath as PageVaryPath\n}\n","/**\n * For a given page path, this function ensures that there is a leading slash.\n * If there is not a leading slash, one is added, otherwise it is noop.\n */\nexport function ensureLeadingSlash(path: string) {\n  return path.startsWith('/') ? path : `/${path}`\n}\n","import { ensureLeadingSlash } from '../../page-path/ensure-leading-slash'\nimport { isGroupSegment } from '../../segment'\n\n/**\n * Normalizes an app route so it represents the actual request path. Essentially\n * performing the following transformations:\n *\n * - `/(dashboard)/user/[id]/page` to `/user/[id]`\n * - `/(dashboard)/account/page` to `/account`\n * - `/user/[id]/page` to `/user/[id]`\n * - `/account/page` to `/account`\n * - `/page` to `/`\n * - `/(dashboard)/user/[id]/route` to `/user/[id]`\n * - `/(dashboard)/account/route` to `/account`\n * - `/user/[id]/route` to `/user/[id]`\n * - `/account/route` to `/account`\n * - `/route` to `/`\n * - `/` to `/`\n *\n * @param route the app route to normalize\n * @returns the normalized pathname\n */\nexport function normalizeAppPath(route: string) {\n  return ensureLeadingSlash(\n    route.split('/').reduce((pathname, segment, index, segments) => {\n      // Empty segments are ignored.\n      if (!segment) {\n        return pathname\n      }\n\n      // Groups are ignored.\n      if (isGroupSegment(segment)) {\n        return pathname\n      }\n\n      // Parallel segments are ignored.\n      if (segment[0] === '@') {\n        return pathname\n      }\n\n      // The last segment (if it's a leaf) should be ignored.\n      if (\n        (segment === 'page' || segment === 'route') &&\n        index === segments.length - 1\n      ) {\n        return pathname\n      }\n\n      return `${pathname}/${segment}`\n    }, '')\n  )\n}\n\n/**\n * Strips the `.rsc` extension if it's in the pathname.\n * Since this function is used on full urls it checks `?` for searchParams handling.\n */\nexport function normalizeRscURL(url: string) {\n  return url.replace(\n    /\\.rsc($|\\?)/,\n    // $1 ensures `?` is preserved\n    '$1'\n  )\n}\n","import { normalizeAppPath } from './app-paths'\n\n// order matters here, the first match will be used\nexport const INTERCEPTION_ROUTE_MARKERS = [\n  '(..)(..)',\n  '(.)',\n  '(..)',\n  '(...)',\n] as const\n\nexport type InterceptionMarker = (typeof INTERCEPTION_ROUTE_MARKERS)[number]\n\nexport function isInterceptionRouteAppPath(path: string): boolean {\n  // TODO-APP: add more serious validation\n  return (\n    path\n      .split('/')\n      .find((segment) =>\n        INTERCEPTION_ROUTE_MARKERS.find((m) => segment.startsWith(m))\n      ) !== undefined\n  )\n}\n\ntype InterceptionRouteInformation = {\n  /**\n   * The intercepting route. This is the route that is being intercepted or the\n   * route that the user was coming from. This is matched by the Next-Url\n   * header.\n   */\n  interceptingRoute: string\n\n  /**\n   * The intercepted route. This is the route that is being intercepted or the\n   * route that the user is going to. This is matched by the request pathname.\n   */\n  interceptedRoute: string\n}\n\nexport function extractInterceptionRouteInformation(\n  path: string\n): InterceptionRouteInformation {\n  let interceptingRoute: string | undefined\n  let marker: (typeof INTERCEPTION_ROUTE_MARKERS)[number] | undefined\n  let interceptedRoute: string | undefined\n\n  for (const segment of path.split('/')) {\n    marker = INTERCEPTION_ROUTE_MARKERS.find((m) => segment.startsWith(m))\n    if (marker) {\n      ;[interceptingRoute, interceptedRoute] = path.split(marker, 2)\n      break\n    }\n  }\n\n  if (!interceptingRoute || !marker || !interceptedRoute) {\n    throw new Error(\n      `Invalid interception route: ${path}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`\n    )\n  }\n\n  interceptingRoute = normalizeAppPath(interceptingRoute) // normalize the path, e.g. /(blog)/feed -> /feed\n\n  switch (marker) {\n    case '(.)':\n      // (.) indicates that we should match with sibling routes, so we just need to append the intercepted route to the intercepting route\n      if (interceptingRoute === '/') {\n        interceptedRoute = `/${interceptedRoute}`\n      } else {\n        interceptedRoute = interceptingRoute + '/' + interceptedRoute\n      }\n      break\n    case '(..)':\n      // (..) indicates that we should match at one level up, so we need to remove the last segment of the intercepting route\n      if (interceptingRoute === '/') {\n        throw new Error(\n          `Invalid interception route: ${path}. Cannot use (..) marker at the root level, use (.) instead.`\n        )\n      }\n      interceptedRoute = interceptingRoute\n        .split('/')\n        .slice(0, -1)\n        .concat(interceptedRoute)\n        .join('/')\n      break\n    case '(...)':\n      // (...) will match the route segment in the root directory, so we need to use the root directory to prepend the intercepted route\n      interceptedRoute = '/' + interceptedRoute\n      break\n    case '(..)(..)':\n      // (..)(..) indicates that we should match at two levels up, so we need to remove the last two segments of the intercepting route\n\n      const splitInterceptingRoute = interceptingRoute.split('/')\n      if (splitInterceptingRoute.length <= 2) {\n        throw new Error(\n          `Invalid interception route: ${path}. Cannot use (..)(..) marker at the root level or one level up.`\n        )\n      }\n\n      interceptedRoute = splitInterceptingRoute\n        .slice(0, -2)\n        .concat(interceptedRoute)\n        .join('/')\n      break\n    default:\n      throw new Error('Invariant: unexpected marker')\n  }\n\n  return { interceptingRoute, interceptedRoute }\n}\n","import type {\n  FlightRouterState,\n  Segment,\n} from '../../../shared/lib/app-router-types'\nimport { INTERCEPTION_ROUTE_MARKERS } from '../../../shared/lib/router/utils/interception-routes'\nimport type { Params } from '../../../server/request/params'\nimport {\n  isGroupSegment,\n  DEFAULT_SEGMENT_KEY,\n  PAGE_SEGMENT_KEY,\n} from '../../../shared/lib/segment'\nimport { matchSegment } from '../match-segments'\n\nconst removeLeadingSlash = (segment: string): string => {\n  return segment[0] === '/' ? segment.slice(1) : segment\n}\n\nconst segmentToPathname = (segment: Segment): string => {\n  if (typeof segment === 'string') {\n    // 'children' is not a valid path -- it's technically a parallel route that corresponds with the current segment's page\n    // if we don't skip it, then the computed pathname might be something like `/children` which doesn't make sense.\n    if (segment === 'children') return ''\n\n    return segment\n  }\n\n  return segment[1]\n}\n\nfunction normalizeSegments(segments: string[]): string {\n  return (\n    segments.reduce((acc, segment) => {\n      segment = removeLeadingSlash(segment)\n      if (segment === '' || isGroupSegment(segment)) {\n        return acc\n      }\n\n      return `${acc}/${segment}`\n    }, '') || '/'\n  )\n}\n\nexport function extractPathFromFlightRouterState(\n  flightRouterState: FlightRouterState\n): string | undefined {\n  const segment = Array.isArray(flightRouterState[0])\n    ? flightRouterState[0][1]\n    : flightRouterState[0]\n\n  if (\n    segment === DEFAULT_SEGMENT_KEY ||\n    INTERCEPTION_ROUTE_MARKERS.some((m) => segment.startsWith(m))\n  )\n    return undefined\n\n  if (segment.startsWith(PAGE_SEGMENT_KEY)) return ''\n\n  const segments = [segmentToPathname(segment)]\n  const parallelRoutes = flightRouterState[1] ?? {}\n\n  const childrenPath = parallelRoutes.children\n    ? extractPathFromFlightRouterState(parallelRoutes.children)\n    : undefined\n\n  if (childrenPath !== undefined) {\n    segments.push(childrenPath)\n  } else {\n    for (const [key, value] of Object.entries(parallelRoutes)) {\n      if (key === 'children') continue\n\n      const childPath = extractPathFromFlightRouterState(value)\n\n      if (childPath !== undefined) {\n        segments.push(childPath)\n      }\n    }\n  }\n\n  return normalizeSegments(segments)\n}\n\nfunction computeChangedPathImpl(\n  treeA: FlightRouterState,\n  treeB: FlightRouterState\n): string | null {\n  const [segmentA, parallelRoutesA] = treeA\n  const [segmentB, parallelRoutesB] = treeB\n\n  const normalizedSegmentA = segmentToPathname(segmentA)\n  const normalizedSegmentB = segmentToPathname(segmentB)\n\n  if (\n    INTERCEPTION_ROUTE_MARKERS.some(\n      (m) =>\n        normalizedSegmentA.startsWith(m) || normalizedSegmentB.startsWith(m)\n    )\n  ) {\n    return ''\n  }\n\n  if (!matchSegment(segmentA, segmentB)) {\n    // once we find where the tree changed, we compute the rest of the path by traversing the tree\n    return extractPathFromFlightRouterState(treeB) ?? ''\n  }\n\n  for (const parallelRouterKey in parallelRoutesA) {\n    if (parallelRoutesB[parallelRouterKey]) {\n      const changedPath = computeChangedPathImpl(\n        parallelRoutesA[parallelRouterKey],\n        parallelRoutesB[parallelRouterKey]\n      )\n      if (changedPath !== null) {\n        return `${segmentToPathname(segmentB)}/${changedPath}`\n      }\n    }\n  }\n\n  return null\n}\n\nexport function computeChangedPath(\n  treeA: FlightRouterState,\n  treeB: FlightRouterState\n): string | null {\n  const changedPath = computeChangedPathImpl(treeA, treeB)\n\n  if (changedPath == null || changedPath === '/') {\n    return changedPath\n  }\n\n  // lightweight normalization to remove route groups\n  return normalizeSegments(changedPath.split('/'))\n}\n\n/**\n * Recursively extracts dynamic parameters from FlightRouterState.\n */\nexport function getSelectedParams(\n  currentTree: FlightRouterState,\n  params: Params = {}\n): Params {\n  const parallelRoutes = currentTree[1]\n\n  for (const parallelRoute of Object.values(parallelRoutes)) {\n    const segment = parallelRoute[0]\n    const isDynamicParameter = Array.isArray(segment)\n    const segmentValue = isDynamicParameter ? segment[1] : segment\n    if (!segmentValue || segmentValue.startsWith(PAGE_SEGMENT_KEY)) continue\n\n    // Ensure catchAll and optional catchall are turned into an array\n    const isCatchAll =\n      isDynamicParameter && (segment[2] === 'c' || segment[2] === 'oc')\n\n    if (isCatchAll) {\n      params[segment[0]] = segment[1].split('/')\n    } else if (isDynamicParameter) {\n      params[segment[0]] = segment[1]\n    }\n\n    params = getSelectedParams(parallelRoute, params)\n  }\n\n  return params\n}\n","import { computeChangedPath } from './compute-changed-path'\nimport type {\n  Mutable,\n  ReadonlyReducerState,\n  ReducerState,\n} from './router-reducer-types'\n\nfunction isNotUndefined<T>(value: T): value is Exclude<T, undefined> {\n  return typeof value !== 'undefined'\n}\n\nexport function handleMutable(\n  state: ReadonlyReducerState,\n  mutable: Mutable\n): ReducerState {\n  // shouldScroll is true by default, can override to false.\n  const shouldScroll = mutable.shouldScroll ?? true\n\n  let previousNextUrl = state.previousNextUrl\n  let nextUrl = state.nextUrl\n\n  if (isNotUndefined(mutable.patchedTree)) {\n    // If we received a patched tree, we need to compute the changed path.\n    const changedPath = computeChangedPath(state.tree, mutable.patchedTree)\n    if (changedPath) {\n      // If the tree changed, we need to update the nextUrl\n      previousNextUrl = nextUrl\n      nextUrl = changedPath\n    } else if (!nextUrl) {\n      // if the tree ends up being the same (ie, no changed path), and we don't have a nextUrl, then we should use the canonicalUrl\n      nextUrl = state.canonicalUrl\n    }\n    // otherwise this will be a no-op and continue to use the existing nextUrl\n  }\n\n  return {\n    // Set href.\n    canonicalUrl: mutable.canonicalUrl ?? state.canonicalUrl,\n    renderedSearch: mutable.renderedSearch ?? state.renderedSearch,\n    pushRef: {\n      pendingPush: isNotUndefined(mutable.pendingPush)\n        ? mutable.pendingPush\n        : state.pushRef.pendingPush,\n      mpaNavigation: isNotUndefined(mutable.mpaNavigation)\n        ? mutable.mpaNavigation\n        : state.pushRef.mpaNavigation,\n      preserveCustomHistoryState: isNotUndefined(\n        mutable.preserveCustomHistoryState\n      )\n        ? mutable.preserveCustomHistoryState\n        : state.pushRef.preserveCustomHistoryState,\n    },\n    // All navigation requires scroll and focus management to trigger.\n    focusAndScrollRef: {\n      apply: shouldScroll\n        ? isNotUndefined(mutable?.scrollableSegments)\n          ? true\n          : state.focusAndScrollRef.apply\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          false,\n      onlyHashChange: mutable.onlyHashChange || false,\n      hashFragment: shouldScroll\n        ? // Empty hash should trigger default behavior of scrolling layout into view.\n          // #top is handled in layout-router.\n          mutable.hashFragment && mutable.hashFragment !== ''\n          ? // Remove leading # and decode hash to make non-latin hashes work.\n            decodeURIComponent(mutable.hashFragment.slice(1))\n          : state.focusAndScrollRef.hashFragment\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          null,\n      segmentPaths: shouldScroll\n        ? (mutable?.scrollableSegments ?? state.focusAndScrollRef.segmentPaths)\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          [],\n    },\n    // Apply cache.\n    cache: mutable.cache ? mutable.cache : state.cache,\n    // Apply patched router state.\n    tree: isNotUndefined(mutable.patchedTree)\n      ? mutable.patchedTree\n      : state.tree,\n    nextUrl,\n    previousNextUrl: previousNextUrl,\n    debugInfo: mutable.collectedDebugInfo ?? null,\n  }\n}\n","import type { Segment } from '../../../shared/lib/app-router-types'\nimport { PAGE_SEGMENT_KEY } from '../../../shared/lib/segment'\n\nexport function createRouterCacheKey(\n  segment: Segment,\n  withoutSearchParameters: boolean = false\n) {\n  // if the segment is an array, it means it's a dynamic segment\n  // for example, ['lang', 'en', 'd']. We need to convert it to a string to store it as a cache node key.\n  if (Array.isArray(segment)) {\n    return `${segment[0]}|${segment[1]}|${segment[2]}`\n  }\n\n  // Page segments might have search parameters, ie __PAGE__?foo=bar\n  // When `withoutSearchParameters` is true, we only want to return the page segment\n  if (withoutSearchParameters && segment.startsWith(PAGE_SEGMENT_KEY)) {\n    return PAGE_SEGMENT_KEY\n  }\n\n  return segment\n}\n","import type { FlightRouterState } from '../../../shared/lib/app-router-types'\n\nexport function isNavigatingToNewRootLayout(\n  currentTree: FlightRouterState,\n  nextTree: FlightRouterState\n): boolean {\n  // Compare segments\n  const currentTreeSegment = currentTree[0]\n  const nextTreeSegment = nextTree[0]\n\n  // If any segment is different before we find the root layout, the root layout has changed.\n  // E.g. /same/(group1)/layout.js -> /same/(group2)/layout.js\n  // First segment is 'same' for both, keep looking. (group1) changed to (group2) before the root layout was found, it must have changed.\n  if (Array.isArray(currentTreeSegment) && Array.isArray(nextTreeSegment)) {\n    // Compare dynamic param name and type but ignore the value, different values would not affect the current root layout\n    // /[name] - /slug1 and /slug2, both values (slug1 & slug2) still has the same layout /[name]/layout.js\n    if (\n      currentTreeSegment[0] !== nextTreeSegment[0] ||\n      currentTreeSegment[2] !== nextTreeSegment[2]\n    ) {\n      return true\n    }\n  } else if (currentTreeSegment !== nextTreeSegment) {\n    return true\n  }\n\n  // Current tree root layout found\n  if (currentTree[4]) {\n    // If the next tree doesn't have the root layout flag, it must have changed.\n    return !nextTree[4]\n  }\n  // Current tree didn't have its root layout here, must have changed.\n  if (nextTree[4]) {\n    return true\n  }\n  // We can't assume it's `parallelRoutes.children` here in case the root layout is `app/@something/layout.js`\n  // But it's not possible to be more than one parallelRoutes before the root layout is found\n  // TODO-APP: change to traverse all parallel routes\n  const currentTreeChild = Object.values(currentTree[1])[0]\n  const nextTreeChild = Object.values(nextTree[1])[0]\n  if (!currentTreeChild || !nextTreeChild) return true\n  return isNavigatingToNewRootLayout(currentTreeChild, nextTreeChild)\n}\n","import type {\n  CacheNodeSeedData,\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type {\n  ChildSegmentMap,\n  CacheNode,\n} from '../../../shared/lib/app-router-types'\nimport type {\n  HeadData,\n  LoadingModuleData,\n} from '../../../shared/lib/app-router-types'\nimport {\n  DEFAULT_SEGMENT_KEY,\n  NOT_FOUND_SEGMENT_KEY,\n} from '../../../shared/lib/segment'\nimport { matchSegment } from '../match-segments'\nimport { createHrefFromUrl } from './create-href-from-url'\nimport { createRouterCacheKey } from './create-router-cache-key'\nimport { fetchServerResponse } from './fetch-server-response'\nimport { dispatchAppRouterAction } from '../use-action-queue'\nimport {\n  ACTION_SERVER_PATCH,\n  type ServerPatchAction,\n} from './router-reducer-types'\nimport { isNavigatingToNewRootLayout } from './is-navigating-to-new-root-layout'\nimport { DYNAMIC_STALETIME_MS } from './reducers/navigate-reducer'\nimport {\n  convertServerPatchToFullTree,\n  type NavigationSeed,\n} from '../segment-cache/navigation'\n\n// This is yet another tree type that is used to track pending promises that\n// need to be fulfilled once the dynamic data is received. The terminal nodes of\n// this tree represent the new Cache Node trees that were created during this\n// request. We can't use the Cache Node tree or Route State tree directly\n// because those include reused nodes, too. This tree is discarded as soon as\n// the navigation response is received.\nexport type NavigationTask = {\n  status: NavigationTaskStatus\n  // The router state that corresponds to the tree that this Task represents.\n  route: FlightRouterState\n  // The CacheNode that corresponds to the tree that this Task represents.\n  node: CacheNode\n  // The tree sent to the server during the dynamic request. If all the segments\n  // are static, then this will be null, and no server request is required.\n  // Otherwise, this is the same as `route`, except with the `refetch` marker\n  // set on the top-most segment that needs to be fetched.\n  dynamicRequestTree: FlightRouterState | null\n  // The URL that should be used to fetch the dynamic data. This is only set\n  // when the segment cannot be refetched from the current route, because it's\n  // part of a \"default\" parallel slot that was reused during a navigation.\n  refreshUrl: string | null\n  children: Map<string, NavigationTask> | null\n}\n\nexport const enum FreshnessPolicy {\n  Default,\n  Hydration,\n  HistoryTraversal,\n  RefreshAll,\n  HMRRefresh,\n}\n\nconst enum NavigationTaskStatus {\n  Pending,\n  Fulfilled,\n  Rejected,\n}\n\n/**\n * When a NavigationTask finishes, there may or may not be data still missing,\n * necessitating a retry.\n */\nconst enum NavigationTaskExitStatus {\n  /**\n   * No additional navigation is required.\n   */\n  Done = 0,\n  /**\n   * Some data failed to load, presumably due to a route tree mismatch. Perform\n   * a soft retry to reload the entire tree.\n   */\n  SoftRetry = 1,\n  /**\n   * Some data failed to load in an unrecoverable way, e.g. in an inactive\n   * parallel route. Fall back to a hard (MPA-style) retry.\n   */\n  HardRetry = 2,\n}\n\nexport type NavigationRequestAccumulation = {\n  scrollableSegments: Array<FlightSegmentPath> | null\n  separateRefreshUrls: Set<string> | null\n}\n\nconst noop = () => {}\n\nexport function createInitialCacheNodeForHydration(\n  navigatedAt: number,\n  initialTree: FlightRouterState,\n  seedData: CacheNodeSeedData | null,\n  seedHead: HeadData\n): CacheNode {\n  // Create the initial cache node tree, using the data embedded into the\n  // HTML document.\n  const accumulation: NavigationRequestAccumulation = {\n    scrollableSegments: null,\n    separateRefreshUrls: null,\n  }\n  const task = createCacheNodeOnNavigation(\n    navigatedAt,\n    initialTree,\n    undefined,\n    FreshnessPolicy.Hydration,\n    seedData,\n    seedHead,\n    null,\n    null,\n    false,\n    null,\n    null,\n    false,\n    accumulation\n  )\n\n  // NOTE: We intentionally don't check if any data needs to be fetched from the\n  // server. We assume the initial hydration payload is sufficient to render\n  // the page.\n  //\n  // The completeness of the initial data is an important property that we rely\n  // on as a last-ditch mechanism for recovering the app; we must always be able\n  // to reload a fresh HTML document to get to a consistent state.\n  //\n  // In the future, there may be cases where the server intentionally sends\n  // partial data and expects the client to fill in the rest, in which case this\n  // logic may change. (There already is a similar case where the server sends\n  // _no_ hydration data in the HTML document at all, and the client fetches it\n  // separately, but that's different because we still end up hydrating with a\n  // complete tree.)\n\n  return task.node\n}\n\n// Creates a new Cache Node tree (i.e. copy-on-write) that represents the\n// optimistic result of a navigation, using both the current Cache Node tree and\n// data that was prefetched prior to navigation.\n//\n// At the moment we call this function, we haven't yet received the navigation\n// response from the server. It could send back something completely different\n// from the tree that was prefetched  due to rewrites, default routes, parallel\n// routes, etc.\n//\n// But in most cases, it will return the same tree that we prefetched, just with\n// the dynamic holes filled in. So we optimistically assume this will happen,\n// and accept that the real result could be arbitrarily different.\n//\n// We'll reuse anything that was already in the previous tree, since that's what\n// the server does.\n//\n// New segments (ones that don't appear in the old tree) are assigned an\n// unresolved promise. The data for these promises will be fulfilled later, when\n// the navigation response is received.\n//\n// The tree can be rendered immediately after it is created (that's why this is\n// a synchronous function). Any new trees that do not have prefetch data will\n// suspend during rendering, until the dynamic data streams in.\n//\n// Returns a Task object, which contains both the updated Cache Node and a path\n// to the pending subtrees that need to be resolved by the navigation response.\n//\n// A return value of `null` means there were no changes, and the previous tree\n// can be reused without initiating a server request.\nexport function startPPRNavigation(\n  navigatedAt: number,\n  oldUrl: URL,\n  oldCacheNode: CacheNode | null,\n  oldRouterState: FlightRouterState,\n  newRouterState: FlightRouterState,\n  freshness: FreshnessPolicy,\n  seedData: CacheNodeSeedData | null,\n  seedHead: HeadData | null,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  isSamePageNavigation: boolean,\n  accumulation: NavigationRequestAccumulation\n): NavigationTask | null {\n  const didFindRootLayout = false\n  const parentNeedsDynamicRequest = false\n  const parentRefreshUrl = null\n  return updateCacheNodeOnNavigation(\n    navigatedAt,\n    oldUrl,\n    oldCacheNode !== null ? oldCacheNode : undefined,\n    oldRouterState,\n    newRouterState,\n    freshness,\n    didFindRootLayout,\n    seedData,\n    seedHead,\n    prefetchData,\n    prefetchHead,\n    isPrefetchHeadPartial,\n    isSamePageNavigation,\n    null,\n    null,\n    parentNeedsDynamicRequest,\n    parentRefreshUrl,\n    accumulation\n  )\n}\n\nfunction updateCacheNodeOnNavigation(\n  navigatedAt: number,\n  oldUrl: URL,\n  oldCacheNode: CacheNode | void,\n  oldRouterState: FlightRouterState,\n  newRouterState: FlightRouterState,\n  freshness: FreshnessPolicy,\n  didFindRootLayout: boolean,\n  seedData: CacheNodeSeedData | null,\n  seedHead: HeadData | null,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  isSamePageNavigation: boolean,\n  parentSegmentPath: FlightSegmentPath | null,\n  parentParallelRouteKey: string | null,\n  parentNeedsDynamicRequest: boolean,\n  parentRefreshUrl: string | null,\n  accumulation: NavigationRequestAccumulation\n): NavigationTask | null {\n  // Check if this segment matches the one in the previous route.\n  const oldSegment = oldRouterState[0]\n  const newSegment = newRouterState[0]\n  if (!matchSegment(newSegment, oldSegment)) {\n    // This segment does not match the previous route. We're now entering the\n    // new part of the target route. Switch to the \"create\" path.\n    if (\n      // Check if the route tree changed before we reached a layout. (The\n      // highest-level layout in a route tree is referred to as the \"root\"\n      // layout.) This could mean that we're navigating between two different\n      // root layouts. When this happens, we perform a full-page (MPA-style)\n      // navigation.\n      //\n      // However, the algorithm for deciding where to start rendering a route\n      // (i.e. the one performed in order to reach this function) is stricter\n      // than the one used to detect a change in the root layout. So just\n      // because we're re-rendering a segment outside of the root layout does\n      // not mean we should trigger a full-page navigation.\n      //\n      // Specifically, we handle dynamic parameters differently: two segments\n      // are considered the same even if their parameter values are different.\n      //\n      // Refer to isNavigatingToNewRootLayout for details.\n      //\n      // Note that we only have to perform this extra traversal if we didn't\n      // already discover a root layout in the part of the tree that is\n      // unchanged. We also only need to compare the subtree that is not\n      // shared. In the common case, this branch is skipped completely.\n      (!didFindRootLayout &&\n        isNavigatingToNewRootLayout(oldRouterState, newRouterState)) ||\n      // The global Not Found route (app/global-not-found.tsx) is a special\n      // case, because it acts like a root layout, but in the router tree, it\n      // is rendered in the same position as app/layout.tsx.\n      //\n      // Any navigation to the global Not Found route should trigger a\n      // full-page navigation.\n      //\n      // TODO: We should probably model this by changing the key of the root\n      // segment when this happens. Then the root layout check would work\n      // as expected, without a special case.\n      newSegment === NOT_FOUND_SEGMENT_KEY\n    ) {\n      return null\n    }\n    if (parentSegmentPath === null || parentParallelRouteKey === null) {\n      // The root should never mismatch. If it does, it suggests an internal\n      // Next.js error, or a malformed server response. Trigger a full-\n      // page navigation.\n      return null\n    }\n    return createCacheNodeOnNavigation(\n      navigatedAt,\n      newRouterState,\n      oldCacheNode,\n      freshness,\n      seedData,\n      seedHead,\n      prefetchData,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      parentSegmentPath,\n      parentParallelRouteKey,\n      parentNeedsDynamicRequest,\n      accumulation\n    )\n  }\n\n  // TODO: The segment paths are tracked so that LayoutRouter knows which\n  // segments to scroll to after a navigation. But we should just mark this\n  // information on the CacheNode directly. It used to be necessary to do this\n  // separately because CacheNodes were created lazily during render, not when\n  // rather than when creating the route tree.\n  const segmentPath =\n    parentParallelRouteKey !== null && parentSegmentPath !== null\n      ? parentSegmentPath.concat([parentParallelRouteKey, newSegment])\n      : // NOTE: The root segment is intentionally omitted from the segment path\n        []\n\n  const newRouterStateChildren = newRouterState[1]\n  const oldRouterStateChildren = oldRouterState[1]\n  const seedDataChildren = seedData !== null ? seedData[1] : null\n  const prefetchDataChildren = prefetchData !== null ? prefetchData[1] : null\n\n  // We're currently traversing the part of the tree that was also part of\n  // the previous route. If we discover a root layout, then we don't need to\n  // trigger an MPA navigation.\n  const isRootLayout = newRouterState[4] === true\n  const childDidFindRootLayout = didFindRootLayout || isRootLayout\n\n  const oldParallelRoutes =\n    oldCacheNode !== undefined ? oldCacheNode.parallelRoutes : undefined\n\n  // Clone the current set of segment children, even if they aren't active in\n  // the new tree.\n  // TODO: We currently retain all the inactive segments indefinitely, until\n  // there's an explicit refresh, or a parent layout is lazily refreshed. We\n  // rely on this for popstate navigations, which update the Router State Tree\n  // but do not eagerly perform a data fetch, because they expect the segment\n  // data to already be in the Cache Node tree. For highly static sites that\n  // are mostly read-only, this may happen only rarely, causing memory to\n  // leak. We should figure out a better model for the lifetime of inactive\n  // segments, so we can maintain instant back/forward navigations without\n  // leaking memory indefinitely.\n  let shouldDropSiblingCaches: boolean = false\n  let shouldRefreshDynamicData: boolean = false\n  switch (freshness) {\n    case FreshnessPolicy.Default:\n    case FreshnessPolicy.HistoryTraversal:\n    case FreshnessPolicy.Hydration: // <- shouldn't happen during client nav\n      // We should never drop dynamic data in shared layouts, except during\n      // a refresh.\n      shouldDropSiblingCaches = false\n      shouldRefreshDynamicData = false\n      break\n    case FreshnessPolicy.RefreshAll:\n    case FreshnessPolicy.HMRRefresh:\n      shouldDropSiblingCaches = true\n      shouldRefreshDynamicData = true\n      break\n    default:\n      freshness satisfies never\n      break\n  }\n  const newParallelRoutes = new Map(\n    shouldDropSiblingCaches ? undefined : oldParallelRoutes\n  )\n\n  // TODO: We're not consistent about how we do this check. Some places\n  // check if the segment starts with PAGE_SEGMENT_KEY, but most seem to\n  // check if there any any children, which is why I'm doing it here. We\n  // should probably encode an empty children set as `null` though. Either\n  // way, we should update all the checks to be consistent.\n  const isLeafSegment = Object.keys(newRouterStateChildren).length === 0\n\n  // Get the data for this segment. Since it was part of the previous route,\n  // usually we just clone the data from the old CacheNode. However, during a\n  // refresh or a revalidation, there won't be any existing CacheNode. So we\n  // may need to consult the prefetch cache, like we would for a new segment.\n  let newCacheNode: CacheNode\n  let needsDynamicRequest: boolean\n  if (\n    oldCacheNode !== undefined &&\n    !shouldRefreshDynamicData &&\n    // During a same-page navigation, we always refetch the page segments\n    !(isLeafSegment && isSamePageNavigation)\n  ) {\n    // Reuse the existing CacheNode\n    const dropPrefetchRsc = false\n    newCacheNode = reuseDynamicCacheNode(\n      dropPrefetchRsc,\n      oldCacheNode,\n      newParallelRoutes\n    )\n    needsDynamicRequest = false\n  } else if (seedData !== null && seedData[0] !== null) {\n    // If this navigation was the result of an action, then check if the\n    // server sent back data in the action response. We should favor using\n    // that, rather than performing a separate request. This is both better\n    // for performance and it's more likely to be consistent with any\n    // writes that were just performed by the action, compared to a\n    // separate request.\n    const seedRsc = seedData[0]\n    const seedLoading = seedData[2]\n    const isSeedRscPartial = false\n    const isSeedHeadPartial = seedHead === null\n    newCacheNode = readCacheNodeFromSeedData(\n      seedRsc,\n      seedLoading,\n      isSeedRscPartial,\n      seedHead,\n      isSeedHeadPartial,\n      isLeafSegment,\n      newParallelRoutes,\n      navigatedAt\n    )\n    needsDynamicRequest = isLeafSegment && isSeedHeadPartial\n  } else if (prefetchData !== null) {\n    // Consult the prefetch cache.\n    const prefetchRsc = prefetchData[0]\n    const prefetchLoading = prefetchData[2]\n    const isPrefetchRSCPartial = prefetchData[3]\n    newCacheNode = readCacheNodeFromSeedData(\n      prefetchRsc,\n      prefetchLoading,\n      isPrefetchRSCPartial,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      isLeafSegment,\n      newParallelRoutes,\n      navigatedAt\n    )\n    needsDynamicRequest =\n      isPrefetchRSCPartial || (isLeafSegment && isPrefetchHeadPartial)\n  } else {\n    // Spawn a request to fetch new data from the server.\n    newCacheNode = spawnNewCacheNode(\n      newParallelRoutes,\n      isLeafSegment,\n      navigatedAt,\n      freshness\n    )\n    needsDynamicRequest = true\n  }\n\n  // During a refresh navigation, there's a special case that happens when\n  // entering a \"default\" slot. The default slot may not be part of the\n  // current route; it may have been reused from an older route. If so,\n  // we need to fetch its data from the old route's URL rather than current\n  // route's URL. Keep track of this as we traverse the tree.\n  const href = newRouterState[2]\n  const refreshUrl =\n    typeof href === 'string' && newRouterState[3] === 'refresh'\n      ? // This segment is not present in the current route. Track its\n        // refresh URL as we continue traversing the tree.\n        href\n      : // Inherit the refresh URL from the parent.\n        parentRefreshUrl\n\n  // If this segment itself needs to fetch new data from the server, then by\n  // definition it is being refreshed. Track its refresh URL so we know which\n  // URL to request the data from.\n  if (needsDynamicRequest && refreshUrl !== null) {\n    accumulateRefreshUrl(accumulation, refreshUrl)\n  }\n\n  // As we diff the trees, we may sometimes modify (copy-on-write, not mutate)\n  // the Route Tree that was returned by the server  for example, in the case\n  // of default parallel routes, we preserve the currently active segment. To\n  // avoid mutating the original tree, we clone the router state children along\n  // the return path.\n  let patchedRouterStateChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n  let taskChildren = null\n\n  // Most navigations require a request to fetch additional data from the\n  // server, either because the data was not already prefetched, or because the\n  // target route contains dynamic data that cannot be prefetched.\n  //\n  // However, if the target route is fully static, and it's already completely\n  // loaded into the segment cache, then we can skip the server request.\n  //\n  // This starts off as `false`, and is set to `true` if any of the child\n  // routes requires a dynamic request.\n  let childNeedsDynamicRequest = false\n  // As we traverse the children, we'll construct a FlightRouterState that can\n  // be sent to the server to request the dynamic data. If it turns out that\n  // nothing in the subtree is dynamic (i.e. childNeedsDynamicRequest is false\n  // at the end), then this will be discarded.\n  // TODO: We can probably optimize the format of this data structure to only\n  // include paths that are dynamic. Instead of reusing the\n  // FlightRouterState type.\n  let dynamicRequestTreeChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n\n  for (let parallelRouteKey in newRouterStateChildren) {\n    let newRouterStateChild: FlightRouterState =\n      newRouterStateChildren[parallelRouteKey]\n    const oldRouterStateChild: FlightRouterState | void =\n      oldRouterStateChildren[parallelRouteKey]\n    if (oldRouterStateChild === undefined) {\n      // This should never happen, but if it does, it suggests a malformed\n      // server response. Trigger a full-page navigation.\n      return null\n    }\n    const oldSegmentMapChild =\n      oldParallelRoutes !== undefined\n        ? oldParallelRoutes.get(parallelRouteKey)\n        : undefined\n\n    let seedDataChild: CacheNodeSeedData | void | null =\n      seedDataChildren !== null ? seedDataChildren[parallelRouteKey] : null\n    let prefetchDataChild: CacheNodeSeedData | void | null =\n      prefetchDataChildren !== null\n        ? prefetchDataChildren[parallelRouteKey]\n        : null\n\n    let newSegmentChild = newRouterStateChild[0]\n    let seedHeadChild = seedHead\n    let prefetchHeadChild = prefetchHead\n    let isPrefetchHeadPartialChild = isPrefetchHeadPartial\n    if (\n      // Skip this branch during a history traversal. We restore the tree that\n      // was stashed in the history entry as-is.\n      freshness !== FreshnessPolicy.HistoryTraversal &&\n      newSegmentChild === DEFAULT_SEGMENT_KEY\n    ) {\n      // This is a \"default\" segment. These are never sent by the server during\n      // a soft navigation; instead, the client reuses whatever segment was\n      // already active in that slot on the previous route.\n      newRouterStateChild = reuseActiveSegmentInDefaultSlot(\n        oldUrl,\n        oldRouterStateChild\n      )\n      newSegmentChild = newRouterStateChild[0]\n\n      // Since we're switching to a different route tree, these are no\n      // longer valid, because they correspond to the outer tree.\n      seedDataChild = null\n      seedHeadChild = null\n      prefetchDataChild = null\n      prefetchHeadChild = null\n      isPrefetchHeadPartialChild = false\n    }\n\n    const newSegmentKeyChild = createRouterCacheKey(newSegmentChild)\n    const oldCacheNodeChild =\n      oldSegmentMapChild !== undefined\n        ? oldSegmentMapChild.get(newSegmentKeyChild)\n        : undefined\n\n    const taskChild = updateCacheNodeOnNavigation(\n      navigatedAt,\n      oldUrl,\n      oldCacheNodeChild,\n      oldRouterStateChild,\n      newRouterStateChild,\n      freshness,\n      childDidFindRootLayout,\n      seedDataChild ?? null,\n      seedHeadChild,\n      prefetchDataChild ?? null,\n      prefetchHeadChild,\n      isPrefetchHeadPartialChild,\n      isSamePageNavigation,\n      segmentPath,\n      parallelRouteKey,\n      parentNeedsDynamicRequest || needsDynamicRequest,\n      refreshUrl,\n      accumulation\n    )\n\n    if (taskChild === null) {\n      // One of the child tasks discovered a change to the root layout.\n      // Immediately unwind from this recursive traversal. This will trigger a\n      // full-page navigation.\n      return null\n    }\n\n    // Recursively propagate up the child tasks.\n    if (taskChildren === null) {\n      taskChildren = new Map()\n    }\n    taskChildren.set(parallelRouteKey, taskChild)\n    const newCacheNodeChild = taskChild.node\n    if (newCacheNodeChild !== null) {\n      const newSegmentMapChild: ChildSegmentMap = new Map(\n        shouldDropSiblingCaches ? undefined : oldSegmentMapChild\n      )\n      newSegmentMapChild.set(newSegmentKeyChild, newCacheNodeChild)\n      newParallelRoutes.set(parallelRouteKey, newSegmentMapChild)\n    }\n\n    // The child tree's route state may be different from the prefetched\n    // route sent by the server. We need to clone it as we traverse back up\n    // the tree.\n    const taskChildRoute = taskChild.route\n    patchedRouterStateChildren[parallelRouteKey] = taskChildRoute\n\n    const dynamicRequestTreeChild = taskChild.dynamicRequestTree\n    if (dynamicRequestTreeChild !== null) {\n      // Something in the child tree is dynamic.\n      childNeedsDynamicRequest = true\n      dynamicRequestTreeChildren[parallelRouteKey] = dynamicRequestTreeChild\n    } else {\n      dynamicRequestTreeChildren[parallelRouteKey] = taskChildRoute\n    }\n  }\n\n  return {\n    status: needsDynamicRequest\n      ? NavigationTaskStatus.Pending\n      : NavigationTaskStatus.Fulfilled,\n    route: patchRouterStateWithNewChildren(\n      newRouterState,\n      patchedRouterStateChildren\n    ),\n    node: newCacheNode,\n    dynamicRequestTree: createDynamicRequestTree(\n      newRouterState,\n      dynamicRequestTreeChildren,\n      needsDynamicRequest,\n      childNeedsDynamicRequest,\n      parentNeedsDynamicRequest\n    ),\n    refreshUrl,\n    children: taskChildren,\n  }\n}\n\nfunction createCacheNodeOnNavigation(\n  navigatedAt: number,\n  newRouterState: FlightRouterState,\n  oldCacheNode: CacheNode | void,\n  freshness: FreshnessPolicy,\n  seedData: CacheNodeSeedData | null,\n  seedHead: HeadData | null,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  parentSegmentPath: FlightSegmentPath | null,\n  parentParallelRouteKey: string | null,\n  parentNeedsDynamicRequest: boolean,\n  accumulation: NavigationRequestAccumulation\n): NavigationTask {\n  // Same traversal as updateCacheNodeNavigation, but simpler. We switch to this\n  // path once we reach the part of the tree that was not in the previous route.\n  // We don't need to diff against the old tree, we just need to create a new\n  // one. We also don't need to worry about any refresh-related logic.\n  //\n  // For the most part, this is a subset of updateCacheNodeOnNavigation, so any\n  // change that happens in this function likely needs to be applied to that\n  // one, too. However there are some places where the behavior intentionally\n  // diverges, which is why we keep them separate.\n\n  const newSegment = newRouterState[0]\n  const segmentPath =\n    parentParallelRouteKey !== null && parentSegmentPath !== null\n      ? parentSegmentPath.concat([parentParallelRouteKey, newSegment])\n      : // NOTE: The root segment is intentionally omitted from the segment path\n        []\n\n  const newRouterStateChildren = newRouterState[1]\n  const prefetchDataChildren = prefetchData !== null ? prefetchData[1] : null\n  const seedDataChildren = seedData !== null ? seedData[1] : null\n  const oldParallelRoutes =\n    oldCacheNode !== undefined ? oldCacheNode.parallelRoutes : undefined\n\n  let shouldDropSiblingCaches: boolean = false\n  let shouldRefreshDynamicData: boolean = false\n  let dropPrefetchRsc: boolean = false\n  switch (freshness) {\n    case FreshnessPolicy.Default:\n      // We should never drop dynamic data in sibling caches except during\n      // a refresh.\n      shouldDropSiblingCaches = false\n\n      // Only reuse the dynamic data if experimental.staleTimes.dynamic config\n      // is set, and the data is not stale. (This is not a recommended API with\n      // Cache Components, but it's supported for backwards compatibility. Use\n      // cacheLife instead.)\n      //\n      // DYNAMIC_STALETIME_MS defaults to 0, but it can be increased.\n      shouldRefreshDynamicData =\n        oldCacheNode === undefined ||\n        navigatedAt - oldCacheNode.navigatedAt >= DYNAMIC_STALETIME_MS\n\n      dropPrefetchRsc = false\n      break\n    case FreshnessPolicy.Hydration:\n      // During hydration, we assume the data sent by the server is both\n      // consistent and complete.\n      shouldRefreshDynamicData = false\n      shouldDropSiblingCaches = false\n      dropPrefetchRsc = false\n      break\n    case FreshnessPolicy.HistoryTraversal:\n      // During back/forward navigations, we reuse the dynamic data regardless\n      // of how stale it may be.\n      shouldRefreshDynamicData = false\n      shouldRefreshDynamicData = false\n\n      // Only show prefetched data if the dynamic data is still pending. This\n      // avoids a flash back to the prefetch state in a case where it's highly\n      // likely to have already streamed in.\n      //\n      // Tehnically, what we're actually checking is whether the dynamic network\n      // response was received. But since it's a streaming response, this does\n      // not mean that all the dynamic data has fully streamed in. It just means\n      // that _some_ of the dynamic data was received. But as a heuristic, we\n      // assume that the rest dynamic data will stream in quickly, so it's still\n      // better to skip the prefetch state.\n      if (oldCacheNode !== undefined) {\n        const oldRsc = oldCacheNode.rsc\n        const oldRscDidResolve =\n          !isDeferredRsc(oldRsc) || oldRsc.status !== 'pending'\n        dropPrefetchRsc = oldRscDidResolve\n      } else {\n        dropPrefetchRsc = false\n      }\n      break\n    case FreshnessPolicy.RefreshAll:\n    case FreshnessPolicy.HMRRefresh:\n      // Drop all dynamic data.\n      shouldRefreshDynamicData = true\n      shouldDropSiblingCaches = true\n      dropPrefetchRsc = false\n      break\n    default:\n      freshness satisfies never\n      break\n  }\n\n  const newParallelRoutes = new Map(\n    shouldDropSiblingCaches ? undefined : oldParallelRoutes\n  )\n  const isLeafSegment = Object.keys(newRouterStateChildren).length === 0\n\n  if (isLeafSegment) {\n    // The segment path of every leaf segment (i.e. page) is collected into\n    // a result array. This is used by the LayoutRouter to scroll to ensure that\n    // new pages are visible after a navigation.\n    //\n    // This only happens for new pages, not for refreshed pages.\n    //\n    // TODO: We should use a string to represent the segment path instead of\n    // an array. We already use a string representation for the path when\n    // accessing the Segment Cache, so we can use the same one.\n    if (accumulation.scrollableSegments === null) {\n      accumulation.scrollableSegments = []\n    }\n    accumulation.scrollableSegments.push(segmentPath)\n  }\n\n  let newCacheNode: CacheNode\n  let needsDynamicRequest: boolean\n  if (!shouldRefreshDynamicData && oldCacheNode !== undefined) {\n    // Reuse the existing CacheNode\n    newCacheNode = reuseDynamicCacheNode(\n      dropPrefetchRsc,\n      oldCacheNode,\n      newParallelRoutes\n    )\n    needsDynamicRequest = false\n  } else if (seedData !== null && seedData[0] !== null) {\n    // If this navigation was the result of an action, then check if the\n    // server sent back data in the action response. We should favor using\n    // that, rather than performing a separate request. This is both better\n    // for performance and it's more likely to be consistent with any\n    // writes that were just performed by the action, compared to a\n    // separate request.\n    const seedRsc = seedData[0]\n    const seedLoading = seedData[2]\n    const isSeedRscPartial = false\n    const isSeedHeadPartial =\n      seedHead === null && freshness !== FreshnessPolicy.Hydration\n    newCacheNode = readCacheNodeFromSeedData(\n      seedRsc,\n      seedLoading,\n      isSeedRscPartial,\n      seedHead,\n      isSeedHeadPartial,\n      isLeafSegment,\n      newParallelRoutes,\n      navigatedAt\n    )\n    needsDynamicRequest = isLeafSegment && isSeedHeadPartial\n  } else if (\n    freshness === FreshnessPolicy.Hydration &&\n    isLeafSegment &&\n    seedHead !== null\n  ) {\n    // This is another weird case related to \"not found\" pages and hydration.\n    // There will be a head sent by the server, but no page seed data.\n    // TODO: We really should get rid of all these \"not found\" specific quirks\n    // and make sure the tree is always consistent.\n    const seedRsc = null\n    const seedLoading = null\n    const isSeedRscPartial = false\n    const isSeedHeadPartial = false\n    newCacheNode = readCacheNodeFromSeedData(\n      seedRsc,\n      seedLoading,\n      isSeedRscPartial,\n      seedHead,\n      isSeedHeadPartial,\n      isLeafSegment,\n      newParallelRoutes,\n      navigatedAt\n    )\n    needsDynamicRequest = false\n  } else if (freshness !== FreshnessPolicy.Hydration && prefetchData !== null) {\n    // Consult the prefetch cache.\n    const prefetchRsc = prefetchData[0]\n    const prefetchLoading = prefetchData[2]\n    const isPrefetchRSCPartial = prefetchData[3]\n    newCacheNode = readCacheNodeFromSeedData(\n      prefetchRsc,\n      prefetchLoading,\n      isPrefetchRSCPartial,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      isLeafSegment,\n      newParallelRoutes,\n      navigatedAt\n    )\n    needsDynamicRequest =\n      isPrefetchRSCPartial || (isLeafSegment && isPrefetchHeadPartial)\n  } else {\n    // Spawn a request to fetch new data from the server.\n    newCacheNode = spawnNewCacheNode(\n      newParallelRoutes,\n      isLeafSegment,\n      navigatedAt,\n      freshness\n    )\n    needsDynamicRequest = true\n  }\n\n  let patchedRouterStateChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n  let taskChildren = null\n\n  let childNeedsDynamicRequest = false\n  let dynamicRequestTreeChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n\n  for (let parallelRouteKey in newRouterStateChildren) {\n    const newRouterStateChild: FlightRouterState =\n      newRouterStateChildren[parallelRouteKey]\n    const oldSegmentMapChild =\n      oldParallelRoutes !== undefined\n        ? oldParallelRoutes.get(parallelRouteKey)\n        : undefined\n    const seedDataChild: CacheNodeSeedData | void | null =\n      seedDataChildren !== null ? seedDataChildren[parallelRouteKey] : null\n    const prefetchDataChild: CacheNodeSeedData | void | null =\n      prefetchDataChildren !== null\n        ? prefetchDataChildren[parallelRouteKey]\n        : null\n\n    const newSegmentChild = newRouterStateChild[0]\n    const newSegmentKeyChild = createRouterCacheKey(newSegmentChild)\n\n    const oldCacheNodeChild =\n      oldSegmentMapChild !== undefined\n        ? oldSegmentMapChild.get(newSegmentKeyChild)\n        : undefined\n\n    const taskChild = createCacheNodeOnNavigation(\n      navigatedAt,\n      newRouterStateChild,\n      oldCacheNodeChild,\n      freshness,\n      seedDataChild ?? null,\n      seedHead,\n      prefetchDataChild ?? null,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      segmentPath,\n      parallelRouteKey,\n      parentNeedsDynamicRequest || needsDynamicRequest,\n      accumulation\n    )\n\n    if (taskChildren === null) {\n      taskChildren = new Map()\n    }\n    taskChildren.set(parallelRouteKey, taskChild)\n    const newCacheNodeChild = taskChild.node\n    if (newCacheNodeChild !== null) {\n      const newSegmentMapChild: ChildSegmentMap = new Map(\n        shouldDropSiblingCaches ? undefined : oldSegmentMapChild\n      )\n      newSegmentMapChild.set(newSegmentKeyChild, newCacheNodeChild)\n      newParallelRoutes.set(parallelRouteKey, newSegmentMapChild)\n    }\n\n    const taskChildRoute = taskChild.route\n    patchedRouterStateChildren[parallelRouteKey] = taskChildRoute\n\n    const dynamicRequestTreeChild = taskChild.dynamicRequestTree\n    if (dynamicRequestTreeChild !== null) {\n      childNeedsDynamicRequest = true\n      dynamicRequestTreeChildren[parallelRouteKey] = dynamicRequestTreeChild\n    } else {\n      dynamicRequestTreeChildren[parallelRouteKey] = taskChildRoute\n    }\n  }\n\n  return {\n    status: needsDynamicRequest\n      ? NavigationTaskStatus.Pending\n      : NavigationTaskStatus.Fulfilled,\n    route: patchRouterStateWithNewChildren(\n      newRouterState,\n      patchedRouterStateChildren\n    ),\n    node: newCacheNode,\n    dynamicRequestTree: createDynamicRequestTree(\n      newRouterState,\n      dynamicRequestTreeChildren,\n      needsDynamicRequest,\n      childNeedsDynamicRequest,\n      parentNeedsDynamicRequest\n    ),\n    // This route is not part of the current tree, so there's no reason to\n    // track the refresh URL.\n    refreshUrl: null,\n    children: taskChildren,\n  }\n}\n\nfunction patchRouterStateWithNewChildren(\n  baseRouterState: FlightRouterState,\n  newChildren: { [parallelRouteKey: string]: FlightRouterState }\n): FlightRouterState {\n  const clone: FlightRouterState = [baseRouterState[0], newChildren]\n  // Based on equivalent logic in apply-router-state-patch-to-tree, but should\n  // confirm whether we need to copy all of these fields. Not sure the server\n  // ever sends, e.g. the refetch marker.\n  if (2 in baseRouterState) {\n    clone[2] = baseRouterState[2]\n  }\n  if (3 in baseRouterState) {\n    clone[3] = baseRouterState[3]\n  }\n  if (4 in baseRouterState) {\n    clone[4] = baseRouterState[4]\n  }\n  return clone\n}\n\nfunction createDynamicRequestTree(\n  newRouterState: FlightRouterState,\n  dynamicRequestTreeChildren: Record<string, FlightRouterState>,\n  needsDynamicRequest: boolean,\n  childNeedsDynamicRequest: boolean,\n  parentNeedsDynamicRequest: boolean\n): FlightRouterState | null {\n  // Create a FlightRouterState that instructs the server how to render the\n  // requested segment.\n  //\n  // Or, if neither this segment nor any of the children require a new data,\n  // then we return `null` to skip the request.\n  let dynamicRequestTree: FlightRouterState | null = null\n  if (needsDynamicRequest) {\n    dynamicRequestTree = patchRouterStateWithNewChildren(\n      newRouterState,\n      dynamicRequestTreeChildren\n    )\n    // The \"refetch\" marker is set on the top-most segment that requires new\n    // data. We can omit it if a parent was already marked.\n    if (!parentNeedsDynamicRequest) {\n      dynamicRequestTree[3] = 'refetch'\n    }\n  } else if (childNeedsDynamicRequest) {\n    // This segment does not request new data, but at least one of its\n    // children does.\n    dynamicRequestTree = patchRouterStateWithNewChildren(\n      newRouterState,\n      dynamicRequestTreeChildren\n    )\n  } else {\n    dynamicRequestTree = null\n  }\n  return dynamicRequestTree\n}\n\nfunction accumulateRefreshUrl(\n  accumulation: NavigationRequestAccumulation,\n  refreshUrl: string\n) {\n  // This is a refresh navigation, and we're inside a \"default\" slot that's\n  // not part of the current route; it was reused from an older route. In\n  // order to get fresh data for this reused route, we need to issue a\n  // separate request using the old route's URL.\n  //\n  // Track these extra URLs in the accumulated result. Later, we'll construct\n  // an appropriate request for each unique URL in the final set. The reason\n  // we don't do it immediately here is so we can deduplicate multiple\n  // instances of the same URL into a single request. See\n  // listenForDynamicRequest for more details.\n  const separateRefreshUrls = accumulation.separateRefreshUrls\n  if (separateRefreshUrls === null) {\n    accumulation.separateRefreshUrls = new Set([refreshUrl])\n  } else {\n    separateRefreshUrls.add(refreshUrl)\n  }\n}\n\nfunction reuseActiveSegmentInDefaultSlot(\n  oldUrl: URL,\n  oldRouterState: FlightRouterState\n): FlightRouterState {\n  // This is a \"default\" segment. These are never sent by the server during a\n  // soft navigation; instead, the client reuses whatever segment was already\n  // active in that slot on the previous route. This means if we later need to\n  // refresh the segment, it will have to be refetched from the previous route's\n  // URL. We store it in the Flight Router State.\n  //\n  // TODO: We also mark the segment with a \"refresh\" marker but I think we can\n  // get rid of that eventually by making sure we only add URLs to page segments\n  // that are reused. Then the presence of the URL alone is enough.\n  let reusedRouterState\n\n  const oldRefreshMarker = oldRouterState[3]\n  if (oldRefreshMarker === 'refresh') {\n    // This segment was already reused from an even older route. Keep its\n    // existing URL and refresh marker.\n    reusedRouterState = oldRouterState\n  } else {\n    // This segment was not previously reused, and it's not on the new route.\n    // So it must have been delivered in the old route.\n    reusedRouterState = patchRouterStateWithNewChildren(\n      oldRouterState,\n      oldRouterState[1]\n    )\n    reusedRouterState[2] = createHrefFromUrl(oldUrl)\n    reusedRouterState[3] = 'refresh'\n  }\n\n  return reusedRouterState\n}\n\nfunction reuseDynamicCacheNode(\n  dropPrefetchRsc: boolean,\n  existingCacheNode: CacheNode,\n  parallelRoutes: Map<string, ChildSegmentMap>\n): CacheNode {\n  // Clone an existing CacheNode's data, with (possibly) new children.\n  const cacheNode: CacheNode = {\n    rsc: existingCacheNode.rsc,\n    prefetchRsc: dropPrefetchRsc ? null : existingCacheNode.prefetchRsc,\n    head: existingCacheNode.head,\n    prefetchHead: dropPrefetchRsc ? null : existingCacheNode.prefetchHead,\n    loading: existingCacheNode.loading,\n\n    parallelRoutes,\n\n    // Don't update the navigatedAt timestamp, since we're reusing\n    // existing data.\n    navigatedAt: existingCacheNode.navigatedAt,\n  }\n  return cacheNode\n}\n\nfunction readCacheNodeFromSeedData(\n  seedRsc: React.ReactNode,\n  seedLoading: LoadingModuleData | Promise<LoadingModuleData>,\n  isSeedRscPartial: boolean,\n  seedHead: HeadData | null,\n  isSeedHeadPartial: boolean,\n  isPageSegment: boolean,\n  parallelRoutes: Map<string, ChildSegmentMap>,\n  navigatedAt: number\n): CacheNode {\n  // TODO: Currently this is threaded through the navigation logic using the\n  // CacheNodeSeedData type, but in the future this will read directly from\n  // the Segment Cache. See readRenderSnapshotFromCache.\n\n  let rsc: React.ReactNode\n  let prefetchRsc: React.ReactNode\n  if (isSeedRscPartial) {\n    // The prefetched data contains dynamic holes. Create a pending promise that\n    // will be fulfilled when the dynamic data is received from the server.\n    prefetchRsc = seedRsc\n    rsc = createDeferredRsc()\n  } else {\n    // The prefetched data is complete. Use it directly.\n    prefetchRsc = null\n    rsc = seedRsc\n  }\n\n  // If this is a page segment, also read the head.\n  let prefetchHead: HeadData | null\n  let head: HeadData | null\n  if (isPageSegment) {\n    if (isSeedHeadPartial) {\n      prefetchHead = seedHead\n      head = createDeferredRsc()\n    } else {\n      prefetchHead = null\n      head = seedHead\n    }\n  } else {\n    prefetchHead = null\n    head = null\n  }\n\n  const cacheNode: CacheNode = {\n    rsc,\n    prefetchRsc,\n    head,\n    prefetchHead,\n    // TODO: Technically, a loading boundary could contain dynamic data. We\n    // should have separate `loading` and `prefetchLoading` fields to handle\n    // this, like we do for the segment data and head.\n    loading: seedLoading,\n    parallelRoutes,\n    navigatedAt,\n  }\n\n  return cacheNode\n}\n\nfunction spawnNewCacheNode(\n  parallelRoutes: Map<string, ChildSegmentMap>,\n  isLeafSegment: boolean,\n  navigatedAt: number,\n  freshness: FreshnessPolicy\n): CacheNode {\n  // We should never spawn network requests during hydration. We must treat the\n  // initial payload as authoritative, because the initial page load is used\n  // as a last-ditch mechanism for recovering the app.\n  //\n  // This is also an important safety check because if this leaks into the\n  // server rendering path (which theoretically it never should because\n  // the server payload should be consistent), the server would hang because\n  // these promises would never resolve.\n  //\n  // TODO: There is an existing case where the global \"not found\" boundary\n  // triggers this path. But it does render correctly despite that. That's an\n  // unusual render path so it's not surprising, but we should look into\n  // modeling it in a more consistent way. See also the /_notFound special\n  // case in updateCacheNodeOnNavigation.\n  const isHydration = freshness === FreshnessPolicy.Hydration\n\n  const cacheNode: CacheNode = {\n    rsc: !isHydration ? createDeferredRsc() : null,\n    prefetchRsc: null,\n    head: !isHydration && isLeafSegment ? createDeferredRsc() : null,\n    prefetchHead: null,\n    loading: !isHydration ? createDeferredRsc<LoadingModuleData>() : null,\n    parallelRoutes,\n    navigatedAt,\n  }\n  return cacheNode\n}\n\n// Represents whether the previuos navigation resulted in a route tree mismatch.\n// A mismatch results in a refresh of the page. If there are two successive\n// mismatches, we will fall back to an MPA navigation, to prevent a retry loop.\nlet previousNavigationDidMismatch = false\n\n// Writes a dynamic server response into the tree created by\n// updateCacheNodeOnNavigation. All pending promises that were spawned by the\n// navigation will be resolved, either with dynamic data from the server, or\n// `null` to indicate that the data is missing.\n//\n// A `null` value will trigger a lazy fetch during render, which will then patch\n// up the tree using the same mechanism as the non-PPR implementation\n// (serverPatchReducer).\n//\n// Usually, the server will respond with exactly the subset of data that we're\n// waiting for  everything below the nearest shared layout. But technically,\n// the server can return anything it wants.\n//\n// This does _not_ create a new tree; it modifies the existing one in place.\n// Which means it must follow the Suspense rules of cache safety.\nexport function spawnDynamicRequests(\n  task: NavigationTask,\n  primaryUrl: URL,\n  nextUrl: string | null,\n  freshnessPolicy: FreshnessPolicy,\n  accumulation: NavigationRequestAccumulation\n): void {\n  const dynamicRequestTree = task.dynamicRequestTree\n  if (dynamicRequestTree === null) {\n    // This navigation was fully cached. There are no dynamic requests to spawn.\n    previousNavigationDidMismatch = false\n    return\n  }\n\n  // This is intentionally not an async function to discourage the caller from\n  // awaiting the result. Any subsequent async operations spawned by this\n  // function should result in a separate navigation task, rather than\n  // block the original one.\n  //\n  // In this function we spawn (but do not await) all the network requests that\n  // block the navigation, and collect the promises. The next function,\n  // `finishNavigationTask`, can await the promises in any order without\n  // accidentally introducing a network waterfall.\n  const primaryRequestPromise = fetchMissingDynamicData(\n    task,\n    dynamicRequestTree,\n    primaryUrl,\n    nextUrl,\n    freshnessPolicy\n  )\n\n  const separateRefreshUrls = accumulation.separateRefreshUrls\n  let refreshRequestPromises: Array<\n    ReturnType<typeof fetchMissingDynamicData>\n  > | null = null\n  if (separateRefreshUrls !== null) {\n    // There are multiple URLs that we need to request the data from. This\n    // happens when a \"default\" parallel route slot is present in the tree, and\n    // its data cannot be fetched from the current route. We need to split the\n    // combined dynamic request tree into separate requests per URL.\n\n    // TODO: Create a scoped dynamic request tree that omits anything that\n    // is not relevant to the given URL. Without doing this, the server may\n    // sometimes render more data than necessary; this is not a regression\n    // compared to the pre-Segment Cache implementation, though, just an\n    // optimization we can make in the future.\n\n    // Construct a request tree for each additional refresh URL. This will\n    // prune away everything except the parts of the tree that match the\n    // given refresh URL.\n    refreshRequestPromises = []\n    const canonicalUrl = createHrefFromUrl(primaryUrl)\n    for (const refreshUrl of separateRefreshUrls) {\n      if (refreshUrl === canonicalUrl) {\n        // We already initiated a request for the this URL, above. Skip it.\n        // TODO: This only happens because the main URL is not tracked as\n        // part of the separateRefreshURLs set. There's probably a better way\n        // to structure this so this case doesn't happen.\n        continue\n      }\n      // TODO: Create a scoped dynamic request tree that omits anything that\n      // is not relevant to the given URL. Without doing this, the server may\n      // sometimes render more data than necessary; this is not a regression\n      // compared to the pre-Segment Cache implementation, though, just an\n      // optimization we can make in the future.\n      // const scopedDynamicRequestTree = splitTaskByURL(task, refreshUrl)\n      const scopedDynamicRequestTree = dynamicRequestTree\n      if (scopedDynamicRequestTree !== null) {\n        refreshRequestPromises.push(\n          fetchMissingDynamicData(\n            task,\n            scopedDynamicRequestTree,\n            new URL(refreshUrl, location.origin),\n            // TODO: Just noticed that this should actually the Next-Url at the\n            // time the refresh URL was set, not the current Next-Url. Need to\n            // start tracking this alongside the refresh URL. In the meantime,\n            // if a refresh fails due to a mismatch, it will trigger a\n            // hard refresh.\n            nextUrl,\n            freshnessPolicy\n          )\n        )\n      }\n    }\n  }\n\n  // Further async operations are moved into this separate function to\n  // discourage sequential network requests.\n  const voidPromise = finishNavigationTask(\n    task,\n    nextUrl,\n    primaryRequestPromise,\n    refreshRequestPromises\n  )\n  // `finishNavigationTask` is responsible for error handling, so we can attach\n  // noop callbacks to this promise.\n  voidPromise.then(noop, noop)\n}\n\nasync function finishNavigationTask(\n  task: NavigationTask,\n  nextUrl: string | null,\n  primaryRequestPromise: ReturnType<typeof fetchMissingDynamicData>,\n  refreshRequestPromises: Array<\n    ReturnType<typeof fetchMissingDynamicData>\n  > | null\n): Promise<void> {\n  // Wait for all the requests to finish, or for the first one to fail.\n  let exitStatus = await waitForRequestsToFinish(\n    primaryRequestPromise,\n    refreshRequestPromises\n  )\n\n  // Once the all the requests have finished, check the tree for any remaining\n  // pending tasks. If anything is still pending, it means the server response\n  // does not match the client, and we must refresh to get back to a consistent\n  // state. We can skip this step if we already detected a mismatch during the\n  // first phase; it doesn't matter in that case because we're going to refresh\n  // the whole tree regardless.\n  if (exitStatus === NavigationTaskExitStatus.Done) {\n    exitStatus = abortRemainingPendingTasks(task, null, null)\n  }\n\n  switch (exitStatus) {\n    case NavigationTaskExitStatus.Done: {\n      // The task has completely finished. There's no missing data. Exit.\n      previousNavigationDidMismatch = false\n      return\n    }\n    case NavigationTaskExitStatus.SoftRetry: {\n      // Some data failed to finish loading. Trigger a soft retry.\n      // TODO: As an extra precaution against soft retry loops, consider\n      // tracking whether a navigation was itself triggered by a retry. If two\n      // happen in a row, fall back to a hard retry.\n      const isHardRetry = false\n      const primaryRequestResult = await primaryRequestPromise\n      dispatchRetryDueToTreeMismatch(\n        isHardRetry,\n        primaryRequestResult.url,\n        nextUrl,\n        primaryRequestResult.seed,\n        task.route\n      )\n      return\n    }\n    case NavigationTaskExitStatus.HardRetry: {\n      // Some data failed to finish loading in a non-recoverable way, such as a\n      // network error. Trigger an MPA navigation.\n      //\n      // Hard navigating/refreshing is how we prevent an infinite retry loop\n      // caused by a network error  when the network fails, we fall back to the\n      // browser behavior for offline navigations. In the future, Next.js may\n      // introduce its own custom handling of offline navigations, but that\n      // doesn't exist yet.\n      const isHardRetry = true\n      const primaryRequestResult = await primaryRequestPromise\n      dispatchRetryDueToTreeMismatch(\n        isHardRetry,\n        primaryRequestResult.url,\n        nextUrl,\n        primaryRequestResult.seed,\n        task.route\n      )\n      return\n    }\n    default: {\n      return exitStatus satisfies never\n    }\n  }\n}\n\nfunction waitForRequestsToFinish(\n  primaryRequestPromise: ReturnType<typeof fetchMissingDynamicData>,\n  refreshRequestPromises: Array<\n    ReturnType<typeof fetchMissingDynamicData>\n  > | null\n) {\n  // Custom async combinator logic. This could be replaced by Promise.any but\n  // we don't assume that's available.\n  //\n  // Each promise resolves once the server responsds and the data is written\n  // into the CacheNode tree. Resolve the combined promise once all the\n  // requests finish.\n  //\n  // Or, resolve as soon as one of the requests fails, without waiting for the\n  // others to finish.\n  return new Promise<NavigationTaskExitStatus>((resolve) => {\n    const onFulfill = (result: { exitStatus: NavigationTaskExitStatus }) => {\n      if (result.exitStatus === NavigationTaskExitStatus.Done) {\n        remainingCount--\n        if (remainingCount === 0) {\n          // All the requests finished successfully.\n          resolve(NavigationTaskExitStatus.Done)\n        }\n      } else {\n        // One of the requests failed. Exit with a failing status.\n        // NOTE: It's possible for one of the requests to fail with SoftRetry\n        // and a later one to fail with HardRetry. In this case, we choose to\n        // retry immediately, rather than delay the retry until all the requests\n        // finish. If it fails again, we will hard retry on the next\n        // attempt, anyway.\n        resolve(result.exitStatus)\n      }\n    }\n    // onReject shouldn't ever be called because fetchMissingDynamicData's\n    // entire body is wrapped in a try/catch. This is just defensive.\n    const onReject = () => resolve(NavigationTaskExitStatus.HardRetry)\n\n    // Attach the listeners to the promises.\n    let remainingCount = 1\n    primaryRequestPromise.then(onFulfill, onReject)\n    if (refreshRequestPromises !== null) {\n      remainingCount += refreshRequestPromises.length\n      refreshRequestPromises.forEach((refreshRequestPromise) =>\n        refreshRequestPromise.then(onFulfill, onReject)\n      )\n    }\n  })\n}\n\nfunction dispatchRetryDueToTreeMismatch(\n  isHardRetry: boolean,\n  retryUrl: URL,\n  retryNextUrl: string | null,\n  seed: NavigationSeed | null,\n  baseTree: FlightRouterState\n) {\n  // If this is the second time in a row that a navigation resulted in a\n  // mismatch, fall back to a hard (MPA) refresh.\n  isHardRetry = isHardRetry || previousNavigationDidMismatch\n  previousNavigationDidMismatch = true\n  const retryAction: ServerPatchAction = {\n    type: ACTION_SERVER_PATCH,\n    previousTree: baseTree,\n    url: retryUrl,\n    nextUrl: retryNextUrl,\n    seed,\n    mpa: isHardRetry,\n  }\n  dispatchAppRouterAction(retryAction)\n}\n\nasync function fetchMissingDynamicData(\n  task: NavigationTask,\n  dynamicRequestTree: FlightRouterState,\n  url: URL,\n  nextUrl: string | null,\n  freshnessPolicy: FreshnessPolicy\n): Promise<{\n  exitStatus: NavigationTaskExitStatus\n  url: URL\n  seed: NavigationSeed | null\n}> {\n  try {\n    const result = await fetchServerResponse(url, {\n      flightRouterState: dynamicRequestTree,\n      nextUrl,\n      isHmrRefresh: freshnessPolicy === FreshnessPolicy.HMRRefresh,\n    })\n    if (typeof result === 'string') {\n      // fetchServerResponse will return an href to indicate that the SPA\n      // navigation failed. For example, if the server triggered a hard\n      // redirect, or the fetch request errored. Initiate an MPA navigation\n      // to the given href.\n      return {\n        exitStatus: NavigationTaskExitStatus.HardRetry,\n        url: new URL(result, location.origin),\n        seed: null,\n      }\n    }\n    const seed = convertServerPatchToFullTree(\n      task.route,\n      result.flightData,\n      result.renderedSearch\n    )\n    const didReceiveUnknownParallelRoute = writeDynamicDataIntoNavigationTask(\n      task,\n      seed.tree,\n      seed.data,\n      seed.head,\n      result.debugInfo\n    )\n    return {\n      exitStatus: didReceiveUnknownParallelRoute\n        ? NavigationTaskExitStatus.SoftRetry\n        : NavigationTaskExitStatus.Done,\n      url: new URL(result.canonicalUrl, location.origin),\n      seed,\n    }\n  } catch {\n    // This shouldn't happen because fetchServerResponse's entire body is\n    // wrapped in a try/catch. If it does, though, it implies the server failed\n    // to respond with any tree at all. So we must fall back to a hard retry.\n    return {\n      exitStatus: NavigationTaskExitStatus.HardRetry,\n      url: url,\n      seed: null,\n    }\n  }\n}\n\nfunction writeDynamicDataIntoNavigationTask(\n  task: NavigationTask,\n  serverRouterState: FlightRouterState,\n  dynamicData: CacheNodeSeedData | null,\n  dynamicHead: HeadData,\n  debugInfo: Array<any> | null\n): boolean {\n  if (task.status === NavigationTaskStatus.Pending && dynamicData !== null) {\n    task.status = NavigationTaskStatus.Fulfilled\n    finishPendingCacheNode(task.node, dynamicData, dynamicHead, debugInfo)\n  }\n\n  const taskChildren = task.children\n  const serverChildren = serverRouterState[1]\n  const dynamicDataChildren = dynamicData !== null ? dynamicData[1] : null\n\n  // Detect whether the server sends a parallel route slot that the client\n  // doesn't know about.\n  let didReceiveUnknownParallelRoute = false\n\n  if (taskChildren !== null) {\n    for (const parallelRouteKey in serverChildren) {\n      const serverRouterStateChild: FlightRouterState =\n        serverChildren[parallelRouteKey]\n      const dynamicDataChild: CacheNodeSeedData | null | void =\n        dynamicDataChildren !== null\n          ? dynamicDataChildren[parallelRouteKey]\n          : null\n\n      const taskChild = taskChildren.get(parallelRouteKey)\n      if (taskChild === undefined) {\n        // The server sent a child segment that the client doesn't know about.\n        //\n        // When we receive an unknown parallel route, we must consider it a\n        // mismatch. This is unlike the case where the segment itself\n        // mismatches, because multiple routes can be active simultaneously.\n        // But a given layout should never have a mismatching set of\n        // child slots.\n        //\n        // Theoretically, this should only happen in development during an HMR\n        // refresh, because the set of parallel routes for a layout does not\n        // change over the lifetime of a build/deployment. In production, we\n        // should have already mismatched on either the build id or the segment\n        // path. But as an extra precaution, we validate in prod, too.\n        didReceiveUnknownParallelRoute = true\n      } else {\n        const taskSegment = taskChild.route[0]\n        if (\n          matchSegment(serverRouterStateChild[0], taskSegment) &&\n          dynamicDataChild !== null &&\n          dynamicDataChild !== undefined\n        ) {\n          // Found a match for this task. Keep traversing down the task tree.\n          const childDidReceiveUnknownParallelRoute =\n            writeDynamicDataIntoNavigationTask(\n              taskChild,\n              serverRouterStateChild,\n              dynamicDataChild,\n              dynamicHead,\n              debugInfo\n            )\n          if (childDidReceiveUnknownParallelRoute) {\n            didReceiveUnknownParallelRoute = true\n          }\n        }\n      }\n    }\n  }\n\n  return didReceiveUnknownParallelRoute\n}\n\nfunction finishPendingCacheNode(\n  cacheNode: CacheNode,\n  dynamicData: CacheNodeSeedData,\n  dynamicHead: HeadData,\n  debugInfo: Array<any> | null\n): void {\n  // Writes a dynamic response into an existing Cache Node tree. This does _not_\n  // create a new tree, it updates the existing tree in-place. So it must follow\n  // the Suspense rules of cache safety  it can resolve pending promises, but\n  // it cannot overwrite existing data. It can add segments to the tree (because\n  // a missing segment will cause the layout router to suspend).\n  // but it cannot delete them.\n  //\n  // We must resolve every promise in the tree, or else it will suspend\n  // indefinitely. If we did not receive data for a segment, we will resolve its\n  // data promise to `null` to trigger a lazy fetch during render.\n\n  // Use the dynamic data from the server to fulfill the deferred RSC promise\n  // on the Cache Node.\n  const rsc = cacheNode.rsc\n  const dynamicSegmentData = dynamicData[0]\n\n  if (dynamicSegmentData === null) {\n    // This is an empty CacheNode; this particular server request did not\n    // render this segment. There may be a separate pending request that will,\n    // though, so we won't abort the task until all pending requests finish.\n    return\n  }\n\n  if (rsc === null) {\n    // This is a lazy cache node. We can overwrite it. This is only safe\n    // because we know that the LayoutRouter suspends if `rsc` is `null`.\n    cacheNode.rsc = dynamicSegmentData\n  } else if (isDeferredRsc(rsc)) {\n    // This is a deferred RSC promise. We can fulfill it with the data we just\n    // received from the server. If it was already resolved by a different\n    // navigation, then this does nothing because we can't overwrite data.\n    rsc.resolve(dynamicSegmentData, debugInfo)\n  } else {\n    // This is not a deferred RSC promise, nor is it empty, so it must have\n    // been populated by a different navigation. We must not overwrite it.\n  }\n\n  // If we navigated without a prefetch, then `loading` will be a deferred promise too.\n  // Fulfill it using the dynamic response so that we can display the loading boundary.\n  const loading = cacheNode.loading\n  if (isDeferredRsc(loading)) {\n    const dynamicLoading = dynamicData[2]\n    loading.resolve(dynamicLoading, debugInfo)\n  }\n\n  // Check if this is a leaf segment. If so, it will have a `head` property with\n  // a pending promise that needs to be resolved with the dynamic head from\n  // the server.\n  const head = cacheNode.head\n  if (isDeferredRsc(head)) {\n    head.resolve(dynamicHead, debugInfo)\n  }\n}\n\nfunction abortRemainingPendingTasks(\n  task: NavigationTask,\n  error: any,\n  debugInfo: Array<any> | null\n): NavigationTaskExitStatus {\n  let exitStatus\n  if (task.status === NavigationTaskStatus.Pending) {\n    // The data for this segment is still missing.\n    task.status = NavigationTaskStatus.Rejected\n    abortPendingCacheNode(task.node, error, debugInfo)\n\n    // If the server failed to fulfill the data for this segment, it implies\n    // that the route tree received from the server mismatched the tree that\n    // was previously prefetched.\n    //\n    // In an app with fully static routes and no proxy-driven redirects or\n    // rewrites, this should never happen, because the route for a URL would\n    // always be the same across multiple requests. So, this implies that some\n    // runtime routing condition changed, likely in a proxy, without being\n    // pushed to the client.\n    //\n    // When this happens, we treat this the same as a refresh(). The entire\n    // tree will be re-rendered from the root.\n    if (task.refreshUrl === null) {\n      // Trigger a \"soft\" refresh. Essentially the same as calling `refresh()`\n      // in a Server Action.\n      exitStatus = NavigationTaskExitStatus.SoftRetry\n    } else {\n      // The mismatch was discovered inside an inactive parallel route. This\n      // implies the inactive parallel route is no longer reachable at the URL\n      // that originally rendered it. Fall back to an MPA refresh.\n      // TODO: An alternative could be to trigger a soft refresh but to _not_\n      // re-use the inactive parallel routes this time. Similar to what would\n      // happen if were to do a hard refrehs, but without the HTML page.\n      exitStatus = NavigationTaskExitStatus.HardRetry\n    }\n  } else {\n    // This segment finished. (An error here is treated as Done because they are\n    // surfaced to the application during render.)\n    exitStatus = NavigationTaskExitStatus.Done\n  }\n\n  const taskChildren = task.children\n  if (taskChildren !== null) {\n    for (const [, taskChild] of taskChildren) {\n      const childExitStatus = abortRemainingPendingTasks(\n        taskChild,\n        error,\n        debugInfo\n      )\n      // Propagate the exit status up the tree. The statuses are ordered by\n      // their precedence.\n      if (childExitStatus > exitStatus) {\n        exitStatus = childExitStatus\n      }\n    }\n  }\n\n  return exitStatus\n}\n\nfunction abortPendingCacheNode(\n  cacheNode: CacheNode,\n  error: any,\n  debugInfo: Array<any> | null\n): void {\n  const rsc = cacheNode.rsc\n  if (isDeferredRsc(rsc)) {\n    if (error === null) {\n      // This will trigger a lazy fetch during render.\n      rsc.resolve(null, debugInfo)\n    } else {\n      // This will trigger an error during rendering.\n      rsc.reject(error, debugInfo)\n    }\n  }\n\n  const loading = cacheNode.loading\n  if (isDeferredRsc(loading)) {\n    loading.resolve(null, debugInfo)\n  }\n\n  // Check if this is a leaf segment. If so, it will have a `head` property with\n  // a pending promise that needs to be resolved. If an error was provided, we\n  // will not resolve it with an error, since this is rendered at the root of\n  // the app. We want the segment to error, not the entire app.\n  const head = cacheNode.head\n  if (isDeferredRsc(head)) {\n    head.resolve(null, debugInfo)\n  }\n}\n\nconst DEFERRED = Symbol()\n\ntype PendingDeferredRsc<T> = Promise<T> & {\n  status: 'pending'\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype FulfilledDeferredRsc<T> = Promise<T> & {\n  status: 'fulfilled'\n  value: T\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype RejectedDeferredRsc<T> = Promise<T> & {\n  status: 'rejected'\n  reason: any\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype DeferredRsc<T extends React.ReactNode = React.ReactNode> =\n  | PendingDeferredRsc<T>\n  | FulfilledDeferredRsc<T>\n  | RejectedDeferredRsc<T>\n\n// This type exists to distinguish a DeferredRsc from a Flight promise. It's a\n// compromise to avoid adding an extra field on every Cache Node, which would be\n// awkward because the pre-PPR parts of codebase would need to account for it,\n// too. We can remove it once type Cache Node type is more settled.\nexport function isDeferredRsc(value: any): value is DeferredRsc {\n  return value && typeof value === 'object' && value.tag === DEFERRED\n}\n\nfunction createDeferredRsc<\n  T extends React.ReactNode = React.ReactNode,\n>(): PendingDeferredRsc<T> {\n  // Create an unresolved promise that represents data derived from a Flight\n  // response. The promise will be resolved later as soon as we start receiving\n  // data from the server, i.e. as soon as the Flight client decodes and returns\n  // the top-level response object.\n\n  // The `_debugInfo` field contains profiling information. Promises that are\n  // created by Flight already have this info added by React; for any derived\n  // promise created by the router, we need to transfer the Flight debug info\n  // onto the derived promise.\n  //\n  // The debug info represents the latency between the start of the navigation\n  // and the start of rendering. (It does not represent the time it takes for\n  // whole stream to finish.)\n  const debugInfo: Array<any> = []\n\n  let resolve: any\n  let reject: any\n  const pendingRsc = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  }) as PendingDeferredRsc<T>\n  pendingRsc.status = 'pending'\n  pendingRsc.resolve = (value: T, responseDebugInfo: Array<any> | null) => {\n    if (pendingRsc.status === 'pending') {\n      const fulfilledRsc: FulfilledDeferredRsc<T> = pendingRsc as any\n      fulfilledRsc.status = 'fulfilled'\n      fulfilledRsc.value = value\n      if (responseDebugInfo !== null) {\n        // Transfer the debug info to the derived promise.\n        debugInfo.push.apply(debugInfo, responseDebugInfo)\n      }\n      resolve(value)\n    }\n  }\n  pendingRsc.reject = (error: any, responseDebugInfo: Array<any> | null) => {\n    if (pendingRsc.status === 'pending') {\n      const rejectedRsc: RejectedDeferredRsc<T> = pendingRsc as any\n      rejectedRsc.status = 'rejected'\n      rejectedRsc.reason = error\n      if (responseDebugInfo !== null) {\n        // Transfer the debug info to the derived promise.\n        debugInfo.push.apply(debugInfo, responseDebugInfo)\n      }\n      reject(error)\n    }\n  }\n  pendingRsc.tag = DEFERRED\n  pendingRsc._debugInfo = debugInfo\n\n  return pendingRsc\n}\n","import type {\n  CacheNodeSeedData,\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type { CacheNode } from '../../../shared/lib/app-router-types'\nimport type {\n  HeadData,\n  LoadingModuleData,\n} from '../../../shared/lib/app-router-types'\nimport type { NormalizedFlightData } from '../../flight-data-helpers'\nimport { fetchServerResponse } from '../router-reducer/fetch-server-response'\nimport {\n  startPPRNavigation,\n  spawnDynamicRequests,\n  FreshnessPolicy,\n  type NavigationTask,\n  type NavigationRequestAccumulation,\n} from '../router-reducer/ppr-navigations'\nimport { createHrefFromUrl } from '../router-reducer/create-href-from-url'\nimport {\n  EntryStatus,\n  readRouteCacheEntry,\n  readSegmentCacheEntry,\n  waitForSegmentCacheEntry,\n  requestOptimisticRouteCacheEntry,\n  type RouteTree,\n  type FulfilledRouteCacheEntry,\n} from './cache'\nimport { createCacheKey } from './cache-key'\nimport { addSearchParamsIfPageSegment } from '../../../shared/lib/segment'\nimport { NavigationResultTag } from './types'\n\ntype MPANavigationResult = {\n  tag: NavigationResultTag.MPA\n  data: string\n}\n\ntype SuccessfulNavigationResult = {\n  tag: NavigationResultTag.Success\n  data: {\n    flightRouterState: FlightRouterState\n    cacheNode: CacheNode\n    canonicalUrl: string\n    renderedSearch: string\n    scrollableSegments: Array<FlightSegmentPath> | null\n    shouldScroll: boolean\n    hash: string\n  }\n}\n\ntype AsyncNavigationResult = {\n  tag: NavigationResultTag.Async\n  data: Promise<MPANavigationResult | SuccessfulNavigationResult>\n}\n\nexport type NavigationResult =\n  | MPANavigationResult\n  | SuccessfulNavigationResult\n  | AsyncNavigationResult\n\n/**\n * Navigate to a new URL, using the Segment Cache to construct a response.\n *\n * To allow for synchronous navigations whenever possible, this is not an async\n * function. It returns a promise only if there's no matching prefetch in\n * the cache. Otherwise it returns an immediate result and uses Suspense/RSC to\n * stream in any missing data.\n */\nexport function navigate(\n  url: URL,\n  currentUrl: URL,\n  currentCacheNode: CacheNode | null,\n  currentFlightRouterState: FlightRouterState,\n  nextUrl: string | null,\n  freshnessPolicy: FreshnessPolicy,\n  shouldScroll: boolean,\n  accumulation: { collectedDebugInfo?: Array<unknown> }\n): NavigationResult {\n  const now = Date.now()\n  const href = url.href\n\n  // We special case navigations to the exact same URL as the current location.\n  // It's a common UI pattern for apps to refresh when you click a link to the\n  // current page. So when this happens, we refresh the dynamic data in the page\n  // segments.\n  //\n  // Note that this does not apply if the any part of the hash or search query\n  // has changed. This might feel a bit weird but it makes more sense when you\n  // consider that the way to trigger this behavior is to click the same link\n  // multiple times.\n  //\n  // TODO: We should probably refresh the *entire* route when this case occurs,\n  // not just the page segments. Essentially treating it the same as a refresh()\n  // triggered by an action, which is the more explicit way of modeling the UI\n  // pattern described above.\n  //\n  // Also note that this only refreshes the dynamic data, not static/ cached\n  // data. If the page segment is fully static and prefetched, the request is\n  // skipped. (This is also how refresh() works.)\n  const isSamePageNavigation = href === currentUrl.href\n\n  const cacheKey = createCacheKey(href, nextUrl)\n  const route = readRouteCacheEntry(now, cacheKey)\n  if (route !== null && route.status === EntryStatus.Fulfilled) {\n    // We have a matching prefetch.\n    const snapshot = readRenderSnapshotFromCache(now, route, route.tree)\n    const prefetchFlightRouterState = snapshot.flightRouterState\n    const prefetchSeedData = snapshot.seedData\n    const headSnapshot = readHeadSnapshotFromCache(now, route)\n    const prefetchHead = headSnapshot.rsc\n    const isPrefetchHeadPartial = headSnapshot.isPartial\n    // TODO: The \"canonicalUrl\" stored in the cache doesn't include the hash,\n    // because hash entries do not vary by hash fragment. However, the one\n    // we set in the router state *does* include the hash, and it's used to\n    // sync with the actual browser location. To make this less of a refactor\n    // hazard, we should always track the hash separately from the rest of\n    // the URL.\n    const newCanonicalUrl = route.canonicalUrl + url.hash\n    const renderedSearch = route.renderedSearch\n    return navigateUsingPrefetchedRouteTree(\n      now,\n      url,\n      currentUrl,\n      nextUrl,\n      isSamePageNavigation,\n      currentCacheNode,\n      currentFlightRouterState,\n      prefetchFlightRouterState,\n      prefetchSeedData,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      newCanonicalUrl,\n      renderedSearch,\n      freshnessPolicy,\n      shouldScroll\n    )\n  }\n\n  // There was no matching route tree in the cache. Let's see if we can\n  // construct an \"optimistic\" route tree.\n  //\n  // Do not construct an optimistic route tree if there was a cache hit, but\n  // the entry has a rejected status, since it may have been rejected due to a\n  // rewrite or redirect based on the search params.\n  //\n  // TODO: There are multiple reasons a prefetch might be rejected; we should\n  // track them explicitly and choose what to do here based on that.\n  if (route === null || route.status !== EntryStatus.Rejected) {\n    const optimisticRoute = requestOptimisticRouteCacheEntry(now, url, nextUrl)\n    if (optimisticRoute !== null) {\n      // We have an optimistic route tree. Proceed with the normal flow.\n      const snapshot = readRenderSnapshotFromCache(\n        now,\n        optimisticRoute,\n        optimisticRoute.tree\n      )\n      const prefetchFlightRouterState = snapshot.flightRouterState\n      const prefetchSeedData = snapshot.seedData\n      const headSnapshot = readHeadSnapshotFromCache(now, optimisticRoute)\n      const prefetchHead = headSnapshot.rsc\n      const isPrefetchHeadPartial = headSnapshot.isPartial\n      const newCanonicalUrl = optimisticRoute.canonicalUrl + url.hash\n      const newRenderedSearch = optimisticRoute.renderedSearch\n      return navigateUsingPrefetchedRouteTree(\n        now,\n        url,\n        currentUrl,\n        nextUrl,\n        isSamePageNavigation,\n        currentCacheNode,\n        currentFlightRouterState,\n        prefetchFlightRouterState,\n        prefetchSeedData,\n        prefetchHead,\n        isPrefetchHeadPartial,\n        newCanonicalUrl,\n        newRenderedSearch,\n        freshnessPolicy,\n        shouldScroll\n      )\n    }\n  }\n\n  // There's no matching prefetch for this route in the cache.\n  let collectedDebugInfo = accumulation.collectedDebugInfo ?? []\n  if (accumulation.collectedDebugInfo === undefined) {\n    collectedDebugInfo = accumulation.collectedDebugInfo = []\n  }\n  return {\n    tag: NavigationResultTag.Async,\n    data: navigateDynamicallyWithNoPrefetch(\n      now,\n      url,\n      currentUrl,\n      nextUrl,\n      currentCacheNode,\n      currentFlightRouterState,\n      freshnessPolicy,\n      shouldScroll,\n      collectedDebugInfo\n    ),\n  }\n}\n\nexport function navigateToSeededRoute(\n  now: number,\n  url: URL,\n  canonicalUrl: string,\n  navigationSeed: NavigationSeed,\n  currentUrl: URL,\n  currentCacheNode: CacheNode | null,\n  currentFlightRouterState: FlightRouterState,\n  freshnessPolicy: FreshnessPolicy,\n  nextUrl: string | null,\n  shouldScroll: boolean\n): SuccessfulNavigationResult | MPANavigationResult {\n  // A version of navigate() that accepts the target route tree as an argument\n  // rather than reading it from the prefetch cache.\n  const accumulation: NavigationRequestAccumulation = {\n    scrollableSegments: null,\n    separateRefreshUrls: null,\n  }\n  const isSamePageNavigation = url.href === currentUrl.href\n  const task = startPPRNavigation(\n    now,\n    currentUrl,\n    currentCacheNode,\n    currentFlightRouterState,\n    navigationSeed.tree,\n    freshnessPolicy,\n    navigationSeed.data,\n    navigationSeed.head,\n    null,\n    null,\n    false,\n    isSamePageNavigation,\n    accumulation\n  )\n  if (task !== null) {\n    spawnDynamicRequests(task, url, nextUrl, freshnessPolicy, accumulation)\n    return navigationTaskToResult(\n      task,\n      canonicalUrl,\n      navigationSeed.renderedSearch,\n      accumulation.scrollableSegments,\n      shouldScroll,\n      url.hash\n    )\n  }\n  // Could not perform a SPA navigation. Revert to a full-page (MPA) navigation.\n  return {\n    tag: NavigationResultTag.MPA,\n    data: canonicalUrl,\n  }\n}\n\nfunction navigateUsingPrefetchedRouteTree(\n  now: number,\n  url: URL,\n  currentUrl: URL,\n  nextUrl: string | null,\n  isSamePageNavigation: boolean,\n  currentCacheNode: CacheNode | null,\n  currentFlightRouterState: FlightRouterState,\n  prefetchFlightRouterState: FlightRouterState,\n  prefetchSeedData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  canonicalUrl: string,\n  renderedSearch: string,\n  freshnessPolicy: FreshnessPolicy,\n  shouldScroll: boolean\n): SuccessfulNavigationResult | MPANavigationResult {\n  // Recursively construct a prefetch tree by reading from the Segment Cache. To\n  // maintain compatibility, we output the same data structures as the old\n  // prefetching implementation: FlightRouterState and CacheNodeSeedData.\n  // TODO: Eventually updateCacheNodeOnNavigation (or the equivalent) should\n  // read from the Segment Cache directly. It's only structured this way for now\n  // so we can share code with the old prefetching implementation.\n  const accumulation: NavigationRequestAccumulation = {\n    scrollableSegments: null,\n    separateRefreshUrls: null,\n  }\n  const seedData = null\n  const seedHead = null\n  const task = startPPRNavigation(\n    now,\n    currentUrl,\n    currentCacheNode,\n    currentFlightRouterState,\n    prefetchFlightRouterState,\n    freshnessPolicy,\n    seedData,\n    seedHead,\n    prefetchSeedData,\n    prefetchHead,\n    isPrefetchHeadPartial,\n    isSamePageNavigation,\n    accumulation\n  )\n  if (task !== null) {\n    spawnDynamicRequests(task, url, nextUrl, freshnessPolicy, accumulation)\n    return navigationTaskToResult(\n      task,\n      canonicalUrl,\n      renderedSearch,\n      accumulation.scrollableSegments,\n      shouldScroll,\n      url.hash\n    )\n  }\n  // Could not perform a SPA navigation. Revert to a full-page (MPA) navigation.\n  return {\n    tag: NavigationResultTag.MPA,\n    data: canonicalUrl,\n  }\n}\n\nfunction navigationTaskToResult(\n  task: NavigationTask,\n  canonicalUrl: string,\n  renderedSearch: string,\n  scrollableSegments: Array<FlightSegmentPath> | null,\n  shouldScroll: boolean,\n  hash: string\n): SuccessfulNavigationResult | MPANavigationResult {\n  return {\n    tag: NavigationResultTag.Success,\n    data: {\n      flightRouterState: task.route,\n      cacheNode: task.node,\n      canonicalUrl,\n      renderedSearch,\n      scrollableSegments,\n      shouldScroll,\n      hash,\n    },\n  }\n}\n\nfunction readRenderSnapshotFromCache(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): { flightRouterState: FlightRouterState; seedData: CacheNodeSeedData } {\n  let childRouterStates: { [parallelRouteKey: string]: FlightRouterState } = {}\n  let childSeedDatas: {\n    [parallelRouteKey: string]: CacheNodeSeedData | null\n  } = {}\n  const slots = tree.slots\n  if (slots !== null) {\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      const childResult = readRenderSnapshotFromCache(now, route, childTree)\n      childRouterStates[parallelRouteKey] = childResult.flightRouterState\n      childSeedDatas[parallelRouteKey] = childResult.seedData\n    }\n  }\n\n  let rsc: React.ReactNode | null = null\n  let loading: LoadingModuleData | Promise<LoadingModuleData> = null\n  let isPartial: boolean = true\n\n  const segmentEntry = readSegmentCacheEntry(now, tree.varyPath)\n  if (segmentEntry !== null) {\n    switch (segmentEntry.status) {\n      case EntryStatus.Fulfilled: {\n        // Happy path: a cache hit\n        rsc = segmentEntry.rsc\n        loading = segmentEntry.loading\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Pending: {\n        // We haven't received data for this segment yet, but there's already\n        // an in-progress request. Since it's extremely likely to arrive\n        // before the dynamic data response, we might as well use it.\n        const promiseForFulfilledEntry = waitForSegmentCacheEntry(segmentEntry)\n        rsc = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.rsc : null\n        )\n        loading = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.loading : null\n        )\n        // Because the request is still pending, we typically don't know yet\n        // whether the response will be partial. We shouldn't skip this segment\n        // during the dynamic navigation request. Otherwise, we might need to\n        // do yet another request to fill in the remaining data, creating\n        // a waterfall.\n        //\n        // The one exception is if this segment is being fetched with via\n        // prefetch={true} (i.e. the \"force stale\" or \"full\" strategy). If so,\n        // we can assume the response will be full. This field is set to `false`\n        // for such segments.\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Empty:\n      case EntryStatus.Rejected:\n        break\n      default:\n        segmentEntry satisfies never\n    }\n  }\n\n  // The navigation implementation expects the search params to be\n  // included in the segment. However, the Segment Cache tracks search\n  // params separately from the rest of the segment key. So we need to\n  // add them back here.\n  //\n  // See corresponding comment in convertFlightRouterStateToTree.\n  //\n  // TODO: What we should do instead is update the navigation diffing\n  // logic to compare search params explicitly. This is a temporary\n  // solution until more of the Segment Cache implementation has settled.\n  const segment = addSearchParamsIfPageSegment(\n    tree.segment,\n    Object.fromEntries(new URLSearchParams(route.renderedSearch))\n  )\n\n  // We don't need this information in a render snapshot, so this can just be a placeholder.\n  const hasRuntimePrefetch = false\n\n  return {\n    flightRouterState: [\n      segment,\n      childRouterStates,\n      null,\n      null,\n      tree.isRootLayout,\n    ],\n    seedData: [rsc, childSeedDatas, loading, isPartial, hasRuntimePrefetch],\n  }\n}\n\nfunction readHeadSnapshotFromCache(\n  now: number,\n  route: FulfilledRouteCacheEntry\n): { rsc: HeadData; isPartial: boolean } {\n  // Same as readRenderSnapshotFromCache, but for the head\n  let rsc: React.ReactNode | null = null\n  let isPartial: boolean = true\n  const segmentEntry = readSegmentCacheEntry(now, route.metadata.varyPath)\n  if (segmentEntry !== null) {\n    switch (segmentEntry.status) {\n      case EntryStatus.Fulfilled: {\n        rsc = segmentEntry.rsc\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Pending: {\n        const promiseForFulfilledEntry = waitForSegmentCacheEntry(segmentEntry)\n        rsc = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.rsc : null\n        )\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Empty:\n      case EntryStatus.Rejected:\n        break\n      default:\n        segmentEntry satisfies never\n    }\n  }\n  return { rsc, isPartial }\n}\n\n// Used to request all the dynamic data for a route, rather than just a subset,\n// e.g. during a refresh or a revalidation. Typically this gets constructed\n// during the normal flow when diffing the route tree, but for an unprefetched\n// navigation, where we don't know the structure of the target route, we use\n// this instead.\nconst DynamicRequestTreeForEntireRoute: FlightRouterState = [\n  '',\n  {},\n  null,\n  'refetch',\n]\n\nasync function navigateDynamicallyWithNoPrefetch(\n  now: number,\n  url: URL,\n  currentUrl: URL,\n  nextUrl: string | null,\n  currentCacheNode: CacheNode | null,\n  currentFlightRouterState: FlightRouterState,\n  freshnessPolicy: FreshnessPolicy,\n  shouldScroll: boolean,\n  collectedDebugInfo: Array<unknown>\n): Promise<MPANavigationResult | SuccessfulNavigationResult> {\n  // Runs when a navigation happens but there's no cached prefetch we can use.\n  // Don't bother to wait for a prefetch response; go straight to a full\n  // navigation that contains both static and dynamic data in a single stream.\n  // (This is unlike the old navigation implementation, which instead blocks\n  // the dynamic request until a prefetch request is received.)\n  //\n  // To avoid duplication of logic, we're going to pretend that the tree\n  // returned by the dynamic request is, in fact, a prefetch tree. Then we can\n  // use the same server response to write the actual data into the CacheNode\n  // tree. So it's the same flow as the \"happy path\" (prefetch, then\n  // navigation), except we use a single server response for both stages.\n\n  let dynamicRequestTree: FlightRouterState\n  switch (freshnessPolicy) {\n    case FreshnessPolicy.Default:\n    case FreshnessPolicy.HistoryTraversal:\n      dynamicRequestTree = currentFlightRouterState\n      break\n    case FreshnessPolicy.Hydration: // <- shouldn't happen during client nav\n    case FreshnessPolicy.RefreshAll:\n    case FreshnessPolicy.HMRRefresh:\n      dynamicRequestTree = DynamicRequestTreeForEntireRoute\n      break\n    default:\n      freshnessPolicy satisfies never\n      dynamicRequestTree = currentFlightRouterState\n      break\n  }\n\n  const promiseForDynamicServerResponse = fetchServerResponse(url, {\n    flightRouterState: dynamicRequestTree,\n    nextUrl,\n  })\n  const result = await promiseForDynamicServerResponse\n  if (typeof result === 'string') {\n    // This is an MPA navigation.\n    const newUrl = result\n    return {\n      tag: NavigationResultTag.MPA,\n      data: newUrl,\n    }\n  }\n\n  const {\n    flightData,\n    canonicalUrl,\n    renderedSearch,\n    debugInfo: debugInfoFromResponse,\n  } = result\n  if (debugInfoFromResponse !== null) {\n    collectedDebugInfo.push(...debugInfoFromResponse)\n  }\n\n  // Since the response format of dynamic requests and prefetches is slightly\n  // different, we'll need to massage the data a bit. Create FlightRouterState\n  // tree that simulates what we'd receive as the result of a prefetch.\n  const navigationSeed = convertServerPatchToFullTree(\n    currentFlightRouterState,\n    flightData,\n    renderedSearch\n  )\n\n  return navigateToSeededRoute(\n    now,\n    url,\n    createHrefFromUrl(canonicalUrl),\n    navigationSeed,\n    currentUrl,\n    currentCacheNode,\n    currentFlightRouterState,\n    freshnessPolicy,\n    nextUrl,\n    shouldScroll\n  )\n}\n\nexport type NavigationSeed = {\n  tree: FlightRouterState\n  renderedSearch: string\n  data: CacheNodeSeedData | null\n  head: HeadData | null\n}\n\nexport function convertServerPatchToFullTree(\n  currentTree: FlightRouterState,\n  flightData: Array<NormalizedFlightData>,\n  renderedSearch: string\n): NavigationSeed {\n  // During a client navigation or prefetch, the server sends back only a patch\n  // for the parts of the tree that have changed.\n  //\n  // This applies the patch to the base tree to create a full representation of\n  // the resulting tree.\n  //\n  // The return type includes a full FlightRouterState tree and a full\n  // CacheNodeSeedData tree. (Conceptually these are the same tree, and should\n  // eventually be unified, but there's still lots of existing code that\n  // operates on FlightRouterState trees alone without the CacheNodeSeedData.)\n  //\n  // TODO: This similar to what apply-router-state-patch-to-tree does. It\n  // will eventually fully replace it. We should get rid of all the remaining\n  // places where we iterate over the server patch format. This should also\n  // eventually replace normalizeFlightData.\n\n  let baseTree: FlightRouterState = currentTree\n  let baseData: CacheNodeSeedData | null = null\n  let head: HeadData | null = null\n  for (const {\n    segmentPath,\n    tree: treePatch,\n    seedData: dataPatch,\n    head: headPatch,\n  } of flightData) {\n    const result = convertServerPatchToFullTreeImpl(\n      baseTree,\n      baseData,\n      treePatch,\n      dataPatch,\n      segmentPath,\n      0\n    )\n    baseTree = result.tree\n    baseData = result.data\n    // This is the same for all patches per response, so just pick an\n    // arbitrary one\n    head = headPatch\n  }\n\n  return {\n    tree: baseTree,\n    data: baseData,\n    renderedSearch,\n    head,\n  }\n}\n\nfunction convertServerPatchToFullTreeImpl(\n  baseRouterState: FlightRouterState,\n  baseData: CacheNodeSeedData | null,\n  treePatch: FlightRouterState,\n  dataPatch: CacheNodeSeedData | null,\n  segmentPath: FlightSegmentPath,\n  index: number\n): { tree: FlightRouterState; data: CacheNodeSeedData | null } {\n  if (index === segmentPath.length) {\n    // We reached the part of the tree that we need to patch.\n    return {\n      tree: treePatch,\n      data: dataPatch,\n    }\n  }\n\n  // segmentPath represents the parent path of subtree. It's a repeating\n  // pattern of parallel route key and segment:\n  //\n  //   [string, Segment, string, Segment, string, Segment, ...]\n  //\n  // This path tells us which part of the base tree to apply the tree patch.\n  //\n  // NOTE: We receive the FlightRouterState patch in the same request as the\n  // seed data patch. Therefore we don't need to worry about diffing the segment\n  // values; we can assume the server sent us a correct result.\n  const updatedParallelRouteKey: string = segmentPath[index]\n  // const segment: Segment = segmentPath[index + 1] <-- Not used, see note above\n\n  const baseTreeChildren = baseRouterState[1]\n  const baseSeedDataChildren = baseData !== null ? baseData[1] : null\n  const newTreeChildren: Record<string, FlightRouterState> = {}\n  const newSeedDataChildren: Record<string, CacheNodeSeedData | null> = {}\n  for (const parallelRouteKey in baseTreeChildren) {\n    const childBaseRouterState = baseTreeChildren[parallelRouteKey]\n    const childBaseSeedData =\n      baseSeedDataChildren !== null\n        ? (baseSeedDataChildren[parallelRouteKey] ?? null)\n        : null\n    if (parallelRouteKey === updatedParallelRouteKey) {\n      const result = convertServerPatchToFullTreeImpl(\n        childBaseRouterState,\n        childBaseSeedData,\n        treePatch,\n        dataPatch,\n        segmentPath,\n        // Advance the index by two and keep cloning until we reach\n        // the end of the segment path.\n        index + 2\n      )\n\n      newTreeChildren[parallelRouteKey] = result.tree\n      newSeedDataChildren[parallelRouteKey] = result.data\n    } else {\n      // This child is not being patched. Copy it over as-is.\n      newTreeChildren[parallelRouteKey] = childBaseRouterState\n      newSeedDataChildren[parallelRouteKey] = childBaseSeedData\n    }\n  }\n\n  let clonedTree: FlightRouterState\n  let clonedSeedData: CacheNodeSeedData\n  // Clone all the fields except the children.\n\n  // Clone the FlightRouterState tree. Based on equivalent logic in\n  // apply-router-state-patch-to-tree, but should confirm whether we need to\n  // copy all of these fields. Not sure the server ever sends, e.g. the\n  // refetch marker.\n  clonedTree = [baseRouterState[0], newTreeChildren]\n  if (2 in baseRouterState) {\n    clonedTree[2] = baseRouterState[2]\n  }\n  if (3 in baseRouterState) {\n    clonedTree[3] = baseRouterState[3]\n  }\n  if (4 in baseRouterState) {\n    clonedTree[4] = baseRouterState[4]\n  }\n\n  // Clone the CacheNodeSeedData tree.\n  const isEmptySeedDataPartial = true\n  clonedSeedData = [\n    null,\n    newSeedDataChildren,\n    null,\n    isEmptySeedDataPartial,\n    false,\n  ]\n\n  return {\n    tree: clonedTree,\n    data: clonedSeedData,\n  }\n}\n","import type {\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../../shared/lib/app-router-types'\nimport { createHrefFromUrl } from '../create-href-from-url'\nimport type {\n  Mutable,\n  NavigateAction,\n  ReadonlyReducerState,\n  ReducerState,\n} from '../router-reducer-types'\nimport { handleMutable } from '../handle-mutable'\n\nimport {\n  navigate as navigateUsingSegmentCache,\n  type NavigationResult,\n} from '../../segment-cache/navigation'\nimport { NavigationResultTag } from '../../segment-cache/types'\nimport { getStaleTimeMs } from '../../segment-cache/cache'\nimport { FreshnessPolicy } from '../ppr-navigations'\n\n// These values are set by `define-env-plugin` (based on `nextConfig.experimental.staleTimes`)\n// and default to 5 minutes (static) / 0 seconds (dynamic)\nexport const DYNAMIC_STALETIME_MS =\n  Number(process.env.__NEXT_CLIENT_ROUTER_DYNAMIC_STALETIME) * 1000\n\nexport const STATIC_STALETIME_MS = getStaleTimeMs(\n  Number(process.env.__NEXT_CLIENT_ROUTER_STATIC_STALETIME)\n)\n\nexport function handleExternalUrl(\n  state: ReadonlyReducerState,\n  mutable: Mutable,\n  url: string,\n  pendingPush: boolean\n) {\n  mutable.mpaNavigation = true\n  mutable.canonicalUrl = url\n  mutable.pendingPush = pendingPush\n  mutable.scrollableSegments = undefined\n\n  return handleMutable(state, mutable)\n}\n\nexport function generateSegmentsFromPatch(\n  flightRouterPatch: FlightRouterState\n): FlightSegmentPath[] {\n  const segments: FlightSegmentPath[] = []\n  const [segment, parallelRoutes] = flightRouterPatch\n\n  if (Object.keys(parallelRoutes).length === 0) {\n    return [[segment]]\n  }\n\n  for (const [parallelRouteKey, parallelRoute] of Object.entries(\n    parallelRoutes\n  )) {\n    for (const childSegment of generateSegmentsFromPatch(parallelRoute)) {\n      // If the segment is empty, it means we are at the root of the tree\n      if (segment === '') {\n        segments.push([parallelRouteKey, ...childSegment])\n      } else {\n        segments.push([segment, parallelRouteKey, ...childSegment])\n      }\n    }\n  }\n\n  return segments\n}\n\nexport function handleNavigationResult(\n  url: URL,\n  state: ReadonlyReducerState,\n  mutable: Mutable,\n  pendingPush: boolean,\n  result: NavigationResult\n): ReducerState {\n  switch (result.tag) {\n    case NavigationResultTag.MPA: {\n      // Perform an MPA navigation.\n      const newUrl = result.data\n      return handleExternalUrl(state, mutable, newUrl, pendingPush)\n    }\n    case NavigationResultTag.Success: {\n      // Received a new result.\n      mutable.cache = result.data.cacheNode\n      mutable.patchedTree = result.data.flightRouterState\n      mutable.renderedSearch = result.data.renderedSearch\n      mutable.canonicalUrl = result.data.canonicalUrl\n      // TODO: During a refresh, we don't set the `scrollableSegments`. There's\n      // some confusing and subtle logic in `handleMutable` that decides what\n      // to do when `shouldScroll` is set but `scrollableSegments` is not. I'm\n      // not convinced it's totally coherent but the tests assert on this\n      // particular behavior so I've ported the logic as-is from the previous\n      // router implementation, for now.\n      mutable.scrollableSegments = result.data.scrollableSegments ?? undefined\n      mutable.shouldScroll = result.data.shouldScroll\n      mutable.hashFragment = result.data.hash\n\n      // Check if the only thing that changed was the hash fragment.\n      const oldUrl = new URL(state.canonicalUrl, url)\n      const onlyHashChange =\n        // We don't need to compare the origins, because client-driven\n        // navigations are always same-origin.\n        url.pathname === oldUrl.pathname &&\n        url.search === oldUrl.search &&\n        url.hash !== oldUrl.hash\n      if (onlyHashChange) {\n        // The only updated part of the URL is the hash.\n        mutable.onlyHashChange = true\n        mutable.shouldScroll = result.data.shouldScroll\n        mutable.hashFragment = url.hash\n        // Setting this to an empty array triggers a scroll for all new and\n        // updated segments. See `ScrollAndFocusHandler` for more details.\n        mutable.scrollableSegments = []\n      }\n\n      return handleMutable(state, mutable)\n    }\n    case NavigationResultTag.Async: {\n      return result.data.then(\n        (asyncResult) =>\n          handleNavigationResult(url, state, mutable, pendingPush, asyncResult),\n        // If the navigation failed, return the current state.\n        // TODO: This matches the current behavior but we need to do something\n        // better here if the network fails.\n        () => {\n          return state\n        }\n      )\n    }\n    default: {\n      result satisfies never\n      return state\n    }\n  }\n}\n\nexport function navigateReducer(\n  state: ReadonlyReducerState,\n  action: NavigateAction\n): ReducerState {\n  const { url, isExternalUrl, navigateType, shouldScroll } = action\n  const mutable: Mutable = {}\n  const href = createHrefFromUrl(url)\n  const pendingPush = navigateType === 'push'\n\n  mutable.preserveCustomHistoryState = false\n  mutable.pendingPush = pendingPush\n\n  if (isExternalUrl) {\n    return handleExternalUrl(state, mutable, url.toString(), pendingPush)\n  }\n\n  // Handles case where `<meta http-equiv=\"refresh\">` tag is present,\n  // which will trigger an MPA navigation.\n  if (document.getElementById('__next-page-redirect')) {\n    return handleExternalUrl(state, mutable, href, pendingPush)\n  }\n\n  // Temporary glue code between the router reducer and the new navigation\n  // implementation. Eventually we'll rewrite the router reducer to a\n  // state machine.\n  const currentUrl = new URL(state.canonicalUrl, location.origin)\n  const result = navigateUsingSegmentCache(\n    url,\n    currentUrl,\n    state.cache,\n    state.tree,\n    state.nextUrl,\n    FreshnessPolicy.Default,\n    shouldScroll,\n    mutable\n  )\n  return handleNavigationResult(url, state, mutable, pendingPush, result)\n}\n","export function createPromiseWithResolvers<T>(): PromiseWithResolvers<T> {\n  // Shim of Stage 4 Promise.withResolvers proposal\n  let resolve: (value: T | PromiseLike<T>) => void\n  let reject: (reason: any) => void\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n  return { resolve: resolve!, reject: reject!, promise }\n}\n","import type {\n  TreePrefetch,\n  RootTreePrefetch,\n  SegmentPrefetch,\n} from '../../../server/app-render/collect-segment-data'\nimport type { LoadingModuleData } from '../../../shared/lib/app-router-types'\nimport type {\n  CacheNodeSeedData,\n  Segment as FlightRouterStateSegment,\n} from '../../../shared/lib/app-router-types'\nimport { HasLoadingBoundary } from '../../../shared/lib/app-router-types'\nimport {\n  NEXT_DID_POSTPONE_HEADER,\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n  NEXT_ROUTER_STALE_TIME_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_URL,\n  RSC_CONTENT_TYPE_HEADER,\n  RSC_HEADER,\n} from '../app-router-headers'\nimport {\n  createFetch,\n  createFromNextReadableStream,\n  type RSCResponse,\n  type RequestHeaders,\n} from '../router-reducer/fetch-server-response'\nimport {\n  pingPrefetchTask,\n  isPrefetchTaskDirty,\n  type PrefetchTask,\n  type PrefetchSubtaskResult,\n  startRevalidationCooldown,\n} from './scheduler'\nimport {\n  type RouteVaryPath,\n  type SegmentVaryPath,\n  type PartialSegmentVaryPath,\n  getRouteVaryPath,\n  getFulfilledRouteVaryPath,\n  getSegmentVaryPathForRequest,\n  appendLayoutVaryPath,\n  finalizeLayoutVaryPath,\n  finalizePageVaryPath,\n  clonePageVaryPathWithNewSearchParams,\n  type PageVaryPath,\n  finalizeMetadataVaryPath,\n} from './vary-path'\nimport { getAppBuildId } from '../../app-build-id'\nimport { createHrefFromUrl } from '../router-reducer/create-href-from-url'\nimport type { NormalizedSearch, RouteCacheKey } from './cache-key'\n// TODO: Rename this module to avoid confusion with other types of cache keys\nimport { createCacheKey as createPrefetchRequestKey } from './cache-key'\nimport {\n  doesStaticSegmentAppearInURL,\n  getCacheKeyForDynamicParam,\n  getRenderedPathname,\n  getRenderedSearch,\n  parseDynamicParamFromURLPart,\n} from '../../route-params'\nimport {\n  createCacheMap,\n  getFromCacheMap,\n  setInCacheMap,\n  setSizeInCacheMap,\n  deleteFromCacheMap,\n  isValueExpired,\n  type CacheMap,\n  type UnknownMapEntry,\n} from './cache-map'\nimport {\n  appendSegmentRequestKeyPart,\n  convertSegmentPathToStaticExportFilename,\n  createSegmentRequestKeyPart,\n  HEAD_REQUEST_KEY,\n  ROOT_SEGMENT_REQUEST_KEY,\n  type SegmentRequestKey,\n} from '../../../shared/lib/segment-cache/segment-value-encoding'\nimport type {\n  FlightRouterState,\n  NavigationFlightResponse,\n} from '../../../shared/lib/app-router-types'\nimport {\n  normalizeFlightData,\n  prepareFlightRouterStateForRequest,\n} from '../../flight-data-helpers'\nimport { STATIC_STALETIME_MS } from '../router-reducer/reducers/navigate-reducer'\nimport { pingVisibleLinks } from '../links'\nimport { PAGE_SEGMENT_KEY } from '../../../shared/lib/segment'\nimport { FetchStrategy } from './types'\nimport { createPromiseWithResolvers } from '../../../shared/lib/promise-with-resolvers'\n\n/**\n * Ensures a minimum stale time of 30s to avoid issues where the server sends a too\n * short-lived stale time, which would prevent anything from being prefetched.\n */\nexport function getStaleTimeMs(staleTimeSeconds: number): number {\n  return Math.max(staleTimeSeconds, 30) * 1000\n}\n\n// A note on async/await when working in the prefetch cache:\n//\n// Most async operations in the prefetch cache should *not* use async/await,\n// Instead, spawn a subtask that writes the results to a cache entry, and attach\n// a \"ping\" listener to notify the prefetch queue to try again.\n//\n// The reason is we need to be able to access the segment cache and traverse its\n// data structures synchronously. For example, if there's a synchronous update\n// we can take an immediate snapshot of the cache to produce something we can\n// render. Limiting the use of async/await also makes it easier to avoid race\n// conditions, which is especially important because is cache is mutable.\n//\n// Another reason is that while we're performing async work, it's possible for\n// existing entries to become stale, or for Link prefetches to be removed from\n// the queue. For optimal scheduling, we need to be able to \"cancel\" subtasks\n// that are no longer needed. So, when a segment is received from the server, we\n// restart from the root of the tree that's being prefetched, to confirm all the\n// parent segments are still cached. If the segment is no longer reachable from\n// the root, then it's effectively canceled. This is similar to the design of\n// Rust Futures, or React Suspense.\n\ntype RouteTreeShared = {\n  requestKey: SegmentRequestKey\n  // TODO: Remove the `segment` field, now that it can be reconstructed\n  // from `param`.\n  segment: FlightRouterStateSegment\n  slots: null | {\n    [parallelRouteKey: string]: RouteTree\n  }\n  isRootLayout: boolean\n\n  // If this is a dynamic route, indicates whether there is a loading boundary\n  // somewhere in the tree. If not, we can skip the prefetch for the data,\n  // because we know it would be an empty response. (For a static/PPR route,\n  // this value is disregarded, because in that model `loading.tsx` is treated\n  // like any other Suspense boundary.)\n  hasLoadingBoundary: HasLoadingBoundary\n\n  // Indicates whether this route has a runtime prefetch that we can request.\n  // This is determined by the server; it's not purely a user configuration\n  // because the server may determine that a route is fully static and doesn't\n  // need runtime prefetching regardless of the configuration.\n  hasRuntimePrefetch: boolean\n}\n\ntype LayoutRouteTree = RouteTreeShared & {\n  isPage: false\n  varyPath: SegmentVaryPath\n}\n\ntype PageRouteTree = RouteTreeShared & {\n  isPage: true\n  varyPath: PageVaryPath\n}\n\nexport type RouteTree = LayoutRouteTree | PageRouteTree\n\ntype RouteCacheEntryShared = {\n  // This is false only if we're certain the route cannot be intercepted. It's\n  // true in all other cases, including on initialization when we haven't yet\n  // received a response from the server.\n  couldBeIntercepted: boolean\n\n  // Map-related fields.\n  ref: UnknownMapEntry | null\n  size: number\n  staleAt: number\n  version: number\n}\n\n/**\n * Tracks the status of a cache entry as it progresses from no data (Empty),\n * waiting for server data (Pending), and finished (either Fulfilled or\n * Rejected depending on the response from the server.\n */\nexport const enum EntryStatus {\n  Empty = 0,\n  Pending = 1,\n  Fulfilled = 2,\n  Rejected = 3,\n}\n\ntype PendingRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Empty | EntryStatus.Pending\n  blockedTasks: Set<PrefetchTask> | null\n  canonicalUrl: null\n  renderedSearch: null\n  tree: null\n  metadata: null\n  isPPREnabled: false\n}\n\ntype RejectedRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Rejected\n  blockedTasks: Set<PrefetchTask> | null\n  canonicalUrl: null\n  renderedSearch: null\n  tree: null\n  metadata: null\n  isPPREnabled: boolean\n}\n\nexport type FulfilledRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Fulfilled\n  blockedTasks: null\n  canonicalUrl: string\n  renderedSearch: NormalizedSearch\n  tree: RouteTree\n  metadata: RouteTree\n  isPPREnabled: boolean\n}\n\nexport type RouteCacheEntry =\n  | PendingRouteCacheEntry\n  | FulfilledRouteCacheEntry\n  | RejectedRouteCacheEntry\n\ntype SegmentCacheEntryShared = {\n  fetchStrategy: FetchStrategy\n\n  // Map-related fields.\n  ref: UnknownMapEntry | null\n  size: number\n  staleAt: number\n  version: number\n}\n\nexport type EmptySegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Empty\n  rsc: null\n  loading: null\n  isPartial: true\n  promise: null\n}\n\nexport type PendingSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Pending\n  rsc: null\n  loading: null\n  isPartial: boolean\n  promise: null | PromiseWithResolvers<FulfilledSegmentCacheEntry | null>\n}\n\ntype RejectedSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Rejected\n  rsc: null\n  loading: null\n  isPartial: true\n  promise: null\n}\n\nexport type FulfilledSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Fulfilled\n  rsc: React.ReactNode | null\n  loading: LoadingModuleData | Promise<LoadingModuleData>\n  isPartial: boolean\n  promise: null\n}\n\nexport type SegmentCacheEntry =\n  | EmptySegmentCacheEntry\n  | PendingSegmentCacheEntry\n  | RejectedSegmentCacheEntry\n  | FulfilledSegmentCacheEntry\n\nexport type NonEmptySegmentCacheEntry = Exclude<\n  SegmentCacheEntry,\n  EmptySegmentCacheEntry\n>\n\nconst isOutputExportMode =\n  process.env.NODE_ENV === 'production' &&\n  process.env.__NEXT_CONFIG_OUTPUT === 'export'\n\nconst MetadataOnlyRequestTree: FlightRouterState = [\n  '',\n  {},\n  null,\n  'metadata-only',\n]\n\nlet routeCacheMap: CacheMap<RouteCacheEntry> = createCacheMap()\nlet segmentCacheMap: CacheMap<SegmentCacheEntry> = createCacheMap()\n\n// All invalidation listeners for the whole cache are tracked in single set.\n// Since we don't yet support tag or path-based invalidation, there's no point\n// tracking them any more granularly than this. Once we add granular\n// invalidation, that may change, though generally the model is to just notify\n// the listeners and allow the caller to poll the prefetch cache with a new\n// prefetch task if desired.\nlet invalidationListeners: Set<PrefetchTask> | null = null\n\n// Incrementing counter used to track cache invalidations.\nlet currentCacheVersion = 0\n\nexport function getCurrentCacheVersion(): number {\n  return currentCacheVersion\n}\n\n/**\n * Used to clear the client prefetch cache when a server action calls\n * revalidatePath or revalidateTag. Eventually we will support only clearing the\n * segments that were actually affected, but there's more work to be done on the\n * server before the client is able to do this correctly.\n */\nexport function revalidateEntireCache(\n  nextUrl: string | null,\n  tree: FlightRouterState\n) {\n  // Increment the current cache version. This does not eagerly evict anything\n  // from the cache, but because all the entries are versioned, and we check\n  // the version when reading from the cache, this effectively causes all\n  // entries to be evicted lazily. We do it lazily because in the future,\n  // actions like revalidateTag or refresh will not evict the entire cache,\n  // but rather some subset of the entries.\n  currentCacheVersion++\n\n  // Start a cooldown before re-prefetching to allow CDN cache propagation.\n  startRevalidationCooldown()\n\n  // Prefetch all the currently visible links again, to re-fill the cache.\n  pingVisibleLinks(nextUrl, tree)\n\n  // Similarly, notify all invalidation listeners (i.e. those passed to\n  // `router.prefetch(onInvalidate)`), so they can trigger a new prefetch\n  // if needed.\n  pingInvalidationListeners(nextUrl, tree)\n}\n\nfunction attachInvalidationListener(task: PrefetchTask): void {\n  // This function is called whenever a prefetch task reads a cache entry. If\n  // the task has an onInvalidate function associated with it  i.e. the one\n  // optionally passed to router.prefetch(onInvalidate)  then we attach that\n  // listener to the every cache entry that the task reads. Then, if an entry\n  // is invalidated, we call the function.\n  if (task.onInvalidate !== null) {\n    if (invalidationListeners === null) {\n      invalidationListeners = new Set([task])\n    } else {\n      invalidationListeners.add(task)\n    }\n  }\n}\n\nfunction notifyInvalidationListener(task: PrefetchTask): void {\n  const onInvalidate = task.onInvalidate\n  if (onInvalidate !== null) {\n    // Clear the callback from the task object to guarantee it's not called more\n    // than once.\n    task.onInvalidate = null\n\n    // This is a user-space function, so we must wrap in try/catch.\n    try {\n      onInvalidate()\n    } catch (error) {\n      if (typeof reportError === 'function') {\n        reportError(error)\n      } else {\n        console.error(error)\n      }\n    }\n  }\n}\n\nexport function pingInvalidationListeners(\n  nextUrl: string | null,\n  tree: FlightRouterState\n): void {\n  // The rough equivalent of pingVisibleLinks, but for onInvalidate callbacks.\n  // This is called when the Next-Url or the base tree changes, since those\n  // may affect the result of a prefetch task. It's also called after a\n  // cache invalidation.\n  if (invalidationListeners !== null) {\n    const tasks = invalidationListeners\n    invalidationListeners = null\n    for (const task of tasks) {\n      if (isPrefetchTaskDirty(task, nextUrl, tree)) {\n        notifyInvalidationListener(task)\n      }\n    }\n  }\n}\n\nexport function readRouteCacheEntry(\n  now: number,\n  key: RouteCacheKey\n): RouteCacheEntry | null {\n  const varyPath: RouteVaryPath = getRouteVaryPath(\n    key.pathname,\n    key.search,\n    key.nextUrl\n  )\n  const isRevalidation = false\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    routeCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nexport function readSegmentCacheEntry(\n  now: number,\n  varyPath: SegmentVaryPath\n): SegmentCacheEntry | null {\n  const isRevalidation = false\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    segmentCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nfunction readRevalidatingSegmentCacheEntry(\n  now: number,\n  varyPath: SegmentVaryPath\n): SegmentCacheEntry | null {\n  const isRevalidation = true\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    segmentCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nexport function waitForSegmentCacheEntry(\n  pendingEntry: PendingSegmentCacheEntry\n): Promise<FulfilledSegmentCacheEntry | null> {\n  // Because the entry is pending, there's already a in-progress request.\n  // Attach a promise to the entry that will resolve when the server responds.\n  let promiseWithResolvers = pendingEntry.promise\n  if (promiseWithResolvers === null) {\n    promiseWithResolvers = pendingEntry.promise =\n      createPromiseWithResolvers<FulfilledSegmentCacheEntry | null>()\n  } else {\n    // There's already a promise we can use\n  }\n  return promiseWithResolvers.promise\n}\n\n/**\n * Checks if an entry for a route exists in the cache. If so, it returns the\n * entry, If not, it adds an empty entry to the cache and returns it.\n */\nexport function readOrCreateRouteCacheEntry(\n  now: number,\n  task: PrefetchTask,\n  key: RouteCacheKey\n): RouteCacheEntry {\n  attachInvalidationListener(task)\n\n  const existingEntry = readRouteCacheEntry(now, key)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const pendingEntry: PendingRouteCacheEntry = {\n    canonicalUrl: null,\n    status: EntryStatus.Empty,\n    blockedTasks: null,\n    tree: null,\n    metadata: null,\n    // This is initialized to true because we don't know yet whether the route\n    // could be intercepted. It's only set to false once we receive a response\n    // from the server.\n    couldBeIntercepted: true,\n    // Similarly, we don't yet know if the route supports PPR.\n    isPPREnabled: false,\n    renderedSearch: null,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    // Since this is an empty entry, there's no reason to ever evict it. It will\n    // be updated when the data is populated.\n    staleAt: Infinity,\n    version: getCurrentCacheVersion(),\n  }\n  const varyPath: RouteVaryPath = getRouteVaryPath(\n    key.pathname,\n    key.search,\n    key.nextUrl\n  )\n  const isRevalidation = false\n  setInCacheMap(routeCacheMap, varyPath, pendingEntry, isRevalidation)\n  return pendingEntry\n}\n\nexport function requestOptimisticRouteCacheEntry(\n  now: number,\n  requestedUrl: URL,\n  nextUrl: string | null\n): FulfilledRouteCacheEntry | null {\n  // This function is called during a navigation when there was no matching\n  // route tree in the prefetch cache. Before de-opting to a blocking,\n  // unprefetched navigation, we will first attempt to construct an \"optimistic\"\n  // route tree by checking the cache for similar routes.\n  //\n  // Check if there's a route with the same pathname, but with different\n  // search params. We can then base our optimistic route tree on this entry.\n  //\n  // Conceptually, we are simulating what would happen if we did perform a\n  // prefetch the requested URL, under the assumption that the server will\n  // not redirect or rewrite the request in a different manner than the\n  // base route tree. This assumption might not hold, in which case we'll have\n  // to recover when we perform the dynamic navigation request. However, this\n  // is what would happen if a route were dynamically rewritten/redirected\n  // in between the prefetch and the navigation. So the logic needs to exist\n  // to handle this case regardless.\n\n  // Look for a route with the same pathname, but with an empty search string.\n  // TODO: There's nothing inherently special about the empty search string;\n  // it's chosen somewhat arbitrarily, with the rationale that it's the most\n  // likely one to exist. But we should update this to match _any_ search\n  // string. The plan is to generalize this logic alongside other improvements\n  // related to \"fallback\" cache entries.\n  const requestedSearch = requestedUrl.search as NormalizedSearch\n  if (requestedSearch === '') {\n    // The caller would have already checked if a route with an empty search\n    // string is in the cache. So we can bail out here.\n    return null\n  }\n  const urlWithoutSearchParams = new URL(requestedUrl)\n  urlWithoutSearchParams.search = ''\n  const routeWithNoSearchParams = readRouteCacheEntry(\n    now,\n    createPrefetchRequestKey(urlWithoutSearchParams.href, nextUrl)\n  )\n\n  if (\n    routeWithNoSearchParams === null ||\n    routeWithNoSearchParams.status !== EntryStatus.Fulfilled\n  ) {\n    // Bail out of constructing an optimistic route tree. This will result in\n    // a blocking, unprefetched navigation.\n    return null\n  }\n\n  // Now we have a base route tree we can \"patch\" with our optimistic values.\n\n  // Optimistically assume that redirects for the requested pathname do\n  // not vary on the search string. Therefore, if the base route was\n  // redirected to a different search string, then the optimistic route\n  // should be redirected to the same search string. Otherwise, we use\n  // the requested search string.\n  const canonicalUrlForRouteWithNoSearchParams = new URL(\n    routeWithNoSearchParams.canonicalUrl,\n    requestedUrl.origin\n  )\n  const optimisticCanonicalSearch =\n    canonicalUrlForRouteWithNoSearchParams.search !== ''\n      ? // Base route was redirected. Reuse the same redirected search string.\n        canonicalUrlForRouteWithNoSearchParams.search\n      : requestedSearch\n\n  // Similarly, optimistically assume that rewrites for the requested\n  // pathname do not vary on the search string. Therefore, if the base\n  // route was rewritten to a different search string, then the optimistic\n  // route should be rewritten to the same search string. Otherwise, we use\n  // the requested search string.\n  const optimisticRenderedSearch =\n    routeWithNoSearchParams.renderedSearch !== ''\n      ? // Base route was rewritten. Reuse the same rewritten search string.\n        routeWithNoSearchParams.renderedSearch\n      : requestedSearch\n\n  const optimisticUrl = new URL(\n    routeWithNoSearchParams.canonicalUrl,\n    location.origin\n  )\n  optimisticUrl.search = optimisticCanonicalSearch\n  const optimisticCanonicalUrl = createHrefFromUrl(optimisticUrl)\n\n  const optimisticRouteTree = createOptimisticRouteTree(\n    routeWithNoSearchParams.tree,\n    optimisticRenderedSearch\n  )\n  const optimisticMetadataTree = createOptimisticRouteTree(\n    routeWithNoSearchParams.metadata,\n    optimisticRenderedSearch\n  )\n\n  // Clone the base route tree, and override the relevant fields with our\n  // optimistic values.\n  const optimisticEntry: FulfilledRouteCacheEntry = {\n    canonicalUrl: optimisticCanonicalUrl,\n\n    status: EntryStatus.Fulfilled,\n    // This isn't cloned because it's instance-specific\n    blockedTasks: null,\n    tree: optimisticRouteTree,\n    metadata: optimisticMetadataTree,\n    couldBeIntercepted: routeWithNoSearchParams.couldBeIntercepted,\n    isPPREnabled: routeWithNoSearchParams.isPPREnabled,\n\n    // Override the rendered search with the optimistic value.\n    renderedSearch: optimisticRenderedSearch,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    staleAt: routeWithNoSearchParams.staleAt,\n    version: routeWithNoSearchParams.version,\n  }\n\n  // Do not insert this entry into the cache. It only exists so we can\n  // perform the current navigation. Just return it to the caller.\n  return optimisticEntry\n}\n\nfunction createOptimisticRouteTree(\n  tree: RouteTree,\n  newRenderedSearch: NormalizedSearch\n): RouteTree {\n  // Create a new route tree that identical to the original one except for\n  // the rendered search string, which is contained in the vary path.\n\n  let clonedSlots: Record<string, RouteTree> | null = null\n  const originalSlots = tree.slots\n  if (originalSlots !== null) {\n    clonedSlots = {}\n    for (const parallelRouteKey in originalSlots) {\n      const childTree = originalSlots[parallelRouteKey]\n      clonedSlots[parallelRouteKey] = createOptimisticRouteTree(\n        childTree,\n        newRenderedSearch\n      )\n    }\n  }\n\n  // We only need to clone the vary path if the route is a page.\n  if (tree.isPage) {\n    return {\n      requestKey: tree.requestKey,\n      segment: tree.segment,\n      varyPath: clonePageVaryPathWithNewSearchParams(\n        tree.varyPath,\n        newRenderedSearch\n      ),\n      isPage: true,\n      slots: clonedSlots,\n      isRootLayout: tree.isRootLayout,\n      hasLoadingBoundary: tree.hasLoadingBoundary,\n      hasRuntimePrefetch: tree.hasRuntimePrefetch,\n    }\n  }\n\n  return {\n    requestKey: tree.requestKey,\n    segment: tree.segment,\n    varyPath: tree.varyPath,\n    isPage: false,\n    slots: clonedSlots,\n    isRootLayout: tree.isRootLayout,\n    hasLoadingBoundary: tree.hasLoadingBoundary,\n    hasRuntimePrefetch: tree.hasRuntimePrefetch,\n  }\n}\n\n/**\n * Checks if an entry for a segment exists in the cache. If so, it returns the\n * entry, If not, it adds an empty entry to the cache and returns it.\n */\nexport function readOrCreateSegmentCacheEntry(\n  now: number,\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): SegmentCacheEntry {\n  const existingEntry = readSegmentCacheEntry(now, tree.varyPath)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = false\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function readOrCreateRevalidatingSegmentEntry(\n  now: number,\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): SegmentCacheEntry {\n  // This function is called when we've already confirmed that a particular\n  // segment is cached, but we want to perform another request anyway in case it\n  // returns more complete and/or fresher data than we already have. The logic\n  // for deciding whether to replace the existing entry is handled elsewhere;\n  // this function just handles retrieving a cache entry that we can use to\n  // track the revalidation.\n  //\n  // The reason revalidations are stored in the cache is because we need to be\n  // able to dedupe multiple revalidation requests. The reason they have to be\n  // handled specially is because we shouldn't overwrite a \"normal\" entry if\n  // one exists at the same keypath. So, for each internal cache location, there\n  // is a special \"revalidation\" slot that is used solely for this purpose.\n  //\n  // You can think of it as if all the revalidation entries were stored in a\n  // separate cache map from the canonical entries, and then transfered to the\n  // canonical cache map once the request is complete  this isn't how it's\n  // actually implemented, since it's more efficient to store them in the same\n  // data structure as the normal entries, but that's how it's modeled\n  // conceptually.\n\n  // TODO: Once we implement Fallback behavior for params, where an entry is\n  // re-keyed based on response information, we'll need to account for the\n  // possibility that the keypath of the previous entry is more generic than\n  // the keypath of the revalidating entry. In other words, the server could\n  // return a less generic entry upon revalidation. For now, though, this isn't\n  // a concern because the keypath is based solely on the prefetch strategy,\n  // not on data contained in the response.\n  const existingEntry = readRevalidatingSegmentCacheEntry(now, tree.varyPath)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = true\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function overwriteRevalidatingSegmentCacheEntry(\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n) {\n  // This function is called when we've already decided to replace an existing\n  // revalidation entry. Create a new entry and write it into the cache,\n  // overwriting the previous value.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = true\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function upsertSegmentEntry(\n  now: number,\n  varyPath: SegmentVaryPath,\n  candidateEntry: SegmentCacheEntry\n): SegmentCacheEntry | null {\n  // We have a new entry that has not yet been inserted into the cache. Before\n  // we do so, we need to confirm whether it takes precedence over the existing\n  // entry (if one exists).\n  // TODO: We should not upsert an entry if its key was invalidated in the time\n  // since the request was made. We can do that by passing the \"owner\" entry to\n  // this function and confirming it's the same as `existingEntry`.\n\n  if (isValueExpired(now, getCurrentCacheVersion(), candidateEntry)) {\n    // The entry is expired. We cannot upsert it.\n    return null\n  }\n\n  const existingEntry = readSegmentCacheEntry(now, varyPath)\n  if (existingEntry !== null) {\n    // Don't replace a more specific segment with a less-specific one. A case where this\n    // might happen is if the existing segment was fetched via\n    // `<Link prefetch={true}>`.\n    if (\n      // We fetched the new segment using a different, less specific fetch strategy\n      // than the segment we already have in the cache, so it can't have more content.\n      (candidateEntry.fetchStrategy !== existingEntry.fetchStrategy &&\n        !canNewFetchStrategyProvideMoreContent(\n          existingEntry.fetchStrategy,\n          candidateEntry.fetchStrategy\n        )) ||\n      // The existing entry isn't partial, but the new one is.\n      // (TODO: can this be true if `candidateEntry.fetchStrategy >= existingEntry.fetchStrategy`?)\n      (!existingEntry.isPartial && candidateEntry.isPartial)\n    ) {\n      // We're going to leave revalidating entry in the cache so that it doesn't\n      // get revalidated again unnecessarily. Downgrade the Fulfilled entry to\n      // Rejected and null out the data so it can be garbage collected. We leave\n      // `staleAt` intact to prevent subsequent revalidation attempts only until\n      // the entry expires.\n      const rejectedEntry: RejectedSegmentCacheEntry = candidateEntry as any\n      rejectedEntry.status = EntryStatus.Rejected\n      rejectedEntry.loading = null\n      rejectedEntry.rsc = null\n      return null\n    }\n\n    // Evict the existing entry from the cache.\n    deleteFromCacheMap(existingEntry)\n  }\n\n  const isRevalidation = false\n  setInCacheMap(segmentCacheMap, varyPath, candidateEntry, isRevalidation)\n  return candidateEntry\n}\n\nexport function createDetachedSegmentCacheEntry(\n  staleAt: number\n): EmptySegmentCacheEntry {\n  const emptyEntry: EmptySegmentCacheEntry = {\n    status: EntryStatus.Empty,\n    // Default to assuming the fetch strategy will be PPR. This will be updated\n    // when a fetch is actually initiated.\n    fetchStrategy: FetchStrategy.PPR,\n    rsc: null,\n    loading: null,\n    isPartial: true,\n    promise: null,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    staleAt,\n    version: 0,\n  }\n  return emptyEntry\n}\n\nexport function upgradeToPendingSegment(\n  emptyEntry: EmptySegmentCacheEntry,\n  fetchStrategy: FetchStrategy\n): PendingSegmentCacheEntry {\n  const pendingEntry: PendingSegmentCacheEntry = emptyEntry as any\n  pendingEntry.status = EntryStatus.Pending\n  pendingEntry.fetchStrategy = fetchStrategy\n\n  if (fetchStrategy === FetchStrategy.Full) {\n    // We can assume the response will contain the full segment data. Set this\n    // to false so we know it's OK to omit this segment from any navigation\n    // requests that may happen while the data is still pending.\n    pendingEntry.isPartial = false\n  }\n\n  // Set the version here, since this is right before the request is initiated.\n  // The next time the global cache version is incremented, the entry will\n  // effectively be evicted. This happens before initiating the request, rather\n  // than when receiving the response, because it's guaranteed to happen\n  // before the data is read on the server.\n  pendingEntry.version = getCurrentCacheVersion()\n  return pendingEntry\n}\n\nfunction pingBlockedTasks(entry: {\n  blockedTasks: Set<PrefetchTask> | null\n}): void {\n  const blockedTasks = entry.blockedTasks\n  if (blockedTasks !== null) {\n    for (const task of blockedTasks) {\n      pingPrefetchTask(task)\n    }\n    entry.blockedTasks = null\n  }\n}\n\nfunction fulfillRouteCacheEntry(\n  entry: RouteCacheEntry,\n  tree: RouteTree,\n  metadataVaryPath: PageVaryPath,\n  staleAt: number,\n  couldBeIntercepted: boolean,\n  canonicalUrl: string,\n  renderedSearch: NormalizedSearch,\n  isPPREnabled: boolean\n): FulfilledRouteCacheEntry {\n  // The Head is not actually part of the route tree, but other than that, it's\n  // fetched and cached like a segment. Some functions expect a RouteTree\n  // object, so rather than fork the logic in all those places, we use this\n  // \"fake\" one.\n  const metadata: RouteTree = {\n    requestKey: HEAD_REQUEST_KEY,\n    segment: HEAD_REQUEST_KEY,\n    varyPath: metadataVaryPath,\n    // The metadata isn't really a \"page\" (though it isn't really a \"segment\"\n    // either) but for the purposes of how this field is used, it behaves like\n    // one. If this logic ever gets more complex we can change this to an enum.\n    isPage: true,\n    slots: null,\n    isRootLayout: false,\n    hasLoadingBoundary: HasLoadingBoundary.SubtreeHasNoLoadingBoundary,\n    hasRuntimePrefetch: false,\n  }\n  const fulfilledEntry: FulfilledRouteCacheEntry = entry as any\n  fulfilledEntry.status = EntryStatus.Fulfilled\n  fulfilledEntry.tree = tree\n  fulfilledEntry.metadata = metadata\n  fulfilledEntry.staleAt = staleAt\n  fulfilledEntry.couldBeIntercepted = couldBeIntercepted\n  fulfilledEntry.canonicalUrl = canonicalUrl\n  fulfilledEntry.renderedSearch = renderedSearch\n  fulfilledEntry.isPPREnabled = isPPREnabled\n  pingBlockedTasks(entry)\n  return fulfilledEntry\n}\n\nfunction fulfillSegmentCacheEntry(\n  segmentCacheEntry: PendingSegmentCacheEntry,\n  rsc: React.ReactNode,\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  staleAt: number,\n  isPartial: boolean\n): FulfilledSegmentCacheEntry {\n  const fulfilledEntry: FulfilledSegmentCacheEntry = segmentCacheEntry as any\n  fulfilledEntry.status = EntryStatus.Fulfilled\n  fulfilledEntry.rsc = rsc\n  fulfilledEntry.loading = loading\n  fulfilledEntry.staleAt = staleAt\n  fulfilledEntry.isPartial = isPartial\n  // Resolve any listeners that were waiting for this data.\n  if (segmentCacheEntry.promise !== null) {\n    segmentCacheEntry.promise.resolve(fulfilledEntry)\n    // Free the promise for garbage collection.\n    fulfilledEntry.promise = null\n  }\n  return fulfilledEntry\n}\n\nfunction rejectRouteCacheEntry(\n  entry: PendingRouteCacheEntry,\n  staleAt: number\n): void {\n  const rejectedEntry: RejectedRouteCacheEntry = entry as any\n  rejectedEntry.status = EntryStatus.Rejected\n  rejectedEntry.staleAt = staleAt\n  pingBlockedTasks(entry)\n}\n\nfunction rejectSegmentCacheEntry(\n  entry: PendingSegmentCacheEntry,\n  staleAt: number\n): void {\n  const rejectedEntry: RejectedSegmentCacheEntry = entry as any\n  rejectedEntry.status = EntryStatus.Rejected\n  rejectedEntry.staleAt = staleAt\n  if (entry.promise !== null) {\n    // NOTE: We don't currently propagate the reason the prefetch was canceled\n    // but we could by accepting a `reason` argument.\n    entry.promise.resolve(null)\n    entry.promise = null\n  }\n}\n\ntype RouteTreeAccumulator = {\n  metadataVaryPath: PageVaryPath | null\n}\n\nfunction convertRootTreePrefetchToRouteTree(\n  rootTree: RootTreePrefetch,\n  renderedPathname: string,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n) {\n  // Remove trailing and leading slashes\n  const pathnameParts = renderedPathname.split('/').filter((p) => p !== '')\n  const index = 0\n  const rootSegment = ROOT_SEGMENT_REQUEST_KEY\n  return convertTreePrefetchToRouteTree(\n    rootTree.tree,\n    rootSegment,\n    null,\n    ROOT_SEGMENT_REQUEST_KEY,\n    pathnameParts,\n    index,\n    renderedSearch,\n    acc\n  )\n}\n\nfunction convertTreePrefetchToRouteTree(\n  prefetch: TreePrefetch,\n  segment: FlightRouterStateSegment,\n  partialVaryPath: PartialSegmentVaryPath | null,\n  requestKey: SegmentRequestKey,\n  pathnameParts: Array<string>,\n  pathnamePartsIndex: number,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  // Converts the route tree sent by the server into the format used by the\n  // cache. The cached version of the tree includes additional fields, such as a\n  // cache key for each segment. Since this is frequently accessed, we compute\n  // it once instead of on every access. This same cache key is also used to\n  // request the segment from the server.\n\n  let slots: { [parallelRouteKey: string]: RouteTree } | null = null\n  let isPage: boolean\n  let varyPath: SegmentVaryPath\n  const prefetchSlots = prefetch.slots\n  if (prefetchSlots !== null) {\n    isPage = false\n    varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n\n    slots = {}\n    for (let parallelRouteKey in prefetchSlots) {\n      const childPrefetch = prefetchSlots[parallelRouteKey]\n      const childParamName = childPrefetch.name\n      const childParamType = childPrefetch.paramType\n      const childServerSentParamKey = childPrefetch.paramKey\n\n      let childDoesAppearInURL: boolean\n      let childSegment: FlightRouterStateSegment\n      let childPartialVaryPath: PartialSegmentVaryPath | null\n      if (childParamType !== null) {\n        // This segment is parameterized. Get the param from the pathname.\n        const childParamValue = parseDynamicParamFromURLPart(\n          childParamType,\n          pathnameParts,\n          pathnamePartsIndex\n        )\n\n        // Assign a cache key to the segment, based on the param value. In the\n        // pre-Segment Cache implementation, the server computes this and sends\n        // it in the body of the response. In the Segment Cache implementation,\n        // the server sends an empty string and we fill it in here.\n\n        // TODO: We're intentionally not adding the search param to page\n        // segments here; it's tracked separately and added back during a read.\n        // This would clearer if we waited to construct the segment until it's\n        // read from the cache, since that's effectively what we're\n        // doing anyway.\n        const childParamKey =\n          // The server omits this field from the prefetch response when\n          // cacheComponents is enabled.\n          childServerSentParamKey !== null\n            ? childServerSentParamKey\n            : // If no param key was sent, use the value parsed on the client.\n              getCacheKeyForDynamicParam(\n                childParamValue,\n                '' as NormalizedSearch\n              )\n\n        childPartialVaryPath = appendLayoutVaryPath(\n          partialVaryPath,\n          childParamKey\n        )\n        childSegment = [childParamName, childParamKey, childParamType]\n        childDoesAppearInURL = true\n      } else {\n        // This segment does not have a param. Inherit the partial vary path of\n        // the parent.\n        childPartialVaryPath = partialVaryPath\n        childSegment = childParamName\n        childDoesAppearInURL = doesStaticSegmentAppearInURL(childParamName)\n      }\n\n      // Only increment the index if the segment appears in the URL. If it's a\n      // \"virtual\" segment, like a route group, it remains the same.\n      const childPathnamePartsIndex = childDoesAppearInURL\n        ? pathnamePartsIndex + 1\n        : pathnamePartsIndex\n\n      const childRequestKeyPart = createSegmentRequestKeyPart(childSegment)\n      const childRequestKey = appendSegmentRequestKeyPart(\n        requestKey,\n        parallelRouteKey,\n        childRequestKeyPart\n      )\n      slots[parallelRouteKey] = convertTreePrefetchToRouteTree(\n        childPrefetch,\n        childSegment,\n        childPartialVaryPath,\n        childRequestKey,\n        pathnameParts,\n        childPathnamePartsIndex,\n        renderedSearch,\n        acc\n      )\n    }\n  } else {\n    if (requestKey.endsWith(PAGE_SEGMENT_KEY)) {\n      // This is a page segment.\n      isPage = true\n      varyPath = finalizePageVaryPath(\n        requestKey,\n        renderedSearch,\n        partialVaryPath\n      )\n      // The metadata \"segment\" is not part the route tree, but it has the same\n      // conceptual params as a page segment. Write the vary path into the\n      // accumulator object. If there are multiple parallel pages, we use the\n      // first one. Which page we choose is arbitrary as long as it's\n      // consistently the same one every time every time. See\n      // finalizeMetadataVaryPath for more details.\n      if (acc.metadataVaryPath === null) {\n        acc.metadataVaryPath = finalizeMetadataVaryPath(\n          requestKey,\n          renderedSearch,\n          partialVaryPath\n        )\n      }\n    } else {\n      // This is a layout segment.\n      isPage = false\n      varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    }\n  }\n\n  return {\n    requestKey,\n    segment,\n    varyPath,\n    // TODO: Cheating the type system here a bit because TypeScript can't tell\n    // that the type of isPage and varyPath are consistent. The fix would be to\n    // create separate constructors and call the appropriate one from each of\n    // the branches above. Just seems a bit overkill only for one field so I'll\n    // leave it as-is for now. If isPage were wrong it would break the behavior\n    // and we'd catch it quickly, anyway.\n    isPage: isPage as boolean as any,\n    slots,\n    isRootLayout: prefetch.isRootLayout,\n    // This field is only relevant to dynamic routes. For a PPR/static route,\n    // there's always some partial loading state we can fetch.\n    hasLoadingBoundary: HasLoadingBoundary.SegmentHasLoadingBoundary,\n    hasRuntimePrefetch: prefetch.hasRuntimePrefetch,\n  }\n}\n\nfunction convertRootFlightRouterStateToRouteTree(\n  flightRouterState: FlightRouterState,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  return convertFlightRouterStateToRouteTree(\n    flightRouterState,\n    ROOT_SEGMENT_REQUEST_KEY,\n    null,\n    renderedSearch,\n    acc\n  )\n}\n\nfunction convertFlightRouterStateToRouteTree(\n  flightRouterState: FlightRouterState,\n  requestKey: SegmentRequestKey,\n  parentPartialVaryPath: PartialSegmentVaryPath | null,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  const originalSegment = flightRouterState[0]\n\n  let segment: FlightRouterStateSegment\n  let partialVaryPath: PartialSegmentVaryPath | null\n  let isPage: boolean\n  let varyPath: SegmentVaryPath\n  if (Array.isArray(originalSegment)) {\n    isPage = false\n    const paramCacheKey = originalSegment[1]\n    partialVaryPath = appendLayoutVaryPath(parentPartialVaryPath, paramCacheKey)\n    varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    segment = originalSegment\n  } else {\n    // This segment does not have a param. Inherit the partial vary path of\n    // the parent.\n    partialVaryPath = parentPartialVaryPath\n    if (requestKey.endsWith(PAGE_SEGMENT_KEY)) {\n      // This is a page segment.\n      isPage = true\n\n      // The navigation implementation expects the search params to be included\n      // in the segment. However, in the case of a static response, the search\n      // params are omitted. So the client needs to add them back in when reading\n      // from the Segment Cache.\n      //\n      // For consistency, we'll do this for dynamic responses, too.\n      //\n      // TODO: We should move search params out of FlightRouterState and handle\n      // them entirely on the client, similar to our plan for dynamic params.\n      segment = PAGE_SEGMENT_KEY\n      varyPath = finalizePageVaryPath(\n        requestKey,\n        renderedSearch,\n        partialVaryPath\n      )\n      // The metadata \"segment\" is not part the route tree, but it has the same\n      // conceptual params as a page segment. Write the vary path into the\n      // accumulator object. If there are multiple parallel pages, we use the\n      // first one. Which page we choose is arbitrary as long as it's\n      // consistently the same one every time every time. See\n      // finalizeMetadataVaryPath for more details.\n      if (acc.metadataVaryPath === null) {\n        acc.metadataVaryPath = finalizeMetadataVaryPath(\n          requestKey,\n          renderedSearch,\n          partialVaryPath\n        )\n      }\n    } else {\n      // This is a layout segment.\n      isPage = false\n      segment = originalSegment\n      varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    }\n  }\n\n  let slots: { [parallelRouteKey: string]: RouteTree } | null = null\n\n  const parallelRoutes = flightRouterState[1]\n  for (let parallelRouteKey in parallelRoutes) {\n    const childRouterState = parallelRoutes[parallelRouteKey]\n    const childSegment = childRouterState[0]\n    // TODO: Eventually, the param values will not be included in the response\n    // from the server. We'll instead fill them in on the client by parsing\n    // the URL. This is where we'll do that.\n    const childRequestKeyPart = createSegmentRequestKeyPart(childSegment)\n    const childRequestKey = appendSegmentRequestKeyPart(\n      requestKey,\n      parallelRouteKey,\n      childRequestKeyPart\n    )\n    const childTree = convertFlightRouterStateToRouteTree(\n      childRouterState,\n      childRequestKey,\n      partialVaryPath,\n      renderedSearch,\n      acc\n    )\n    if (slots === null) {\n      slots = {\n        [parallelRouteKey]: childTree,\n      }\n    } else {\n      slots[parallelRouteKey] = childTree\n    }\n  }\n\n  return {\n    requestKey,\n    segment,\n    varyPath,\n    // TODO: Cheating the type system here a bit because TypeScript can't tell\n    // that the type of isPage and varyPath are consistent. The fix would be to\n    // create separate constructors and call the appropriate one from each of\n    // the branches above. Just seems a bit overkill only for one field so I'll\n    // leave it as-is for now. If isPage were wrong it would break the behavior\n    // and we'd catch it quickly, anyway.\n    isPage: isPage as boolean as any,\n    slots,\n    isRootLayout: flightRouterState[4] === true,\n    hasLoadingBoundary:\n      flightRouterState[5] !== undefined\n        ? flightRouterState[5]\n        : HasLoadingBoundary.SubtreeHasNoLoadingBoundary,\n\n    // Non-static tree responses are only used by apps that haven't adopted\n    // Cache Components. So this is always false.\n    hasRuntimePrefetch: false,\n  }\n}\n\nexport function convertRouteTreeToFlightRouterState(\n  routeTree: RouteTree\n): FlightRouterState {\n  const parallelRoutes: Record<string, FlightRouterState> = {}\n  if (routeTree.slots !== null) {\n    for (const parallelRouteKey in routeTree.slots) {\n      parallelRoutes[parallelRouteKey] = convertRouteTreeToFlightRouterState(\n        routeTree.slots[parallelRouteKey]\n      )\n    }\n  }\n  const flightRouterState: FlightRouterState = [\n    routeTree.segment,\n    parallelRoutes,\n    null,\n    null,\n    routeTree.isRootLayout,\n  ]\n  return flightRouterState\n}\n\nexport async function fetchRouteOnCacheMiss(\n  entry: PendingRouteCacheEntry,\n  task: PrefetchTask,\n  key: RouteCacheKey\n): Promise<PrefetchSubtaskResult<null> | null> {\n  // This function is allowed to use async/await because it contains the actual\n  // fetch that gets issued on a cache miss. Notice it writes the result to the\n  // cache entry directly, rather than return data that is then written by\n  // the caller.\n  const pathname = key.pathname\n  const search = key.search\n  const nextUrl = key.nextUrl\n  const segmentPath = '/_tree' as SegmentRequestKey\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_PREFETCH_HEADER]: '1',\n    [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]: segmentPath,\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  try {\n    const url = new URL(pathname + search, location.origin)\n    let response\n    let urlAfterRedirects\n    if (isOutputExportMode) {\n      // In output: \"export\" mode, we can't use headers to request a particular\n      // segment. Instead, we encode the extra request information into the URL.\n      // This is not part of the \"public\" interface of the app; it's an internal\n      // Next.js implementation detail that the app developer should not need to\n      // concern themselves with.\n      //\n      // For example, to request a segment:\n      //\n      //   Path passed to <Link>:   /path/to/page\n      //   Path passed to fetch:    /path/to/page/__next-segments/_tree\n      //\n      //   (This is not the exact protocol, just an illustration.)\n      //\n      // Before we do that, though, we need to account for redirects. Even in\n      // output: \"export\" mode, a proxy might redirect the page to a different\n      // location, but we shouldn't assume or expect that they also redirect all\n      // the segment files, too.\n      //\n      // To check whether the page is redirected, previously we perform a range\n      // request of 64 bytes of the HTML document to check if the target page\n      // is part of this app (by checking if build id matches). Only if the target\n      // page is part of this app do we determine the final canonical URL.\n      //\n      // However, as mentioned in https://github.com/vercel/next.js/pull/85903,\n      // some popular static hosting providers (like Cloudflare Pages or Render.com)\n      // do not support range requests, in the worst case, the entire HTML instead\n      // of 64 bytes could be returned, which is wasteful.\n      //\n      // So instead, we drops the check for build id here, and simply perform\n      // a HEAD request to rejects 1xx/4xx/5xx responses, and then determine the\n      // final URL after redirects.\n      //\n      // NOTE: We could embed the route tree into the HTML document, to avoid\n      // a second request. We're not doing that currently because it would make\n      // the HTML document larger and affect normal page loads.\n      const headResponse = await fetch(url, {\n        method: 'HEAD',\n      })\n      if (headResponse.status < 200 || headResponse.status >= 400) {\n        // The target page responded w/o a successful status code\n        // Could be a WAF serving a 403, or a 5xx from a backend\n        //\n        // Note that we can't use headResponse.ok here, because\n        // Response#ok returns `false` with 3xx responses.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      urlAfterRedirects = headResponse.redirected\n        ? new URL(headResponse.url)\n        : url\n\n      response = await fetchPrefetchResponse(\n        addSegmentPathToUrlInOutputExportMode(urlAfterRedirects, segmentPath),\n        headers\n      )\n    } else {\n      // \"Server\" mode. We can use request headers instead of the pathname.\n      // TODO: The eventual plan is to get rid of our custom request headers and\n      // encode everything into the URL, using a similar strategy to the\n      // \"output: export\" block above.\n      response = await fetchPrefetchResponse(url, headers)\n      urlAfterRedirects =\n        response !== null && response.redirected ? new URL(response.url) : url\n    }\n\n    if (\n      !response ||\n      !response.ok ||\n      // 204 is a Cache miss. Though theoretically this shouldn't happen when\n      // PPR is enabled, because we always respond to route tree requests, even\n      // if it needs to be blockingly generated on demand.\n      response.status === 204 ||\n      !response.body\n    ) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // TODO: The canonical URL is the href without the origin. I think\n    // historically the reason for this is because the initial canonical URL\n    // gets passed as a prop to the top-level React component, which means it\n    // needs to be computed during SSR. If it were to include the origin, it\n    // would need to always be same as location.origin on the client, to prevent\n    // a hydration mismatch. To sidestep this complexity, we omit the origin.\n    //\n    // However, since this is neither a native URL object nor a fully qualified\n    // URL string, we need to be careful about how we use it. To prevent subtle\n    // mistakes, we should create a special type for it, instead of just string.\n    // Or, we should just use a (readonly) URL object instead. The type of the\n    // prop that we pass to seed the initial state does not need to be the same\n    // type as the state itself.\n    const canonicalUrl = createHrefFromUrl(urlAfterRedirects)\n\n    // Check whether the response varies based on the Next-Url header.\n    const varyHeader = response.headers.get('vary')\n    const couldBeIntercepted =\n      varyHeader !== null && varyHeader.includes(NEXT_URL)\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    // This checks whether the response was served from the per-segment cache,\n    // rather than the old prefetching flow. If it fails, it implies that PPR\n    // is disabled on this route.\n    const routeIsPPREnabled =\n      response.headers.get(NEXT_DID_POSTPONE_HEADER) === '2' ||\n      // In output: \"export\" mode, we can't rely on response headers. But if we\n      // receive a well-formed response, we can assume it's a static response,\n      // because all data is static in this mode.\n      isOutputExportMode\n\n    if (routeIsPPREnabled) {\n      const prefetchStream = createPrefetchResponseStream(\n        response.body,\n        closed.resolve,\n        function onResponseSizeUpdate(size) {\n          setSizeInCacheMap(entry, size)\n        }\n      )\n      const serverData = await createFromNextReadableStream<RootTreePrefetch>(\n        prefetchStream,\n        headers\n      )\n      if (serverData.buildId !== getAppBuildId()) {\n        // The server build does not match the client. Treat as a 404. During\n        // an actual navigation, the router will trigger an MPA navigation.\n        // TODO: Consider moving the build ID to a response header so we can check\n        // it before decoding the response, and so there's one way of checking\n        // across all response types.\n        // TODO: We should cache the fact that this is an MPA navigation.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      // Get the params that were used to render the target page. These may\n      // be different from the params in the request URL, if the page\n      // was rewritten.\n      const renderedPathname = getRenderedPathname(response)\n      const renderedSearch = getRenderedSearch(response)\n\n      // Convert the server-sent data into the RouteTree format used by the\n      // client cache.\n      //\n      // During this traversal, we accumulate additional data into this\n      // \"accumulator\" object.\n      const acc: RouteTreeAccumulator = { metadataVaryPath: null }\n      const routeTree = convertRootTreePrefetchToRouteTree(\n        serverData,\n        renderedPathname,\n        renderedSearch,\n        acc\n      )\n      const metadataVaryPath = acc.metadataVaryPath\n      if (metadataVaryPath === null) {\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      const staleTimeMs = getStaleTimeMs(serverData.staleTime)\n      fulfillRouteCacheEntry(\n        entry,\n        routeTree,\n        metadataVaryPath,\n        Date.now() + staleTimeMs,\n        couldBeIntercepted,\n        canonicalUrl,\n        renderedSearch,\n        routeIsPPREnabled\n      )\n    } else {\n      // PPR is not enabled for this route. The server responds with a\n      // different format (FlightRouterState) that we need to convert.\n      // TODO: We will unify the responses eventually. I'm keeping the types\n      // separate for now because FlightRouterState has so many\n      // overloaded concerns.\n      const prefetchStream = createPrefetchResponseStream(\n        response.body,\n        closed.resolve,\n        function onResponseSizeUpdate(size) {\n          setSizeInCacheMap(entry, size)\n        }\n      )\n      const serverData =\n        await createFromNextReadableStream<NavigationFlightResponse>(\n          prefetchStream,\n          headers\n        )\n      if (serverData.b !== getAppBuildId()) {\n        // The server build does not match the client. Treat as a 404. During\n        // an actual navigation, the router will trigger an MPA navigation.\n        // TODO: Consider moving the build ID to a response header so we can check\n        // it before decoding the response, and so there's one way of checking\n        // across all response types.\n        // TODO: We should cache the fact that this is an MPA navigation.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      writeDynamicTreeResponseIntoCache(\n        Date.now(),\n        task,\n        // The non-PPR response format is what we'd get if we prefetched these segments\n        // using the LoadingBoundary fetch strategy, so mark their cache entries accordingly.\n        FetchStrategy.LoadingBoundary,\n        response as RSCResponse<NavigationFlightResponse>,\n        serverData,\n        entry,\n        couldBeIntercepted,\n        canonicalUrl,\n        routeIsPPREnabled\n      )\n    }\n\n    if (!couldBeIntercepted) {\n      // This route will never be intercepted. So we can use this entry for all\n      // requests to this route, regardless of the Next-Url header. This works\n      // because when reading the cache we always check for a valid\n      // non-intercepted entry first.\n\n      // Re-key the entry. The `set` implementation handles removing it from\n      // its previous position in the cache. We don't need to do anything to\n      // update the LRU, because the entry is already in it.\n      // TODO: Treat this as an upsert  should check if an entry already\n      // exists at the new keypath, and if so, whether we should keep that\n      // one instead.\n      const fulfilledVaryPath: RouteVaryPath = getFulfilledRouteVaryPath(\n        pathname,\n        search,\n        nextUrl,\n        couldBeIntercepted\n      )\n      const isRevalidation = false\n      setInCacheMap(routeCacheMap, fulfilledVaryPath, entry, isRevalidation)\n    }\n    // Return a promise that resolves when the network connection closes, so\n    // the scheduler can track the number of concurrent network connections.\n    return { value: null, closed: closed.promise }\n  } catch (error) {\n    // Either the connection itself failed, or something bad happened while\n    // decoding the response.\n    rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nexport async function fetchSegmentOnCacheMiss(\n  route: FulfilledRouteCacheEntry,\n  segmentCacheEntry: PendingSegmentCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): Promise<PrefetchSubtaskResult<FulfilledSegmentCacheEntry> | null> {\n  // This function is allowed to use async/await because it contains the actual\n  // fetch that gets issued on a cache miss. Notice it writes the result to the\n  // cache entry directly, rather than return data that is then written by\n  // the caller.\n  //\n  // Segment fetches are non-blocking so we don't need to ping the scheduler\n  // on completion.\n\n  // Use the canonical URL to request the segment, not the original URL. These\n  // are usually the same, but the canonical URL will be different if the route\n  // tree response was redirected. To avoid an extra waterfall on every segment\n  // request, we pass the redirected URL instead of the original one.\n  const url = new URL(route.canonicalUrl, location.origin)\n  const nextUrl = routeKey.nextUrl\n\n  const requestKey = tree.requestKey\n  const normalizedRequestKey =\n    requestKey === ROOT_SEGMENT_REQUEST_KEY\n      ? // The root segment is a special case. To simplify the server-side\n        // handling of these requests, we encode the root segment path as\n        // `_index` instead of as an empty string. This should be treated as\n        // an implementation detail and not as a stable part of the protocol.\n        // It just needs to match the equivalent logic that happens when\n        // prerendering the responses. It should not leak outside of Next.js.\n        ('/_index' as SegmentRequestKey)\n      : requestKey\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_PREFETCH_HEADER]: '1',\n    [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]: normalizedRequestKey,\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  const requestUrl = isOutputExportMode\n    ? // In output: \"export\" mode, we need to add the segment path to the URL.\n      addSegmentPathToUrlInOutputExportMode(url, normalizedRequestKey)\n    : url\n  try {\n    const response = await fetchPrefetchResponse(requestUrl, headers)\n    if (\n      !response ||\n      !response.ok ||\n      response.status === 204 || // Cache miss\n      // This checks whether the response was served from the per-segment cache,\n      // rather than the old prefetching flow. If it fails, it implies that PPR\n      // is disabled on this route. Theoretically this should never happen\n      // because we only issue requests for segments once we've verified that\n      // the route supports PPR.\n      (response.headers.get(NEXT_DID_POSTPONE_HEADER) !== '2' &&\n        // In output: \"export\" mode, we can't rely on response headers. But if\n        // we receive a well-formed response, we can assume it's a static\n        // response, because all data is static in this mode.\n        !isOutputExportMode) ||\n      !response.body\n    ) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    // Wrap the original stream in a new stream that never closes. That way the\n    // Flight client doesn't error if there's a hanging promise.\n    const prefetchStream = createPrefetchResponseStream(\n      response.body,\n      closed.resolve,\n      function onResponseSizeUpdate(size) {\n        setSizeInCacheMap(segmentCacheEntry, size)\n      }\n    )\n    const serverData = await (createFromNextReadableStream(\n      prefetchStream,\n      headers\n    ) as Promise<SegmentPrefetch>)\n    if (serverData.buildId !== getAppBuildId()) {\n      // The server build does not match the client. Treat as a 404. During\n      // an actual navigation, the router will trigger an MPA navigation.\n      // TODO: Consider moving the build ID to a response header so we can check\n      // it before decoding the response, and so there's one way of checking\n      // across all response types.\n      rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n      return null\n    }\n    return {\n      value: fulfillSegmentCacheEntry(\n        segmentCacheEntry,\n        serverData.rsc,\n        serverData.loading,\n        // TODO: The server does not currently provide per-segment stale time.\n        // So we use the stale time of the route.\n        route.staleAt,\n        serverData.isPartial\n      ),\n      // Return a promise that resolves when the network connection closes, so\n      // the scheduler can track the number of concurrent network connections.\n      closed: closed.promise,\n    }\n  } catch (error) {\n    // Either the connection itself failed, or something bad happened while\n    // decoding the response.\n    rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nexport async function fetchSegmentPrefetchesUsingDynamicRequest(\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  dynamicRequestTree: FlightRouterState,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): Promise<PrefetchSubtaskResult<null> | null> {\n  const key = task.key\n  const url = new URL(route.canonicalUrl, location.origin)\n  const nextUrl = key.nextUrl\n\n  if (\n    spawnedEntries.size === 1 &&\n    spawnedEntries.has(route.metadata.requestKey)\n  ) {\n    // The only thing pending is the head. Instruct the server to\n    // skip over everything else.\n    dynamicRequestTree = MetadataOnlyRequestTree\n  }\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_STATE_TREE_HEADER]:\n      prepareFlightRouterStateForRequest(dynamicRequestTree),\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n  switch (fetchStrategy) {\n    case FetchStrategy.Full: {\n      // We omit the prefetch header from a full prefetch because it's essentially\n      // just a navigation request that happens ahead of time  it should include\n      // all the same data in the response.\n      break\n    }\n    case FetchStrategy.PPRRuntime: {\n      headers[NEXT_ROUTER_PREFETCH_HEADER] = '2'\n      break\n    }\n    case FetchStrategy.LoadingBoundary: {\n      headers[NEXT_ROUTER_PREFETCH_HEADER] = '1'\n      break\n    }\n    default: {\n      fetchStrategy satisfies never\n    }\n  }\n\n  try {\n    const response = await fetchPrefetchResponse(url, headers)\n    if (!response || !response.ok || !response.body) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n      return null\n    }\n\n    const renderedSearch = getRenderedSearch(response)\n    if (renderedSearch !== route.renderedSearch) {\n      // The search params that were used to render the target page are\n      // different from the search params in the request URL. This only happens\n      // when there's a dynamic rewrite in between the tree prefetch and the\n      // data prefetch.\n      // TODO: For now, since this is an edge case, we reject the prefetch, but\n      // the proper way to handle this is to evict the stale route tree entry\n      // then fill the cache with the new response.\n      rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    let fulfilledEntries: Array<FulfilledSegmentCacheEntry> | null = null\n    const prefetchStream = createPrefetchResponseStream(\n      response.body,\n      closed.resolve,\n      function onResponseSizeUpdate(totalBytesReceivedSoFar) {\n        // When processing a dynamic response, we don't know how large each\n        // individual segment is, so approximate by assiging each segment\n        // the average of the total response size.\n        if (fulfilledEntries === null) {\n          // Haven't received enough data yet to know which segments\n          // were included.\n          return\n        }\n        const averageSize = totalBytesReceivedSoFar / fulfilledEntries.length\n        for (const entry of fulfilledEntries) {\n          setSizeInCacheMap(entry, averageSize)\n        }\n      }\n    )\n    const serverData = await (createFromNextReadableStream(\n      prefetchStream,\n      headers\n    ) as Promise<NavigationFlightResponse>)\n\n    const isResponsePartial =\n      fetchStrategy === FetchStrategy.PPRRuntime\n        ? // A runtime prefetch may have holes.\n          serverData.rp?.[0] === true\n        : // Full and LoadingBoundary prefetches cannot have holes.\n          // (even if we did set the prefetch header, we only use this codepath for non-PPR-enabled routes)\n          false\n\n    // Aside from writing the data into the cache, this function also returns\n    // the entries that were fulfilled, so we can streamingly update their sizes\n    // in the LRU as more data comes in.\n    fulfilledEntries = writeDynamicRenderResponseIntoCache(\n      Date.now(),\n      task,\n      fetchStrategy,\n      response as RSCResponse<NavigationFlightResponse>,\n      serverData,\n      isResponsePartial,\n      route,\n      spawnedEntries\n    )\n\n    // Return a promise that resolves when the network connection closes, so\n    // the scheduler can track the number of concurrent network connections.\n    return { value: null, closed: closed.promise }\n  } catch (error) {\n    rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nfunction writeDynamicTreeResponseIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  response: RSCResponse<NavigationFlightResponse>,\n  serverData: NavigationFlightResponse,\n  entry: PendingRouteCacheEntry,\n  couldBeIntercepted: boolean,\n  canonicalUrl: string,\n  routeIsPPREnabled: boolean\n) {\n  // Get the URL that was used to render the target page. This may be different\n  // from the URL in the request URL, if the page was rewritten.\n  const renderedSearch = getRenderedSearch(response)\n\n  const normalizedFlightDataResult = normalizeFlightData(serverData.f)\n  if (\n    // A string result means navigating to this route will result in an\n    // MPA navigation.\n    typeof normalizedFlightDataResult === 'string' ||\n    normalizedFlightDataResult.length !== 1\n  ) {\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n  const flightData = normalizedFlightDataResult[0]\n  if (!flightData.isRootRender) {\n    // Unexpected response format.\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n\n  const flightRouterState = flightData.tree\n  // For runtime prefetches, stale time is in the payload at rp[1].\n  // For other responses, fall back to the header.\n  const staleTimeSeconds =\n    typeof serverData.rp?.[1] === 'number'\n      ? serverData.rp[1]\n      : parseInt(response.headers.get(NEXT_ROUTER_STALE_TIME_HEADER) ?? '', 10)\n  const staleTimeMs = !isNaN(staleTimeSeconds)\n    ? getStaleTimeMs(staleTimeSeconds)\n    : STATIC_STALETIME_MS\n\n  // If the response contains dynamic holes, then we must conservatively assume\n  // that any individual segment might contain dynamic holes, and also the\n  // head. If it did not contain dynamic holes, then we can assume every segment\n  // and the head is completely static.\n  const isResponsePartial =\n    response.headers.get(NEXT_DID_POSTPONE_HEADER) === '1'\n\n  // Convert the server-sent data into the RouteTree format used by the\n  // client cache.\n  //\n  // During this traversal, we accumulate additional data into this\n  // \"accumulator\" object.\n  const acc: RouteTreeAccumulator = { metadataVaryPath: null }\n  const routeTree = convertRootFlightRouterStateToRouteTree(\n    flightRouterState,\n    renderedSearch,\n    acc\n  )\n  const metadataVaryPath = acc.metadataVaryPath\n  if (metadataVaryPath === null) {\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n\n  const fulfilledEntry = fulfillRouteCacheEntry(\n    entry,\n    routeTree,\n    metadataVaryPath,\n    now + staleTimeMs,\n    couldBeIntercepted,\n    canonicalUrl,\n    renderedSearch,\n    routeIsPPREnabled\n  )\n\n  // If the server sent segment data as part of the response, we should write\n  // it into the cache to prevent a second, redundant prefetch request.\n  //\n  // TODO: When `clientSegmentCache` is enabled, the server does not include\n  // segment data when responding to a route tree prefetch request. However,\n  // when `clientSegmentCache` is set to \"client-only\", and PPR is enabled (or\n  // the page is fully static), the normal check is bypassed and the server\n  // responds with the full page. This is a temporary situation until we can\n  // remove the \"client-only\" option. Then, we can delete this function call.\n  writeDynamicRenderResponseIntoCache(\n    now,\n    task,\n    fetchStrategy,\n    response,\n    serverData,\n    isResponsePartial,\n    fulfilledEntry,\n    null\n  )\n}\n\nfunction rejectSegmentEntriesIfStillPending(\n  entries: Map<SegmentRequestKey, SegmentCacheEntry>,\n  staleAt: number\n): Array<FulfilledSegmentCacheEntry> {\n  const fulfilledEntries = []\n  for (const entry of entries.values()) {\n    if (entry.status === EntryStatus.Pending) {\n      rejectSegmentCacheEntry(entry, staleAt)\n    } else if (entry.status === EntryStatus.Fulfilled) {\n      fulfilledEntries.push(entry)\n    }\n  }\n  return fulfilledEntries\n}\n\nfunction writeDynamicRenderResponseIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  response: RSCResponse<NavigationFlightResponse>,\n  serverData: NavigationFlightResponse,\n  isResponsePartial: boolean,\n  route: FulfilledRouteCacheEntry,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry> | null\n): Array<FulfilledSegmentCacheEntry> | null {\n  if (serverData.b !== getAppBuildId()) {\n    // The server build does not match the client. Treat as a 404. During\n    // an actual navigation, the router will trigger an MPA navigation.\n    // TODO: Consider moving the build ID to a response header so we can check\n    // it before decoding the response, and so there's one way of checking\n    // across all response types.\n    if (spawnedEntries !== null) {\n      rejectSegmentEntriesIfStillPending(spawnedEntries, now + 10 * 1000)\n    }\n    return null\n  }\n\n  const flightDatas = normalizeFlightData(serverData.f)\n  if (typeof flightDatas === 'string') {\n    // This means navigating to this route will result in an MPA navigation.\n    // TODO: We should cache this, too, so that the MPA navigation is immediate.\n    return null\n  }\n\n  // For runtime prefetches, stale time is in the payload at rp[1].\n  // For other responses, fall back to the header.\n  const staleTimeSeconds =\n    typeof serverData.rp?.[1] === 'number'\n      ? serverData.rp[1]\n      : parseInt(response.headers.get(NEXT_ROUTER_STALE_TIME_HEADER) ?? '', 10)\n  const staleTimeMs = !isNaN(staleTimeSeconds)\n    ? getStaleTimeMs(staleTimeSeconds)\n    : STATIC_STALETIME_MS\n  const staleAt = now + staleTimeMs\n\n  for (const flightData of flightDatas) {\n    const seedData = flightData.seedData\n    if (seedData !== null) {\n      // The data sent by the server represents only a subtree of the app. We\n      // need to find the part of the task tree that matches the response.\n      //\n      // segmentPath represents the parent path of subtree. It's a repeating\n      // pattern of parallel route key and segment:\n      //\n      //   [string, Segment, string, Segment, string, Segment, ...]\n      const segmentPath = flightData.segmentPath\n      let tree = route.tree\n      for (let i = 0; i < segmentPath.length; i += 2) {\n        const parallelRouteKey: string = segmentPath[i]\n        if (tree?.slots?.[parallelRouteKey] !== undefined) {\n          tree = tree.slots[parallelRouteKey]\n        } else {\n          if (spawnedEntries !== null) {\n            rejectSegmentEntriesIfStillPending(spawnedEntries, now + 10 * 1000)\n          }\n          return null\n        }\n      }\n\n      writeSeedDataIntoCache(\n        now,\n        task,\n        fetchStrategy,\n        route,\n        tree,\n        staleAt,\n        seedData,\n        isResponsePartial,\n        spawnedEntries\n      )\n    }\n\n    const head = flightData.head\n    if (head !== null) {\n      fulfillEntrySpawnedByRuntimePrefetch(\n        now,\n        fetchStrategy,\n        route,\n        head,\n        null,\n        flightData.isHeadPartial,\n        staleAt,\n        route.metadata,\n        spawnedEntries\n      )\n    }\n  }\n  // Any entry that's still pending was intentionally not rendered by the\n  // server, because it was inside the loading boundary. Mark them as rejected\n  // so we know not to fetch them again.\n  // TODO: If PPR is enabled on some routes but not others, then it's possible\n  // that a different page is able to do a per-segment prefetch of one of the\n  // segments we're marking as rejected here. We should mark on the segment\n  // somehow that the reason for the rejection is because of a non-PPR prefetch.\n  // That way a per-segment prefetch knows to disregard the rejection.\n  if (spawnedEntries !== null) {\n    const fulfilledEntries = rejectSegmentEntriesIfStillPending(\n      spawnedEntries,\n      now + 10 * 1000\n    )\n    return fulfilledEntries\n  }\n  return null\n}\n\nfunction writeSeedDataIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  staleAt: number,\n  seedData: CacheNodeSeedData,\n  isResponsePartial: boolean,\n  entriesOwnedByCurrentTask: Map<\n    SegmentRequestKey,\n    PendingSegmentCacheEntry\n  > | null\n) {\n  // This function is used to write the result of a runtime server request\n  // (CacheNodeSeedData) into the prefetch cache.\n  const rsc = seedData[0]\n  const loading = seedData[2]\n  const isPartial = rsc === null || isResponsePartial\n  fulfillEntrySpawnedByRuntimePrefetch(\n    now,\n    fetchStrategy,\n    route,\n    rsc,\n    loading,\n    isPartial,\n    staleAt,\n    tree,\n    entriesOwnedByCurrentTask\n  )\n\n  // Recursively write the child data into the cache.\n  const slots = tree.slots\n  if (slots !== null) {\n    const seedDataChildren = seedData[1]\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      const childSeedData: CacheNodeSeedData | null | void =\n        seedDataChildren[parallelRouteKey]\n      if (childSeedData !== null && childSeedData !== undefined) {\n        writeSeedDataIntoCache(\n          now,\n          task,\n          fetchStrategy,\n          route,\n          childTree,\n          staleAt,\n          childSeedData,\n          isResponsePartial,\n          entriesOwnedByCurrentTask\n        )\n      }\n    }\n  }\n}\n\nfunction fulfillEntrySpawnedByRuntimePrefetch(\n  now: number,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  route: FulfilledRouteCacheEntry,\n  rsc: React.ReactNode,\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  isPartial: boolean,\n  staleAt: number,\n  tree: RouteTree,\n  entriesOwnedByCurrentTask: Map<\n    SegmentRequestKey,\n    PendingSegmentCacheEntry\n  > | null\n) {\n  // We should only write into cache entries that are owned by us. Or create\n  // a new one and write into that. We must never write over an entry that was\n  // created by a different task, because that causes data races.\n  const ownedEntry =\n    entriesOwnedByCurrentTask !== null\n      ? entriesOwnedByCurrentTask.get(tree.requestKey)\n      : undefined\n  if (ownedEntry !== undefined) {\n    fulfillSegmentCacheEntry(ownedEntry, rsc, loading, staleAt, isPartial)\n  } else {\n    // There's no matching entry. Attempt to create a new one.\n    const possiblyNewEntry = readOrCreateSegmentCacheEntry(\n      now,\n      fetchStrategy,\n      route,\n      tree\n    )\n    if (possiblyNewEntry.status === EntryStatus.Empty) {\n      // Confirmed this is a new entry. We can fulfill it.\n      const newEntry = possiblyNewEntry\n      fulfillSegmentCacheEntry(\n        upgradeToPendingSegment(newEntry, fetchStrategy),\n        rsc,\n        loading,\n        staleAt,\n        isPartial\n      )\n    } else {\n      // There was already an entry in the cache. But we may be able to\n      // replace it with the new one from the server.\n      const newEntry = fulfillSegmentCacheEntry(\n        upgradeToPendingSegment(\n          createDetachedSegmentCacheEntry(staleAt),\n          fetchStrategy\n        ),\n        rsc,\n        loading,\n        staleAt,\n        isPartial\n      )\n      upsertSegmentEntry(\n        now,\n        getSegmentVaryPathForRequest(fetchStrategy, tree),\n        newEntry\n      )\n    }\n  }\n}\n\nasync function fetchPrefetchResponse<T>(\n  url: URL,\n  headers: RequestHeaders\n): Promise<RSCResponse<T> | null> {\n  const fetchPriority = 'low'\n  // When issuing a prefetch request, don't immediately decode the response; we\n  // use the lower level `createFromResponse` API instead because we need to do\n  // some extra processing of the response stream. See\n  // `createPrefetchResponseStream` for more details.\n  const shouldImmediatelyDecode = false\n  const response = await createFetch<T>(\n    url,\n    headers,\n    fetchPriority,\n    shouldImmediatelyDecode\n  )\n  if (!response.ok) {\n    return null\n  }\n\n  // Check the content type\n  if (isOutputExportMode) {\n    // In output: \"export\" mode, we relaxed about the content type, since it's\n    // not Next.js that's serving the response. If the status is OK, assume the\n    // response is valid. If it's not a valid response, the Flight client won't\n    // be able to decode it, and we'll treat it as a miss.\n  } else {\n    const contentType = response.headers.get('content-type')\n    const isFlightResponse =\n      contentType && contentType.startsWith(RSC_CONTENT_TYPE_HEADER)\n    if (!isFlightResponse) {\n      return null\n    }\n  }\n  return response\n}\n\nfunction createPrefetchResponseStream(\n  originalFlightStream: ReadableStream<Uint8Array>,\n  onStreamClose: () => void,\n  onResponseSizeUpdate: (size: number) => void\n): ReadableStream<Uint8Array> {\n  // When PPR is enabled, prefetch streams may contain references that never\n  // resolve, because that's how we encode dynamic data access. In the decoded\n  // object returned by the Flight client, these are reified into hanging\n  // promises that suspend during render, which is effectively what we want.\n  // The UI resolves when it switches to the dynamic data stream\n  // (via useDeferredValue(dynamic, static)).\n  //\n  // However, the Flight implementation currently errors if the server closes\n  // the response before all the references are resolved. As a cheat to work\n  // around this, we wrap the original stream in a new stream that never closes,\n  // and therefore doesn't error.\n  //\n  // While processing the original stream, we also incrementally update the size\n  // of the cache entry in the LRU.\n  let totalByteLength = 0\n  const reader = originalFlightStream.getReader()\n  return new ReadableStream({\n    async pull(controller) {\n      while (true) {\n        const { done, value } = await reader.read()\n        if (!done) {\n          // Pass to the target stream and keep consuming the Flight response\n          // from the server.\n          controller.enqueue(value)\n\n          // Incrementally update the size of the cache entry in the LRU.\n          // NOTE: Since prefetch responses are delivered in a single chunk,\n          // it's not really necessary to do this streamingly, but I'm doing it\n          // anyway in case this changes in the future.\n          totalByteLength += value.byteLength\n          onResponseSizeUpdate(totalByteLength)\n          continue\n        }\n        // The server stream has closed. Exit, but intentionally do not close\n        // the target stream. We do notify the caller, though.\n        onStreamClose()\n        return\n      }\n    },\n  })\n}\n\nfunction addSegmentPathToUrlInOutputExportMode(\n  url: URL,\n  segmentPath: SegmentRequestKey\n): URL {\n  if (isOutputExportMode) {\n    // In output: \"export\" mode, we cannot use a header to encode the segment\n    // path. Instead, we append it to the end of the pathname.\n    const staticUrl = new URL(url)\n    const routeDir = staticUrl.pathname.endsWith('/')\n      ? staticUrl.pathname.slice(0, -1)\n      : staticUrl.pathname\n    const staticExportFilename =\n      convertSegmentPathToStaticExportFilename(segmentPath)\n    staticUrl.pathname = `${routeDir}/${staticExportFilename}`\n    return staticUrl\n  }\n  return url\n}\n\n/**\n * Checks whether the new fetch strategy is likely to provide more content than the old one.\n *\n * Generally, when an app uses dynamic data, a \"more specific\" fetch strategy is expected to provide more content:\n * - `LoadingBoundary` only provides static layouts\n * - `PPR` can provide shells for each segment (even for segments that use dynamic data)\n * - `PPRRuntime` can additionally include content that uses searchParams, params, or cookies\n * - `Full` includes all the content, even if it uses dynamic data\n *\n * However, it's possible that a more specific fetch strategy *won't* give us more content if:\n * - a segment is fully static\n *   (then, `PPR`/`PPRRuntime`/`Full` will all yield equivalent results)\n * - providing searchParams/params/cookies doesn't reveal any more content, e.g. because of an `await connection()`\n *   (then, `PPR` and `PPRRuntime` will yield equivalent results, only `Full` will give us more)\n * Because of this, when comparing two segments, we should also check if the existing segment is partial.\n * If it's not partial, then there's no need to prefetch it again, even using a \"more specific\" strategy.\n * There's currently no way to know if `PPRRuntime` will yield more data that `PPR`, so we have to assume it will.\n *\n * Also note that, in practice, we don't expect to be comparing `LoadingBoundary` to `PPR`/`PPRRuntime`,\n * because a non-PPR-enabled route wouldn't ever use the latter strategies. It might however use `Full`.\n */\nexport function canNewFetchStrategyProvideMoreContent(\n  currentStrategy: FetchStrategy,\n  newStrategy: FetchStrategy\n): boolean {\n  return currentStrategy < newStrategy\n}\n","import type {\n  FlightRouterState,\n  Segment as FlightRouterStateSegment,\n  Segment,\n} from '../../../shared/lib/app-router-types'\nimport { HasLoadingBoundary } from '../../../shared/lib/app-router-types'\nimport { matchSegment } from '../match-segments'\nimport {\n  readOrCreateRouteCacheEntry,\n  readOrCreateSegmentCacheEntry,\n  fetchRouteOnCacheMiss,\n  fetchSegmentOnCacheMiss,\n  EntryStatus,\n  type FulfilledRouteCacheEntry,\n  type RouteCacheEntry,\n  type SegmentCacheEntry,\n  type RouteTree,\n  fetchSegmentPrefetchesUsingDynamicRequest,\n  type PendingSegmentCacheEntry,\n  convertRouteTreeToFlightRouterState,\n  readOrCreateRevalidatingSegmentEntry,\n  upsertSegmentEntry,\n  type FulfilledSegmentCacheEntry,\n  upgradeToPendingSegment,\n  waitForSegmentCacheEntry,\n  overwriteRevalidatingSegmentCacheEntry,\n  canNewFetchStrategyProvideMoreContent,\n} from './cache'\nimport { getSegmentVaryPathForRequest, type SegmentVaryPath } from './vary-path'\nimport type { RouteCacheKey } from './cache-key'\nimport { createCacheKey } from './cache-key'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n  PrefetchPriority,\n} from './types'\nimport { getCurrentCacheVersion } from './cache'\nimport {\n  addSearchParamsIfPageSegment,\n  PAGE_SEGMENT_KEY,\n} from '../../../shared/lib/segment'\nimport type { SegmentRequestKey } from '../../../shared/lib/segment-cache/segment-value-encoding'\n\nconst scheduleMicrotask =\n  typeof queueMicrotask === 'function'\n    ? queueMicrotask\n    : (fn: () => unknown) =>\n        Promise.resolve()\n          .then(fn)\n          .catch((error) =>\n            setTimeout(() => {\n              throw error\n            })\n          )\n\nexport type PrefetchTask = {\n  key: RouteCacheKey\n\n  /**\n   * The FlightRouterState at the time the task was initiated. This is needed\n   * when falling back to the non-PPR behavior, which only prefetches up to\n   * the first loading boundary.\n   */\n  treeAtTimeOfPrefetch: FlightRouterState\n\n  /**\n   * The cache version at the time the task was initiated. This is used to\n   * determine if the cache was invalidated since the task was initiated.\n   */\n  cacheVersion: number\n\n  /**\n   * Whether to prefetch dynamic data, in addition to static data. This is\n   * used by `<Link prefetch={true}>`.\n   *\n   * Note that a task with `FetchStrategy.PPR` might need to use\n   * `FetchStrategy.LoadingBoundary` instead if we find out that a route\n   * does not support PPR after doing the initial route prefetch.\n   */\n  fetchStrategy: PrefetchTaskFetchStrategy\n\n  /**\n   * sortId is an incrementing counter\n   *\n   * Newer prefetches are prioritized over older ones, so that as new links\n   * enter the viewport, they are not starved by older links that are no\n   * longer relevant. In the future, we can add additional prioritization\n   * heuristics, like removing prefetches once a link leaves the viewport.\n   *\n   * The sortId is assigned when the prefetch is initiated, and reassigned if\n   * the same task is prefetched again (effectively bumping it to the top of\n   * the queue).\n   *\n   * TODO: We can add additional fields here to indicate what kind of prefetch\n   * it is. For example, was it initiated by a link? Or was it an imperative\n   * call? If it was initiated by a link, we can remove it from the queue when\n   * the link leaves the viewport, but if it was an imperative call, then we\n   * should keep it in the queue until it's fulfilled.\n   *\n   * We can also add priority levels. For example, hovering over a link could\n   * increase the priority of its prefetch.\n   */\n  sortId: number\n\n  /**\n   * The priority of the task. Like sortId, this affects the task's position in\n   * the queue, so it must never be updated without resifting the heap.\n   */\n  priority: PrefetchPriority\n\n  /**\n   * The phase of the task. Tasks are split into multiple phases so that their\n   * priority can be adjusted based on what kind of work they're doing.\n   * Concretely, prefetching the route tree is higher priority than prefetching\n   * segment data.\n   */\n  phase: PrefetchPhase\n\n  /**\n   * These fields are temporary state for tracking the currently running task.\n   * They are reset after each iteration of the task queue.\n   */\n  hasBackgroundWork: boolean\n  spawnedRuntimePrefetches: Set<SegmentRequestKey> | null\n\n  /**\n   * True if the prefetch was cancelled.\n   */\n  isCanceled: boolean\n\n  /**\n   * The callback passed to `router.prefetch`, if given.\n   */\n  onInvalidate: null | (() => void)\n\n  /**\n   * The index of the task in the heap's backing array. Used to efficiently\n   * change the priority of a task by re-sifting it, which requires knowing\n   * where it is in the array. This is only used internally by the heap\n   * algorithm. The naive alternative is indexOf every time a task is queued,\n   * which has O(n) complexity.\n   *\n   * We also use this field to check whether a task is currently in the queue.\n   */\n  _heapIndex: number\n}\n\nconst enum PrefetchTaskExitStatus {\n  /**\n   * The task yielded because there are too many requests in progress.\n   */\n  InProgress,\n\n  /**\n   * The task is blocked. It needs more data before it can proceed.\n   *\n   * Currently the only reason this happens is we're still waiting to receive a\n   * route tree from the server, because we can't start prefetching the segments\n   * until we know what to prefetch.\n   */\n  Blocked,\n\n  /**\n   * There's nothing left to prefetch.\n   */\n  Done,\n}\n\n/**\n * Prefetch tasks are processed in two phases: first the route tree is fetched,\n * then the segments. We use this to priortize tasks that have not yet fetched\n * the route tree.\n */\nconst enum PrefetchPhase {\n  RouteTree = 1,\n  Segments = 0,\n}\n\nexport type PrefetchSubtaskResult<T> = {\n  /**\n   * A promise that resolves when the network connection is closed.\n   */\n  closed: Promise<void>\n  value: T\n}\n\nconst taskHeap: Array<PrefetchTask> = []\n\nlet inProgressRequests = 0\n\nlet sortIdCounter = 0\nlet didScheduleMicrotask = false\n\n// The most recently hovered (or touched, etc) link, i.e. the most recent task\n// scheduled at Intent priority. There's only ever a single task at Intent\n// priority at a time. We reserve special network bandwidth for this task only.\nlet mostRecentlyHoveredLink: PrefetchTask | null = null\n\n// CDN cache propagation delay after revalidation (in milliseconds)\nconst REVALIDATION_COOLDOWN_MS = 300\n\n// Timeout handle for the revalidation cooldown. When non-null, prefetch\n// requests are blocked to allow CDN cache propagation.\nlet revalidationCooldownTimeoutHandle: ReturnType<typeof setTimeout> | null =\n  null\n\n/**\n * Called by the cache when revalidation occurs. Starts a cooldown period\n * during which prefetch requests are blocked to allow CDN cache propagation.\n */\nexport function startRevalidationCooldown(): void {\n  // Clear any existing timeout in case multiple revalidations happen\n  // in quick succession.\n  if (revalidationCooldownTimeoutHandle !== null) {\n    clearTimeout(revalidationCooldownTimeoutHandle)\n  }\n\n  // Schedule the cooldown to expire after the delay.\n  revalidationCooldownTimeoutHandle = setTimeout(() => {\n    revalidationCooldownTimeoutHandle = null\n    // Retry the prefetch queue now that the cooldown has expired.\n    ensureWorkIsScheduled()\n  }, REVALIDATION_COOLDOWN_MS)\n}\n\nexport type IncludeDynamicData = null | 'full' | 'dynamic'\n\n/**\n * Initiates a prefetch task for the given URL. If a prefetch for the same URL\n * is already in progress, this will bump it to the top of the queue.\n *\n * This is not a user-facing function. By the time this is called, the href is\n * expected to be validated and normalized.\n *\n * @param key The RouteCacheKey to prefetch.\n * @param treeAtTimeOfPrefetch The app's current FlightRouterState\n * @param fetchStrategy Whether to prefetch dynamic data, in addition to\n * static data. This is used by `<Link prefetch={true}>`.\n */\nexport function schedulePrefetchTask(\n  key: RouteCacheKey,\n  treeAtTimeOfPrefetch: FlightRouterState,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  priority: PrefetchPriority,\n  onInvalidate: null | (() => void)\n): PrefetchTask {\n  // Spawn a new prefetch task\n  const task: PrefetchTask = {\n    key,\n    treeAtTimeOfPrefetch,\n    cacheVersion: getCurrentCacheVersion(),\n    priority,\n    phase: PrefetchPhase.RouteTree,\n    hasBackgroundWork: false,\n    spawnedRuntimePrefetches: null,\n    fetchStrategy,\n    sortId: sortIdCounter++,\n    isCanceled: false,\n    onInvalidate,\n    _heapIndex: -1,\n  }\n\n  trackMostRecentlyHoveredLink(task)\n\n  heapPush(taskHeap, task)\n\n  // Schedule an async task to process the queue.\n  //\n  // The main reason we process the queue in an async task is for batching.\n  // It's common for a single JS task/event to trigger multiple prefetches.\n  // By deferring to a microtask, we only process the queue once per JS task.\n  // If they have different priorities, it also ensures they are processed in\n  // the optimal order.\n  ensureWorkIsScheduled()\n\n  return task\n}\n\nexport function cancelPrefetchTask(task: PrefetchTask): void {\n  // Remove the prefetch task from the queue. If the task already completed,\n  // then this is a no-op.\n  //\n  // We must also explicitly mark the task as canceled so that a blocked task\n  // does not get added back to the queue when it's pinged by the network.\n  task.isCanceled = true\n  heapDelete(taskHeap, task)\n}\n\nexport function reschedulePrefetchTask(\n  task: PrefetchTask,\n  treeAtTimeOfPrefetch: FlightRouterState,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  priority: PrefetchPriority\n): void {\n  // Bump the prefetch task to the top of the queue, as if it were a fresh\n  // task. This is essentially the same as canceling the task and scheduling\n  // a new one, except it reuses the original object.\n  //\n  // The primary use case is to increase the priority of a Link-initated\n  // prefetch on hover.\n\n  // Un-cancel the task, in case it was previously canceled.\n  task.isCanceled = false\n  task.phase = PrefetchPhase.RouteTree\n\n  // Assign a new sort ID to move it ahead of all other tasks at the same\n  // priority level. (Higher sort IDs are processed first.)\n  task.sortId = sortIdCounter++\n  task.priority =\n    // If this task is the most recently hovered link, maintain its\n    // Intent priority, even if the rescheduled priority is lower.\n    task === mostRecentlyHoveredLink ? PrefetchPriority.Intent : priority\n\n  task.treeAtTimeOfPrefetch = treeAtTimeOfPrefetch\n  task.fetchStrategy = fetchStrategy\n\n  trackMostRecentlyHoveredLink(task)\n\n  if (task._heapIndex !== -1) {\n    // The task is already in the queue.\n    heapResift(taskHeap, task)\n  } else {\n    heapPush(taskHeap, task)\n  }\n  ensureWorkIsScheduled()\n}\n\nexport function isPrefetchTaskDirty(\n  task: PrefetchTask,\n  nextUrl: string | null,\n  tree: FlightRouterState\n): boolean {\n  // This is used to quickly bail out of a prefetch task if the result is\n  // guaranteed to not have changed since the task was initiated. This is\n  // strictly an optimization  theoretically, if it always returned true, no\n  // behavior should change because a full prefetch task will effectively\n  // perform the same checks.\n  const currentCacheVersion = getCurrentCacheVersion()\n  return (\n    task.cacheVersion !== currentCacheVersion ||\n    task.treeAtTimeOfPrefetch !== tree ||\n    task.key.nextUrl !== nextUrl\n  )\n}\n\nfunction trackMostRecentlyHoveredLink(task: PrefetchTask) {\n  // Track the mostly recently hovered link, i.e. the most recently scheduled\n  // task at Intent priority. There must only be one such task at a time.\n  if (\n    task.priority === PrefetchPriority.Intent &&\n    task !== mostRecentlyHoveredLink\n  ) {\n    if (mostRecentlyHoveredLink !== null) {\n      // Bump the previously hovered link's priority down to Default.\n      if (mostRecentlyHoveredLink.priority !== PrefetchPriority.Background) {\n        mostRecentlyHoveredLink.priority = PrefetchPriority.Default\n        heapResift(taskHeap, mostRecentlyHoveredLink)\n      }\n    }\n    mostRecentlyHoveredLink = task\n  }\n}\n\nfunction ensureWorkIsScheduled() {\n  if (didScheduleMicrotask) {\n    // Already scheduled a task to process the queue\n    return\n  }\n  didScheduleMicrotask = true\n  scheduleMicrotask(processQueueInMicrotask)\n}\n\n/**\n * Checks if we've exceeded the maximum number of concurrent prefetch requests,\n * to avoid saturating the browser's internal network queue. This is a\n * cooperative limit  prefetch tasks should check this before issuing\n * new requests.\n *\n * Also checks if we're within the revalidation cooldown window, during which\n * prefetch requests are delayed to allow CDN cache propagation.\n */\nfunction hasNetworkBandwidth(task: PrefetchTask): boolean {\n  // Check if we're within the revalidation cooldown window\n  if (revalidationCooldownTimeoutHandle !== null) {\n    // We're within the cooldown window. Return false to prevent prefetching.\n    // When the cooldown expires, the timeout will call ensureWorkIsScheduled()\n    // to retry the queue.\n    return false\n  }\n\n  // TODO: Also check if there's an in-progress navigation. We should never\n  // add prefetch requests to the network queue if an actual navigation is\n  // taking place, to ensure there's sufficient bandwidth for render-blocking\n  // data and resources.\n\n  // TODO: Consider reserving some amount of bandwidth for static prefetches.\n\n  if (task.priority === PrefetchPriority.Intent) {\n    // The most recently hovered link is allowed to exceed the default limit.\n    //\n    // The goal is to always have enough bandwidth to start a new prefetch\n    // request when hovering over a link.\n    //\n    // However, because we don't abort in-progress requests, it's still possible\n    // we'll run out of bandwidth. When links are hovered in quick succession,\n    // there could be multiple hover requests running simultaneously.\n    return inProgressRequests < 12\n  }\n\n  // The default limit is lower than the limit for a hovered link.\n  return inProgressRequests < 4\n}\n\nfunction spawnPrefetchSubtask<T>(\n  prefetchSubtask: Promise<PrefetchSubtaskResult<T> | null>\n): Promise<T | null> {\n  // When the scheduler spawns an async task, we don't await its result.\n  // Instead, the async task writes its result directly into the cache, then\n  // pings the scheduler to continue.\n  //\n  // We process server responses streamingly, so the prefetch subtask will\n  // likely resolve before we're finished receiving all the data. The subtask\n  // result includes a promise that resolves once the network connection is\n  // closed. The scheduler uses this to control network bandwidth by tracking\n  // and limiting the number of concurrent requests.\n  inProgressRequests++\n  return prefetchSubtask.then((result) => {\n    if (result === null) {\n      // The prefetch task errored before it could start processing the\n      // network stream. Assume the connection is closed.\n      onPrefetchConnectionClosed()\n      return null\n    }\n    // Wait for the connection to close before freeing up more bandwidth.\n    result.closed.then(onPrefetchConnectionClosed)\n    return result.value\n  })\n}\n\nfunction onPrefetchConnectionClosed(): void {\n  inProgressRequests--\n\n  // Notify the scheduler that we have more bandwidth, and can continue\n  // processing tasks.\n  ensureWorkIsScheduled()\n}\n\n/**\n * Notify the scheduler that we've received new data for an in-progress\n * prefetch. The corresponding task will be added back to the queue (unless the\n * task has been canceled in the meantime).\n */\nexport function pingPrefetchTask(task: PrefetchTask) {\n  // \"Ping\" a prefetch that's already in progress to notify it of new data.\n  if (\n    // Check if prefetch was canceled.\n    task.isCanceled ||\n    // Check if prefetch is already queued.\n    task._heapIndex !== -1\n  ) {\n    return\n  }\n  // Add the task back to the queue.\n  heapPush(taskHeap, task)\n  ensureWorkIsScheduled()\n}\n\nfunction processQueueInMicrotask() {\n  didScheduleMicrotask = false\n\n  // We aim to minimize how often we read the current time. Since nearly all\n  // functions in the prefetch scheduler are synchronous, we can read the time\n  // once and pass it as an argument wherever it's needed.\n  const now = Date.now()\n\n  // Process the task queue until we run out of network bandwidth.\n  let task = heapPeek(taskHeap)\n  while (task !== null && hasNetworkBandwidth(task)) {\n    task.cacheVersion = getCurrentCacheVersion()\n\n    const exitStatus = pingRoute(now, task)\n\n    // These fields are only valid for a single attempt. Reset them after each\n    // iteration of the task queue.\n    const hasBackgroundWork = task.hasBackgroundWork\n    task.hasBackgroundWork = false\n    task.spawnedRuntimePrefetches = null\n\n    switch (exitStatus) {\n      case PrefetchTaskExitStatus.InProgress:\n        // The task yielded because there are too many requests in progress.\n        // Stop processing tasks until we have more bandwidth.\n        return\n      case PrefetchTaskExitStatus.Blocked:\n        // The task is blocked. It needs more data before it can proceed.\n        // Keep the task out of the queue until the server responds.\n        heapPop(taskHeap)\n        // Continue to the next task\n        task = heapPeek(taskHeap)\n        continue\n      case PrefetchTaskExitStatus.Done:\n        if (task.phase === PrefetchPhase.RouteTree) {\n          // Finished prefetching the route tree. Proceed to prefetching\n          // the segments.\n          task.phase = PrefetchPhase.Segments\n          heapResift(taskHeap, task)\n        } else if (hasBackgroundWork) {\n          // The task spawned additional background work. Reschedule the task\n          // at background priority.\n          task.priority = PrefetchPriority.Background\n          heapResift(taskHeap, task)\n        } else {\n          // The prefetch is complete. Continue to the next task.\n          heapPop(taskHeap)\n        }\n        task = heapPeek(taskHeap)\n        continue\n      default:\n        exitStatus satisfies never\n    }\n  }\n}\n\n/**\n * Check this during a prefetch task to determine if background work can be\n * performed. If so, it evaluates to `true`. Otherwise, it returns `false`,\n * while also scheduling a background task to run later. Usage:\n *\n * @example\n * if (background(task)) {\n *   // Perform background-pri work\n * }\n */\nfunction background(task: PrefetchTask): boolean {\n  if (task.priority === PrefetchPriority.Background) {\n    return true\n  }\n  task.hasBackgroundWork = true\n  return false\n}\n\nfunction pingRoute(now: number, task: PrefetchTask): PrefetchTaskExitStatus {\n  const key = task.key\n  const route = readOrCreateRouteCacheEntry(now, task, key)\n  const exitStatus = pingRootRouteTree(now, task, route)\n\n  if (exitStatus !== PrefetchTaskExitStatus.InProgress && key.search !== '') {\n    // If the URL has a non-empty search string, also prefetch the pathname\n    // without the search string. We use the searchless route tree as a base for\n    // optimistic routing; see requestOptimisticRouteCacheEntry for details.\n    //\n    // Note that we don't need to prefetch any of the segment data. Just the\n    // route tree.\n    //\n    // TODO: This is a temporary solution; the plan is to replace this by adding\n    // a wildcard lookup method to the TupleMap implementation. This is\n    // non-trivial to implement because it needs to account for things like\n    // fallback route entries, hence this temporary workaround.\n    const url = new URL(key.pathname, location.origin)\n    const keyWithoutSearch = createCacheKey(url.href, key.nextUrl)\n    const routeWithoutSearch = readOrCreateRouteCacheEntry(\n      now,\n      task,\n      keyWithoutSearch\n    )\n    switch (routeWithoutSearch.status) {\n      case EntryStatus.Empty: {\n        if (background(task)) {\n          routeWithoutSearch.status = EntryStatus.Pending\n          spawnPrefetchSubtask(\n            fetchRouteOnCacheMiss(routeWithoutSearch, task, keyWithoutSearch)\n          )\n        }\n        break\n      }\n      case EntryStatus.Pending:\n      case EntryStatus.Fulfilled:\n      case EntryStatus.Rejected: {\n        // Either the route tree is already cached, or there's already a\n        // request in progress. Since we don't need to fetch any segment data\n        // for this route, there's nothing left to do.\n        break\n      }\n      default:\n        routeWithoutSearch satisfies never\n    }\n  }\n\n  return exitStatus\n}\n\nfunction pingRootRouteTree(\n  now: number,\n  task: PrefetchTask,\n  route: RouteCacheEntry\n): PrefetchTaskExitStatus {\n  switch (route.status) {\n    case EntryStatus.Empty: {\n      // Route is not yet cached, and there's no request already in progress.\n      // Spawn a task to request the route, load it into the cache, and ping\n      // the task to continue.\n\n      // TODO: There are multiple strategies in the <Link> API for prefetching\n      // a route. Currently we've only implemented the main one: per-segment,\n      // static-data only.\n      //\n      // There's also `<Link prefetch={true}>`\n      // which prefetch both static *and* dynamic data.\n      // Similarly, we need to fallback to the old, per-page\n      // behavior if PPR is disabled for a route (via the incremental opt-in).\n      //\n      // Those cases will be handled here.\n      spawnPrefetchSubtask(fetchRouteOnCacheMiss(route, task, task.key))\n\n      // If the request takes longer than a minute, a subsequent request should\n      // retry instead of waiting for this one. When the response is received,\n      // this value will be replaced by a new value based on the stale time sent\n      // from the server.\n      // TODO: We should probably also manually abort the fetch task, to reclaim\n      // server bandwidth.\n      route.staleAt = now + 60 * 1000\n\n      // Upgrade to Pending so we know there's already a request in progress\n      route.status = EntryStatus.Pending\n\n      // Intentional fallthrough to the Pending branch\n    }\n    case EntryStatus.Pending: {\n      // Still pending. We can't start prefetching the segments until the route\n      // tree has loaded. Add the task to the set of blocked tasks so that it\n      // is notified when the route tree is ready.\n      const blockedTasks = route.blockedTasks\n      if (blockedTasks === null) {\n        route.blockedTasks = new Set([task])\n      } else {\n        blockedTasks.add(task)\n      }\n      return PrefetchTaskExitStatus.Blocked\n    }\n    case EntryStatus.Rejected: {\n      // Route tree failed to load. Treat as a 404.\n      return PrefetchTaskExitStatus.Done\n    }\n    case EntryStatus.Fulfilled: {\n      if (task.phase !== PrefetchPhase.Segments) {\n        // Do not prefetch segment data until we've entered the segment phase.\n        return PrefetchTaskExitStatus.Done\n      }\n      // Recursively fill in the segment tree.\n      if (!hasNetworkBandwidth(task)) {\n        // Stop prefetching segments until there's more bandwidth.\n        return PrefetchTaskExitStatus.InProgress\n      }\n      const tree = route.tree\n\n      // A task's fetch strategy gets set to `PPR` for any \"auto\" prefetch.\n      // If it turned out that the route isn't PPR-enabled, we need to use `LoadingBoundary` instead.\n      // We don't need to do this for runtime prefetches, because those are only available in\n      // `cacheComponents`, where every route is PPR.\n      const fetchStrategy =\n        task.fetchStrategy === FetchStrategy.PPR\n          ? route.isPPREnabled\n            ? FetchStrategy.PPR\n            : FetchStrategy.LoadingBoundary\n          : task.fetchStrategy\n\n      switch (fetchStrategy) {\n        case FetchStrategy.PPR: {\n          // For Cache Components pages, each segment may be prefetched\n          // statically or using a runtime request, based on various\n          // configurations and heuristics. We'll do this in two passes: first\n          // traverse the tree and perform all the static prefetches.\n          //\n          // Then, if there are any segments that need a runtime request,\n          // do another pass to perform a runtime prefetch.\n          pingStaticHead(now, task, route)\n          const exitStatus = pingSharedPartOfCacheComponentsTree(\n            now,\n            task,\n            route,\n            task.treeAtTimeOfPrefetch,\n            tree\n          )\n          if (exitStatus === PrefetchTaskExitStatus.InProgress) {\n            // Child yielded without finishing.\n            return PrefetchTaskExitStatus.InProgress\n          }\n          const spawnedRuntimePrefetches = task.spawnedRuntimePrefetches\n          if (spawnedRuntimePrefetches !== null) {\n            // During the first pass, we discovered segments that require a\n            // runtime prefetch. Do a second pass to construct a request tree.\n            const spawnedEntries = new Map<\n              SegmentRequestKey,\n              PendingSegmentCacheEntry\n            >()\n            pingRuntimeHead(\n              now,\n              task,\n              route,\n              spawnedEntries,\n              FetchStrategy.PPRRuntime\n            )\n            const requestTree = pingRuntimePrefetches(\n              now,\n              task,\n              route,\n              tree,\n              spawnedRuntimePrefetches,\n              spawnedEntries\n            )\n            let needsDynamicRequest = spawnedEntries.size > 0\n            if (needsDynamicRequest) {\n              // Perform a dynamic prefetch request and populate the cache with\n              // the result.\n              spawnPrefetchSubtask(\n                fetchSegmentPrefetchesUsingDynamicRequest(\n                  task,\n                  route,\n                  FetchStrategy.PPRRuntime,\n                  requestTree,\n                  spawnedEntries\n                )\n              )\n            }\n          }\n          return PrefetchTaskExitStatus.Done\n        }\n        case FetchStrategy.Full:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.LoadingBoundary: {\n          // Prefetch multiple segments using a single dynamic request.\n          // TODO: We can consolidate this branch with previous one by modeling\n          // it as if the first segment in the new tree has runtime prefetching\n          // enabled. Will do this as a follow-up refactor. Might want to remove\n          // the special metatdata case below first. In the meantime, it's not\n          // really that much duplication, just would be nice to remove one of\n          // these codepaths.\n          const spawnedEntries = new Map<\n            SegmentRequestKey,\n            PendingSegmentCacheEntry\n          >()\n          pingRuntimeHead(now, task, route, spawnedEntries, fetchStrategy)\n          const dynamicRequestTree = diffRouteTreeAgainstCurrent(\n            now,\n            task,\n            route,\n            task.treeAtTimeOfPrefetch,\n            tree,\n            spawnedEntries,\n            fetchStrategy\n          )\n          let needsDynamicRequest = spawnedEntries.size > 0\n          if (needsDynamicRequest) {\n            spawnPrefetchSubtask(\n              fetchSegmentPrefetchesUsingDynamicRequest(\n                task,\n                route,\n                fetchStrategy,\n                dynamicRequestTree,\n                spawnedEntries\n              )\n            )\n          }\n          return PrefetchTaskExitStatus.Done\n        }\n        default:\n          fetchStrategy satisfies never\n      }\n      break\n    }\n    default: {\n      route satisfies never\n    }\n  }\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction pingStaticHead(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry\n): void {\n  // The Head data for a page (metadata, viewport) is not really a route\n  // segment, in the sense that it doesn't appear in the route tree. But we\n  // store it in the cache as if it were, using a special key.\n  pingStaticSegmentData(\n    now,\n    task,\n    route,\n    readOrCreateSegmentCacheEntry(\n      now,\n      FetchStrategy.PPR,\n      route,\n      route.metadata\n    ),\n    task.key,\n    route.metadata\n  )\n}\n\nfunction pingRuntimeHead(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy:\n    | FetchStrategy.Full\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.LoadingBoundary\n): void {\n  pingRouteTreeAndIncludeDynamicData(\n    now,\n    task,\n    route,\n    route.metadata,\n    false,\n    spawnedEntries,\n    // When prefetching the head, there's no difference between Full\n    // and LoadingBoundary\n    fetchStrategy === FetchStrategy.LoadingBoundary\n      ? FetchStrategy.Full\n      : fetchStrategy\n  )\n}\n\n// TODO: Rename dynamic -> runtime throughout this module\n\nfunction pingSharedPartOfCacheComponentsTree(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  oldTree: FlightRouterState,\n  newTree: RouteTree\n): PrefetchTaskExitStatus {\n  // When Cache Components is enabled (or PPR, or a fully static route when PPR\n  // is disabled; those cases are treated equivalently to Cache Components), we\n  // start by prefetching each segment individually. Once we reach the \"new\"\n  // part of the tree  the part that doesn't exist on the current page  we\n  // may choose to switch to a runtime prefetch instead, based on the\n  // information sent by the server in the route tree.\n  //\n  // The traversal starts in the \"shared\" part of the tree. Once we reach the\n  // \"new\" part of the tree, we switch to a different traversal,\n  // pingNewPartOfCacheComponentsTree.\n\n  // Prefetch this segment's static data.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    newTree\n  )\n  pingStaticSegmentData(now, task, route, segment, task.key, newTree)\n\n  // Recursively ping the children.\n  const oldTreeChildren = oldTree[1]\n  const newTreeChildren = newTree.slots\n  if (newTreeChildren !== null) {\n    for (const parallelRouteKey in newTreeChildren) {\n      if (!hasNetworkBandwidth(task)) {\n        // Stop prefetching segments until there's more bandwidth.\n        return PrefetchTaskExitStatus.InProgress\n      }\n      const newTreeChild = newTreeChildren[parallelRouteKey]\n      const newTreeChildSegment = newTreeChild.segment\n      const oldTreeChild: FlightRouterState | void =\n        oldTreeChildren[parallelRouteKey]\n      const oldTreeChildSegment: FlightRouterStateSegment | void =\n        oldTreeChild?.[0]\n      let childExitStatus\n      if (\n        oldTreeChildSegment !== undefined &&\n        doesCurrentSegmentMatchCachedSegment(\n          route,\n          newTreeChildSegment,\n          oldTreeChildSegment\n        )\n      ) {\n        // We're still in the \"shared\" part of the tree.\n        childExitStatus = pingSharedPartOfCacheComponentsTree(\n          now,\n          task,\n          route,\n          oldTreeChild,\n          newTreeChild\n        )\n      } else {\n        // We've entered the \"new\" part of the tree. Switch\n        // traversal functions.\n        childExitStatus = pingNewPartOfCacheComponentsTree(\n          now,\n          task,\n          route,\n          newTreeChild\n        )\n      }\n      if (childExitStatus === PrefetchTaskExitStatus.InProgress) {\n        // Child yielded without finishing.\n        return PrefetchTaskExitStatus.InProgress\n      }\n    }\n  }\n\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction pingNewPartOfCacheComponentsTree(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): PrefetchTaskExitStatus.InProgress | PrefetchTaskExitStatus.Done {\n  // We're now prefetching in the \"new\" part of the tree, the part that doesn't\n  // exist on the current page. (In other words, we're deeper than the\n  // shared layouts.) Segments in here default to being prefetched statically.\n  // However, if the server instructs us to, we may switch to a runtime\n  // prefetch instead. Traverse the tree and check at each segment.\n  if (tree.hasRuntimePrefetch) {\n    // This route has a runtime prefetch response. Since we're below the shared\n    // layout, everything from this point should be prefetched using a single,\n    // combined runtime request, rather than using per-segment static requests.\n    // This is true even if some of the child segments are known to be fully\n    // static  once we've decided to perform a runtime prefetch, we might as\n    // well respond with the static segments in the same roundtrip. (That's how\n    // regular navigations work, too.) We'll still skip over segments that are\n    // already cached, though.\n    //\n    // It's the server's responsibility to set a reasonable value of\n    // `hasRuntimePrefetch`. Currently it's user-defined, but eventually, the\n    // server may send a value of `false` even if the user opts in, if it\n    // determines during build that the route is always fully static. There are\n    // more optimizations we can do once we implement fallback param\n    // tracking, too.\n    //\n    // Use the task object to collect the segments that need a runtime prefetch.\n    // This will signal to the outer task queue that a second traversal is\n    // required to construct a request tree.\n    if (task.spawnedRuntimePrefetches === null) {\n      task.spawnedRuntimePrefetches = new Set([tree.requestKey])\n    } else {\n      task.spawnedRuntimePrefetches.add(tree.requestKey)\n    }\n    // Then exit the traversal without prefetching anything further.\n    return PrefetchTaskExitStatus.Done\n  }\n\n  // This segment should not be runtime prefetched. Prefetch its static data.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    tree\n  )\n  pingStaticSegmentData(now, task, route, segment, task.key, tree)\n  if (tree.slots !== null) {\n    if (!hasNetworkBandwidth(task)) {\n      // Stop prefetching segments until there's more bandwidth.\n      return PrefetchTaskExitStatus.InProgress\n    }\n    // Recursively ping the children.\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      const childExitStatus = pingNewPartOfCacheComponentsTree(\n        now,\n        task,\n        route,\n        childTree\n      )\n      if (childExitStatus === PrefetchTaskExitStatus.InProgress) {\n        // Child yielded without finishing.\n        return PrefetchTaskExitStatus.InProgress\n      }\n    }\n  }\n  // This segment and all its children have finished prefetching.\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction diffRouteTreeAgainstCurrent(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  oldTree: FlightRouterState,\n  newTree: RouteTree,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy:\n    | FetchStrategy.Full\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.LoadingBoundary\n): FlightRouterState {\n  // This is a single recursive traversal that does multiple things:\n  // - Finds the parts of the target route (newTree) that are not part of\n  //   of the current page (oldTree) by diffing them, using the same algorithm\n  //   as a real navigation.\n  // - Constructs a request tree (FlightRouterState) that describes which\n  //   segments need to be prefetched and which ones are already cached.\n  // - Creates a set of pending cache entries for the segments that need to\n  //   be prefetched, so that a subsequent prefetch task does not request the\n  //   same segments again.\n  const oldTreeChildren = oldTree[1]\n  const newTreeChildren = newTree.slots\n  let requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (newTreeChildren !== null) {\n    for (const parallelRouteKey in newTreeChildren) {\n      const newTreeChild = newTreeChildren[parallelRouteKey]\n      const newTreeChildSegment = newTreeChild.segment\n      const oldTreeChild: FlightRouterState | void =\n        oldTreeChildren[parallelRouteKey]\n      const oldTreeChildSegment: FlightRouterStateSegment | void =\n        oldTreeChild?.[0]\n      if (\n        oldTreeChildSegment !== undefined &&\n        doesCurrentSegmentMatchCachedSegment(\n          route,\n          newTreeChildSegment,\n          oldTreeChildSegment\n        )\n      ) {\n        // This segment is already part of the current route. Keep traversing.\n        const requestTreeChild = diffRouteTreeAgainstCurrent(\n          now,\n          task,\n          route,\n          oldTreeChild,\n          newTreeChild,\n          spawnedEntries,\n          fetchStrategy\n        )\n        requestTreeChildren[parallelRouteKey] = requestTreeChild\n      } else {\n        // This segment is not part of the current route. We're entering a\n        // part of the tree that we need to prefetch (unless everything is\n        // already cached).\n        switch (fetchStrategy) {\n          case FetchStrategy.LoadingBoundary: {\n            // When PPR is disabled, we can't prefetch per segment. We must\n            // fallback to the old prefetch behavior and send a dynamic request.\n            // Only routes that include a loading boundary can be prefetched in\n            // this way.\n            //\n            // This is simlar to a \"full\" prefetch, but we're much more\n            // conservative about which segments to include in the request.\n            //\n            // The server will only render up to the first loading boundary\n            // inside new part of the tree. If there's no loading boundary\n            // anywhere in the tree, the server will never return any data, so\n            // we can skip the request.\n            const subtreeHasLoadingBoundary =\n              newTreeChild.hasLoadingBoundary !==\n              HasLoadingBoundary.SubtreeHasNoLoadingBoundary\n            const requestTreeChild = subtreeHasLoadingBoundary\n              ? pingPPRDisabledRouteTreeUpToLoadingBoundary(\n                  now,\n                  task,\n                  route,\n                  newTreeChild,\n                  null,\n                  spawnedEntries\n                )\n              : // There's no loading boundary within this tree. Bail out.\n                convertRouteTreeToFlightRouterState(newTreeChild)\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          case FetchStrategy.PPRRuntime: {\n            // This is a runtime prefetch. Fetch all cacheable data in the tree,\n            // not just the static PPR shell.\n            const requestTreeChild = pingRouteTreeAndIncludeDynamicData(\n              now,\n              task,\n              route,\n              newTreeChild,\n              false,\n              spawnedEntries,\n              fetchStrategy\n            )\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          case FetchStrategy.Full: {\n            // This is a \"full\" prefetch. Fetch all the data in the tree, both\n            // static and dynamic. We issue roughly the same request that we\n            // would during a real navigation. The goal is that once the\n            // navigation occurs, the router should not have to fetch any\n            // additional data.\n            //\n            // Although the response will include dynamic data, opting into a\n            // Full prefetch  via <Link prefetch={true}>  implicitly\n            // instructs the cache to treat the response as \"static\", or non-\n            // dynamic, since the whole point is to cache it for\n            // future navigations.\n            //\n            // Construct a tree (currently a FlightRouterState) that represents\n            // which segments need to be prefetched and which ones are already\n            // cached. If the tree is empty, then we can exit. Otherwise, we'll\n            // send the request tree to the server and use the response to\n            // populate the segment cache.\n            const requestTreeChild = pingRouteTreeAndIncludeDynamicData(\n              now,\n              task,\n              route,\n              newTreeChild,\n              false,\n              spawnedEntries,\n              fetchStrategy\n            )\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          default:\n            fetchStrategy satisfies never\n        }\n      }\n    }\n  }\n  const requestTree: FlightRouterState = [\n    newTree.segment,\n    requestTreeChildren,\n    null,\n    null,\n    newTree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingPPRDisabledRouteTreeUpToLoadingBoundary(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  refetchMarkerContext: 'refetch' | 'inside-shared-layout' | null,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): FlightRouterState {\n  // This function is similar to pingRouteTreeAndIncludeDynamicData, except the\n  // server is only going to return a minimal loading state  it will stop\n  // rendering at the first loading boundary. Whereas a Full prefetch is\n  // intentionally aggressive and tries to pretfetch all the data that will be\n  // needed for a navigation, a LoadingBoundary prefetch is much more\n  // conservative. For example, it will omit from the request tree any segment\n  // that is already cached, regardles of whether it's partial or full. By\n  // contrast, a Full prefetch will refetch partial segments.\n\n  // \"inside-shared-layout\" tells the server where to start looking for a\n  // loading boundary.\n  let refetchMarker: 'refetch' | 'inside-shared-layout' | null =\n    refetchMarkerContext === null ? 'inside-shared-layout' : null\n\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    tree\n  )\n  switch (segment.status) {\n    case EntryStatus.Empty: {\n      // This segment is not cached. Add a refetch marker so the server knows\n      // to start rendering here.\n      // TODO: Instead of a \"refetch\" marker, we could just omit this subtree's\n      // FlightRouterState from the request tree. I think this would probably\n      // already work even without any updates to the server. For consistency,\n      // though, I'll send the full tree and we'll look into this later as part\n      // of a larger redesign of the request protocol.\n\n      // Add the pending cache entry to the result map.\n      spawnedEntries.set(\n        tree.requestKey,\n        upgradeToPendingSegment(\n          segment,\n          // Set the fetch strategy to LoadingBoundary to indicate that the server\n          // might not include it in the pending response. If another route is able\n          // to issue a per-segment request, we'll do that in the background.\n          FetchStrategy.LoadingBoundary\n        )\n      )\n      if (refetchMarkerContext !== 'refetch') {\n        refetchMarker = refetchMarkerContext = 'refetch'\n      } else {\n        // There's already a parent with a refetch marker, so we don't need\n        // to add another one.\n      }\n      break\n    }\n    case EntryStatus.Fulfilled: {\n      // The segment is already cached.\n      const segmentHasLoadingBoundary =\n        tree.hasLoadingBoundary === HasLoadingBoundary.SegmentHasLoadingBoundary\n      if (segmentHasLoadingBoundary) {\n        // This segment has a loading boundary, which means the server won't\n        // render its children. So there's nothing left to prefetch along this\n        // path. We can bail out.\n        return convertRouteTreeToFlightRouterState(tree)\n      }\n      // NOTE: If the cached segment were fetched using PPR, then it might be\n      // partial. We could get a more complete version of the segment by\n      // including it in this non-PPR request.\n      //\n      // We're intentionally choosing not to, though, because it's generally\n      // better to avoid doing a full prefetch whenever possible.\n      break\n    }\n    case EntryStatus.Pending: {\n      // There's another prefetch currently in progress. Don't add the refetch\n      // marker yet, so the server knows it can skip rendering this segment.\n      break\n    }\n    case EntryStatus.Rejected: {\n      // The segment failed to load. We shouldn't issue another request until\n      // the stale time has elapsed.\n      break\n    }\n    default:\n      segment satisfies never\n  }\n  const requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (tree.slots !== null) {\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] =\n        pingPPRDisabledRouteTreeUpToLoadingBoundary(\n          now,\n          task,\n          route,\n          childTree,\n          refetchMarkerContext,\n          spawnedEntries\n        )\n    }\n  }\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    refetchMarker,\n    tree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingRouteTreeAndIncludeDynamicData(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  isInsideRefetchingParent: boolean,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy: FetchStrategy.Full | FetchStrategy.PPRRuntime\n): FlightRouterState {\n  // The tree we're constructing is the same shape as the tree we're navigating\n  // to. But even though this is a \"new\" tree, some of the individual segments\n  // may be cached as a result of other route prefetches.\n  //\n  // So we need to find the first uncached segment along each path add an\n  // explicit \"refetch\" marker so the server knows where to start rendering.\n  // Once the server starts rendering along a path, it keeps rendering the\n  // entire subtree.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    // Note that `fetchStrategy` might be different from `task.fetchStrategy`,\n    // and we have to use the former here.\n    // We can have a task with `FetchStrategy.PPR` where some of its segments are configured to\n    // always use runtime prefetching (via `export const prefetch`), and those should check for\n    // entries that include search params.\n    fetchStrategy,\n    route,\n    tree\n  )\n\n  let spawnedSegment: PendingSegmentCacheEntry | null = null\n\n  switch (segment.status) {\n    case EntryStatus.Empty: {\n      // This segment is not cached. Include it in the request.\n      spawnedSegment = upgradeToPendingSegment(segment, fetchStrategy)\n      break\n    }\n    case EntryStatus.Fulfilled: {\n      // The segment is already cached.\n      if (\n        segment.isPartial &&\n        canNewFetchStrategyProvideMoreContent(\n          segment.fetchStrategy,\n          fetchStrategy\n        )\n      ) {\n        // The cached segment contains dynamic holes, and was prefetched using a less specific strategy than the current one.\n        // This means we're in one of these cases:\n        //   - we have a static prefetch, and we're doing a runtime prefetch\n        //   - we have a static or runtime prefetch, and we're doing a Full prefetch (or a navigation).\n        // In either case, we need to include it in the request to get a more specific (or full) version.\n        spawnedSegment = pingFullSegmentRevalidation(\n          now,\n          route,\n          tree,\n          fetchStrategy\n        )\n      }\n      break\n    }\n    case EntryStatus.Pending:\n    case EntryStatus.Rejected: {\n      // There's either another prefetch currently in progress, or the previous\n      // attempt failed. If the new strategy can provide more content, fetch it again.\n      if (\n        canNewFetchStrategyProvideMoreContent(\n          segment.fetchStrategy,\n          fetchStrategy\n        )\n      ) {\n        spawnedSegment = pingFullSegmentRevalidation(\n          now,\n          route,\n          tree,\n          fetchStrategy\n        )\n      }\n      break\n    }\n    default:\n      segment satisfies never\n  }\n  const requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (tree.slots !== null) {\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] =\n        pingRouteTreeAndIncludeDynamicData(\n          now,\n          task,\n          route,\n          childTree,\n          isInsideRefetchingParent || spawnedSegment !== null,\n          spawnedEntries,\n          fetchStrategy\n        )\n    }\n  }\n\n  if (spawnedSegment !== null) {\n    // Add the pending entry to the result map.\n    spawnedEntries.set(tree.requestKey, spawnedSegment)\n  }\n\n  // Don't bother to add a refetch marker if one is already present in a parent.\n  const refetchMarker =\n    !isInsideRefetchingParent && spawnedSegment !== null ? 'refetch' : null\n\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    refetchMarker,\n    tree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingRuntimePrefetches(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  spawnedRuntimePrefetches: Set<SegmentRequestKey>,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): FlightRouterState {\n  // Construct a request tree (FlightRouterState) for a runtime prefetch. If\n  // a segment is part of the runtime prefetch, the tree is constructed by\n  // diffing against what's already in the prefetch cache. Otherwise, we send\n  // a regular FlightRouterState with no special markers.\n  //\n  // See pingRouteTreeAndIncludeDynamicData for details.\n  if (spawnedRuntimePrefetches.has(tree.requestKey)) {\n    // This segment needs a runtime prefetch.\n    return pingRouteTreeAndIncludeDynamicData(\n      now,\n      task,\n      route,\n      tree,\n      false,\n      spawnedEntries,\n      FetchStrategy.PPRRuntime\n    )\n  }\n  let requestTreeChildren: Record<string, FlightRouterState> = {}\n  const slots = tree.slots\n  if (slots !== null) {\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] = pingRuntimePrefetches(\n        now,\n        task,\n        route,\n        childTree,\n        spawnedRuntimePrefetches,\n        spawnedEntries\n      )\n    }\n  }\n\n  // This segment is not part of the runtime prefetch. Clone the base tree.\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    null,\n  ]\n  return requestTree\n}\n\nfunction pingStaticSegmentData(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  segment: SegmentCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): void {\n  switch (segment.status) {\n    case EntryStatus.Empty:\n      // Upgrade to Pending so we know there's already a request in progress\n      spawnPrefetchSubtask(\n        fetchSegmentOnCacheMiss(\n          route,\n          upgradeToPendingSegment(segment, FetchStrategy.PPR),\n          routeKey,\n          tree\n        )\n      )\n      break\n    case EntryStatus.Pending: {\n      // There's already a request in progress. Depending on what kind of\n      // request it is, we may want to revalidate it.\n      switch (segment.fetchStrategy) {\n        case FetchStrategy.PPR:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.Full:\n          // There's already a request in progress. Don't do anything.\n          break\n        case FetchStrategy.LoadingBoundary:\n          // There's a pending request, but because it's using the old\n          // prefetching strategy, we can't be sure if it will be fulfilled by\n          // the response  it might be inside the loading boundary. Perform\n          // a revalidation, but because it's speculative, wait to do it at\n          // background priority.\n          if (background(task)) {\n            // TODO: Instead of speculatively revalidating, consider including\n            // `hasLoading` in the route tree prefetch response.\n            pingPPRSegmentRevalidation(now, route, routeKey, tree)\n          }\n          break\n        default:\n          segment.fetchStrategy satisfies never\n      }\n      break\n    }\n    case EntryStatus.Rejected: {\n      // The existing entry in the cache was rejected. Depending on how it\n      // was originally fetched, we may or may not want to revalidate it.\n      switch (segment.fetchStrategy) {\n        case FetchStrategy.PPR:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.Full:\n          // The previous attempt to fetch this entry failed. Don't attempt to\n          // fetch it again until the entry expires.\n          break\n        case FetchStrategy.LoadingBoundary:\n          // There's a rejected entry, but it was fetched using the loading\n          // boundary strategy. So the reason it wasn't returned by the server\n          // might just be because it was inside a loading boundary. Or because\n          // there was a dynamic rewrite. Revalidate it using the per-\n          // segment strategy.\n          //\n          // Because a rejected segment will definitely prevent the segment (and\n          // all of its children) from rendering, we perform this revalidation\n          // immediately instead of deferring it to a background task.\n          pingPPRSegmentRevalidation(now, route, routeKey, tree)\n          break\n        default:\n          segment.fetchStrategy satisfies never\n      }\n      break\n    }\n    case EntryStatus.Fulfilled:\n      // Segment is already cached. There's nothing left to prefetch.\n      break\n    default:\n      segment satisfies never\n  }\n\n  // Segments do not have dependent tasks, so once the prefetch is initiated,\n  // there's nothing else for us to do (except write the server data into the\n  // entry, which is handled by `fetchSegmentOnCacheMiss`).\n}\n\nfunction pingPPRSegmentRevalidation(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): void {\n  const revalidatingSegment = readOrCreateRevalidatingSegmentEntry(\n    now,\n    FetchStrategy.PPR,\n    route,\n    tree\n  )\n  switch (revalidatingSegment.status) {\n    case EntryStatus.Empty:\n      // Spawn a prefetch request and upsert the segment into the cache\n      // upon completion.\n      upsertSegmentOnCompletion(\n        spawnPrefetchSubtask(\n          fetchSegmentOnCacheMiss(\n            route,\n            upgradeToPendingSegment(revalidatingSegment, FetchStrategy.PPR),\n            routeKey,\n            tree\n          )\n        ),\n        getSegmentVaryPathForRequest(FetchStrategy.PPR, tree)\n      )\n      break\n    case EntryStatus.Pending:\n      // There's already a revalidation in progress.\n      break\n    case EntryStatus.Fulfilled:\n    case EntryStatus.Rejected:\n      // A previous revalidation attempt finished, but we chose not to replace\n      // the existing entry in the cache. Don't try again until or unless the\n      // revalidation entry expires.\n      break\n    default:\n      revalidatingSegment satisfies never\n  }\n}\n\nfunction pingFullSegmentRevalidation(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  fetchStrategy: FetchStrategy.Full | FetchStrategy.PPRRuntime\n): PendingSegmentCacheEntry | null {\n  const revalidatingSegment = readOrCreateRevalidatingSegmentEntry(\n    now,\n    fetchStrategy,\n    route,\n    tree\n  )\n  if (revalidatingSegment.status === EntryStatus.Empty) {\n    // During a Full/PPRRuntime prefetch, a single dynamic request is made for all the\n    // segments that we need. So we don't initiate a request here directly. By\n    // returning a pending entry from this function, it signals to the caller\n    // that this segment should be included in the request that's sent to\n    // the server.\n    const pendingSegment = upgradeToPendingSegment(\n      revalidatingSegment,\n      fetchStrategy\n    )\n    upsertSegmentOnCompletion(\n      waitForSegmentCacheEntry(pendingSegment),\n      getSegmentVaryPathForRequest(fetchStrategy, tree)\n    )\n    return pendingSegment\n  } else {\n    // There's already a revalidation in progress.\n    const nonEmptyRevalidatingSegment = revalidatingSegment\n    if (\n      canNewFetchStrategyProvideMoreContent(\n        nonEmptyRevalidatingSegment.fetchStrategy,\n        fetchStrategy\n      )\n    ) {\n      // The existing revalidation was fetched using a less specific strategy.\n      // Reset it and start a new revalidation.\n      const emptySegment = overwriteRevalidatingSegmentCacheEntry(\n        fetchStrategy,\n        route,\n        tree\n      )\n      const pendingSegment = upgradeToPendingSegment(\n        emptySegment,\n        fetchStrategy\n      )\n      upsertSegmentOnCompletion(\n        waitForSegmentCacheEntry(pendingSegment),\n        getSegmentVaryPathForRequest(fetchStrategy, tree)\n      )\n      return pendingSegment\n    }\n    switch (nonEmptyRevalidatingSegment.status) {\n      case EntryStatus.Pending:\n        // There's already an in-progress prefetch that includes this segment.\n        return null\n      case EntryStatus.Fulfilled:\n      case EntryStatus.Rejected:\n        // A previous revalidation attempt finished, but we chose not to replace\n        // the existing entry in the cache. Don't try again until or unless the\n        // revalidation entry expires.\n        return null\n      default:\n        nonEmptyRevalidatingSegment satisfies never\n        return null\n    }\n  }\n}\n\nconst noop = () => {}\n\nfunction upsertSegmentOnCompletion(\n  promise: Promise<FulfilledSegmentCacheEntry | null>,\n  varyPath: SegmentVaryPath\n) {\n  // Wait for a segment to finish loading, then upsert it into the cache\n  promise.then((fulfilled) => {\n    if (fulfilled !== null) {\n      // Received new data. Attempt to replace the existing entry in the cache.\n      upsertSegmentEntry(Date.now(), varyPath, fulfilled)\n    }\n  }, noop)\n}\n\nfunction doesCurrentSegmentMatchCachedSegment(\n  route: FulfilledRouteCacheEntry,\n  currentSegment: Segment,\n  cachedSegment: Segment\n): boolean {\n  if (cachedSegment === PAGE_SEGMENT_KEY) {\n    // In the FlightRouterState stored by the router, the page segment has the\n    // rendered search params appended to the name of the segment. In the\n    // prefetch cache, however, this is stored separately. So, when comparing\n    // the router's current FlightRouterState to the cached FlightRouterState,\n    // we need to make sure we compare both parts of the segment.\n    // TODO: This is not modeled clearly. We use the same type,\n    // FlightRouterState, for both the CacheNode tree _and_ the prefetch cache\n    // _and_ the server response format, when conceptually those are three\n    // different things and treated in different ways. We should encode more of\n    // this information into the type design so mistakes are less likely.\n    return (\n      currentSegment ===\n      addSearchParamsIfPageSegment(\n        PAGE_SEGMENT_KEY,\n        Object.fromEntries(new URLSearchParams(route.renderedSearch))\n      )\n    )\n  }\n  // Non-page segments are compared using the same function as the server\n  return matchSegment(cachedSegment, currentSegment)\n}\n\n// -----------------------------------------------------------------------------\n// The remainder of the module is a MinHeap implementation. Try not to put any\n// logic below here unless it's related to the heap algorithm. We can extract\n// this to a separate module if/when we need multiple kinds of heaps.\n// -----------------------------------------------------------------------------\n\nfunction compareQueuePriority(a: PrefetchTask, b: PrefetchTask) {\n  // Since the queue is a MinHeap, this should return a positive number if b is\n  // higher priority than a, and a negative number if a is higher priority\n  // than b.\n\n  // `priority` is an integer, where higher numbers are higher priority.\n  const priorityDiff = b.priority - a.priority\n  if (priorityDiff !== 0) {\n    return priorityDiff\n  }\n\n  // If the priority is the same, check which phase the prefetch is in  is it\n  // prefetching the route tree, or the segments? Route trees are prioritized.\n  const phaseDiff = b.phase - a.phase\n  if (phaseDiff !== 0) {\n    return phaseDiff\n  }\n\n  // Finally, check the insertion order. `sortId` is an incrementing counter\n  // assigned to prefetches. We want to process the newest prefetches first.\n  return b.sortId - a.sortId\n}\n\nfunction heapPush(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = heap.length\n  heap.push(node)\n  node._heapIndex = index\n  heapSiftUp(heap, node, index)\n}\n\nfunction heapPeek(heap: Array<PrefetchTask>): PrefetchTask | null {\n  return heap.length === 0 ? null : heap[0]\n}\n\nfunction heapPop(heap: Array<PrefetchTask>): PrefetchTask | null {\n  if (heap.length === 0) {\n    return null\n  }\n  const first = heap[0]\n  first._heapIndex = -1\n  const last = heap.pop() as PrefetchTask\n  if (last !== first) {\n    heap[0] = last\n    last._heapIndex = 0\n    heapSiftDown(heap, last, 0)\n  }\n  return first\n}\n\nfunction heapDelete(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = node._heapIndex\n  if (index !== -1) {\n    node._heapIndex = -1\n    if (heap.length !== 0) {\n      const last = heap.pop() as PrefetchTask\n      if (last !== node) {\n        heap[index] = last\n        last._heapIndex = index\n        heapSiftDown(heap, last, index)\n      }\n    }\n  }\n}\n\nfunction heapResift(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = node._heapIndex\n  if (index !== -1) {\n    if (index === 0) {\n      heapSiftDown(heap, node, 0)\n    } else {\n      const parentIndex = (index - 1) >>> 1\n      const parent = heap[parentIndex]\n      if (compareQueuePriority(parent, node) > 0) {\n        // The parent is larger. Sift up.\n        heapSiftUp(heap, node, index)\n      } else {\n        // The parent is smaller (or equal). Sift down.\n        heapSiftDown(heap, node, index)\n      }\n    }\n  }\n}\n\nfunction heapSiftUp(\n  heap: Array<PrefetchTask>,\n  node: PrefetchTask,\n  i: number\n): void {\n  let index = i\n  while (index > 0) {\n    const parentIndex = (index - 1) >>> 1\n    const parent = heap[parentIndex]\n    if (compareQueuePriority(parent, node) > 0) {\n      // The parent is larger. Swap positions.\n      heap[parentIndex] = node\n      node._heapIndex = parentIndex\n      heap[index] = parent\n      parent._heapIndex = index\n\n      index = parentIndex\n    } else {\n      // The parent is smaller. Exit.\n      return\n    }\n  }\n}\n\nfunction heapSiftDown(\n  heap: Array<PrefetchTask>,\n  node: PrefetchTask,\n  i: number\n): void {\n  let index = i\n  const length = heap.length\n  const halfLength = length >>> 1\n  while (index < halfLength) {\n    const leftIndex = (index + 1) * 2 - 1\n    const left = heap[leftIndex]\n    const rightIndex = leftIndex + 1\n    const right = heap[rightIndex]\n\n    // If the left or right node is smaller, swap with the smaller of those.\n    if (compareQueuePriority(left, node) < 0) {\n      if (rightIndex < length && compareQueuePriority(right, left) < 0) {\n        heap[index] = right\n        right._heapIndex = index\n        heap[rightIndex] = node\n        node._heapIndex = rightIndex\n\n        index = rightIndex\n      } else {\n        heap[index] = left\n        left._heapIndex = index\n        heap[leftIndex] = node\n        node._heapIndex = leftIndex\n\n        index = leftIndex\n      }\n    } else if (rightIndex < length && compareQueuePriority(right, node) < 0) {\n      heap[index] = right\n      right._heapIndex = index\n      heap[rightIndex] = node\n      node._heapIndex = rightIndex\n\n      index = rightIndex\n    } else {\n      // Neither child is smaller. Exit.\n      return\n    }\n  }\n}\n","import type { FlightRouterState } from '../../shared/lib/app-router-types'\nimport type { AppRouterInstance } from '../../shared/lib/app-router-context.shared-runtime'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n  PrefetchPriority,\n} from './segment-cache/types'\nimport { createCacheKey } from './segment-cache/cache-key'\nimport {\n  type PrefetchTask,\n  schedulePrefetchTask as scheduleSegmentPrefetchTask,\n  cancelPrefetchTask,\n  reschedulePrefetchTask,\n  isPrefetchTaskDirty,\n} from './segment-cache/scheduler'\nimport { startTransition } from 'react'\n\ntype LinkElement = HTMLAnchorElement | SVGAElement\n\ntype Element = LinkElement | HTMLFormElement\n\n// Properties that are shared between Link and Form instances. We use the same\n// shape for both to prevent a polymorphic de-opt in the VM.\ntype LinkOrFormInstanceShared = {\n  router: AppRouterInstance\n  fetchStrategy: PrefetchTaskFetchStrategy\n\n  isVisible: boolean\n\n  // The most recently initiated prefetch task. It may or may not have\n  // already completed. The same prefetch task object can be reused across\n  // multiple prefetches of the same link.\n  prefetchTask: PrefetchTask | null\n}\n\nexport type FormInstance = LinkOrFormInstanceShared & {\n  prefetchHref: string\n  setOptimisticLinkStatus: null\n}\n\ntype PrefetchableLinkInstance = LinkOrFormInstanceShared & {\n  prefetchHref: string\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n}\n\ntype NonPrefetchableLinkInstance = LinkOrFormInstanceShared & {\n  prefetchHref: null\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n}\n\ntype PrefetchableInstance = PrefetchableLinkInstance | FormInstance\n\nexport type LinkInstance =\n  | PrefetchableLinkInstance\n  | NonPrefetchableLinkInstance\n\n// Tracks the most recently navigated link instance. When null, indicates\n// the current navigation was not initiated by a link click.\nlet linkForMostRecentNavigation: LinkInstance | null = null\n\n// Status object indicating link is pending\nexport const PENDING_LINK_STATUS = { pending: true }\n\n// Status object indicating link is idle\nexport const IDLE_LINK_STATUS = { pending: false }\n\n// Updates the loading state when navigating between links\n// - Resets the previous link's loading state\n// - Sets the new link's loading state\n// - Updates tracking of current navigation\nexport function setLinkForCurrentNavigation(link: LinkInstance | null) {\n  startTransition(() => {\n    linkForMostRecentNavigation?.setOptimisticLinkStatus(IDLE_LINK_STATUS)\n    link?.setOptimisticLinkStatus(PENDING_LINK_STATUS)\n    linkForMostRecentNavigation = link\n  })\n}\n\n// Unmounts the current link instance from navigation tracking\nexport function unmountLinkForCurrentNavigation(link: LinkInstance) {\n  if (linkForMostRecentNavigation === link) {\n    linkForMostRecentNavigation = null\n  }\n}\n\n// Use a WeakMap to associate a Link instance with its DOM element. This is\n// used by the IntersectionObserver to track the link's visibility.\nconst prefetchable:\n  | WeakMap<Element, PrefetchableInstance>\n  | Map<Element, PrefetchableInstance> =\n  typeof WeakMap === 'function' ? new WeakMap() : new Map()\n\n// A Set of the currently visible links. We re-prefetch visible links after a\n// cache invalidation, or when the current URL changes. It's a separate data\n// structure from the WeakMap above because only the visible links need to\n// be enumerated.\nconst prefetchableAndVisible: Set<PrefetchableInstance> = new Set()\n\n// A single IntersectionObserver instance shared by all <Link> components.\nconst observer: IntersectionObserver | null =\n  typeof IntersectionObserver === 'function'\n    ? new IntersectionObserver(handleIntersect, {\n        rootMargin: '200px',\n      })\n    : null\n\nfunction observeVisibility(element: Element, instance: PrefetchableInstance) {\n  const existingInstance = prefetchable.get(element)\n  if (existingInstance !== undefined) {\n    // This shouldn't happen because each <Link> component should have its own\n    // anchor tag instance, but it's defensive coding to avoid a memory leak in\n    // case there's a logical error somewhere else.\n    unmountPrefetchableInstance(element)\n  }\n  // Only track prefetchable links that have a valid prefetch URL\n  prefetchable.set(element, instance)\n  if (observer !== null) {\n    observer.observe(element)\n  }\n}\n\nfunction coercePrefetchableUrl(href: string): URL | null {\n  if (typeof window !== 'undefined') {\n    const { createPrefetchURL } =\n      require('./app-router-utils') as typeof import('./app-router-utils')\n\n    try {\n      return createPrefetchURL(href)\n    } catch {\n      // createPrefetchURL sometimes throws an error if an invalid URL is\n      // provided, though I'm not sure if it's actually necessary.\n      // TODO: Consider removing the throw from the inner function, or change it\n      // to reportError. Or maybe the error isn't even necessary for automatic\n      // prefetches, just navigations.\n      const reportErrorFn =\n        typeof reportError === 'function' ? reportError : console.error\n      reportErrorFn(\n        `Cannot prefetch '${href}' because it cannot be converted to a URL.`\n      )\n      return null\n    }\n  } else {\n    return null\n  }\n}\n\nexport function mountLinkInstance(\n  element: LinkElement,\n  href: string,\n  router: AppRouterInstance,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  prefetchEnabled: boolean,\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n): LinkInstance {\n  if (prefetchEnabled) {\n    const prefetchURL = coercePrefetchableUrl(href)\n    if (prefetchURL !== null) {\n      const instance: PrefetchableLinkInstance = {\n        router,\n        fetchStrategy,\n        isVisible: false,\n        prefetchTask: null,\n        prefetchHref: prefetchURL.href,\n        setOptimisticLinkStatus,\n      }\n      // We only observe the link's visibility if it's prefetchable. For\n      // example, this excludes links to external URLs.\n      observeVisibility(element, instance)\n      return instance\n    }\n  }\n  // If the link is not prefetchable, we still create an instance so we can\n  // track its optimistic state (i.e. useLinkStatus).\n  const instance: NonPrefetchableLinkInstance = {\n    router,\n    fetchStrategy,\n    isVisible: false,\n    prefetchTask: null,\n    prefetchHref: null,\n    setOptimisticLinkStatus,\n  }\n  return instance\n}\n\nexport function mountFormInstance(\n  element: HTMLFormElement,\n  href: string,\n  router: AppRouterInstance,\n  fetchStrategy: PrefetchTaskFetchStrategy\n): void {\n  const prefetchURL = coercePrefetchableUrl(href)\n  if (prefetchURL === null) {\n    // This href is not prefetchable, so we don't track it.\n    // TODO: We currently observe/unobserve a form every time its href changes.\n    // For Links, this isn't a big deal because the href doesn't usually change,\n    // but for forms it's extremely common. We should optimize this.\n    return\n  }\n  const instance: FormInstance = {\n    router,\n    fetchStrategy,\n    isVisible: false,\n    prefetchTask: null,\n    prefetchHref: prefetchURL.href,\n    setOptimisticLinkStatus: null,\n  }\n  observeVisibility(element, instance)\n}\n\nexport function unmountPrefetchableInstance(element: Element) {\n  const instance = prefetchable.get(element)\n  if (instance !== undefined) {\n    prefetchable.delete(element)\n    prefetchableAndVisible.delete(instance)\n    const prefetchTask = instance.prefetchTask\n    if (prefetchTask !== null) {\n      cancelPrefetchTask(prefetchTask)\n    }\n  }\n  if (observer !== null) {\n    observer.unobserve(element)\n  }\n}\n\nfunction handleIntersect(entries: Array<IntersectionObserverEntry>) {\n  for (const entry of entries) {\n    // Some extremely old browsers or polyfills don't reliably support\n    // isIntersecting so we check intersectionRatio instead. (Do we care? Not\n    // really. But whatever this is fine.)\n    const isVisible = entry.intersectionRatio > 0\n    onLinkVisibilityChanged(entry.target as HTMLAnchorElement, isVisible)\n  }\n}\n\nexport function onLinkVisibilityChanged(element: Element, isVisible: boolean) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Prefetching on viewport is disabled in development for performance\n    // reasons, because it requires compiling the target page.\n    // TODO: Investigate re-enabling this.\n    return\n  }\n\n  const instance = prefetchable.get(element)\n  if (instance === undefined) {\n    return\n  }\n\n  instance.isVisible = isVisible\n  if (isVisible) {\n    prefetchableAndVisible.add(instance)\n  } else {\n    prefetchableAndVisible.delete(instance)\n  }\n  rescheduleLinkPrefetch(instance, PrefetchPriority.Default)\n}\n\nexport function onNavigationIntent(\n  element: HTMLAnchorElement | SVGAElement,\n  unstable_upgradeToDynamicPrefetch: boolean\n) {\n  const instance = prefetchable.get(element)\n  if (instance === undefined) {\n    return\n  }\n  // Prefetch the link on hover/touchstart.\n  if (instance !== undefined) {\n    if (\n      process.env.__NEXT_DYNAMIC_ON_HOVER &&\n      unstable_upgradeToDynamicPrefetch\n    ) {\n      // Switch to a full prefetch\n      instance.fetchStrategy = FetchStrategy.Full\n    }\n    rescheduleLinkPrefetch(instance, PrefetchPriority.Intent)\n  }\n}\n\nfunction rescheduleLinkPrefetch(\n  instance: PrefetchableInstance,\n  priority: PrefetchPriority.Default | PrefetchPriority.Intent\n) {\n  // Ensures that app-router-instance is not compiled in the server bundle\n  if (typeof window !== 'undefined') {\n    const existingPrefetchTask = instance.prefetchTask\n\n    if (!instance.isVisible) {\n      // Cancel any in-progress prefetch task. (If it already finished then this\n      // is a no-op.)\n      if (existingPrefetchTask !== null) {\n        cancelPrefetchTask(existingPrefetchTask)\n      }\n      // We don't need to reset the prefetchTask to null upon cancellation; an\n      // old task object can be rescheduled with reschedulePrefetchTask. This is a\n      // micro-optimization but also makes the code simpler (don't need to\n      // worry about whether an old task object is stale).\n      return\n    }\n\n    const { getCurrentAppRouterState } =\n      require('./app-router-instance') as typeof import('./app-router-instance')\n\n    const appRouterState = getCurrentAppRouterState()\n    if (appRouterState !== null) {\n      const treeAtTimeOfPrefetch = appRouterState.tree\n      if (existingPrefetchTask === null) {\n        // Initiate a prefetch task.\n        const nextUrl = appRouterState.nextUrl\n        const cacheKey = createCacheKey(instance.prefetchHref, nextUrl)\n        instance.prefetchTask = scheduleSegmentPrefetchTask(\n          cacheKey,\n          treeAtTimeOfPrefetch,\n          instance.fetchStrategy,\n          priority,\n          null\n        )\n      } else {\n        // We already have an old task object that we can reschedule. This is\n        // effectively the same as canceling the old task and creating a new one.\n        reschedulePrefetchTask(\n          existingPrefetchTask,\n          treeAtTimeOfPrefetch,\n          instance.fetchStrategy,\n          priority\n        )\n      }\n    }\n  }\n}\n\nexport function pingVisibleLinks(\n  nextUrl: string | null,\n  tree: FlightRouterState\n) {\n  // For each currently visible link, cancel the existing prefetch task (if it\n  // exists) and schedule a new one. This is effectively the same as if all the\n  // visible links left and then re-entered the viewport.\n  //\n  // This is called when the Next-Url or the base tree changes, since those\n  // may affect the result of a prefetch task. It's also called after a\n  // cache invalidation.\n  for (const instance of prefetchableAndVisible) {\n    const task = instance.prefetchTask\n    if (task !== null && !isPrefetchTaskDirty(task, nextUrl, tree)) {\n      // The cache has not been invalidated, and none of the inputs have\n      // changed. Bail out.\n      continue\n    }\n    // Something changed. Cancel the existing prefetch task and schedule a\n    // new one.\n    if (task !== null) {\n      cancelPrefetchTask(task)\n    }\n    const cacheKey = createCacheKey(instance.prefetchHref, nextUrl)\n    instance.prefetchTask = scheduleSegmentPrefetchTask(\n      cacheKey,\n      tree,\n      instance.fetchStrategy,\n      PrefetchPriority.Default,\n      null\n    )\n  }\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Checks if a given path starts with a given prefix. It ensures it matches\n * exactly without containing extra chars. e.g. prefix /docs should replace\n * for /docs, /docs/, /docs/a but not /docsss\n * @param path The path to check.\n * @param prefix The prefix to check against.\n */\nexport function pathHasPrefix(path: string, prefix: string) {\n  if (typeof path !== 'string') {\n    return false\n  }\n\n  const { pathname } = parsePath(path)\n  return pathname === prefix || pathname.startsWith(prefix + '/')\n}\n","import { pathHasPrefix } from '../shared/lib/router/utils/path-has-prefix'\n\nconst basePath = (process.env.__NEXT_ROUTER_BASEPATH as string) || ''\n\nexport function hasBasePath(path: string): boolean {\n  return pathHasPrefix(path, basePath)\n}\n","import { isAbsoluteUrl, getLocationOrigin } from '../../utils'\nimport { hasBasePath } from '../../../../client/has-base-path'\n\n/**\n * Detects whether a given url is routable by the Next.js router (browser only).\n */\nexport function isLocalURL(url: string): boolean {\n  // prevent a hydration mismatch on href for url with anchor refs\n  if (!isAbsoluteUrl(url)) return true\n  try {\n    // absolute urls can be local if they are on the same origin\n    const locationOrigin = getLocationOrigin()\n    const resolved = new URL(url, locationOrigin)\n    return resolved.origin === locationOrigin && hasBasePath(resolved.pathname)\n  } catch (_) {\n    return false\n  }\n}\n","let errorOnce = (_: string) => {}\nif (process.env.NODE_ENV !== 'production') {\n  const errors = new Set<string>()\n  errorOnce = (msg: string) => {\n    if (!errors.has(msg)) {\n      console.error(msg)\n    }\n    errors.add(msg)\n  }\n}\n\nexport { errorOnce }\n","'use client'\n\nimport React, { createContext, useContext, useOptimistic, useRef } from 'react'\nimport type { UrlObject } from 'url'\nimport { formatUrl } from '../../shared/lib/router/utils/format-url'\nimport { AppRouterContext } from '../../shared/lib/app-router-context.shared-runtime'\nimport { useMergedRef } from '../use-merged-ref'\nimport { isAbsoluteUrl } from '../../shared/lib/utils'\nimport { addBasePath } from '../add-base-path'\nimport { warnOnce } from '../../shared/lib/utils/warn-once'\nimport type { PENDING_LINK_STATUS } from '../components/links'\nimport {\n  IDLE_LINK_STATUS,\n  mountLinkInstance,\n  onNavigationIntent,\n  unmountLinkForCurrentNavigation,\n  unmountPrefetchableInstance,\n  type LinkInstance,\n} from '../components/links'\nimport { isLocalURL } from '../../shared/lib/router/utils/is-local-url'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n} from '../components/segment-cache/types'\nimport { errorOnce } from '../../shared/lib/utils/error-once'\n\ntype Url = string | UrlObject\ntype RequiredKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? never : K\n}[keyof T]\ntype OptionalKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? K : never\n}[keyof T]\n\ntype OnNavigateEventHandler = (event: { preventDefault: () => void }) => void\n\ntype InternalLinkProps = {\n  /**\n   * **Required**. The path or URL to navigate to. It can also be an object (similar to `URL`).\n   *\n   * @example\n   * ```tsx\n   * // Navigate to /dashboard:\n   * <Link href=\"/dashboard\">Dashboard</Link>\n   *\n   * // Navigate to /about?name=test:\n   * <Link href={{ pathname: '/about', query: { name: 'test' } }}>\n   *   About\n   * </Link>\n   * ```\n   *\n   * @remarks\n   * - For external URLs, use a fully qualified URL such as `https://...`.\n   * - In the App Router, dynamic routes must not include bracketed segments in `href`.\n   */\n  href: Url\n\n  /**\n   * @deprecated v10.0.0: `href` props pointing to a dynamic route are\n   * automatically resolved and no longer require the `as` prop.\n   */\n  as?: Url\n\n  /**\n   * Replace the current `history` state instead of adding a new URL into the stack.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/about\" replace>\n   *   About (replaces the history state)\n   * </Link>\n   * ```\n   */\n  replace?: boolean\n\n  /**\n   * Whether to override the default scroll behavior. If `true`, Next.js attempts to maintain\n   * the scroll position if the newly navigated page is still visible. If not, it scrolls to the top.\n   *\n   * If `false`, Next.js will not modify the scroll behavior at all.\n   *\n   * @defaultValue `true`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" scroll={false}>\n   *   No auto scroll\n   * </Link>\n   * ```\n   */\n  scroll?: boolean\n\n  /**\n   * Update the path of the current page without rerunning data fetching methods\n   * like `getStaticProps`, `getServerSideProps`, or `getInitialProps`.\n   *\n   * @remarks\n   * `shallow` only applies to the Pages Router. For the App Router, see the\n   * [following documentation](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#using-the-native-history-api).\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/blog\" shallow>\n   *   Shallow navigation\n   * </Link>\n   * ```\n   */\n  shallow?: boolean\n\n  /**\n   * Forces `Link` to pass its `href` to the child component. Useful if the child is a custom\n   * component that wraps an `<a>` tag, or if you're using certain styling libraries.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" passHref legacyBehavior>\n   *   <MyStyledAnchor>Dashboard</MyStyledAnchor>\n   * </Link>\n   * ```\n   */\n  passHref?: boolean\n\n  /**\n   * Prefetch the page in the background.\n   * Any `<Link />` that is in the viewport (initially or through scroll) will be prefetched.\n   * Prefetch can be disabled by passing `prefetch={false}`.\n   *\n   * @remarks\n   * Prefetching is only enabled in production.\n   *\n   * - In the **App Router**:\n   *   - `\"auto\"`, `null`, `undefined` (default): Prefetch behavior depends on static vs dynamic routes:\n   *     - Static routes: fully prefetched\n   *     - Dynamic routes: partial prefetch to the nearest segment with a `loading.js`\n   *   - `true`: Always prefetch the full route and data.\n   *   - `false`: Disable prefetching on both viewport and hover.\n   * - In the **Pages Router**:\n   *   - `true` (default): Prefetches the route and data in the background on viewport or hover.\n   *   - `false`: Prefetch only on hover, not on viewport.\n   *\n   * @defaultValue `true` (Pages Router) or `null` (App Router)\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" prefetch={false}>\n   *   Dashboard\n   * </Link>\n   * ```\n   */\n  prefetch?: boolean | 'auto' | null\n\n  /**\n   * (unstable) Switch to a full prefetch on hover. Effectively the same as\n   * updating the prefetch prop to `true` in a mouse event.\n   */\n  unstable_dynamicOnHover?: boolean\n\n  /**\n   * The active locale is automatically prepended in the Pages Router. `locale` allows for providing\n   * a different locale, or can be set to `false` to opt out of automatic locale behavior.\n   *\n   * @remarks\n   * Note: locale only applies in the Pages Router and is ignored in the App Router.\n   *\n   * @example\n   * ```tsx\n   * // Use the 'fr' locale:\n   * <Link href=\"/about\" locale=\"fr\">\n   *   About (French)\n   * </Link>\n   *\n   * // Disable locale prefix:\n   * <Link href=\"/about\" locale={false}>\n   *   About (no locale prefix)\n   * </Link>\n   * ```\n   */\n  locale?: string | false\n\n  /**\n   * Enable legacy link behavior.\n   *\n   * @deprecated This will be removed in a future version\n   * @defaultValue `false`\n   * @see https://github.com/vercel/next.js/commit/489e65ed98544e69b0afd7e0cfc3f9f6c2b803b7\n   */\n  legacyBehavior?: boolean\n\n  /**\n   * Optional event handler for when the mouse pointer is moved onto the `<Link>`.\n   */\n  onMouseEnter?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is touched.\n   */\n  onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is clicked.\n   */\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is navigated.\n   */\n  onNavigate?: OnNavigateEventHandler\n}\n\n// TODO-APP: Include the full set of Anchor props\n// adding this to the publicly exported type currently breaks existing apps\n\n// `RouteInferType` is a stub here to avoid breaking `typedRoutes` when the type\n// isn't generated yet. It will be replaced when type generation runs.\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport type LinkProps<RouteInferType = any> = InternalLinkProps\ntype LinkPropsRequired = RequiredKeys<LinkProps>\ntype LinkPropsOptional = OptionalKeys<Omit<InternalLinkProps, 'locale'>>\n\nfunction isModifiedEvent(event: React.MouseEvent): boolean {\n  const eventTarget = event.currentTarget as HTMLAnchorElement | SVGAElement\n  const target = eventTarget.getAttribute('target')\n  return (\n    (target && target !== '_self') ||\n    event.metaKey ||\n    event.ctrlKey ||\n    event.shiftKey ||\n    event.altKey || // triggers resource download\n    (event.nativeEvent && event.nativeEvent.which === 2)\n  )\n}\n\nfunction linkClicked(\n  e: React.MouseEvent,\n  href: string,\n  as: string,\n  linkInstanceRef: React.RefObject<LinkInstance | null>,\n  replace?: boolean,\n  scroll?: boolean,\n  onNavigate?: OnNavigateEventHandler\n): void {\n  if (typeof window !== 'undefined') {\n    const { nodeName } = e.currentTarget\n\n    // anchors inside an svg have a lowercase nodeName\n    const isAnchorNodeName = nodeName.toUpperCase() === 'A'\n    if (\n      (isAnchorNodeName && isModifiedEvent(e)) ||\n      e.currentTarget.hasAttribute('download')\n    ) {\n      // ignore click for browsers default behavior\n      return\n    }\n\n    if (!isLocalURL(href)) {\n      if (replace) {\n        // browser default behavior does not replace the history state\n        // so we need to do it manually\n        e.preventDefault()\n        location.replace(href)\n      }\n\n      // ignore click for browsers default behavior\n      return\n    }\n\n    e.preventDefault()\n\n    if (onNavigate) {\n      let isDefaultPrevented = false\n\n      onNavigate({\n        preventDefault: () => {\n          isDefaultPrevented = true\n        },\n      })\n\n      if (isDefaultPrevented) {\n        return\n      }\n    }\n\n    const { dispatchNavigateAction } =\n      require('../components/app-router-instance') as typeof import('../components/app-router-instance')\n\n    React.startTransition(() => {\n      dispatchNavigateAction(\n        as || href,\n        replace ? 'replace' : 'push',\n        scroll ?? true,\n        linkInstanceRef.current\n      )\n    })\n  }\n}\n\nfunction formatStringOrUrl(urlObjOrString: UrlObject | string): string {\n  if (typeof urlObjOrString === 'string') {\n    return urlObjOrString\n  }\n\n  return formatUrl(urlObjOrString)\n}\n\n/**\n * A React component that extends the HTML `<a>` element to provide\n * [prefetching](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)\n * and client-side navigation. This is the primary way to navigate between routes in Next.js.\n *\n * @remarks\n * - Prefetching is only enabled in production.\n *\n * @see https://nextjs.org/docs/app/api-reference/components/link\n */\nexport default function LinkComponent(\n  props: LinkProps & {\n    children: React.ReactNode\n    ref: React.Ref<HTMLAnchorElement>\n  }\n) {\n  const [linkStatus, setOptimisticLinkStatus] = useOptimistic(IDLE_LINK_STATUS)\n\n  let children: React.ReactNode\n\n  const linkInstanceRef = useRef<LinkInstance | null>(null)\n\n  const {\n    href: hrefProp,\n    as: asProp,\n    children: childrenProp,\n    prefetch: prefetchProp = null,\n    passHref,\n    replace,\n    shallow,\n    scroll,\n    onClick,\n    onMouseEnter: onMouseEnterProp,\n    onTouchStart: onTouchStartProp,\n    legacyBehavior = false,\n    onNavigate,\n    ref: forwardedRef,\n    unstable_dynamicOnHover,\n    ...restProps\n  } = props\n\n  children = childrenProp\n\n  if (\n    legacyBehavior &&\n    (typeof children === 'string' || typeof children === 'number')\n  ) {\n    children = <a>{children}</a>\n  }\n\n  const router = React.useContext(AppRouterContext)\n\n  const prefetchEnabled = prefetchProp !== false\n\n  const fetchStrategy =\n    prefetchProp !== false\n      ? getFetchStrategyFromPrefetchProp(prefetchProp)\n      : // TODO: it makes no sense to assign a fetchStrategy when prefetching is disabled.\n        FetchStrategy.PPR\n\n  if (process.env.NODE_ENV !== 'production') {\n    function createPropError(args: {\n      key: string\n      expected: string\n      actual: string\n    }) {\n      return new Error(\n        `Failed prop type: The prop \\`${args.key}\\` expects a ${args.expected} in \\`<Link>\\`, but got \\`${args.actual}\\` instead.` +\n          (typeof window !== 'undefined'\n            ? \"\\nOpen your browser's console to view the Component stack trace.\"\n            : '')\n      )\n    }\n\n    // TypeScript trick for type-guarding:\n    const requiredPropsGuard: Record<LinkPropsRequired, true> = {\n      href: true,\n    } as const\n    const requiredProps: LinkPropsRequired[] = Object.keys(\n      requiredPropsGuard\n    ) as LinkPropsRequired[]\n    requiredProps.forEach((key: LinkPropsRequired) => {\n      if (key === 'href') {\n        if (\n          props[key] == null ||\n          (typeof props[key] !== 'string' && typeof props[key] !== 'object')\n        ) {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: props[key] === null ? 'null' : typeof props[key],\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n\n    // TypeScript trick for type-guarding:\n    const optionalPropsGuard: Record<LinkPropsOptional, true> = {\n      as: true,\n      replace: true,\n      scroll: true,\n      shallow: true,\n      passHref: true,\n      prefetch: true,\n      unstable_dynamicOnHover: true,\n      onClick: true,\n      onMouseEnter: true,\n      onTouchStart: true,\n      legacyBehavior: true,\n      onNavigate: true,\n    } as const\n    const optionalProps: LinkPropsOptional[] = Object.keys(\n      optionalPropsGuard\n    ) as LinkPropsOptional[]\n    optionalProps.forEach((key: LinkPropsOptional) => {\n      const valType = typeof props[key]\n\n      if (key === 'as') {\n        if (props[key] && valType !== 'string' && valType !== 'object') {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'onClick' ||\n        key === 'onMouseEnter' ||\n        key === 'onTouchStart' ||\n        key === 'onNavigate'\n      ) {\n        if (props[key] && valType !== 'function') {\n          throw createPropError({\n            key,\n            expected: '`function`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'replace' ||\n        key === 'scroll' ||\n        key === 'shallow' ||\n        key === 'passHref' ||\n        key === 'legacyBehavior' ||\n        key === 'unstable_dynamicOnHover'\n      ) {\n        if (props[key] != null && valType !== 'boolean') {\n          throw createPropError({\n            key,\n            expected: '`boolean`',\n            actual: valType,\n          })\n        }\n      } else if (key === 'prefetch') {\n        if (\n          props[key] != null &&\n          valType !== 'boolean' &&\n          props[key] !== 'auto'\n        ) {\n          throw createPropError({\n            key,\n            expected: '`boolean | \"auto\"`',\n            actual: valType,\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (props.locale) {\n      warnOnce(\n        'The `locale` prop is not supported in `next/link` while using the `app` router. Read more about app router internalization: https://nextjs.org/docs/app/building-your-application/routing/internationalization'\n      )\n    }\n    if (!asProp) {\n      let href: string | undefined\n      if (typeof hrefProp === 'string') {\n        href = hrefProp\n      } else if (\n        typeof hrefProp === 'object' &&\n        typeof hrefProp.pathname === 'string'\n      ) {\n        href = hrefProp.pathname\n      }\n\n      if (href) {\n        const hasDynamicSegment = href\n          .split('/')\n          .some((segment) => segment.startsWith('[') && segment.endsWith(']'))\n\n        if (hasDynamicSegment) {\n          throw new Error(\n            `Dynamic href \\`${href}\\` found in <Link> while using the \\`/app\\` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href`\n          )\n        }\n      }\n    }\n  }\n\n  const { href, as } = React.useMemo(() => {\n    const resolvedHref = formatStringOrUrl(hrefProp)\n    return {\n      href: resolvedHref,\n      as: asProp ? formatStringOrUrl(asProp) : resolvedHref,\n    }\n  }, [hrefProp, asProp])\n\n  // This will return the first child, if multiple are provided it will throw an error\n  let child: any\n  if (legacyBehavior) {\n    if ((children as any)?.$$typeof === Symbol.for('react.lazy')) {\n      throw new Error(\n        `\\`<Link legacyBehavior>\\` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's \\`<a>\\` tag.`\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      if (onClick) {\n        console.warn(\n          `\"onClick\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link`\n        )\n      }\n      if (onMouseEnterProp) {\n        console.warn(\n          `\"onMouseEnter\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link`\n        )\n      }\n      try {\n        child = React.Children.only(children)\n      } catch (err) {\n        if (!children) {\n          throw new Error(\n            `No children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but one child is required https://nextjs.org/docs/messages/link-no-children`\n          )\n        }\n        throw new Error(\n          `Multiple children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` +\n            (typeof window !== 'undefined'\n              ? \" \\nOpen your browser's console to view the Component stack trace.\"\n              : '')\n        )\n      }\n    } else {\n      child = React.Children.only(children)\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if ((children as any)?.type === 'a') {\n        throw new Error(\n          'Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n        )\n      }\n    }\n  }\n\n  const childRef: any = legacyBehavior\n    ? child && typeof child === 'object' && child.ref\n    : forwardedRef\n\n  // Use a callback ref to attach an IntersectionObserver to the anchor tag on\n  // mount. In the future we will also use this to keep track of all the\n  // currently mounted <Link> instances, e.g. so we can re-prefetch them after\n  // a revalidation or refresh.\n  const observeLinkVisibilityOnMount = React.useCallback(\n    (element: HTMLAnchorElement | SVGAElement) => {\n      if (router !== null) {\n        linkInstanceRef.current = mountLinkInstance(\n          element,\n          href,\n          router,\n          fetchStrategy,\n          prefetchEnabled,\n          setOptimisticLinkStatus\n        )\n      }\n\n      return () => {\n        if (linkInstanceRef.current) {\n          unmountLinkForCurrentNavigation(linkInstanceRef.current)\n          linkInstanceRef.current = null\n        }\n        unmountPrefetchableInstance(element)\n      }\n    },\n    [prefetchEnabled, href, router, fetchStrategy, setOptimisticLinkStatus]\n  )\n\n  const mergedRef = useMergedRef(observeLinkVisibilityOnMount, childRef)\n\n  const childProps: {\n    onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n    onMouseEnter: React.MouseEventHandler<HTMLAnchorElement>\n    onClick: React.MouseEventHandler<HTMLAnchorElement>\n    href?: string\n    ref?: any\n  } = {\n    ref: mergedRef,\n    onClick(e) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!e) {\n          throw new Error(\n            `Component rendered inside next/link has to pass click event to \"onClick\" prop.`\n          )\n        }\n      }\n\n      if (!legacyBehavior && typeof onClick === 'function') {\n        onClick(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onClick === 'function'\n      ) {\n        child.props.onClick(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (e.defaultPrevented) {\n        return\n      }\n      linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate)\n    },\n    onMouseEnter(e) {\n      if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n        onMouseEnterProp(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onMouseEnter === 'function'\n      ) {\n        child.props.onMouseEnter(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (!prefetchEnabled || process.env.NODE_ENV === 'development') {\n        return\n      }\n\n      const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n      onNavigationIntent(\n        e.currentTarget as HTMLAnchorElement | SVGAElement,\n        upgradeToDynamicPrefetch\n      )\n    },\n    onTouchStart: process.env.__NEXT_LINK_NO_TOUCH_START\n      ? undefined\n      : function onTouchStart(e) {\n          if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n            onTouchStartProp(e)\n          }\n\n          if (\n            legacyBehavior &&\n            child.props &&\n            typeof child.props.onTouchStart === 'function'\n          ) {\n            child.props.onTouchStart(e)\n          }\n\n          if (!router) {\n            return\n          }\n          if (!prefetchEnabled) {\n            return\n          }\n\n          const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n          onNavigationIntent(\n            e.currentTarget as HTMLAnchorElement | SVGAElement,\n            upgradeToDynamicPrefetch\n          )\n        },\n  }\n\n  // If the url is absolute, we can bypass the logic to prepend the basePath.\n  if (isAbsoluteUrl(as)) {\n    childProps.href = as\n  } else if (\n    !legacyBehavior ||\n    passHref ||\n    (child.type === 'a' && !('href' in child.props))\n  ) {\n    childProps.href = addBasePath(as)\n  }\n\n  let link: React.ReactNode\n\n  if (legacyBehavior) {\n    if (process.env.NODE_ENV === 'development') {\n      errorOnce(\n        '`legacyBehavior` is deprecated and will be removed in a future ' +\n          'release. A codemod is available to upgrade your components:\\n\\n' +\n          'npx @next/codemod@latest new-link .\\n\\n' +\n          'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components'\n      )\n    }\n    link = React.cloneElement(child, childProps)\n  } else {\n    link = (\n      <a {...restProps} {...childProps}>\n        {children}\n      </a>\n    )\n  }\n\n  return (\n    <LinkStatusContext.Provider value={linkStatus}>\n      {link}\n    </LinkStatusContext.Provider>\n  )\n}\n\nconst LinkStatusContext = createContext<\n  typeof PENDING_LINK_STATUS | typeof IDLE_LINK_STATUS\n>(IDLE_LINK_STATUS)\n\nexport const useLinkStatus = () => {\n  return useContext(LinkStatusContext)\n}\n\nfunction getFetchStrategyFromPrefetchProp(\n  prefetchProp: Exclude<LinkProps['prefetch'], undefined | false>\n): PrefetchTaskFetchStrategy {\n  if (process.env.__NEXT_CACHE_COMPONENTS) {\n    if (prefetchProp === true) {\n      return FetchStrategy.Full\n    }\n\n    // `null` or `\"auto\"`: this is the default \"auto\" mode, where we will prefetch partially if the link is in the viewport.\n    // This will also include invalid prop values that don't match the types specified here.\n    // (although those should've been filtered out by prop validation in dev)\n    prefetchProp satisfies null | 'auto'\n    return FetchStrategy.PPR\n  } else {\n    return prefetchProp === null || prefetchProp === 'auto'\n      ? // We default to PPR, and we'll discover whether or not the route supports it with the initial prefetch.\n        FetchStrategy.PPR\n      : // In the old implementation without runtime prefetches, `prefetch={true}` forces all dynamic data to be prefetched.\n        // To preserve backwards-compatibility, anything other than `false`, `null`, or `\"auto\"` results in a full prefetch.\n        // (although invalid values should've been filtered out by prop validation in dev)\n        FetchStrategy.Full\n  }\n}\n","\"use client\";\n\nimport { motion, useScroll, useTransform } from \"framer-motion\";\nimport { useRef } from \"react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { ArrowUpRight } from \"lucide-react\";\n\nexport interface Project {\n    title: string;\n    director: string;\n    year: string;\n    link: string;\n    mediaSrc: string;\n    mediaType: \"image\" | \"video\";\n}\n\ninterface ProjectsProps {\n    projects: Project[];\n}\n\nconst ProjectCard = ({ project, index, total }: { project: Project; index: number; total: number }) => {\n    return (\n        <div\n            className=\"sticky top-0 w-full h-screen flex items-center justify-center overflow-hidden\"\n            style={{ zIndex: index + 1 }}\n        >\n            <div className=\"relative w-full h-full\">\n                {/* Media Background */}\n                <div className=\"absolute inset-0 z-0\">\n                    {project.mediaType === \"video\" ? (\n                        <video\n                            className=\"w-full h-full object-cover\"\n                            src={project.mediaSrc}\n                            autoPlay\n                            muted\n                            loop\n                            playsInline\n                        />\n                    ) : (\n                        <Image\n                            src={project.mediaSrc}\n                            alt={project.title}\n                            fill\n                            className=\"object-cover\"\n                            priority\n                        />\n                    )}\n                    {/* Dark Overlay */}\n                    <div className=\"absolute inset-0 bg-black/40 z-10\" />\n                </div>\n\n                {/* Content */}\n                <div className=\"relative z-20 w-full h-full flex flex-col justify-end p-6 md:px-12 md:py-28 gap-6\">\n\n                    <div className=\"\">\n                        <h2 className=\"text-white font-thunder font-bold text-[13vw] leading-[0.8] uppercase\">\n                            {project.title}\n                        </h2>\n                    </div>\n\n                    <div className=\"w-full h-px bg-white/30\" />\n                    <div className=\"flex justify-between items-center\">\n                        <div className=\"flex flex-col gap-1\">\n                            <span className=\"text-brand-blue font-bold tracking-widest\">DIRECCIN</span>\n                            <span className=\"text-2xl font-inter font-light text-white/60\">{project.director}</span>\n                        </div>\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"flex gap-4\">\n                                <span className=\"text-white/40\">EST. {project.year}</span>\n                            </div>\n                            <Link\n                                href={project.link}\n                                className=\"group flex items-center gap-2 text-white font-inter text-xs md:text-sm tracking-widest uppercase opacity-80 hover:opacity-100 transition-opacity\"\n                            >\n                                VER PROYECTO\n                                <div className=\"w-8 h-8 rounded-full border border-white/30 flex items-center justify-center group-hover:bg-white group-hover:text-black transition-colors\">\n                                    <ArrowUpRight size={14} />\n                                </div>\n                            </Link>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default function Projects({ projects }: ProjectsProps) {\n    return (\n        <section className=\"relative w-full bg-black\">\n            {projects.map((project, index) => (\n                <ProjectCard\n                    key={index}\n                    project={project}\n                    index={index}\n                    total={projects.length}\n                />\n            ))}\n        </section>\n    );\n}\n","/**\n * Check if a component has an accessibility prop\n *\n * @param {object} props\n * @returns {boolean} Whether the component has an accessibility prop\n */\nexport const hasA11yProp = (props: Record<string, any>) => {\n  for (const prop in props) {\n    if (prop.startsWith('aria-') || prop === 'role' || prop === 'title') {\n      return true;\n    }\n  }\n\n  return false;\n};\n","/**\n * Converts string to kebab case\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n","/**\n * Converts string to camel case\n *\n * @param {string} string\n * @returns {string} A camelized string\n */\nexport const toCamelCase = <T extends string>(string: T) =>\n  string.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2) =>\n    p2 ? p2.toUpperCase() : p1.toLowerCase(),\n  );\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","/**\n * Merges classes into a single string\n *\n * @param {array} classes\n * @returns {string} A string of classes\n */\nexport const mergeClasses = <ClassType = string | undefined | null>(...classes: ClassType[]) =>\n  classes\n    .filter((className, index, array) => {\n      return (\n        Boolean(className) &&\n        (className as string).trim() !== '' &&\n        array.indexOf(className) === index\n      );\n    })\n    .join(' ')\n    .trim();\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M7 7h10v10', key: '1tivn9' }],\n  ['path', { d: 'M7 17 17 7', key: '1vkiza' }],\n];\n\n/**\n * @component @name ArrowUpRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNyA3aDEwdjEwIiAvPgogIDxwYXRoIGQ9Ik03IDE3IDE3IDciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/arrow-up-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUpRight = createLucideIcon('arrow-up-right', __iconNode);\n\nexport default ArrowUpRight;\n","import { CamelToPascal } from '../utility-types';\nimport { toCamelCase } from './toCamelCase';\n\n/**\n * Converts string to pascal case\n *\n * @param {string} string\n * @returns {string} A pascalized string\n */\nexport const toPascalCase = <T extends string>(string: T): CamelToPascal<T> => {\n  const camelCase = toCamelCase(string);\n\n  return (camelCase.charAt(0).toUpperCase() + camelCase.slice(1)) as CamelToPascal<T>;\n};\n","import { createElement, forwardRef } from 'react';\nimport defaultAttributes from './defaultAttributes';\nimport { IconNode, LucideProps } from './types';\nimport { mergeClasses, hasA11yProp } from '@lucide/shared';\n\ninterface IconComponentProps extends LucideProps {\n  iconNode: IconNode;\n}\n\n/**\n * Lucide icon component\n *\n * @component Icon\n * @param {object} props\n * @param {string} props.color - The color of the icon\n * @param {number} props.size - The size of the icon\n * @param {number} props.strokeWidth - The stroke width of the icon\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\n * @param {string} props.className - The class name of the icon\n * @param {IconNode} props.children - The children of the icon\n * @param {IconNode} props.iconNode - The icon node of the icon\n *\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst Icon = forwardRef<SVGSVGElement, IconComponentProps>(\n  (\n    {\n      color = 'currentColor',\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = '',\n      children,\n      iconNode,\n      ...rest\n    },\n    ref,\n  ) =>\n    createElement(\n      'svg',\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? (Number(strokeWidth) * 24) / Number(size) : strokeWidth,\n        className: mergeClasses('lucide', className),\n        ...(!children && !hasA11yProp(rest) && { 'aria-hidden': 'true' }),\n        ...rest,\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]),\n      ],\n    ),\n);\n\nexport default Icon;\n","import { createElement, forwardRef } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from '@lucide/shared';\nimport { IconNode, LucideProps } from './types';\nimport Icon from './Icon';\n\n/**\n * Create a Lucide icon component\n * @param {string} iconName\n * @param {array} iconNode\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst createLucideIcon = (iconName: string, iconNode: IconNode) => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(({ className, ...props }, ref) =>\n    createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className,\n      ),\n      ...props,\n    }),\n  );\n\n  Component.displayName = toPascalCase(iconName);\n\n  return Component;\n};\n\nexport default createLucideIcon;\n","/*!\n * matter-js 0.20.0 by @liabru\n * http://brm.io/matter-js/\n * License MIT\n * \n * The MIT License (MIT)\n * \n * Copyright (c) Liam Brummitt and contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Matter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Matter\"] = factory();\n\telse\n\t\troot[\"Matter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 20);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Common` module contains utility functions that are common to all modules.\n*\n* @class Common\n*/\n\nvar Common = {};\n\nmodule.exports = Common;\n\n(function() {\n\n    Common._baseDelta = 1000 / 60;\n    Common._nextId = 0;\n    Common._seed = 0;\n    Common._nowStartTime = +(new Date());\n    Common._warnedOnce = {};\n    Common._decomp = null;\n    \n    /**\n     * Extends the object in the first argument using the object in the second argument.\n     * @method extend\n     * @param {} obj\n     * @param {boolean} deep\n     * @return {} obj extended\n     */\n    Common.extend = function(obj, deep) {\n        var argsStart,\n            args,\n            deepClone;\n\n        if (typeof deep === 'boolean') {\n            argsStart = 2;\n            deepClone = deep;\n        } else {\n            argsStart = 1;\n            deepClone = true;\n        }\n\n        for (var i = argsStart; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            if (source) {\n                for (var prop in source) {\n                    if (deepClone && source[prop] && source[prop].constructor === Object) {\n                        if (!obj[prop] || obj[prop].constructor === Object) {\n                            obj[prop] = obj[prop] || {};\n                            Common.extend(obj[prop], deepClone, source[prop]);\n                        } else {\n                            obj[prop] = source[prop];\n                        }\n                    } else {\n                        obj[prop] = source[prop];\n                    }\n                }\n            }\n        }\n        \n        return obj;\n    };\n\n    /**\n     * Creates a new clone of the object, if deep is true references will also be cloned.\n     * @method clone\n     * @param {} obj\n     * @param {bool} deep\n     * @return {} obj cloned\n     */\n    Common.clone = function(obj, deep) {\n        return Common.extend({}, deep, obj);\n    };\n\n    /**\n     * Returns the list of keys for the given object.\n     * @method keys\n     * @param {} obj\n     * @return {string[]} keys\n     */\n    Common.keys = function(obj) {\n        if (Object.keys)\n            return Object.keys(obj);\n\n        // avoid hasOwnProperty for performance\n        var keys = [];\n        for (var key in obj)\n            keys.push(key);\n        return keys;\n    };\n\n    /**\n     * Returns the list of values for the given object.\n     * @method values\n     * @param {} obj\n     * @return {array} Array of the objects property values\n     */\n    Common.values = function(obj) {\n        var values = [];\n        \n        if (Object.keys) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length; i++) {\n                values.push(obj[keys[i]]);\n            }\n            return values;\n        }\n        \n        // avoid hasOwnProperty for performance\n        for (var key in obj)\n            values.push(obj[key]);\n        return values;\n    };\n\n    /**\n     * Gets a value from `base` relative to the `path` string.\n     * @method get\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} The object at the given path\n     */\n    Common.get = function(obj, path, begin, end) {\n        path = path.split('.').slice(begin, end);\n\n        for (var i = 0; i < path.length; i += 1) {\n            obj = obj[path[i]];\n        }\n\n        return obj;\n    };\n\n    /**\n     * Sets a value on `base` relative to the given `path` string.\n     * @method set\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {} val The value to set\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} Pass through `val` for chaining\n     */\n    Common.set = function(obj, path, val, begin, end) {\n        var parts = path.split('.').slice(begin, end);\n        Common.get(obj, path, 0, -1)[parts[parts.length - 1]] = val;\n        return val;\n    };\n\n    /**\n     * Shuffles the given array in-place.\n     * The function uses a seeded random generator.\n     * @method shuffle\n     * @param {array} array\n     * @return {array} array shuffled randomly\n     */\n    Common.shuffle = function(array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Common.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    };\n\n    /**\n     * Randomly chooses a value from a list with equal probability.\n     * The function uses a seeded random generator.\n     * @method choose\n     * @param {array} choices\n     * @return {object} A random choice object from the array\n     */\n    Common.choose = function(choices) {\n        return choices[Math.floor(Common.random() * choices.length)];\n    };\n\n    /**\n     * Returns true if the object is a HTMLElement, otherwise false.\n     * @method isElement\n     * @param {object} obj\n     * @return {boolean} True if the object is a HTMLElement, otherwise false\n     */\n    Common.isElement = function(obj) {\n        if (typeof HTMLElement !== 'undefined') {\n            return obj instanceof HTMLElement;\n        }\n\n        return !!(obj && obj.nodeType && obj.nodeName);\n    };\n\n    /**\n     * Returns true if the object is an array.\n     * @method isArray\n     * @param {object} obj\n     * @return {boolean} True if the object is an array, otherwise false\n     */\n    Common.isArray = function(obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    /**\n     * Returns true if the object is a function.\n     * @method isFunction\n     * @param {object} obj\n     * @return {boolean} True if the object is a function, otherwise false\n     */\n    Common.isFunction = function(obj) {\n        return typeof obj === \"function\";\n    };\n\n    /**\n     * Returns true if the object is a plain object.\n     * @method isPlainObject\n     * @param {object} obj\n     * @return {boolean} True if the object is a plain object, otherwise false\n     */\n    Common.isPlainObject = function(obj) {\n        return typeof obj === 'object' && obj.constructor === Object;\n    };\n\n    /**\n     * Returns true if the object is a string.\n     * @method isString\n     * @param {object} obj\n     * @return {boolean} True if the object is a string, otherwise false\n     */\n    Common.isString = function(obj) {\n        return toString.call(obj) === '[object String]';\n    };\n    \n    /**\n     * Returns the given value clamped between a minimum and maximum value.\n     * @method clamp\n     * @param {number} value\n     * @param {number} min\n     * @param {number} max\n     * @return {number} The value clamped between min and max inclusive\n     */\n    Common.clamp = function(value, min, max) {\n        if (value < min)\n            return min;\n        if (value > max)\n            return max;\n        return value;\n    };\n    \n    /**\n     * Returns the sign of the given value.\n     * @method sign\n     * @param {number} value\n     * @return {number} -1 if negative, +1 if 0 or positive\n     */\n    Common.sign = function(value) {\n        return value < 0 ? -1 : 1;\n    };\n    \n    /**\n     * Returns the current timestamp since the time origin (e.g. from page load).\n     * The result is in milliseconds and will use high-resolution timing if available.\n     * @method now\n     * @return {number} the current timestamp in milliseconds\n     */\n    Common.now = function() {\n        if (typeof window !== 'undefined' && window.performance) {\n            if (window.performance.now) {\n                return window.performance.now();\n            } else if (window.performance.webkitNow) {\n                return window.performance.webkitNow();\n            }\n        }\n\n        if (Date.now) {\n            return Date.now();\n        }\n\n        return (new Date()) - Common._nowStartTime;\n    };\n    \n    /**\n     * Returns a random value between a minimum and a maximum value inclusive.\n     * The function uses a seeded random generator.\n     * @method random\n     * @param {number} min\n     * @param {number} max\n     * @return {number} A random number between min and max inclusive\n     */\n    Common.random = function(min, max) {\n        min = (typeof min !== \"undefined\") ? min : 0;\n        max = (typeof max !== \"undefined\") ? max : 1;\n        return min + _seededRandom() * (max - min);\n    };\n\n    var _seededRandom = function() {\n        // https://en.wikipedia.org/wiki/Linear_congruential_generator\n        Common._seed = (Common._seed * 9301 + 49297) % 233280;\n        return Common._seed / 233280;\n    };\n\n    /**\n     * Converts a CSS hex colour string into an integer.\n     * @method colorToNumber\n     * @param {string} colorString\n     * @return {number} An integer representing the CSS hex string\n     */\n    Common.colorToNumber = function(colorString) {\n        colorString = colorString.replace('#','');\n\n        if (colorString.length == 3) {\n            colorString = colorString.charAt(0) + colorString.charAt(0)\n                        + colorString.charAt(1) + colorString.charAt(1)\n                        + colorString.charAt(2) + colorString.charAt(2);\n        }\n\n        return parseInt(colorString, 16);\n    };\n\n    /**\n     * The console logging level to use, where each level includes all levels above and excludes the levels below.\n     * The default level is 'debug' which shows all console messages.  \n     *\n     * Possible level values are:\n     * - 0 = None\n     * - 1 = Debug\n     * - 2 = Info\n     * - 3 = Warn\n     * - 4 = Error\n     * @static\n     * @property logLevel\n     * @type {Number}\n     * @default 1\n     */\n    Common.logLevel = 1;\n\n    /**\n     * Shows a `console.log` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method log\n     * @param ...objs {} The objects to log.\n     */\n    Common.log = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.log.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.info` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method info\n     * @param ...objs {} The objects to log.\n     */\n    Common.info = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 2) {\n            console.info.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.warn` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method warn\n     * @param ...objs {} The objects to log.\n     */\n    Common.warn = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.warn.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Uses `Common.warn` to log the given message one time only.\n     * @method warnOnce\n     * @param ...objs {} The objects to log.\n     */\n    Common.warnOnce = function() {\n        var message = Array.prototype.slice.call(arguments).join(' ');\n\n        if (!Common._warnedOnce[message]) {\n            Common.warn(message);\n            Common._warnedOnce[message] = true;\n        }\n    };\n\n    /**\n     * Shows a deprecated console warning when the function on the given object is called.\n     * The target function will be replaced with a new function that first shows the warning\n     * and then calls the original function.\n     * @method deprecated\n     * @param {object} obj The object or module\n     * @param {string} name The property name of the function on obj\n     * @param {string} warning The one-time message to show if the function is called\n     */\n    Common.deprecated = function(obj, prop, warning) {\n        obj[prop] = Common.chain(function() {\n            Common.warnOnce(' deprecated ', warning);\n        }, obj[prop]);\n    };\n\n    /**\n     * Returns the next unique sequential ID.\n     * @method nextId\n     * @return {Number} Unique sequential ID\n     */\n    Common.nextId = function() {\n        return Common._nextId++;\n    };\n\n    /**\n     * A cross browser compatible indexOf implementation.\n     * @method indexOf\n     * @param {array} haystack\n     * @param {object} needle\n     * @return {number} The position of needle in haystack, otherwise -1.\n     */\n    Common.indexOf = function(haystack, needle) {\n        if (haystack.indexOf)\n            return haystack.indexOf(needle);\n\n        for (var i = 0; i < haystack.length; i++) {\n            if (haystack[i] === needle)\n                return i;\n        }\n\n        return -1;\n    };\n\n    /**\n     * A cross browser compatible array map implementation.\n     * @method map\n     * @param {array} list\n     * @param {function} func\n     * @return {array} Values from list transformed by func.\n     */\n    Common.map = function(list, func) {\n        if (list.map) {\n            return list.map(func);\n        }\n\n        var mapped = [];\n\n        for (var i = 0; i < list.length; i += 1) {\n            mapped.push(func(list[i]));\n        }\n\n        return mapped;\n    };\n\n    /**\n     * Takes a directed graph and returns the partially ordered set of vertices in topological order.\n     * Circular dependencies are allowed.\n     * @method topologicalSort\n     * @param {object} graph\n     * @return {array} Partially ordered set of vertices in topological order.\n     */\n    Common.topologicalSort = function(graph) {\n        // https://github.com/mgechev/javascript-algorithms\n        // Copyright (c) Minko Gechev (MIT license)\n        // Modifications: tidy formatting and naming\n        var result = [],\n            visited = [],\n            temp = [];\n\n        for (var node in graph) {\n            if (!visited[node] && !temp[node]) {\n                Common._topologicalSort(node, visited, temp, graph, result);\n            }\n        }\n\n        return result;\n    };\n\n    Common._topologicalSort = function(node, visited, temp, graph, result) {\n        var neighbors = graph[node] || [];\n        temp[node] = true;\n\n        for (var i = 0; i < neighbors.length; i += 1) {\n            var neighbor = neighbors[i];\n\n            if (temp[neighbor]) {\n                // skip circular dependencies\n                continue;\n            }\n\n            if (!visited[neighbor]) {\n                Common._topologicalSort(neighbor, visited, temp, graph, result);\n            }\n        }\n\n        temp[node] = false;\n        visited[node] = true;\n\n        result.push(node);\n    };\n\n    /**\n     * Takes _n_ functions as arguments and returns a new function that calls them in order.\n     * The arguments applied when calling the new function will also be applied to every function passed.\n     * The value of `this` refers to the last value returned in the chain that was not `undefined`.\n     * Therefore if a passed function does not return a value, the previously returned value is maintained.\n     * After all passed functions have been called the new function returns the last returned value (if any).\n     * If any of the passed functions are a chain, then the chain will be flattened.\n     * @method chain\n     * @param ...funcs {function} The functions to chain.\n     * @return {function} A new function that calls the passed functions in order.\n     */\n    Common.chain = function() {\n        var funcs = [];\n\n        for (var i = 0; i < arguments.length; i += 1) {\n            var func = arguments[i];\n\n            if (func._chained) {\n                // flatten already chained functions\n                funcs.push.apply(funcs, func._chained);\n            } else {\n                funcs.push(func);\n            }\n        }\n\n        var chain = function() {\n            // https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358\n            var lastResult,\n                args = new Array(arguments.length);\n\n            for (var i = 0, l = arguments.length; i < l; i++) {\n                args[i] = arguments[i];\n            }\n\n            for (i = 0; i < funcs.length; i += 1) {\n                var result = funcs[i].apply(lastResult, args);\n\n                if (typeof result !== 'undefined') {\n                    lastResult = result;\n                }\n            }\n\n            return lastResult;\n        };\n\n        chain._chained = funcs;\n\n        return chain;\n    };\n\n    /**\n     * Chains a function to excute before the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathBefore\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain before the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathBefore = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            func,\n            Common.get(base, path)\n        ));\n    };\n\n    /**\n     * Chains a function to excute after the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathAfter\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain after the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathAfter = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            Common.get(base, path),\n            func\n        ));\n    };\n\n    /**\n     * Provide the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module to enable\n     * concave vertex decomposition support when using `Bodies.fromVertices` e.g. `Common.setDecomp(require('poly-decomp'))`.\n     * @method setDecomp\n     * @param {} decomp The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module.\n     */\n    Common.setDecomp = function(decomp) {\n        Common._decomp = decomp;\n    };\n\n    /**\n     * Returns the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module provided through `Common.setDecomp`,\n     * otherwise returns the global `decomp` if set.\n     * @method getDecomp\n     * @return {} The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module if provided.\n     */\n    Common.getDecomp = function() {\n        // get user provided decomp if set\n        var decomp = Common._decomp;\n\n        try {\n            // otherwise from window global\n            if (!decomp && typeof window !== 'undefined') {\n                decomp = window.decomp;\n            }\n    \n            // otherwise from node global\n            if (!decomp && typeof global !== 'undefined') {\n                decomp = global.decomp;\n            }\n        } catch (e) {\n            // decomp not available\n            decomp = null;\n        }\n\n        return decomp;\n    };\n})();\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Bounds` module contains methods for creating and manipulating axis-aligned bounding boxes (AABB).\n*\n* @class Bounds\n*/\n\nvar Bounds = {};\n\nmodule.exports = Bounds;\n\n(function() {\n\n    /**\n     * Creates a new axis-aligned bounding box (AABB) for the given vertices.\n     * @method create\n     * @param {vertices} vertices\n     * @return {bounds} A new bounds object\n     */\n    Bounds.create = function(vertices) {\n        var bounds = { \n            min: { x: 0, y: 0 }, \n            max: { x: 0, y: 0 }\n        };\n\n        if (vertices)\n            Bounds.update(bounds, vertices);\n        \n        return bounds;\n    };\n\n    /**\n     * Updates bounds using the given vertices and extends the bounds given a velocity.\n     * @method update\n     * @param {bounds} bounds\n     * @param {vertices} vertices\n     * @param {vector} velocity\n     */\n    Bounds.update = function(bounds, vertices, velocity) {\n        bounds.min.x = Infinity;\n        bounds.max.x = -Infinity;\n        bounds.min.y = Infinity;\n        bounds.max.y = -Infinity;\n\n        for (var i = 0; i < vertices.length; i++) {\n            var vertex = vertices[i];\n            if (vertex.x > bounds.max.x) bounds.max.x = vertex.x;\n            if (vertex.x < bounds.min.x) bounds.min.x = vertex.x;\n            if (vertex.y > bounds.max.y) bounds.max.y = vertex.y;\n            if (vertex.y < bounds.min.y) bounds.min.y = vertex.y;\n        }\n        \n        if (velocity) {\n            if (velocity.x > 0) {\n                bounds.max.x += velocity.x;\n            } else {\n                bounds.min.x += velocity.x;\n            }\n            \n            if (velocity.y > 0) {\n                bounds.max.y += velocity.y;\n            } else {\n                bounds.min.y += velocity.y;\n            }\n        }\n    };\n\n    /**\n     * Returns true if the bounds contains the given point.\n     * @method contains\n     * @param {bounds} bounds\n     * @param {vector} point\n     * @return {boolean} True if the bounds contain the point, otherwise false\n     */\n    Bounds.contains = function(bounds, point) {\n        return point.x >= bounds.min.x && point.x <= bounds.max.x \n               && point.y >= bounds.min.y && point.y <= bounds.max.y;\n    };\n\n    /**\n     * Returns true if the two bounds intersect.\n     * @method overlaps\n     * @param {bounds} boundsA\n     * @param {bounds} boundsB\n     * @return {boolean} True if the bounds overlap, otherwise false\n     */\n    Bounds.overlaps = function(boundsA, boundsB) {\n        return (boundsA.min.x <= boundsB.max.x && boundsA.max.x >= boundsB.min.x\n                && boundsA.max.y >= boundsB.min.y && boundsA.min.y <= boundsB.max.y);\n    };\n\n    /**\n     * Translates the bounds by the given vector.\n     * @method translate\n     * @param {bounds} bounds\n     * @param {vector} vector\n     */\n    Bounds.translate = function(bounds, vector) {\n        bounds.min.x += vector.x;\n        bounds.max.x += vector.x;\n        bounds.min.y += vector.y;\n        bounds.max.y += vector.y;\n    };\n\n    /**\n     * Shifts the bounds to the given position.\n     * @method shift\n     * @param {bounds} bounds\n     * @param {vector} position\n     */\n    Bounds.shift = function(bounds, position) {\n        var deltaX = bounds.max.x - bounds.min.x,\n            deltaY = bounds.max.y - bounds.min.y;\n            \n        bounds.min.x = position.x;\n        bounds.max.x = position.x + deltaX;\n        bounds.min.y = position.y;\n        bounds.max.y = position.y + deltaY;\n    };\n    \n})();\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Vector` module contains methods for creating and manipulating vectors.\n* Vectors are the basis of all the geometry related operations in the engine.\n* A `Matter.Vector` object is of the form `{ x: 0, y: 0 }`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vector\n*/\n\n// TODO: consider params for reusing vector objects\n\nvar Vector = {};\n\nmodule.exports = Vector;\n\n(function() {\n\n    /**\n     * Creates a new vector.\n     * @method create\n     * @param {number} x\n     * @param {number} y\n     * @return {vector} A new vector\n     */\n    Vector.create = function(x, y) {\n        return { x: x || 0, y: y || 0 };\n    };\n\n    /**\n     * Returns a new vector with `x` and `y` copied from the given `vector`.\n     * @method clone\n     * @param {vector} vector\n     * @return {vector} A new cloned vector\n     */\n    Vector.clone = function(vector) {\n        return { x: vector.x, y: vector.y };\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector.\n     * @method magnitude\n     * @param {vector} vector\n     * @return {number} The magnitude of the vector\n     */\n    Vector.magnitude = function(vector) {\n        return Math.sqrt((vector.x * vector.x) + (vector.y * vector.y));\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector (therefore saving a `sqrt` operation).\n     * @method magnitudeSquared\n     * @param {vector} vector\n     * @return {number} The squared magnitude of the vector\n     */\n    Vector.magnitudeSquared = function(vector) {\n        return (vector.x * vector.x) + (vector.y * vector.y);\n    };\n\n    /**\n     * Rotates the vector about (0, 0) by specified angle.\n     * @method rotate\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} [output]\n     * @return {vector} The vector rotated about (0, 0)\n     */\n    Vector.rotate = function(vector, angle, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = vector.x * cos - vector.y * sin;\n        output.y = vector.x * sin + vector.y * cos;\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Rotates the vector about a specified point by specified angle.\n     * @method rotateAbout\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} point\n     * @param {vector} [output]\n     * @return {vector} A new vector rotated about the point\n     */\n    Vector.rotateAbout = function(vector, angle, point, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = point.x + ((vector.x - point.x) * cos - (vector.y - point.y) * sin);\n        output.y = point.y + ((vector.x - point.x) * sin + (vector.y - point.y) * cos);\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Normalises a vector (such that its magnitude is `1`).\n     * @method normalise\n     * @param {vector} vector\n     * @return {vector} A new vector normalised\n     */\n    Vector.normalise = function(vector) {\n        var magnitude = Vector.magnitude(vector);\n        if (magnitude === 0)\n            return { x: 0, y: 0 };\n        return { x: vector.x / magnitude, y: vector.y / magnitude };\n    };\n\n    /**\n     * Returns the dot-product of two vectors.\n     * @method dot\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The dot product of the two vectors\n     */\n    Vector.dot = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.x) + (vectorA.y * vectorB.y);\n    };\n\n    /**\n     * Returns the cross-product of two vectors.\n     * @method cross\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The cross product of the two vectors\n     */\n    Vector.cross = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.y) - (vectorA.y * vectorB.x);\n    };\n\n    /**\n     * Returns the cross-product of three vectors.\n     * @method cross3\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} vectorC\n     * @return {number} The cross product of the three vectors\n     */\n    Vector.cross3 = function(vectorA, vectorB, vectorC) {\n        return (vectorB.x - vectorA.x) * (vectorC.y - vectorA.y) - (vectorB.y - vectorA.y) * (vectorC.x - vectorA.x);\n    };\n\n    /**\n     * Adds the two vectors.\n     * @method add\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB added\n     */\n    Vector.add = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x + vectorB.x;\n        output.y = vectorA.y + vectorB.y;\n        return output;\n    };\n\n    /**\n     * Subtracts the two vectors.\n     * @method sub\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB subtracted\n     */\n    Vector.sub = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x - vectorB.x;\n        output.y = vectorA.y - vectorB.y;\n        return output;\n    };\n\n    /**\n     * Multiplies a vector and a scalar.\n     * @method mult\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector multiplied by scalar\n     */\n    Vector.mult = function(vector, scalar) {\n        return { x: vector.x * scalar, y: vector.y * scalar };\n    };\n\n    /**\n     * Divides a vector and a scalar.\n     * @method div\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector divided by scalar\n     */\n    Vector.div = function(vector, scalar) {\n        return { x: vector.x / scalar, y: vector.y / scalar };\n    };\n\n    /**\n     * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n     * @method perp\n     * @param {vector} vector\n     * @param {bool} [negate=false]\n     * @return {vector} The perpendicular vector\n     */\n    Vector.perp = function(vector, negate) {\n        negate = negate === true ? -1 : 1;\n        return { x: negate * -vector.y, y: negate * vector.x };\n    };\n\n    /**\n     * Negates both components of a vector such that it points in the opposite direction.\n     * @method neg\n     * @param {vector} vector\n     * @return {vector} The negated vector\n     */\n    Vector.neg = function(vector) {\n        return { x: -vector.x, y: -vector.y };\n    };\n\n    /**\n     * Returns the angle between the vector `vectorB - vectorA` and the x-axis in radians.\n     * @method angle\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The angle in radians\n     */\n    Vector.angle = function(vectorA, vectorB) {\n        return Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);\n    };\n\n    /**\n     * Temporary vector pool (not thread-safe).\n     * @property _temp\n     * @type {vector[]}\n     * @private\n     */\n    Vector._temp = [\n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create()\n    ];\n\n})();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Vertices` module contains methods for creating and manipulating sets of vertices.\n* A set of vertices is an array of `Matter.Vector` with additional indexing properties inserted by `Vertices.create`.\n* A `Matter.Body` maintains a set of vertices to represent the shape of the object (its convex hull).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vertices\n*/\n\nvar Vertices = {};\n\nmodule.exports = Vertices;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of `Matter.Body` compatible vertices.\n     * The `points` argument accepts an array of `Matter.Vector` points orientated around the origin `(0, 0)`, for example:\n     *\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\n     *\n     * The `Vertices.create` method returns a new array of vertices, which are similar to Matter.Vector objects,\n     * but with some additional references required for efficient collision detection routines.\n     *\n     * Vertices must be specified in clockwise order.\n     *\n     * Note that the `body` argument is not optional, a `Matter.Body` reference must be provided.\n     *\n     * @method create\n     * @param {vector[]} points\n     * @param {body} body\n     */\n    Vertices.create = function(points, body) {\n        var vertices = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i],\n                vertex = {\n                    x: point.x,\n                    y: point.y,\n                    index: i,\n                    body: body,\n                    isInternal: false\n                };\n\n            vertices.push(vertex);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Parses a string containing ordered x y pairs separated by spaces (and optionally commas), \n     * into a `Matter.Vertices` object for the given `Matter.Body`.\n     * For parsing SVG paths, see `Svg.pathToVertices`.\n     * @method fromPath\n     * @param {string} path\n     * @param {body} body\n     * @return {vertices} vertices\n     */\n    Vertices.fromPath = function(path, body) {\n        var pathPattern = /L?\\s*([-\\d.e]+)[\\s,]*([-\\d.e]+)*/ig,\n            points = [];\n\n        path.replace(pathPattern, function(match, x, y) {\n            points.push({ x: parseFloat(x), y: parseFloat(y) });\n        });\n\n        return Vertices.create(points, body);\n    };\n\n    /**\n     * Returns the centre (centroid) of the set of vertices.\n     * @method centre\n     * @param {vertices} vertices\n     * @return {vector} The centre point\n     */\n    Vertices.centre = function(vertices) {\n        var area = Vertices.area(vertices, true),\n            centre = { x: 0, y: 0 },\n            cross,\n            temp,\n            j;\n\n        for (var i = 0; i < vertices.length; i++) {\n            j = (i + 1) % vertices.length;\n            cross = Vector.cross(vertices[i], vertices[j]);\n            temp = Vector.mult(Vector.add(vertices[i], vertices[j]), cross);\n            centre = Vector.add(centre, temp);\n        }\n\n        return Vector.div(centre, 6 * area);\n    };\n\n    /**\n     * Returns the average (mean) of the set of vertices.\n     * @method mean\n     * @param {vertices} vertices\n     * @return {vector} The average point\n     */\n    Vertices.mean = function(vertices) {\n        var average = { x: 0, y: 0 };\n\n        for (var i = 0; i < vertices.length; i++) {\n            average.x += vertices[i].x;\n            average.y += vertices[i].y;\n        }\n\n        return Vector.div(average, vertices.length);\n    };\n\n    /**\n     * Returns the area of the set of vertices.\n     * @method area\n     * @param {vertices} vertices\n     * @param {bool} signed\n     * @return {number} The area\n     */\n    Vertices.area = function(vertices, signed) {\n        var area = 0,\n            j = vertices.length - 1;\n\n        for (var i = 0; i < vertices.length; i++) {\n            area += (vertices[j].x - vertices[i].x) * (vertices[j].y + vertices[i].y);\n            j = i;\n        }\n\n        if (signed)\n            return area / 2;\n\n        return Math.abs(area) / 2;\n    };\n\n    /**\n     * Returns the moment of inertia (second moment of area) of the set of vertices given the total mass.\n     * @method inertia\n     * @param {vertices} vertices\n     * @param {number} mass\n     * @return {number} The polygon's moment of inertia\n     */\n    Vertices.inertia = function(vertices, mass) {\n        var numerator = 0,\n            denominator = 0,\n            v = vertices,\n            cross,\n            j;\n\n        // find the polygon's moment of inertia, using second moment of area\n        // from equations at http://www.physicsforums.com/showthread.php?t=25293\n        for (var n = 0; n < v.length; n++) {\n            j = (n + 1) % v.length;\n            cross = Math.abs(Vector.cross(v[j], v[n]));\n            numerator += cross * (Vector.dot(v[j], v[j]) + Vector.dot(v[j], v[n]) + Vector.dot(v[n], v[n]));\n            denominator += cross;\n        }\n\n        return (mass / 6) * (numerator / denominator);\n    };\n\n    /**\n     * Translates the set of vertices in-place.\n     * @method translate\n     * @param {vertices} vertices\n     * @param {vector} vector\n     * @param {number} scalar\n     */\n    Vertices.translate = function(vertices, vector, scalar) {\n        scalar = typeof scalar !== 'undefined' ? scalar : 1;\n\n        var verticesLength = vertices.length,\n            translateX = vector.x * scalar,\n            translateY = vector.y * scalar,\n            i;\n        \n        for (i = 0; i < verticesLength; i++) {\n            vertices[i].x += translateX;\n            vertices[i].y += translateY;\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Rotates the set of vertices in-place.\n     * @method rotate\n     * @param {vertices} vertices\n     * @param {number} angle\n     * @param {vector} point\n     */\n    Vertices.rotate = function(vertices, angle, point) {\n        if (angle === 0)\n            return;\n\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            pointX = point.x,\n            pointY = point.y,\n            verticesLength = vertices.length,\n            vertex,\n            dx,\n            dy,\n            i;\n\n        for (i = 0; i < verticesLength; i++) {\n            vertex = vertices[i];\n            dx = vertex.x - pointX;\n            dy = vertex.y - pointY;\n            vertex.x = pointX + (dx * cos - dy * sin);\n            vertex.y = pointY + (dx * sin + dy * cos);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Returns `true` if the `point` is inside the set of `vertices`.\n     * @method contains\n     * @param {vertices} vertices\n     * @param {vector} point\n     * @return {boolean} True if the vertices contains point, otherwise false\n     */\n    Vertices.contains = function(vertices, point) {\n        var pointX = point.x,\n            pointY = point.y,\n            verticesLength = vertices.length,\n            vertex = vertices[verticesLength - 1],\n            nextVertex;\n\n        for (var i = 0; i < verticesLength; i++) {\n            nextVertex = vertices[i];\n\n            if ((pointX - vertex.x) * (nextVertex.y - vertex.y) \n                + (pointY - vertex.y) * (vertex.x - nextVertex.x) > 0) {\n                return false;\n            }\n\n            vertex = nextVertex;\n        }\n\n        return true;\n    };\n\n    /**\n     * Scales the vertices from a point (default is centre) in-place.\n     * @method scale\n     * @param {vertices} vertices\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     */\n    Vertices.scale = function(vertices, scaleX, scaleY, point) {\n        if (scaleX === 1 && scaleY === 1)\n            return vertices;\n\n        point = point || Vertices.centre(vertices);\n\n        var vertex,\n            delta;\n\n        for (var i = 0; i < vertices.length; i++) {\n            vertex = vertices[i];\n            delta = Vector.sub(vertex, point);\n            vertices[i].x = point.x + delta.x * scaleX;\n            vertices[i].y = point.y + delta.y * scaleY;\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Chamfers a set of vertices by giving them rounded corners, returns a new set of vertices.\n     * The radius parameter is a single number or an array to specify the radius for each vertex.\n     * @method chamfer\n     * @param {vertices} vertices\n     * @param {number[]} radius\n     * @param {number} quality\n     * @param {number} qualityMin\n     * @param {number} qualityMax\n     */\n    Vertices.chamfer = function(vertices, radius, quality, qualityMin, qualityMax) {\n        if (typeof radius === 'number') {\n            radius = [radius];\n        } else {\n            radius = radius || [8];\n        }\n\n        // quality defaults to -1, which is auto\n        quality = (typeof quality !== 'undefined') ? quality : -1;\n        qualityMin = qualityMin || 2;\n        qualityMax = qualityMax || 14;\n\n        var newVertices = [];\n\n        for (var i = 0; i < vertices.length; i++) {\n            var prevVertex = vertices[i - 1 >= 0 ? i - 1 : vertices.length - 1],\n                vertex = vertices[i],\n                nextVertex = vertices[(i + 1) % vertices.length],\n                currentRadius = radius[i < radius.length ? i : radius.length - 1];\n\n            if (currentRadius === 0) {\n                newVertices.push(vertex);\n                continue;\n            }\n\n            var prevNormal = Vector.normalise({ \n                x: vertex.y - prevVertex.y, \n                y: prevVertex.x - vertex.x\n            });\n\n            var nextNormal = Vector.normalise({ \n                x: nextVertex.y - vertex.y, \n                y: vertex.x - nextVertex.x\n            });\n\n            var diagonalRadius = Math.sqrt(2 * Math.pow(currentRadius, 2)),\n                radiusVector = Vector.mult(Common.clone(prevNormal), currentRadius),\n                midNormal = Vector.normalise(Vector.mult(Vector.add(prevNormal, nextNormal), 0.5)),\n                scaledVertex = Vector.sub(vertex, Vector.mult(midNormal, diagonalRadius));\n\n            var precision = quality;\n\n            if (quality === -1) {\n                // automatically decide precision\n                precision = Math.pow(currentRadius, 0.32) * 1.75;\n            }\n\n            precision = Common.clamp(precision, qualityMin, qualityMax);\n\n            // use an even value for precision, more likely to reduce axes by using symmetry\n            if (precision % 2 === 1)\n                precision += 1;\n\n            var alpha = Math.acos(Vector.dot(prevNormal, nextNormal)),\n                theta = alpha / precision;\n\n            for (var j = 0; j < precision; j++) {\n                newVertices.push(Vector.add(Vector.rotate(radiusVector, theta * j), scaledVertex));\n            }\n        }\n\n        return newVertices;\n    };\n\n    /**\n     * Sorts the input vertices into clockwise order in place.\n     * @method clockwiseSort\n     * @param {vertices} vertices\n     * @return {vertices} vertices\n     */\n    Vertices.clockwiseSort = function(vertices) {\n        var centre = Vertices.mean(vertices);\n\n        vertices.sort(function(vertexA, vertexB) {\n            return Vector.angle(centre, vertexA) - Vector.angle(centre, vertexB);\n        });\n\n        return vertices;\n    };\n\n    /**\n     * Returns true if the vertices form a convex shape (vertices must be in clockwise order).\n     * @method isConvex\n     * @param {vertices} vertices\n     * @return {bool} `true` if the `vertices` are convex, `false` if not (or `null` if not computable).\n     */\n    Vertices.isConvex = function(vertices) {\n        // http://paulbourke.net/geometry/polygonmesh/\n        // Copyright (c) Paul Bourke (use permitted)\n\n        var flag = 0,\n            n = vertices.length,\n            i,\n            j,\n            k,\n            z;\n\n        if (n < 3)\n            return null;\n\n        for (i = 0; i < n; i++) {\n            j = (i + 1) % n;\n            k = (i + 2) % n;\n            z = (vertices[j].x - vertices[i].x) * (vertices[k].y - vertices[j].y);\n            z -= (vertices[j].y - vertices[i].y) * (vertices[k].x - vertices[j].x);\n\n            if (z < 0) {\n                flag |= 1;\n            } else if (z > 0) {\n                flag |= 2;\n            }\n\n            if (flag === 3) {\n                return false;\n            }\n        }\n\n        if (flag !== 0){\n            return true;\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * Returns the convex hull of the input vertices as a new array of points.\n     * @method hull\n     * @param {vertices} vertices\n     * @return [vertex] vertices\n     */\n    Vertices.hull = function(vertices) {\n        // http://geomalgorithms.com/a10-_hull-1.html\n\n        var upper = [],\n            lower = [], \n            vertex,\n            i;\n\n        // sort vertices on x-axis (y-axis for ties)\n        vertices = vertices.slice(0);\n        vertices.sort(function(vertexA, vertexB) {\n            var dx = vertexA.x - vertexB.x;\n            return dx !== 0 ? dx : vertexA.y - vertexB.y;\n        });\n\n        // build lower hull\n        for (i = 0; i < vertices.length; i += 1) {\n            vertex = vertices[i];\n\n            while (lower.length >= 2 \n                   && Vector.cross3(lower[lower.length - 2], lower[lower.length - 1], vertex) <= 0) {\n                lower.pop();\n            }\n\n            lower.push(vertex);\n        }\n\n        // build upper hull\n        for (i = vertices.length - 1; i >= 0; i -= 1) {\n            vertex = vertices[i];\n\n            while (upper.length >= 2 \n                   && Vector.cross3(upper[upper.length - 2], upper[upper.length - 1], vertex) <= 0) {\n                upper.pop();\n            }\n\n            upper.push(vertex);\n        }\n\n        // concatenation of the lower and upper hulls gives the convex hull\n        // omit last points because they are repeated at the beginning of the other list\n        upper.pop();\n        lower.pop();\n\n        return upper.concat(lower);\n    };\n\n})();\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Body` module contains methods for creating and manipulating rigid bodies.\n* For creating bodies with common configurations such as rectangles, circles and other polygons see the module `Matter.Bodies`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n\n* @class Body\n*/\n\nvar Body = {};\n\nmodule.exports = Body;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(11);\n\n(function() {\n\n    Body._timeCorrection = true;\n    Body._inertiaScale = 4;\n    Body._nextCollidingGroupId = 1;\n    Body._nextNonCollidingGroupId = -1;\n    Body._nextCategory = 0x0001;\n    Body._baseDelta = 1000 / 60;\n\n    /**\n     * Creates a new rigid body model. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * Vertices must be specified in clockwise order.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {body} body\n     */\n    Body.create = function(options) {\n        var defaults = {\n            id: Common.nextId(),\n            type: 'body',\n            label: 'Body',\n            parts: [],\n            plugin: {},\n            angle: 0,\n            vertices: Vertices.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),\n            position: { x: 0, y: 0 },\n            force: { x: 0, y: 0 },\n            torque: 0,\n            positionImpulse: { x: 0, y: 0 },\n            constraintImpulse: { x: 0, y: 0, angle: 0 },\n            totalContacts: 0,\n            speed: 0,\n            angularSpeed: 0,\n            velocity: { x: 0, y: 0 },\n            angularVelocity: 0,\n            isSensor: false,\n            isStatic: false,\n            isSleeping: false,\n            motion: 0,\n            sleepThreshold: 60,\n            density: 0.001,\n            restitution: 0,\n            friction: 0.1,\n            frictionStatic: 0.5,\n            frictionAir: 0.01,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            },\n            slop: 0.05,\n            timeScale: 1,\n            render: {\n                visible: true,\n                opacity: 1,\n                strokeStyle: null,\n                fillStyle: null,\n                lineWidth: null,\n                sprite: {\n                    xScale: 1,\n                    yScale: 1,\n                    xOffset: 0,\n                    yOffset: 0\n                }\n            },\n            events: null,\n            bounds: null,\n            chamfer: null,\n            circleRadius: 0,\n            positionPrev: null,\n            anglePrev: 0,\n            parent: null,\n            axes: null,\n            area: 0,\n            mass: 0,\n            inertia: 0,\n            deltaTime: 1000 / 60,\n            _original: null\n        };\n\n        var body = Common.extend(defaults, options);\n\n        _initProperties(body, options);\n\n        return body;\n    };\n\n    /**\n     * Returns the next unique group index for which bodies will collide.\n     * If `isNonColliding` is `true`, returns the next unique group index for which bodies will _not_ collide.\n     * See `body.collisionFilter` for more information.\n     * @method nextGroup\n     * @param {bool} [isNonColliding=false]\n     * @return {Number} Unique group index\n     */\n    Body.nextGroup = function(isNonColliding) {\n        if (isNonColliding)\n            return Body._nextNonCollidingGroupId--;\n\n        return Body._nextCollidingGroupId++;\n    };\n\n    /**\n     * Returns the next unique category bitfield (starting after the initial default category `0x0001`).\n     * There are 32 available. See `body.collisionFilter` for more information.\n     * @method nextCategory\n     * @return {Number} Unique category bitfield\n     */\n    Body.nextCategory = function() {\n        Body._nextCategory = Body._nextCategory << 1;\n        return Body._nextCategory;\n    };\n\n    /**\n     * Initialises body properties.\n     * @method _initProperties\n     * @private\n     * @param {body} body\n     * @param {} [options]\n     */\n    var _initProperties = function(body, options) {\n        options = options || {};\n\n        // init required properties (order is important)\n        Body.set(body, {\n            bounds: body.bounds || Bounds.create(body.vertices),\n            positionPrev: body.positionPrev || Vector.clone(body.position),\n            anglePrev: body.anglePrev || body.angle,\n            vertices: body.vertices,\n            parts: body.parts || [body],\n            isStatic: body.isStatic,\n            isSleeping: body.isSleeping,\n            parent: body.parent || body\n        });\n\n        Vertices.rotate(body.vertices, body.angle, body.position);\n        Axes.rotate(body.axes, body.angle);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n\n        // allow options to override the automatically calculated properties\n        Body.set(body, {\n            axes: options.axes || body.axes,\n            area: options.area || body.area,\n            mass: options.mass || body.mass,\n            inertia: options.inertia || body.inertia\n        });\n\n        // render properties\n        var defaultFillStyle = (body.isStatic ? '#14151f' : Common.choose(['#f19648', '#f5d259', '#f55a3c', '#063e7b', '#ececd1'])),\n            defaultStrokeStyle = body.isStatic ? '#555' : '#ccc',\n            defaultLineWidth = body.isStatic && body.render.fillStyle === null ? 1 : 0;\n        body.render.fillStyle = body.render.fillStyle || defaultFillStyle;\n        body.render.strokeStyle = body.render.strokeStyle || defaultStrokeStyle;\n        body.render.lineWidth = body.render.lineWidth || defaultLineWidth;\n        body.render.sprite.xOffset += -(body.bounds.min.x - body.position.x) / (body.bounds.max.x - body.bounds.min.x);\n        body.render.sprite.yOffset += -(body.bounds.min.y - body.position.y) / (body.bounds.max.y - body.bounds.min.y);\n    };\n\n    /**\n     * Given a property and a value (or map of), sets the property(s) on the body, using the appropriate setter functions if they exist.\n     * Prefer to use the actual setter functions in performance critical situations.\n     * @method set\n     * @param {body} body\n     * @param {} settings A property name (or map of properties and values) to set on the body.\n     * @param {} value The value to set if `settings` is a single property name.\n     */\n    Body.set = function(body, settings, value) {\n        var property;\n\n        if (typeof settings === 'string') {\n            property = settings;\n            settings = {};\n            settings[property] = value;\n        }\n\n        for (property in settings) {\n            if (!Object.prototype.hasOwnProperty.call(settings, property))\n                continue;\n\n            value = settings[property];\n            switch (property) {\n\n            case 'isStatic':\n                Body.setStatic(body, value);\n                break;\n            case 'isSleeping':\n                Sleeping.set(body, value);\n                break;\n            case 'mass':\n                Body.setMass(body, value);\n                break;\n            case 'density':\n                Body.setDensity(body, value);\n                break;\n            case 'inertia':\n                Body.setInertia(body, value);\n                break;\n            case 'vertices':\n                Body.setVertices(body, value);\n                break;\n            case 'position':\n                Body.setPosition(body, value);\n                break;\n            case 'angle':\n                Body.setAngle(body, value);\n                break;\n            case 'velocity':\n                Body.setVelocity(body, value);\n                break;\n            case 'angularVelocity':\n                Body.setAngularVelocity(body, value);\n                break;\n            case 'speed':\n                Body.setSpeed(body, value);\n                break;\n            case 'angularSpeed':\n                Body.setAngularSpeed(body, value);\n                break;\n            case 'parts':\n                Body.setParts(body, value);\n                break;\n            case 'centre':\n                Body.setCentre(body, value);\n                break;\n            default:\n                body[property] = value;\n\n            }\n        }\n    };\n\n    /**\n     * Sets the body as static, including isStatic flag and setting mass and inertia to Infinity.\n     * @method setStatic\n     * @param {body} body\n     * @param {bool} isStatic\n     */\n    Body.setStatic = function(body, isStatic) {\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            if (isStatic) {\n                if (!part.isStatic) {\n                    part._original = {\n                        restitution: part.restitution,\n                        friction: part.friction,\n                        mass: part.mass,\n                        inertia: part.inertia,\n                        density: part.density,\n                        inverseMass: part.inverseMass,\n                        inverseInertia: part.inverseInertia\n                    };\n                }\n\n                part.restitution = 0;\n                part.friction = 1;\n                part.mass = part.inertia = part.density = Infinity;\n                part.inverseMass = part.inverseInertia = 0;\n\n                part.positionPrev.x = part.position.x;\n                part.positionPrev.y = part.position.y;\n                part.anglePrev = part.angle;\n                part.angularVelocity = 0;\n                part.speed = 0;\n                part.angularSpeed = 0;\n                part.motion = 0;\n            } else if (part._original) {\n                part.restitution = part._original.restitution;\n                part.friction = part._original.friction;\n                part.mass = part._original.mass;\n                part.inertia = part._original.inertia;\n                part.density = part._original.density;\n                part.inverseMass = part._original.inverseMass;\n                part.inverseInertia = part._original.inverseInertia;\n\n                part._original = null;\n            }\n\n            part.isStatic = isStatic;\n        }\n    };\n\n    /**\n     * Sets the mass of the body. Inverse mass, density and inertia are automatically updated to reflect the change.\n     * @method setMass\n     * @param {body} body\n     * @param {number} mass\n     */\n    Body.setMass = function(body, mass) {\n        var moment = body.inertia / (body.mass / 6);\n        body.inertia = moment * (mass / 6);\n        body.inverseInertia = 1 / body.inertia;\n\n        body.mass = mass;\n        body.inverseMass = 1 / body.mass;\n        body.density = body.mass / body.area;\n    };\n\n    /**\n     * Sets the density of the body. Mass and inertia are automatically updated to reflect the change.\n     * @method setDensity\n     * @param {body} body\n     * @param {number} density\n     */\n    Body.setDensity = function(body, density) {\n        Body.setMass(body, density * body.area);\n        body.density = density;\n    };\n\n    /**\n     * Sets the moment of inertia of the body. This is the second moment of area in two dimensions.\n     * Inverse inertia is automatically updated to reflect the change. Mass is not changed.\n     * @method setInertia\n     * @param {body} body\n     * @param {number} inertia\n     */\n    Body.setInertia = function(body, inertia) {\n        body.inertia = inertia;\n        body.inverseInertia = 1 / body.inertia;\n    };\n\n    /**\n     * Sets the body's vertices and updates body properties accordingly, including inertia, area and mass (with respect to `body.density`).\n     * Vertices will be automatically transformed to be orientated around their centre of mass as the origin.\n     * They are then automatically translated to world space based on `body.position`.\n     *\n     * The `vertices` argument should be passed as an array of `Matter.Vector` points (or a `Matter.Vertices` array).\n     * Vertices must form a convex hull. Concave vertices must be decomposed into convex parts.\n     * \n     * @method setVertices\n     * @param {body} body\n     * @param {vector[]} vertices\n     */\n    Body.setVertices = function(body, vertices) {\n        // change vertices\n        if (vertices[0].body === body) {\n            body.vertices = vertices;\n        } else {\n            body.vertices = Vertices.create(vertices, body);\n        }\n\n        // update properties\n        body.axes = Axes.fromVertices(body.vertices);\n        body.area = Vertices.area(body.vertices);\n        Body.setMass(body, body.density * body.area);\n\n        // orient vertices around the centre of mass at origin (0, 0)\n        var centre = Vertices.centre(body.vertices);\n        Vertices.translate(body.vertices, centre, -1);\n\n        // update inertia while vertices are at origin (0, 0)\n        Body.setInertia(body, Body._inertiaScale * Vertices.inertia(body.vertices, body.mass));\n\n        // update geometry\n        Vertices.translate(body.vertices, body.position);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n    };\n\n    /**\n     * Sets the parts of the `body`. \n     * \n     * See `body.parts` for details and requirements on how parts are used.\n     * \n     * See Bodies.fromVertices for a related utility.\n     * \n     * This function updates `body` mass, inertia and centroid based on the parts geometry.  \n     * Sets each `part.parent` to be this `body`.  \n     * \n     * The convex hull is computed and set on this `body` (unless `autoHull` is `false`).  \n     * Automatically ensures that the first part in `body.parts` is the `body`.\n     * @method setParts\n     * @param {body} body\n     * @param {body[]} parts\n     * @param {bool} [autoHull=true]\n     */\n    Body.setParts = function(body, parts, autoHull) {\n        var i;\n\n        // add all the parts, ensuring that the first part is always the parent body\n        parts = parts.slice(0);\n        body.parts.length = 0;\n        body.parts.push(body);\n        body.parent = body;\n\n        for (i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (part !== body) {\n                part.parent = body;\n                body.parts.push(part);\n            }\n        }\n\n        if (body.parts.length === 1)\n            return;\n\n        autoHull = typeof autoHull !== 'undefined' ? autoHull : true;\n\n        // find the convex hull of all parts to set on the parent body\n        if (autoHull) {\n            var vertices = [];\n            for (i = 0; i < parts.length; i++) {\n                vertices = vertices.concat(parts[i].vertices);\n            }\n\n            Vertices.clockwiseSort(vertices);\n\n            var hull = Vertices.hull(vertices),\n                hullCentre = Vertices.centre(hull);\n\n            Body.setVertices(body, hull);\n            Vertices.translate(body.vertices, hullCentre);\n        }\n\n        // sum the properties of all compound parts of the parent body\n        var total = Body._totalProperties(body);\n\n        body.area = total.area;\n        body.parent = body;\n        body.position.x = total.centre.x;\n        body.position.y = total.centre.y;\n        body.positionPrev.x = total.centre.x;\n        body.positionPrev.y = total.centre.y;\n\n        Body.setMass(body, total.mass);\n        Body.setInertia(body, total.inertia);\n        Body.setPosition(body, total.centre);\n    };\n\n    /**\n     * Set the centre of mass of the body. \n     * The `centre` is a vector in world-space unless `relative` is set, in which case it is a translation.\n     * The centre of mass is the point the body rotates about and can be used to simulate non-uniform density.\n     * This is equal to moving `body.position` but not the `body.vertices`.\n     * Invalid if the `centre` falls outside the body's convex hull.\n     * @method setCentre\n     * @param {body} body\n     * @param {vector} centre\n     * @param {bool} relative\n     */\n    Body.setCentre = function(body, centre, relative) {\n        if (!relative) {\n            body.positionPrev.x = centre.x - (body.position.x - body.positionPrev.x);\n            body.positionPrev.y = centre.y - (body.position.y - body.positionPrev.y);\n            body.position.x = centre.x;\n            body.position.y = centre.y;\n        } else {\n            body.positionPrev.x += centre.x;\n            body.positionPrev.y += centre.y;\n            body.position.x += centre.x;\n            body.position.y += centre.y;\n        }\n    };\n\n    /**\n     * Sets the position of the body. By default velocity is unchanged.\n     * If `updateVelocity` is `true` then velocity is inferred from the change in position.\n     * @method setPosition\n     * @param {body} body\n     * @param {vector} position\n     * @param {boolean} [updateVelocity=false]\n     */\n    Body.setPosition = function(body, position, updateVelocity) {\n        var delta = Vector.sub(position, body.position);\n\n        if (updateVelocity) {\n            body.positionPrev.x = body.position.x;\n            body.positionPrev.y = body.position.y;\n            body.velocity.x = delta.x;\n            body.velocity.y = delta.y;\n            body.speed = Vector.magnitude(delta);\n        } else {\n            body.positionPrev.x += delta.x;\n            body.positionPrev.y += delta.y;\n        }\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.position.x += delta.x;\n            part.position.y += delta.y;\n            Vertices.translate(part.vertices, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Sets the angle of the body. By default angular velocity is unchanged.\n     * If `updateVelocity` is `true` then angular velocity is inferred from the change in angle.\n     * @method setAngle\n     * @param {body} body\n     * @param {number} angle\n     * @param {boolean} [updateVelocity=false]\n     */\n    Body.setAngle = function(body, angle, updateVelocity) {\n        var delta = angle - body.angle;\n        \n        if (updateVelocity) {\n            body.anglePrev = body.angle;\n            body.angularVelocity = delta;\n            body.angularSpeed = Math.abs(delta);\n        } else {\n            body.anglePrev += delta;\n        }\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.angle += delta;\n            Vertices.rotate(part.vertices, delta, body.position);\n            Axes.rotate(part.axes, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n            if (i > 0) {\n                Vector.rotateAbout(part.position, delta, body.position, part.position);\n            }\n        }\n    };\n\n    /**\n     * Sets the current linear velocity of the body.  \n     * Affects body speed.\n     * @method setVelocity\n     * @param {body} body\n     * @param {vector} velocity\n     */\n    Body.setVelocity = function(body, velocity) {\n        var timeScale = body.deltaTime / Body._baseDelta;\n        body.positionPrev.x = body.position.x - velocity.x * timeScale;\n        body.positionPrev.y = body.position.y - velocity.y * timeScale;\n        body.velocity.x = (body.position.x - body.positionPrev.x) / timeScale;\n        body.velocity.y = (body.position.y - body.positionPrev.y) / timeScale;\n        body.speed = Vector.magnitude(body.velocity);\n    };\n\n    /**\n     * Gets the current linear velocity of the body.\n     * @method getVelocity\n     * @param {body} body\n     * @return {vector} velocity\n     */\n    Body.getVelocity = function(body) {\n        var timeScale = Body._baseDelta / body.deltaTime;\n\n        return {\n            x: (body.position.x - body.positionPrev.x) * timeScale,\n            y: (body.position.y - body.positionPrev.y) * timeScale\n        };\n    };\n\n    /**\n     * Gets the current linear speed of the body.  \n     * Equivalent to the magnitude of its velocity.\n     * @method getSpeed\n     * @param {body} body\n     * @return {number} speed\n     */\n    Body.getSpeed = function(body) {\n        return Vector.magnitude(Body.getVelocity(body));\n    };\n\n    /**\n     * Sets the current linear speed of the body.  \n     * Direction is maintained. Affects body velocity.\n     * @method setSpeed\n     * @param {body} body\n     * @param {number} speed\n     */\n    Body.setSpeed = function(body, speed) {\n        Body.setVelocity(body, Vector.mult(Vector.normalise(Body.getVelocity(body)), speed));\n    };\n\n    /**\n     * Sets the current rotational velocity of the body.  \n     * Affects body angular speed.\n     * @method setAngularVelocity\n     * @param {body} body\n     * @param {number} velocity\n     */\n    Body.setAngularVelocity = function(body, velocity) {\n        var timeScale = body.deltaTime / Body._baseDelta;\n        body.anglePrev = body.angle - velocity * timeScale;\n        body.angularVelocity = (body.angle - body.anglePrev) / timeScale;\n        body.angularSpeed = Math.abs(body.angularVelocity);\n    };\n\n    /**\n     * Gets the current rotational velocity of the body.\n     * @method getAngularVelocity\n     * @param {body} body\n     * @return {number} angular velocity\n     */\n    Body.getAngularVelocity = function(body) {\n        return (body.angle - body.anglePrev) * Body._baseDelta / body.deltaTime;\n    };\n\n    /**\n     * Gets the current rotational speed of the body.  \n     * Equivalent to the magnitude of its angular velocity.\n     * @method getAngularSpeed\n     * @param {body} body\n     * @return {number} angular speed\n     */\n    Body.getAngularSpeed = function(body) {\n        return Math.abs(Body.getAngularVelocity(body));\n    };\n\n    /**\n     * Sets the current rotational speed of the body.  \n     * Direction is maintained. Affects body angular velocity.\n     * @method setAngularSpeed\n     * @param {body} body\n     * @param {number} speed\n     */\n    Body.setAngularSpeed = function(body, speed) {\n        Body.setAngularVelocity(body, Common.sign(Body.getAngularVelocity(body)) * speed);\n    };\n\n    /**\n     * Moves a body by a given vector relative to its current position. By default velocity is unchanged.\n     * If `updateVelocity` is `true` then velocity is inferred from the change in position.\n     * @method translate\n     * @param {body} body\n     * @param {vector} translation\n     * @param {boolean} [updateVelocity=false]\n     */\n    Body.translate = function(body, translation, updateVelocity) {\n        Body.setPosition(body, Vector.add(body.position, translation), updateVelocity);\n    };\n\n    /**\n     * Rotates a body by a given angle relative to its current angle. By default angular velocity is unchanged.\n     * If `updateVelocity` is `true` then angular velocity is inferred from the change in angle.\n     * @method rotate\n     * @param {body} body\n     * @param {number} rotation\n     * @param {vector} [point]\n     * @param {boolean} [updateVelocity=false]\n     */\n    Body.rotate = function(body, rotation, point, updateVelocity) {\n        if (!point) {\n            Body.setAngle(body, body.angle + rotation, updateVelocity);\n        } else {\n            var cos = Math.cos(rotation),\n                sin = Math.sin(rotation),\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            }, updateVelocity);\n\n            Body.setAngle(body, body.angle + rotation, updateVelocity);\n        }\n    };\n\n    /**\n     * Scales the body, including updating physical properties (mass, area, axes, inertia), from a world-space point (default is body centre).\n     * @method scale\n     * @param {body} body\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} [point]\n     */\n    Body.scale = function(body, scaleX, scaleY, point) {\n        var totalArea = 0,\n            totalInertia = 0;\n\n        point = point || body.position;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            // scale vertices\n            Vertices.scale(part.vertices, scaleX, scaleY, point);\n\n            // update properties\n            part.axes = Axes.fromVertices(part.vertices);\n            part.area = Vertices.area(part.vertices);\n            Body.setMass(part, body.density * part.area);\n\n            // update inertia (requires vertices to be at origin)\n            Vertices.translate(part.vertices, { x: -part.position.x, y: -part.position.y });\n            Body.setInertia(part, Body._inertiaScale * Vertices.inertia(part.vertices, part.mass));\n            Vertices.translate(part.vertices, { x: part.position.x, y: part.position.y });\n\n            if (i > 0) {\n                totalArea += part.area;\n                totalInertia += part.inertia;\n            }\n\n            // scale position\n            part.position.x = point.x + (part.position.x - point.x) * scaleX;\n            part.position.y = point.y + (part.position.y - point.y) * scaleY;\n\n            // update bounds\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n\n        // handle parent body\n        if (body.parts.length > 1) {\n            body.area = totalArea;\n\n            if (!body.isStatic) {\n                Body.setMass(body, body.density * totalArea);\n                Body.setInertia(body, totalInertia);\n            }\n        }\n\n        // handle circles\n        if (body.circleRadius) { \n            if (scaleX === scaleY) {\n                body.circleRadius *= scaleX;\n            } else {\n                // body is no longer a circle\n                body.circleRadius = null;\n            }\n        }\n    };\n\n    /**\n     * Performs an update by integrating the equations of motion on the `body`.\n     * This is applied every update by `Matter.Engine` automatically.\n     * @method update\n     * @param {body} body\n     * @param {number} [deltaTime=16.666]\n     */\n    Body.update = function(body, deltaTime) {\n        deltaTime = (typeof deltaTime !== 'undefined' ? deltaTime : (1000 / 60)) * body.timeScale;\n\n        var deltaTimeSquared = deltaTime * deltaTime,\n            correction = Body._timeCorrection ? deltaTime / (body.deltaTime || deltaTime) : 1;\n\n        // from the previous step\n        var frictionAir = 1 - body.frictionAir * (deltaTime / Common._baseDelta),\n            velocityPrevX = (body.position.x - body.positionPrev.x) * correction,\n            velocityPrevY = (body.position.y - body.positionPrev.y) * correction;\n\n        // update velocity with Verlet integration\n        body.velocity.x = (velocityPrevX * frictionAir) + (body.force.x / body.mass) * deltaTimeSquared;\n        body.velocity.y = (velocityPrevY * frictionAir) + (body.force.y / body.mass) * deltaTimeSquared;\n\n        body.positionPrev.x = body.position.x;\n        body.positionPrev.y = body.position.y;\n        body.position.x += body.velocity.x;\n        body.position.y += body.velocity.y;\n        body.deltaTime = deltaTime;\n\n        // update angular velocity with Verlet integration\n        body.angularVelocity = ((body.angle - body.anglePrev) * frictionAir * correction) + (body.torque / body.inertia) * deltaTimeSquared;\n        body.anglePrev = body.angle;\n        body.angle += body.angularVelocity;\n\n        // transform the body geometry\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            Vertices.translate(part.vertices, body.velocity);\n            \n            if (i > 0) {\n                part.position.x += body.velocity.x;\n                part.position.y += body.velocity.y;\n            }\n\n            if (body.angularVelocity !== 0) {\n                Vertices.rotate(part.vertices, body.angularVelocity, body.position);\n                Axes.rotate(part.axes, body.angularVelocity);\n                if (i > 0) {\n                    Vector.rotateAbout(part.position, body.angularVelocity, body.position, part.position);\n                }\n            }\n\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Updates properties `body.velocity`, `body.speed`, `body.angularVelocity` and `body.angularSpeed` which are normalised in relation to `Body._baseDelta`.\n     * @method updateVelocities\n     * @param {body} body\n     */\n    Body.updateVelocities = function(body) {\n        var timeScale = Body._baseDelta / body.deltaTime,\n            bodyVelocity = body.velocity;\n\n        bodyVelocity.x = (body.position.x - body.positionPrev.x) * timeScale;\n        bodyVelocity.y = (body.position.y - body.positionPrev.y) * timeScale;\n        body.speed = Math.sqrt((bodyVelocity.x * bodyVelocity.x) + (bodyVelocity.y * bodyVelocity.y));\n\n        body.angularVelocity = (body.angle - body.anglePrev) * timeScale;\n        body.angularSpeed = Math.abs(body.angularVelocity);\n    };\n\n    /**\n     * Applies the `force` to the `body` from the force origin `position` in world-space, over a single timestep, including applying any resulting angular torque.\n     * \n     * Forces are useful for effects like gravity, wind or rocket thrust, but can be difficult in practice when precise control is needed. In these cases see `Body.setVelocity` and `Body.setPosition` as an alternative.\n     * \n     * The force from this function is only applied once for the duration of a single timestep, in other words the duration depends directly on the current engine update `delta` and the rate of calls to this function.\n     * \n     * Therefore to account for time, you should apply the force constantly over as many engine updates as equivalent to the intended duration.\n     * \n     * If all or part of the force duration is some fraction of a timestep, first multiply the force by `duration / timestep`.\n     * \n     * The force origin `position` in world-space must also be specified. Passing `body.position` will result in zero angular effect as the force origin would be at the centre of mass.\n     * \n     * The `body` will take time to accelerate under a force, the resulting effect depends on duration of the force, the body mass and other forces on the body including friction combined.\n     * @method applyForce\n     * @param {body} body\n     * @param {vector} position The force origin in world-space. Pass `body.position` to avoid angular torque.\n     * @param {vector} force\n     */\n    Body.applyForce = function(body, position, force) {\n        var offset = { x: position.x - body.position.x, y: position.y - body.position.y };\n        body.force.x += force.x;\n        body.force.y += force.y;\n        body.torque += offset.x * force.y - offset.y * force.x;\n    };\n\n    /**\n     * Returns the sums of the properties of all compound parts of the parent body.\n     * @method _totalProperties\n     * @private\n     * @param {body} body\n     * @return {}\n     */\n    Body._totalProperties = function(body) {\n        // from equations at:\n        // https://ecourses.ou.edu/cgi-bin/ebook.cgi?doc=&topic=st&chap_sec=07.2&page=theory\n        // http://output.to/sideway/default.asp?qno=121100087\n\n        var properties = {\n            mass: 0,\n            area: 0,\n            inertia: 0,\n            centre: { x: 0, y: 0 }\n        };\n\n        // sum the properties of all compound parts of the parent body\n        for (var i = body.parts.length === 1 ? 0 : 1; i < body.parts.length; i++) {\n            var part = body.parts[i],\n                mass = part.mass !== Infinity ? part.mass : 1;\n\n            properties.mass += mass;\n            properties.area += part.area;\n            properties.inertia += part.inertia;\n            properties.centre = Vector.add(properties.centre, Vector.mult(part.position, mass));\n        }\n\n        properties.centre = Vector.div(properties.centre, properties.mass);\n\n        return properties;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a body starts sleeping (where `this` is the body).\n    *\n    * @event sleepStart\n    * @this {body} The body that has started sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a body ends sleeping (where `this` is the body).\n    *\n    * @event sleepEnd\n    * @this {body} The body that has ended sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Body.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * _Read only_. Set by `Body.create`.\n     * \n     * A `String` denoting the type of object.\n     *\n     * @readOnly\n     * @property type\n     * @type string\n     * @default \"body\"\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Body\"\n     */\n\n    /**\n     * _Read only_. Use `Body.setParts` to set. \n     * \n     * See `Bodies.fromVertices` for a related utility.\n     * \n     * An array of bodies (the 'parts') that make up this body (the 'parent'). The first body in this array must always be a self-reference to this `body`.  \n     * \n     * The parts are fixed together and therefore perform as a single unified rigid body.\n     * \n     * Parts in relation to each other are allowed to overlap, as well as form gaps or holes, so can be used to create complex concave bodies unlike when using a single part. \n     * \n     * Use properties and functions on the parent `body` rather than on parts.\n     *   \n     * Outside of their geometry, most properties on parts are not considered or updated.  \n     * As such 'per-part' material properties among others are not currently considered.\n     * \n     * Parts should be created specifically for their parent body.  \n     * Parts should not be shared or reused between bodies, only one parent is supported.  \n     * Parts should not have their own parts, they are not handled recursively.  \n     * Parts should not be added to the world directly or any other composite.  \n     * Parts own vertices must be convex and in clockwise order.   \n     * \n     * A body with more than one part is sometimes referred to as a 'compound' body. \n     * \n     * Use `Body.setParts` when setting parts to ensure correct updates of all properties.  \n     *\n     * @readOnly\n     * @property parts\n     * @type body[]\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * _Read only_. Updated by `Body.setParts`.\n     * \n     * A reference to the body that this is a part of. See `body.parts`.\n     * This is a self reference if the body is not a part of another body.\n     *\n     * @readOnly\n     * @property parent\n     * @type body\n     */\n\n    /**\n     * A `Number` specifying the angle of the body, in radians.\n     *\n     * @property angle\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * _Read only_. Use `Body.setVertices` or `Body.setParts` to set. See also `Bodies.fromVertices`.\n     * \n     * An array of `Vector` objects that specify the convex hull of the rigid body.\n     * These should be provided about the origin `(0, 0)`. E.g.\n     *\n     * `[{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]`\n     * \n     * Vertices must always be convex, in clockwise order and must not contain any duplicate points.\n     * \n     * Concave vertices should be decomposed into convex `parts`, see `Bodies.fromVertices` and `Body.setParts`.\n     *\n     * When set the vertices are translated such that `body.position` is at the centre of mass.\n     * Many other body properties are automatically calculated from these vertices when set including `density`, `area` and `inertia`.\n     * \n     * The module `Matter.Vertices` contains useful methods for working with vertices.\n     *\n     * @readOnly\n     * @property vertices\n     * @type vector[]\n     */\n\n    /**\n     * _Read only_. Use `Body.setPosition` to set. \n     * \n     * A `Vector` that specifies the current world-space position of the body.\n     * \n     * @readOnly\n     * @property position\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that accumulates the total force applied to the body for a single update.\n     * Force is zeroed after every `Engine.update`, so constant forces should be applied for every update they are needed. See also `Body.applyForce`.\n     * \n     * @property force\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that accumulates the total torque (turning force) applied to the body for a single update. See also `Body.applyForce`.\n     * Torque is zeroed after every `Engine.update`, so constant torques should be applied for every update they are needed.\n     *\n     * Torques result in angular acceleration on every update, which depends on body inertia and the engine update delta.\n     * \n     * @property torque\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * _Read only_. Use `Body.setSpeed` to set. \n     * \n     * See `Body.getSpeed` for details.\n     * \n     * Equivalent to the magnitude of `body.velocity` (always positive).\n     * \n     * @readOnly\n     * @property speed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * _Read only_. Use `Body.setVelocity` to set. \n     * \n     * See `Body.getVelocity` for details.\n     * \n     * Equivalent to the magnitude of `body.angularVelocity` (always positive).\n     * \n     * @readOnly\n     * @property velocity\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * _Read only_. Use `Body.setAngularSpeed` to set. \n     * \n     * See `Body.getAngularSpeed` for details.\n     * \n     * \n     * @readOnly\n     * @property angularSpeed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * _Read only_. Use `Body.setAngularVelocity` to set. \n     * \n     * See `Body.getAngularVelocity` for details.\n     * \n     *\n     * @readOnly\n     * @property angularVelocity\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * _Read only_. Use `Body.setStatic` to set. \n     * \n     * A flag that indicates whether a body is considered static. A static body can never change position or angle and is completely fixed.\n     *\n     * @readOnly\n     * @property isStatic\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag that indicates whether a body is a sensor. Sensor triggers collision events, but doesn't react with colliding body physically.\n     *\n     * @property isSensor\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * _Read only_. Use `Sleeping.set` to set. \n     * \n     * A flag that indicates whether the body is considered sleeping. A sleeping body acts similar to a static body, except it is only temporary and can be awoken.\n     *\n     * @readOnly\n     * @property isSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * _Read only_. Calculated during engine update only when sleeping is enabled.\n     * \n     * A `Number` that loosely measures the amount of movement a body currently has.\n     *\n     * Derived from `body.speed^2 + body.angularSpeed^2`. See `Sleeping.update`.\n     * \n     * @readOnly\n     * @property motion\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the length of time during which this body must have near-zero velocity before it is set as sleeping by the `Matter.Sleeping` module (if sleeping is enabled by the engine).\n     * \n     * @property sleepThreshold\n     * @type number\n     * @default 60\n     */\n\n    /**\n     * _Read only_. Use `Body.setDensity` to set. \n     * \n     * A `Number` that defines the density of the body (mass per unit area).\n     * \n     * Mass will also be updated when set.\n     *\n     * @readOnly\n     * @property density\n     * @type number\n     * @default 0.001\n     */\n\n    /**\n     * _Read only_. Use `Body.setMass` to set. \n     * \n     * A `Number` that defines the mass of the body.\n     * \n     * Density will also be updated when set.\n     * \n     * @readOnly\n     * @property mass\n     * @type number\n     */\n\n    /**\n     * _Read only_. Use `Body.setMass` to set. \n     * \n     * A `Number` that defines the inverse mass of the body (`1 / mass`).\n     *\n     * @readOnly\n     * @property inverseMass\n     * @type number\n     */\n\n    /**\n     * _Read only_. Automatically calculated when vertices, mass or density are set or set through `Body.setInertia`.\n     * \n     * A `Number` that defines the moment of inertia of the body. This is the second moment of area in two dimensions.\n     * \n     * Can be manually set to `Infinity` to prevent rotation of the body. See `Body.setInertia`.\n     * \n     * @readOnly\n     * @property inertia\n     * @type number\n     */\n\n    /**\n     * _Read only_. Automatically calculated when vertices, mass or density are set or calculated by `Body.setInertia`.\n     * \n     * A `Number` that defines the inverse moment of inertia of the body (`1 / inertia`).\n     * \n     * @readOnly\n     * @property inverseInertia\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the restitution (elasticity) of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means collisions may be perfectly inelastic and no bouncing may occur. \n     * A value of `0.8` means the body may bounce back with approximately 80% of its kinetic energy.\n     * Note that collision response is based on _pairs_ of bodies, and that `restitution` values are _combined_ with the following formula:\n     *\n     * `Math.max(bodyA.restitution, bodyB.restitution)`\n     *\n     * @property restitution\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the friction of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means that the body may slide indefinitely.\n     * A value of `1` means the body may come to a stop almost instantly after a force is applied.\n     *\n     * The effects of the value may be non-linear. \n     * High values may be unstable depending on the body.\n     * The engine uses a Coulomb friction model including static and kinetic friction.\n     * Note that collision response is based on _pairs_ of bodies, and that `friction` values are _combined_ with the following formula:\n     *\n     * `Math.min(bodyA.friction, bodyB.friction)`\n     *\n     * @property friction\n     * @type number\n     * @default 0.1\n     */\n\n    /**\n     * A `Number` that defines the static friction of the body (in the Coulomb friction model). \n     * A value of `0` means the body will never 'stick' when it is nearly stationary and only dynamic `friction` is used.\n     * The higher the value (e.g. `10`), the more force it will take to initially get the body moving when nearly stationary.\n     * This value is multiplied with the `friction` property to make it easier to change `friction` and maintain an appropriate amount of static friction.\n     *\n     * @property frictionStatic\n     * @type number\n     * @default 0.5\n     */\n\n    /**\n     * A `Number` that defines the air friction of the body (air resistance). \n     * A value of `0` means the body will never slow as it moves through space.\n     * The higher the value, the faster a body slows when moving through space.\n     * The effects of the value are non-linear. \n     *\n     * @property frictionAir\n     * @type number\n     * @default 0.01\n     */\n\n    /**\n     * An `Object` that specifies the collision filtering properties of this body.\n     *\n     * Collisions between two bodies will obey the following rules:\n     * - If the two bodies have the same non-zero value of `collisionFilter.group`,\n     *   they will always collide if the value is positive, and they will never collide\n     *   if the value is negative.\n     * - If the two bodies have different values of `collisionFilter.group` or if one\n     *   (or both) of the bodies has a value of 0, then the category/mask rules apply as follows:\n     *\n     * Each body belongs to a collision category, given by `collisionFilter.category`. This\n     * value is used as a bit field and the category should have only one bit set, meaning that\n     * the value of this property is a power of two in the range [1, 2^31]. Thus, there are 32\n     * different collision categories available.\n     *\n     * Each body also defines a collision bitmask, given by `collisionFilter.mask` which specifies\n     * the categories it collides with (the value is the bitwise AND value of all these categories).\n     *\n     * Using the category/mask rules, two bodies `A` and `B` collide if each includes the other's\n     * category in its mask, i.e. `(categoryA & maskB) !== 0` and `(categoryB & maskA) !== 0`\n     * are both true.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n    /**\n     * An Integer `Number`, that specifies the collision group this body belongs to.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.group\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * A bit field that specifies the collision category this body belongs to.\n     * The category value should have only one bit set, for example `0x0001`.\n     * This means there are up to 32 unique collision categories available.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.category\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * A bit mask that specifies the collision categories this body may collide with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.mask\n     * @type object\n     * @default -1\n     */\n\n    /**\n     * A `Number` that specifies a thin boundary around the body where it is allowed to slightly sink into other bodies.\n     * \n     * This is required for proper collision response, including friction and restitution effects.\n     * \n     * The default should generally suffice in most cases. You may need to decrease this value for very small bodies that are nearing the default value in scale.\n     *\n     * @property slop\n     * @type number\n     * @default 0.05\n     */\n\n    /**\n     * A `Number` that specifies per-body time scaling.\n     *\n     * @property timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * _Read only_. Updated during engine update.\n     * \n     * A `Number` that records the last delta time value used to update this body.\n     * Used to calculate speed and velocity.\n     *\n     * @readOnly\n     * @property deltaTime\n     * @type number\n     * @default 1000 / 60\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the body should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * Sets the opacity to use when rendering.\n     *\n     * @property render.opacity\n     * @type number\n     * @default 1\n    */\n\n    /**\n     * An `Object` that defines the sprite properties to use when rendering, if any.\n     *\n     * @property render.sprite\n     * @type object\n     */\n\n    /**\n     * An `String` that defines the path to the image to use as the sprite texture, if any.\n     *\n     * @property render.sprite.texture\n     * @type string\n     */\n     \n    /**\n     * A `Number` that defines the scaling in the x-axis for the sprite, if any.\n     *\n     * @property render.sprite.xScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that defines the scaling in the y-axis for the sprite, if any.\n     *\n     * @property render.sprite.yScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n      * A `Number` that defines the offset in the x-axis for the sprite (normalised by texture width).\n      *\n      * @property render.sprite.xOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n      * A `Number` that defines the offset in the y-axis for the sprite (normalised by texture height).\n      *\n      * @property render.sprite.yOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the body outline (if a sprite is not defined).\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `String` that defines the fill style to use when rendering the body (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.fillStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the body outline (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * _Read only_. Calculated automatically when vertices are set.\n     * \n     * An array of unique axis vectors (edge normals) used for collision detection.\n     * These are automatically calculated when vertices are set.\n     * They are constantly updated by `Body.update` during the simulation.\n     *\n     * @readOnly\n     * @property axes\n     * @type vector[]\n     */\n     \n    /**\n     * _Read only_. Calculated automatically when vertices are set.\n     * \n     * A `Number` that measures the area of the body's convex hull.\n     * \n     * @readOnly\n     * @property area\n     * @type string\n     * @default \n     */\n\n    /**\n     * A `Bounds` object that defines the AABB region for the body.\n     * It is automatically calculated when vertices are set and constantly updated by `Body.update` during simulation.\n     * \n     * @property bounds\n     * @type bounds\n     */\n\n    /**\n     * Temporarily may hold parameters to be passed to `Vertices.chamfer` where supported by external functions.\n     * \n     * See `Vertices.chamfer` for possible parameters this object may hold.\n     * \n     * Currently only functions inside `Matter.Bodies` provide a utility using this property as a vertices pre-processing option.\n     * \n     * Alternatively consider using `Vertices.chamfer` directly on vertices before passing them to a body creation function.\n     * \n     * @property chamfer\n     * @type object|null|undefined\n     */\n\n})();\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Events` module contains methods to fire and listen to events on other objects.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Events\n*/\n\nvar Events = {};\n\nmodule.exports = Events;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Subscribes a callback function to the given object's `eventName`.\n     * @method on\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.on = function(object, eventNames, callback) {\n        var names = eventNames.split(' '),\n            name;\n\n        for (var i = 0; i < names.length; i++) {\n            name = names[i];\n            object.events = object.events || {};\n            object.events[name] = object.events[name] || [];\n            object.events[name].push(callback);\n        }\n\n        return callback;\n    };\n\n    /**\n     * Removes the given event callback. If no callback, clears all callbacks in `eventNames`. If no `eventNames`, clears all events.\n     * @method off\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.off = function(object, eventNames, callback) {\n        if (!eventNames) {\n            object.events = {};\n            return;\n        }\n\n        // handle Events.off(object, callback)\n        if (typeof eventNames === 'function') {\n            callback = eventNames;\n            eventNames = Common.keys(object.events).join(' ');\n        }\n\n        var names = eventNames.split(' ');\n\n        for (var i = 0; i < names.length; i++) {\n            var callbacks = object.events[names[i]],\n                newCallbacks = [];\n\n            if (callback && callbacks) {\n                for (var j = 0; j < callbacks.length; j++) {\n                    if (callbacks[j] !== callback)\n                        newCallbacks.push(callbacks[j]);\n                }\n            }\n\n            object.events[names[i]] = newCallbacks;\n        }\n    };\n\n    /**\n     * Fires all the callbacks subscribed to the given object's `eventName`, in the order they subscribed, if any.\n     * @method trigger\n     * @param {} object\n     * @param {string} eventNames\n     * @param {} event\n     */\n    Events.trigger = function(object, eventNames, event) {\n        var names,\n            name,\n            callbacks,\n            eventClone;\n\n        var events = object.events;\n        \n        if (events && Common.keys(events).length > 0) {\n            if (!event)\n                event = {};\n\n            names = eventNames.split(' ');\n\n            for (var i = 0; i < names.length; i++) {\n                name = names[i];\n                callbacks = events[name];\n\n                if (callbacks) {\n                    eventClone = Common.clone(event, false);\n                    eventClone.name = name;\n                    eventClone.source = object;\n\n                    for (var j = 0; j < callbacks.length; j++) {\n                        callbacks[j].apply(object, [eventClone]);\n                    }\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* A composite is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite` objects.\n*\n* They are a container that can represent complex objects made of multiple parts, even if they are not physically connected.\n* A composite could contain anything from a single body all the way up to a whole world.\n* \n* When making any changes to composites, use the included functions rather than changing their properties directly.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composite\n*/\n\nvar Composite = {};\n\nmodule.exports = Composite;\n\nvar Events = __webpack_require__(5);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Body = __webpack_require__(4);\n\n(function() {\n\n    /**\n     * Creates a new composite. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properites section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} [options]\n     * @return {composite} A new composite\n     */\n    Composite.create = function(options) {\n        return Common.extend({ \n            id: Common.nextId(),\n            type: 'composite',\n            parent: null,\n            isModified: false,\n            bodies: [], \n            constraints: [], \n            composites: [],\n            label: 'Composite',\n            plugin: {},\n            cache: {\n                allBodies: null,\n                allConstraints: null,\n                allComposites: null\n            }\n        }, options);\n    };\n\n    /**\n     * Sets the composite's `isModified` flag. \n     * If `updateParents` is true, all parents will be set (default: false).\n     * If `updateChildren` is true, all children will be set (default: false).\n     * @private\n     * @method setModified\n     * @param {composite} composite\n     * @param {boolean} isModified\n     * @param {boolean} [updateParents=false]\n     * @param {boolean} [updateChildren=false]\n     */\n    Composite.setModified = function(composite, isModified, updateParents, updateChildren) {\n        composite.isModified = isModified;\n\n        if (isModified && composite.cache) {\n            composite.cache.allBodies = null;\n            composite.cache.allConstraints = null;\n            composite.cache.allComposites = null;\n        }\n\n        if (updateParents && composite.parent) {\n            Composite.setModified(composite.parent, isModified, updateParents, updateChildren);\n        }\n\n        if (updateChildren) {\n            for (var i = 0; i < composite.composites.length; i++) {\n                var childComposite = composite.composites[i];\n                Composite.setModified(childComposite, isModified, updateParents, updateChildren);\n            }\n        }\n    };\n\n    /**\n     * Generic single or multi-add function. Adds a single or an array of body(s), constraint(s) or composite(s) to the given composite.\n     * Triggers `beforeAdd` and `afterAdd` events on the `composite`.\n     * @method add\n     * @param {composite} composite\n     * @param {object|array} object A single or an array of body(s), constraint(s) or composite(s)\n     * @return {composite} The original composite with the objects added\n     */\n    Composite.add = function(composite, object) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeAdd', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                // skip adding compound parts\n                if (obj.parent !== obj) {\n                    Common.warn('Composite.add: skipped adding a compound body part (you must add its parent instead)');\n                    break;\n                }\n\n                Composite.addBody(composite, obj);\n                break;\n            case 'constraint':\n                Composite.addConstraint(composite, obj);\n                break;\n            case 'composite':\n                Composite.addComposite(composite, obj);\n                break;\n            case 'mouseConstraint':\n                Composite.addConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterAdd', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Generic remove function. Removes one or many body(s), constraint(s) or a composite(s) to the given composite.\n     * Optionally searching its children recursively.\n     * Triggers `beforeRemove` and `afterRemove` events on the `composite`.\n     * @method remove\n     * @param {composite} composite\n     * @param {object|array} object\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the objects removed\n     */\n    Composite.remove = function(composite, object, deep) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeRemove', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                Composite.removeBody(composite, obj, deep);\n                break;\n            case 'constraint':\n                Composite.removeConstraint(composite, obj, deep);\n                break;\n            case 'composite':\n                Composite.removeComposite(composite, obj, deep);\n                break;\n            case 'mouseConstraint':\n                Composite.removeConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterRemove', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Adds a composite to the given composite.\n     * @private\n     * @method addComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @return {composite} The original compositeA with the objects from compositeB added\n     */\n    Composite.addComposite = function(compositeA, compositeB) {\n        compositeA.composites.push(compositeB);\n        compositeB.parent = compositeA;\n        Composite.setModified(compositeA, true, true, false);\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @param {boolean} [deep=false]\n     * @return {composite} The original compositeA with the composite removed\n     */\n    Composite.removeComposite = function(compositeA, compositeB, deep) {\n        var position = Common.indexOf(compositeA.composites, compositeB);\n\n        if (position !== -1) {\n            var bodies = Composite.allBodies(compositeB);\n\n            Composite.removeCompositeAt(compositeA, position);\n\n            for (var i = 0; i < bodies.length; i++) {\n                bodies[i].sleepCounter = 0;\n            }\n        }\n\n        if (deep) {\n            for (var i = 0; i < compositeA.composites.length; i++){\n                Composite.removeComposite(compositeA.composites[i], compositeB, true);\n            }\n        }\n\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite.\n     * @private\n     * @method removeCompositeAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the composite removed\n     */\n    Composite.removeCompositeAt = function(composite, position) {\n        composite.composites.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a body to the given composite.\n     * @private\n     * @method addBody\n     * @param {composite} composite\n     * @param {body} body\n     * @return {composite} The original composite with the body added\n     */\n    Composite.addBody = function(composite, body) {\n        composite.bodies.push(body);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeBody\n     * @param {composite} composite\n     * @param {body} body\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBody = function(composite, body, deep) {\n        var position = Common.indexOf(composite.bodies, body);\n\n        if (position !== -1) {\n            Composite.removeBodyAt(composite, position);\n            body.sleepCounter = 0;\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeBody(composite.composites[i], body, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeBodyAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBodyAt = function(composite, position) {\n        composite.bodies.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a constraint to the given composite.\n     * @private\n     * @method addConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @return {composite} The original composite with the constraint added\n     */\n    Composite.addConstraint = function(composite, constraint) {\n        composite.constraints.push(constraint);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a constraint from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraint = function(composite, constraint, deep) {\n        var position = Common.indexOf(composite.constraints, constraint);\n        \n        if (position !== -1) {\n            Composite.removeConstraintAt(composite, position);\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeConstraint(composite.composites[i], constraint, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeConstraintAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraintAt = function(composite, position) {\n        composite.constraints.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes all bodies, constraints and composites from the given composite.\n     * Optionally clearing its children recursively.\n     * @method clear\n     * @param {composite} composite\n     * @param {boolean} keepStatic\n     * @param {boolean} [deep=false]\n     */\n    Composite.clear = function(composite, keepStatic, deep) {\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.clear(composite.composites[i], keepStatic, true);\n            }\n        }\n        \n        if (keepStatic) {\n            composite.bodies = composite.bodies.filter(function(body) { return body.isStatic; });\n        } else {\n            composite.bodies.length = 0;\n        }\n\n        composite.constraints.length = 0;\n        composite.composites.length = 0;\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Returns all bodies in the given composite, including all bodies in its children, recursively.\n     * @method allBodies\n     * @param {composite} composite\n     * @return {body[]} All the bodies\n     */\n    Composite.allBodies = function(composite) {\n        if (composite.cache && composite.cache.allBodies) {\n            return composite.cache.allBodies;\n        }\n\n        var bodies = [].concat(composite.bodies);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            bodies = bodies.concat(Composite.allBodies(composite.composites[i]));\n\n        if (composite.cache) {\n            composite.cache.allBodies = bodies;\n        }\n\n        return bodies;\n    };\n\n    /**\n     * Returns all constraints in the given composite, including all constraints in its children, recursively.\n     * @method allConstraints\n     * @param {composite} composite\n     * @return {constraint[]} All the constraints\n     */\n    Composite.allConstraints = function(composite) {\n        if (composite.cache && composite.cache.allConstraints) {\n            return composite.cache.allConstraints;\n        }\n\n        var constraints = [].concat(composite.constraints);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            constraints = constraints.concat(Composite.allConstraints(composite.composites[i]));\n\n        if (composite.cache) {\n            composite.cache.allConstraints = constraints;\n        }\n\n        return constraints;\n    };\n\n    /**\n     * Returns all composites in the given composite, including all composites in its children, recursively.\n     * @method allComposites\n     * @param {composite} composite\n     * @return {composite[]} All the composites\n     */\n    Composite.allComposites = function(composite) {\n        if (composite.cache && composite.cache.allComposites) {\n            return composite.cache.allComposites;\n        }\n\n        var composites = [].concat(composite.composites);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            composites = composites.concat(Composite.allComposites(composite.composites[i]));\n\n        if (composite.cache) {\n            composite.cache.allComposites = composites;\n        }\n\n        return composites;\n    };\n\n    /**\n     * Searches the composite recursively for an object matching the type and id supplied, null if not found.\n     * @method get\n     * @param {composite} composite\n     * @param {number} id\n     * @param {string} type\n     * @return {object} The requested object, if found\n     */\n    Composite.get = function(composite, id, type) {\n        var objects,\n            object;\n\n        switch (type) {\n        case 'body':\n            objects = Composite.allBodies(composite);\n            break;\n        case 'constraint':\n            objects = Composite.allConstraints(composite);\n            break;\n        case 'composite':\n            objects = Composite.allComposites(composite).concat(composite);\n            break;\n        }\n\n        if (!objects)\n            return null;\n\n        object = objects.filter(function(object) { \n            return object.id.toString() === id.toString(); \n        });\n\n        return object.length === 0 ? null : object[0];\n    };\n\n    /**\n     * Moves the given object(s) from compositeA to compositeB (equal to a remove followed by an add).\n     * @method move\n     * @param {compositeA} compositeA\n     * @param {object[]} objects\n     * @param {compositeB} compositeB\n     * @return {composite} Returns compositeA\n     */\n    Composite.move = function(compositeA, objects, compositeB) {\n        Composite.remove(compositeA, objects);\n        Composite.add(compositeB, objects);\n        return compositeA;\n    };\n\n    /**\n     * Assigns new ids for all objects in the composite, recursively.\n     * @method rebase\n     * @param {composite} composite\n     * @return {composite} Returns composite\n     */\n    Composite.rebase = function(composite) {\n        var objects = Composite.allBodies(composite)\n            .concat(Composite.allConstraints(composite))\n            .concat(Composite.allComposites(composite));\n\n        for (var i = 0; i < objects.length; i++) {\n            objects[i].id = Common.nextId();\n        }\n\n        return composite;\n    };\n\n    /**\n     * Translates all children in the composite by a given vector relative to their current positions, \n     * without imparting any velocity.\n     * @method translate\n     * @param {composite} composite\n     * @param {vector} translation\n     * @param {bool} [recursive=true]\n     */\n    Composite.translate = function(composite, translation, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            Body.translate(bodies[i], translation);\n        }\n\n        return composite;\n    };\n\n    /**\n     * Rotates all children in the composite by a given angle about the given point, without imparting any angular velocity.\n     * @method rotate\n     * @param {composite} composite\n     * @param {number} rotation\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.rotate = function(composite, rotation, point, recursive) {\n        var cos = Math.cos(rotation),\n            sin = Math.sin(rotation),\n            bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            });\n\n            Body.rotate(body, rotation);\n        }\n\n        return composite;\n    };\n\n    /**\n     * Scales all children in the composite, including updating physical properties (mass, area, axes, inertia), from a world-space point.\n     * @method scale\n     * @param {composite} composite\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.scale = function(composite, scaleX, scaleY, point, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + dx * scaleX,\n                y: point.y + dy * scaleY\n            });\n\n            Body.scale(body, scaleX, scaleY);\n        }\n\n        return composite;\n    };\n\n    /**\n     * Returns the union of the bounds of all of the composite's bodies.\n     * @method bounds\n     * @param {composite} composite The composite.\n     * @returns {bounds} The composite bounds.\n     */\n    Composite.bounds = function(composite) {\n        var bodies = Composite.allBodies(composite),\n            vertices = [];\n\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i];\n            vertices.push(body.bounds.min, body.bounds.max);\n        }\n\n        return Bounds.create(vertices);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, before objects have been added.\n    *\n    * @event beforeAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, after objects have been added.\n    *\n    * @event afterAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, before objects have been removed.\n    *\n    * @event beforeRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, after objects have been removed.\n    *\n    * @event afterRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"composite\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage composites.\n     *\n     * @property label\n     * @type string\n     * @default \"Composite\"\n     */\n\n    /**\n     * A flag that specifies whether the composite has been modified during the current step.\n     * This is automatically managed when bodies, constraints or composites are added or removed.\n     *\n     * @property isModified\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * The `Composite` that is the parent of this composite. It is automatically managed by the `Matter.Composite` methods.\n     *\n     * @property parent\n     * @type composite\n     * @default null\n     */\n\n    /**\n     * An array of `Body` that are _direct_ children of this composite.\n     * To add or remove bodies you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allBodies` method.\n     *\n     * @property bodies\n     * @type body[]\n     * @default []\n     */\n\n    /**\n     * An array of `Constraint` that are _direct_ children of this composite.\n     * To add or remove constraints you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allConstraints` method.\n     *\n     * @property constraints\n     * @type constraint[]\n     * @default []\n     */\n\n    /**\n     * An array of `Composite` that are _direct_ children of this composite.\n     * To add or remove composites you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allComposites` method.\n     *\n     * @property composites\n     * @type composite[]\n     * @default []\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * An object used for storing cached results for performance reasons.\n     * This is used internally only and is automatically managed.\n     *\n     * @private\n     * @property cache\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Sleeping` module contains methods to manage the sleeping state of bodies.\n*\n* @class Sleeping\n*/\n\nvar Sleeping = {};\n\nmodule.exports = Sleeping;\n\nvar Body = __webpack_require__(4);\nvar Events = __webpack_require__(5);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Sleeping._motionWakeThreshold = 0.18;\n    Sleeping._motionSleepThreshold = 0.08;\n    Sleeping._minBias = 0.9;\n\n    /**\n     * Puts bodies to sleep or wakes them up depending on their motion.\n     * @method update\n     * @param {body[]} bodies\n     * @param {number} delta\n     */\n    Sleeping.update = function(bodies, delta) {\n        var timeScale = delta / Common._baseDelta,\n            motionSleepThreshold = Sleeping._motionSleepThreshold;\n        \n        // update bodies sleeping status\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                speed = Body.getSpeed(body),\n                angularSpeed = Body.getAngularSpeed(body),\n                motion = speed * speed + angularSpeed * angularSpeed;\n\n            // wake up bodies if they have a force applied\n            if (body.force.x !== 0 || body.force.y !== 0) {\n                Sleeping.set(body, false);\n                continue;\n            }\n\n            var minMotion = Math.min(body.motion, motion),\n                maxMotion = Math.max(body.motion, motion);\n        \n            // biased average motion estimation between frames\n            body.motion = Sleeping._minBias * minMotion + (1 - Sleeping._minBias) * maxMotion;\n\n            if (body.sleepThreshold > 0 && body.motion < motionSleepThreshold) {\n                body.sleepCounter += 1;\n                \n                if (body.sleepCounter >= body.sleepThreshold / timeScale) {\n                    Sleeping.set(body, true);\n                }\n            } else if (body.sleepCounter > 0) {\n                body.sleepCounter -= 1;\n            }\n        }\n    };\n\n    /**\n     * Given a set of colliding pairs, wakes the sleeping bodies involved.\n     * @method afterCollisions\n     * @param {pair[]} pairs\n     */\n    Sleeping.afterCollisions = function(pairs) {\n        var motionSleepThreshold = Sleeping._motionSleepThreshold;\n\n        // wake up bodies involved in collisions\n        for (var i = 0; i < pairs.length; i++) {\n            var pair = pairs[i];\n            \n            // don't wake inactive pairs\n            if (!pair.isActive)\n                continue;\n\n            var collision = pair.collision,\n                bodyA = collision.bodyA.parent, \n                bodyB = collision.bodyB.parent;\n        \n            // don't wake if at least one body is static\n            if ((bodyA.isSleeping && bodyB.isSleeping) || bodyA.isStatic || bodyB.isStatic)\n                continue;\n        \n            if (bodyA.isSleeping || bodyB.isSleeping) {\n                var sleepingBody = (bodyA.isSleeping && !bodyA.isStatic) ? bodyA : bodyB,\n                    movingBody = sleepingBody === bodyA ? bodyB : bodyA;\n\n                if (!sleepingBody.isStatic && movingBody.motion > motionSleepThreshold) {\n                    Sleeping.set(sleepingBody, false);\n                }\n            }\n        }\n    };\n  \n    /**\n     * Set a body as sleeping or awake.\n     * @method set\n     * @param {body} body\n     * @param {boolean} isSleeping\n     */\n    Sleeping.set = function(body, isSleeping) {\n        var wasSleeping = body.isSleeping;\n\n        if (isSleeping) {\n            body.isSleeping = true;\n            body.sleepCounter = body.sleepThreshold;\n\n            body.positionImpulse.x = 0;\n            body.positionImpulse.y = 0;\n\n            body.positionPrev.x = body.position.x;\n            body.positionPrev.y = body.position.y;\n\n            body.anglePrev = body.angle;\n            body.speed = 0;\n            body.angularSpeed = 0;\n            body.motion = 0;\n\n            if (!wasSleeping) {\n                Events.trigger(body, 'sleepStart');\n            }\n        } else {\n            body.isSleeping = false;\n            body.sleepCounter = 0;\n\n            if (wasSleeping) {\n                Events.trigger(body, 'sleepEnd');\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Collision` module contains methods for detecting collisions between a given pair of bodies.\n*\n* For efficient detection between a list of bodies, see `Matter.Detector` and `Matter.Query`.\n*\n* See `Matter.Engine` for collision events.\n*\n* @class Collision\n*/\n\nvar Collision = {};\n\nmodule.exports = Collision;\n\nvar Vertices = __webpack_require__(3);\nvar Pair = __webpack_require__(9);\n\n(function() {\n    var _supports = [];\n\n    var _overlapAB = {\n        overlap: 0,\n        axis: null\n    };\n\n    var _overlapBA = {\n        overlap: 0,\n        axis: null\n    };\n\n    /**\n     * Creates a new collision record.\n     * @method create\n     * @param {body} bodyA The first body part represented by the collision record\n     * @param {body} bodyB The second body part represented by the collision record\n     * @return {collision} A new collision record\n     */\n    Collision.create = function(bodyA, bodyB) {\n        return { \n            pair: null,\n            collided: false,\n            bodyA: bodyA,\n            bodyB: bodyB,\n            parentA: bodyA.parent,\n            parentB: bodyB.parent,\n            depth: 0,\n            normal: { x: 0, y: 0 },\n            tangent: { x: 0, y: 0 },\n            penetration: { x: 0, y: 0 },\n            supports: [null, null],\n            supportCount: 0\n        };\n    };\n\n    /**\n     * Detect collision between two bodies.\n     * @method collides\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @param {pairs} [pairs] Optionally reuse collision records from existing pairs.\n     * @return {collision|null} A collision record if detected, otherwise null\n     */\n    Collision.collides = function(bodyA, bodyB, pairs) {\n        Collision._overlapAxes(_overlapAB, bodyA.vertices, bodyB.vertices, bodyA.axes);\n\n        if (_overlapAB.overlap <= 0) {\n            return null;\n        }\n\n        Collision._overlapAxes(_overlapBA, bodyB.vertices, bodyA.vertices, bodyB.axes);\n\n        if (_overlapBA.overlap <= 0) {\n            return null;\n        }\n\n        // reuse collision records for gc efficiency\n        var pair = pairs && pairs.table[Pair.id(bodyA, bodyB)],\n            collision;\n\n        if (!pair) {\n            collision = Collision.create(bodyA, bodyB);\n            collision.collided = true;\n            collision.bodyA = bodyA.id < bodyB.id ? bodyA : bodyB;\n            collision.bodyB = bodyA.id < bodyB.id ? bodyB : bodyA;\n            collision.parentA = collision.bodyA.parent;\n            collision.parentB = collision.bodyB.parent;\n        } else {\n            collision = pair.collision;\n        }\n\n        bodyA = collision.bodyA;\n        bodyB = collision.bodyB;\n\n        var minOverlap;\n\n        if (_overlapAB.overlap < _overlapBA.overlap) {\n            minOverlap = _overlapAB;\n        } else {\n            minOverlap = _overlapBA;\n        }\n\n        var normal = collision.normal,\n            tangent = collision.tangent,\n            penetration = collision.penetration,\n            supports = collision.supports,\n            depth = minOverlap.overlap,\n            minAxis = minOverlap.axis,\n            normalX = minAxis.x,\n            normalY = minAxis.y,\n            deltaX = bodyB.position.x - bodyA.position.x,\n            deltaY = bodyB.position.y - bodyA.position.y;\n\n        // ensure normal is facing away from bodyA\n        if (normalX * deltaX + normalY * deltaY >= 0) {\n            normalX = -normalX;\n            normalY = -normalY;\n        }\n\n        normal.x = normalX;\n        normal.y = normalY;\n        \n        tangent.x = -normalY;\n        tangent.y = normalX;\n\n        penetration.x = normalX * depth;\n        penetration.y = normalY * depth;\n\n        collision.depth = depth;\n\n        // find support points, there is always either exactly one or two\n        var supportsB = Collision._findSupports(bodyA, bodyB, normal, 1),\n            supportCount = 0;\n\n        // find the supports from bodyB that are inside bodyA\n        if (Vertices.contains(bodyA.vertices, supportsB[0])) {\n            supports[supportCount++] = supportsB[0];\n        }\n\n        if (Vertices.contains(bodyA.vertices, supportsB[1])) {\n            supports[supportCount++] = supportsB[1];\n        }\n\n        // find the supports from bodyA that are inside bodyB\n        if (supportCount < 2) {\n            var supportsA = Collision._findSupports(bodyB, bodyA, normal, -1);\n\n            if (Vertices.contains(bodyB.vertices, supportsA[0])) {\n                supports[supportCount++] = supportsA[0];\n            }\n\n            if (supportCount < 2 && Vertices.contains(bodyB.vertices, supportsA[1])) {\n                supports[supportCount++] = supportsA[1];\n            }\n        }\n\n        // account for the edge case of overlapping but no vertex containment\n        if (supportCount === 0) {\n            supports[supportCount++] = supportsB[0];\n        }\n\n        // update support count\n        collision.supportCount = supportCount;\n\n        return collision;\n    };\n\n    /**\n     * Find the overlap between two sets of vertices.\n     * @method _overlapAxes\n     * @private\n     * @param {object} result\n     * @param {vertices} verticesA\n     * @param {vertices} verticesB\n     * @param {axes} axes\n     */\n    Collision._overlapAxes = function(result, verticesA, verticesB, axes) {\n        var verticesALength = verticesA.length,\n            verticesBLength = verticesB.length,\n            verticesAX = verticesA[0].x,\n            verticesAY = verticesA[0].y,\n            verticesBX = verticesB[0].x,\n            verticesBY = verticesB[0].y,\n            axesLength = axes.length,\n            overlapMin = Number.MAX_VALUE,\n            overlapAxisNumber = 0,\n            overlap,\n            overlapAB,\n            overlapBA,\n            dot,\n            i,\n            j;\n\n        for (i = 0; i < axesLength; i++) {\n            var axis = axes[i],\n                axisX = axis.x,\n                axisY = axis.y,\n                minA = verticesAX * axisX + verticesAY * axisY,\n                minB = verticesBX * axisX + verticesBY * axisY,\n                maxA = minA,\n                maxB = minB;\n            \n            for (j = 1; j < verticesALength; j += 1) {\n                dot = verticesA[j].x * axisX + verticesA[j].y * axisY;\n\n                if (dot > maxA) { \n                    maxA = dot;\n                } else if (dot < minA) { \n                    minA = dot;\n                }\n            }\n\n            for (j = 1; j < verticesBLength; j += 1) {\n                dot = verticesB[j].x * axisX + verticesB[j].y * axisY;\n\n                if (dot > maxB) { \n                    maxB = dot;\n                } else if (dot < minB) { \n                    minB = dot;\n                }\n            }\n\n            overlapAB = maxA - minB;\n            overlapBA = maxB - minA;\n            overlap = overlapAB < overlapBA ? overlapAB : overlapBA;\n\n            if (overlap < overlapMin) {\n                overlapMin = overlap;\n                overlapAxisNumber = i;\n\n                if (overlap <= 0) {\n                    // can not be intersecting\n                    break;\n                }\n            } \n        }\n\n        result.axis = axes[overlapAxisNumber];\n        result.overlap = overlapMin;\n    };\n\n    /**\n     * Finds supporting vertices given two bodies along a given direction using hill-climbing.\n     * @method _findSupports\n     * @private\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @param {vector} normal\n     * @param {number} direction\n     * @return [vector]\n     */\n    Collision._findSupports = function(bodyA, bodyB, normal, direction) {\n        var vertices = bodyB.vertices,\n            verticesLength = vertices.length,\n            bodyAPositionX = bodyA.position.x,\n            bodyAPositionY = bodyA.position.y,\n            normalX = normal.x * direction,\n            normalY = normal.y * direction,\n            vertexA = vertices[0],\n            vertexB = vertexA,\n            nearestDistance = normalX * (bodyAPositionX - vertexB.x) + normalY * (bodyAPositionY - vertexB.y),\n            vertexC,\n            distance,\n            j;\n\n        // find deepest vertex relative to the axis\n        for (j = 1; j < verticesLength; j += 1) {\n            vertexB = vertices[j];\n            distance = normalX * (bodyAPositionX - vertexB.x) + normalY * (bodyAPositionY - vertexB.y);\n\n            // convex hill-climbing\n            if (distance < nearestDistance) {\n                nearestDistance = distance;\n                vertexA = vertexB;\n            }\n        }\n\n        // measure next vertex\n        vertexC = vertices[(verticesLength + vertexA.index - 1) % verticesLength];\n        nearestDistance = normalX * (bodyAPositionX - vertexC.x) + normalY * (bodyAPositionY - vertexC.y);\n\n        // compare with previous vertex\n        vertexB = vertices[(vertexA.index + 1) % verticesLength];\n        if (normalX * (bodyAPositionX - vertexB.x) + normalY * (bodyAPositionY - vertexB.y) < nearestDistance) {\n            _supports[0] = vertexA;\n            _supports[1] = vertexB;\n\n            return _supports;\n        }\n\n        _supports[0] = vertexA;\n        _supports[1] = vertexC;\n\n        return _supports;\n    };\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A reference to the pair using this collision record, if there is one.\n     *\n     * @property pair\n     * @type {pair|null}\n     * @default null\n     */\n\n    /**\n     * A flag that indicates if the bodies were colliding when the collision was last updated.\n     * \n     * @property collided\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * The first body part represented by the collision (see also `collision.parentA`).\n     * \n     * @property bodyA\n     * @type body\n     */\n\n    /**\n     * The second body part represented by the collision (see also `collision.parentB`).\n     * \n     * @property bodyB\n     * @type body\n     */\n\n    /**\n     * The first body represented by the collision (i.e. `collision.bodyA.parent`).\n     * \n     * @property parentA\n     * @type body\n     */\n\n    /**\n     * The second body represented by the collision (i.e. `collision.bodyB.parent`).\n     * \n     * @property parentB\n     * @type body\n     */\n\n    /**\n     * A `Number` that represents the minimum separating distance between the bodies along the collision normal.\n     *\n     * @readOnly\n     * @property depth\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A normalised `Vector` that represents the direction between the bodies that provides the minimum separating distance.\n     *\n     * @property normal\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A normalised `Vector` that is the tangent direction to the collision normal.\n     *\n     * @property tangent\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that represents the direction and depth of the collision.\n     *\n     * @property penetration\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * An array of body vertices that represent the support points in the collision.\n     * \n     * _Note:_ Only the first `collision.supportCount` items of `collision.supports` are active.\n     * Therefore use `collision.supportCount` instead of `collision.supports.length` when iterating the active supports.\n     * \n     * These are the deepest vertices (along the collision normal) of each body that are contained by the other body's vertices.\n     *\n     * @property supports\n     * @type vector[]\n     * @default []\n     */\n\n    /**\n     * The number of active supports for this collision found in `collision.supports`.\n     * \n     * _Note:_ Only the first `collision.supportCount` items of `collision.supports` are active.\n     * Therefore use `collision.supportCount` instead of `collision.supports.length` when iterating the active supports.\n     *\n     * @property supportCount\n     * @type number\n     * @default 0\n     */\n\n})();\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pair` module contains methods for creating and manipulating collision pairs.\n*\n* @class Pair\n*/\n\nvar Pair = {};\n\nmodule.exports = Pair;\n\nvar Contact = __webpack_require__(16);\n\n(function() {\n    \n    /**\n     * Creates a pair.\n     * @method create\n     * @param {collision} collision\n     * @param {number} timestamp\n     * @return {pair} A new pair\n     */\n    Pair.create = function(collision, timestamp) {\n        var bodyA = collision.bodyA,\n            bodyB = collision.bodyB;\n\n        var pair = {\n            id: Pair.id(bodyA, bodyB),\n            bodyA: bodyA,\n            bodyB: bodyB,\n            collision: collision,\n            contacts: [Contact.create(), Contact.create()],\n            contactCount: 0,\n            separation: 0,\n            isActive: true,\n            isSensor: bodyA.isSensor || bodyB.isSensor,\n            timeCreated: timestamp,\n            timeUpdated: timestamp,\n            inverseMass: 0,\n            friction: 0,\n            frictionStatic: 0,\n            restitution: 0,\n            slop: 0\n        };\n\n        Pair.update(pair, collision, timestamp);\n\n        return pair;\n    };\n\n    /**\n     * Updates a pair given a collision.\n     * @method update\n     * @param {pair} pair\n     * @param {collision} collision\n     * @param {number} timestamp\n     */\n    Pair.update = function(pair, collision, timestamp) {\n        var supports = collision.supports,\n            supportCount = collision.supportCount,\n            contacts = pair.contacts,\n            parentA = collision.parentA,\n            parentB = collision.parentB;\n        \n        pair.isActive = true;\n        pair.timeUpdated = timestamp;\n        pair.collision = collision;\n        pair.separation = collision.depth;\n        pair.inverseMass = parentA.inverseMass + parentB.inverseMass;\n        pair.friction = parentA.friction < parentB.friction ? parentA.friction : parentB.friction;\n        pair.frictionStatic = parentA.frictionStatic > parentB.frictionStatic ? parentA.frictionStatic : parentB.frictionStatic;\n        pair.restitution = parentA.restitution > parentB.restitution ? parentA.restitution : parentB.restitution;\n        pair.slop = parentA.slop > parentB.slop ? parentA.slop : parentB.slop;\n\n        pair.contactCount = supportCount;\n        collision.pair = pair;\n\n        var supportA = supports[0],\n            contactA = contacts[0],\n            supportB = supports[1],\n            contactB = contacts[1];\n\n        // match contacts to supports\n        if (contactB.vertex === supportA || contactA.vertex === supportB) {\n            contacts[1] = contactA;\n            contacts[0] = contactA = contactB;\n            contactB = contacts[1];\n        }\n\n        // update contacts\n        contactA.vertex = supportA;\n        contactB.vertex = supportB;\n    };\n    \n    /**\n     * Set a pair as active or inactive.\n     * @method setActive\n     * @param {pair} pair\n     * @param {bool} isActive\n     * @param {number} timestamp\n     */\n    Pair.setActive = function(pair, isActive, timestamp) {\n        if (isActive) {\n            pair.isActive = true;\n            pair.timeUpdated = timestamp;\n        } else {\n            pair.isActive = false;\n            pair.contactCount = 0;\n        }\n    };\n\n    /**\n     * Get the id for the given pair.\n     * @method id\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @return {string} Unique pairId\n     */\n    Pair.id = function(bodyA, bodyB) {\n        return bodyA.id < bodyB.id ? bodyA.id.toString(36) + ':' + bodyB.id.toString(36) \n            : bodyB.id.toString(36) + ':' + bodyA.id.toString(36);\n    };\n\n})();\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Constraint` module contains methods for creating and manipulating constraints.\n* Constraints are used for specifying that a fixed distance must be maintained between two bodies (or a body and a fixed world-space position).\n* The stiffness of constraints can be modified to create springs or elastic.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Constraint\n*/\n\nvar Constraint = {};\n\nmodule.exports = Constraint;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(11);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Constraint._warming = 0.4;\n    Constraint._torqueDampen = 1;\n    Constraint._minLength = 0.000001;\n\n    /**\n     * Creates a new constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * To simulate a revolute constraint (or pin joint) set `length: 0` and a high `stiffness` value (e.g. `0.7` or above).\n     * If the constraint is unstable, try lowering the `stiffness` value and / or increasing `engine.constraintIterations`.\n     * For compound bodies, constraints must be applied to the parent body (not one of its parts).\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {constraint} constraint\n     */\n    Constraint.create = function(options) {\n        var constraint = options;\n\n        // if bodies defined but no points, use body centre\n        if (constraint.bodyA && !constraint.pointA)\n            constraint.pointA = { x: 0, y: 0 };\n        if (constraint.bodyB && !constraint.pointB)\n            constraint.pointB = { x: 0, y: 0 };\n\n        // calculate static length using initial world space points\n        var initialPointA = constraint.bodyA ? Vector.add(constraint.bodyA.position, constraint.pointA) : constraint.pointA,\n            initialPointB = constraint.bodyB ? Vector.add(constraint.bodyB.position, constraint.pointB) : constraint.pointB,\n            length = Vector.magnitude(Vector.sub(initialPointA, initialPointB));\n    \n        constraint.length = typeof constraint.length !== 'undefined' ? constraint.length : length;\n\n        // option defaults\n        constraint.id = constraint.id || Common.nextId();\n        constraint.label = constraint.label || 'Constraint';\n        constraint.type = 'constraint';\n        constraint.stiffness = constraint.stiffness || (constraint.length > 0 ? 1 : 0.7);\n        constraint.damping = constraint.damping || 0;\n        constraint.angularStiffness = constraint.angularStiffness || 0;\n        constraint.angleA = constraint.bodyA ? constraint.bodyA.angle : constraint.angleA;\n        constraint.angleB = constraint.bodyB ? constraint.bodyB.angle : constraint.angleB;\n        constraint.plugin = {};\n\n        // render\n        var render = {\n            visible: true,\n            lineWidth: 2,\n            strokeStyle: '#ffffff',\n            type: 'line',\n            anchors: true\n        };\n\n        if (constraint.length === 0 && constraint.stiffness > 0.1) {\n            render.type = 'pin';\n            render.anchors = false;\n        } else if (constraint.stiffness < 0.9) {\n            render.type = 'spring';\n        }\n\n        constraint.render = Common.extend(render, constraint.render);\n\n        return constraint;\n    };\n\n    /**\n     * Prepares for solving by constraint warming.\n     * @private\n     * @method preSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.preSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            body.position.x += impulse.x;\n            body.position.y += impulse.y;\n            body.angle += impulse.angle;\n        }\n    };\n\n    /**\n     * Solves all constraints in a list of collisions.\n     * @private\n     * @method solveAll\n     * @param {constraint[]} constraints\n     * @param {number} delta\n     */\n    Constraint.solveAll = function(constraints, delta) {\n        var timeScale = Common.clamp(delta / Common._baseDelta, 0, 1);\n\n        // Solve fixed constraints first.\n        for (var i = 0; i < constraints.length; i += 1) {\n            var constraint = constraints[i],\n                fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic),\n                fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (fixedA || fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n\n        // Solve free constraints last.\n        for (i = 0; i < constraints.length; i += 1) {\n            constraint = constraints[i];\n            fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic);\n            fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (!fixedA && !fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n    };\n\n    /**\n     * Solves a distance constraint with Gauss-Siedel method.\n     * @private\n     * @method solve\n     * @param {constraint} constraint\n     * @param {number} timeScale\n     */\n    Constraint.solve = function(constraint, timeScale) {\n        var bodyA = constraint.bodyA,\n            bodyB = constraint.bodyB,\n            pointA = constraint.pointA,\n            pointB = constraint.pointB;\n\n        if (!bodyA && !bodyB)\n            return;\n\n        // update reference angle\n        if (bodyA && !bodyA.isStatic) {\n            Vector.rotate(pointA, bodyA.angle - constraint.angleA, pointA);\n            constraint.angleA = bodyA.angle;\n        }\n        \n        // update reference angle\n        if (bodyB && !bodyB.isStatic) {\n            Vector.rotate(pointB, bodyB.angle - constraint.angleB, pointB);\n            constraint.angleB = bodyB.angle;\n        }\n\n        var pointAWorld = pointA,\n            pointBWorld = pointB;\n\n        if (bodyA) pointAWorld = Vector.add(bodyA.position, pointA);\n        if (bodyB) pointBWorld = Vector.add(bodyB.position, pointB);\n\n        if (!pointAWorld || !pointBWorld)\n            return;\n\n        var delta = Vector.sub(pointAWorld, pointBWorld),\n            currentLength = Vector.magnitude(delta);\n\n        // prevent singularity\n        if (currentLength < Constraint._minLength) {\n            currentLength = Constraint._minLength;\n        }\n\n        // solve distance constraint with Gauss-Siedel method\n        var difference = (currentLength - constraint.length) / currentLength,\n            isRigid = constraint.stiffness >= 1 || constraint.length === 0,\n            stiffness = isRigid ? constraint.stiffness * timeScale \n                : constraint.stiffness * timeScale * timeScale,\n            damping = constraint.damping * timeScale,\n            force = Vector.mult(delta, difference * stiffness),\n            massTotal = (bodyA ? bodyA.inverseMass : 0) + (bodyB ? bodyB.inverseMass : 0),\n            inertiaTotal = (bodyA ? bodyA.inverseInertia : 0) + (bodyB ? bodyB.inverseInertia : 0),\n            resistanceTotal = massTotal + inertiaTotal,\n            torque,\n            share,\n            normal,\n            normalVelocity,\n            relativeVelocity;\n    \n        if (damping > 0) {\n            var zero = Vector.create();\n            normal = Vector.div(delta, currentLength);\n\n            relativeVelocity = Vector.sub(\n                bodyB && Vector.sub(bodyB.position, bodyB.positionPrev) || zero,\n                bodyA && Vector.sub(bodyA.position, bodyA.positionPrev) || zero\n            );\n\n            normalVelocity = Vector.dot(normal, relativeVelocity);\n        }\n\n        if (bodyA && !bodyA.isStatic) {\n            share = bodyA.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyA.constraintImpulse.x -= force.x * share;\n            bodyA.constraintImpulse.y -= force.y * share;\n\n            // apply forces\n            bodyA.position.x -= force.x * share;\n            bodyA.position.y -= force.y * share;\n\n            // apply damping\n            if (damping > 0) {\n                bodyA.positionPrev.x -= damping * normal.x * normalVelocity * share;\n                bodyA.positionPrev.y -= damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointA, force) / resistanceTotal) * Constraint._torqueDampen * bodyA.inverseInertia * (1 - constraint.angularStiffness);\n            bodyA.constraintImpulse.angle -= torque;\n            bodyA.angle -= torque;\n        }\n\n        if (bodyB && !bodyB.isStatic) {\n            share = bodyB.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyB.constraintImpulse.x += force.x * share;\n            bodyB.constraintImpulse.y += force.y * share;\n            \n            // apply forces\n            bodyB.position.x += force.x * share;\n            bodyB.position.y += force.y * share;\n\n            // apply damping\n            if (damping > 0) {\n                bodyB.positionPrev.x += damping * normal.x * normalVelocity * share;\n                bodyB.positionPrev.y += damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointB, force) / resistanceTotal) * Constraint._torqueDampen * bodyB.inverseInertia * (1 - constraint.angularStiffness);\n            bodyB.constraintImpulse.angle += torque;\n            bodyB.angle += torque;\n        }\n\n    };\n\n    /**\n     * Performs body updates required after solving constraints.\n     * @private\n     * @method postSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.postSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            Sleeping.set(body, false);\n\n            // update geometry and reset\n            for (var j = 0; j < body.parts.length; j++) {\n                var part = body.parts[j];\n                \n                Vertices.translate(part.vertices, impulse);\n\n                if (j > 0) {\n                    part.position.x += impulse.x;\n                    part.position.y += impulse.y;\n                }\n\n                if (impulse.angle !== 0) {\n                    Vertices.rotate(part.vertices, impulse.angle, body.position);\n                    Axes.rotate(part.axes, impulse.angle);\n                    if (j > 0) {\n                        Vector.rotateAbout(part.position, impulse.angle, body.position, part.position);\n                    }\n                }\n\n                Bounds.update(part.bounds, part.vertices, body.velocity);\n            }\n\n            // dampen the cached impulse for warming next step\n            impulse.angle *= Constraint._warming;\n            impulse.x *= Constraint._warming;\n            impulse.y *= Constraint._warming;\n        }\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointA`, accounting for `constraint.bodyA`.\n     * @method pointAWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointAWorld = function(constraint) {\n        return {\n            x: (constraint.bodyA ? constraint.bodyA.position.x : 0) \n                + (constraint.pointA ? constraint.pointA.x : 0),\n            y: (constraint.bodyA ? constraint.bodyA.position.y : 0) \n                + (constraint.pointA ? constraint.pointA.y : 0)\n        };\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointB`, accounting for `constraint.bodyB`.\n     * @method pointBWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointBWorld = function(constraint) {\n        return {\n            x: (constraint.bodyB ? constraint.bodyB.position.x : 0) \n                + (constraint.pointB ? constraint.pointB.x : 0),\n            y: (constraint.bodyB ? constraint.bodyB.position.y : 0) \n                + (constraint.pointB ? constraint.pointB.y : 0)\n        };\n    };\n\n    /**\n     * Returns the current length of the constraint. \n     * This is the distance between both of the constraint's end points.\n     * See `constraint.length` for the target rest length.\n     * @method currentLength\n     * @param {constraint} constraint\n     * @returns {number} the current length\n     */\n    Constraint.currentLength = function(constraint) {\n        var pointAX = (constraint.bodyA ? constraint.bodyA.position.x : 0) \n            + (constraint.pointA ? constraint.pointA.x : 0);\n\n        var pointAY = (constraint.bodyA ? constraint.bodyA.position.y : 0) \n            + (constraint.pointA ? constraint.pointA.y : 0);\n\n        var pointBX = (constraint.bodyB ? constraint.bodyB.position.x : 0) \n            + (constraint.pointB ? constraint.pointB.x : 0);\n            \n        var pointBY = (constraint.bodyB ? constraint.bodyB.position.y : 0) \n            + (constraint.pointB ? constraint.pointB.y : 0);\n\n        var deltaX = pointAX - pointBX;\n        var deltaY = pointAY - pointBY;\n\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    };\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Constraint\"\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the constraint should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the constraint outline.\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the constraint outline.\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the constraint rendering type. \n     * The possible values are 'line', 'pin', 'spring'.\n     * An appropriate render type will be automatically chosen unless one is given in options.\n     *\n     * @property render.type\n     * @type string\n     * @default 'line'\n     */\n\n    /**\n     * A `Boolean` that defines if the constraint's anchor points should be rendered.\n     *\n     * @property render.anchors\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * The first possible `Body` that this constraint is attached to.\n     *\n     * @property bodyA\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The second possible `Body` that this constraint is attached to.\n     *\n     * @property bodyB\n     * @type body\n     * @default null\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.\n     *\n     * @property pointA\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyB` if defined, otherwise a world-space position.\n     *\n     * @property pointB\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that specifies the stiffness of the constraint, i.e. the rate at which it returns to its resting `constraint.length`.\n     * A value of `1` means the constraint should be very stiff.\n     * A value of `0.2` means the constraint acts like a soft spring.\n     *\n     * @property stiffness\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the damping of the constraint, \n     * i.e. the amount of resistance applied to each body based on their velocities to limit the amount of oscillation.\n     * Damping will only be apparent when the constraint also has a very low `stiffness`.\n     * A value of `0.1` means the constraint will apply heavy damping, resulting in little to no oscillation.\n     * A value of `0` means the constraint will apply no damping.\n     *\n     * @property damping\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that specifies the target resting length of the constraint. \n     * It is calculated automatically in `Constraint.create` from initial positions of the `constraint.bodyA` and `constraint.bodyB`.\n     *\n     * @property length\n     * @type number\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Axes` module contains methods for creating and manipulating sets of axes.\n*\n* @class Axes\n*/\n\nvar Axes = {};\n\nmodule.exports = Axes;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of axes from the given vertices.\n     * @method fromVertices\n     * @param {vertices} vertices\n     * @return {axes} A new axes from the given vertices\n     */\n    Axes.fromVertices = function(vertices) {\n        var axes = {};\n\n        // find the unique axes, using edge normal gradients\n        for (var i = 0; i < vertices.length; i++) {\n            var j = (i + 1) % vertices.length, \n                normal = Vector.normalise({ \n                    x: vertices[j].y - vertices[i].y, \n                    y: vertices[i].x - vertices[j].x\n                }),\n                gradient = (normal.y === 0) ? Infinity : (normal.x / normal.y);\n            \n            // limit precision\n            gradient = gradient.toFixed(3).toString();\n            axes[gradient] = normal;\n        }\n\n        return Common.values(axes);\n    };\n\n    /**\n     * Rotates a set of axes by the given angle.\n     * @method rotate\n     * @param {axes} axes\n     * @param {number} angle\n     */\n    Axes.rotate = function(axes, angle) {\n        if (angle === 0)\n            return;\n        \n        var cos = Math.cos(angle),\n            sin = Math.sin(angle);\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i],\n                xx;\n            xx = axis.x * cos - axis.y * sin;\n            axis.y = axis.x * sin + axis.y * cos;\n            axis.x = xx;\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Bodies` module contains factory methods for creating rigid body models \n* with commonly used body configurations (such as rectangles, circles and other polygons).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Bodies\n*/\n\n// TODO: true circle bodies\n\nvar Bodies = {};\n\nmodule.exports = Bodies;\n\nvar Vertices = __webpack_require__(3);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(4);\nvar Bounds = __webpack_require__(1);\nvar Vector = __webpack_require__(2);\n\n(function() {\n\n    /**\n     * Creates a new rigid body model with a rectangle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method rectangle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {object} [options]\n     * @return {body} A new rectangle body\n     */\n    Bodies.rectangle = function(x, y, width, height, options) {\n        options = options || {};\n\n        var rectangle = { \n            label: 'Rectangle Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath('L 0 0 L ' + width + ' 0 L ' + width + ' ' + height + ' L 0 ' + height)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            rectangle.vertices = Vertices.chamfer(rectangle.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, rectangle, options));\n    };\n    \n    /**\n     * Creates a new rigid body model with a trapezoid hull. \n     * The `slope` is parameterised as a fraction of `width` and must be < 1 to form a valid trapezoid. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method trapezoid\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} slope Must be a number < 1.\n     * @param {object} [options]\n     * @return {body} A new trapezoid body\n     */\n    Bodies.trapezoid = function(x, y, width, height, slope, options) {\n        options = options || {};\n\n        if (slope >= 1) {\n            Common.warn('Bodies.trapezoid: slope parameter must be < 1.');\n        }\n\n        slope *= 0.5;\n        var roof = (1 - (slope * 2)) * width;\n        \n        var x1 = width * slope,\n            x2 = x1 + roof,\n            x3 = x2 + x1,\n            verticesPath;\n\n        if (slope < 0.5) {\n            verticesPath = 'L 0 0 L ' + x1 + ' ' + (-height) + ' L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        } else {\n            verticesPath = 'L 0 0 L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        }\n\n        var trapezoid = { \n            label: 'Trapezoid Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(verticesPath)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            trapezoid.vertices = Vertices.chamfer(trapezoid.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, trapezoid, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a circle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method circle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} radius\n     * @param {object} [options]\n     * @param {number} [maxSides]\n     * @return {body} A new circle body\n     */\n    Bodies.circle = function(x, y, radius, options, maxSides) {\n        options = options || {};\n\n        var circle = {\n            label: 'Circle Body',\n            circleRadius: radius\n        };\n        \n        // approximate circles with polygons until true circles implemented in SAT\n        maxSides = maxSides || 25;\n        var sides = Math.ceil(Math.max(10, Math.min(maxSides, radius)));\n\n        // optimisation: always use even number of sides (half the number of unique axes)\n        if (sides % 2 === 1)\n            sides += 1;\n\n        return Bodies.polygon(x, y, sides, radius, Common.extend({}, circle, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a regular polygon hull with the given number of sides. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method polygon\n     * @param {number} x\n     * @param {number} y\n     * @param {number} sides\n     * @param {number} radius\n     * @param {object} [options]\n     * @return {body} A new regular polygon body\n     */\n    Bodies.polygon = function(x, y, sides, radius, options) {\n        options = options || {};\n\n        if (sides < 3)\n            return Bodies.circle(x, y, radius, options);\n\n        var theta = 2 * Math.PI / sides,\n            path = '',\n            offset = theta * 0.5;\n\n        for (var i = 0; i < sides; i += 1) {\n            var angle = offset + (i * theta),\n                xx = Math.cos(angle) * radius,\n                yy = Math.sin(angle) * radius;\n\n            path += 'L ' + xx.toFixed(3) + ' ' + yy.toFixed(3) + ' ';\n        }\n\n        var polygon = { \n            label: 'Polygon Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(path)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            polygon.vertices = Vertices.chamfer(polygon.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, polygon, options));\n    };\n\n    /**\n     * Utility to create a compound body based on set(s) of vertices.\n     * \n     * _Note:_ To optionally enable automatic concave vertices decomposition the [poly-decomp](https://github.com/schteppe/poly-decomp.js) \n     * package must be first installed and provided see `Common.setDecomp`, otherwise the convex hull of each vertex set will be used.\n     * \n     * The resulting vertices are reorientated about their centre of mass,\n     * and offset such that `body.position` corresponds to this point.\n     * \n     * The resulting offset may be found if needed by subtracting `body.bounds` from the original input bounds.\n     * To later move the centre of mass see `Body.setCentre`.\n     * \n     * Note that automatic conconcave decomposition results are not always optimal. \n     * For best results, simplify the input vertices as much as possible first.\n     * By default this function applies some addtional simplification to help.\n     * \n     * Some outputs may also require further manual processing afterwards to be robust.\n     * In particular some parts may need to be overlapped to avoid collision gaps.\n     * Thin parts and sharp points should be avoided or removed where possible.\n     *\n     * The options parameter object specifies any `Matter.Body` properties you wish to override the defaults.\n     * \n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method fromVertices\n     * @param {number} x\n     * @param {number} y\n     * @param {array} vertexSets One or more arrays of vertex points e.g. `[[{ x: 0, y: 0 }...], ...]`.\n     * @param {object} [options] The body options.\n     * @param {bool} [flagInternal=false] Optionally marks internal edges with `isInternal`.\n     * @param {number} [removeCollinear=0.01] Threshold when simplifying vertices along the same edge.\n     * @param {number} [minimumArea=10] Threshold when removing small parts.\n     * @param {number} [removeDuplicatePoints=0.01] Threshold when simplifying nearby vertices.\n     * @return {body}\n     */\n    Bodies.fromVertices = function(x, y, vertexSets, options, flagInternal, removeCollinear, minimumArea, removeDuplicatePoints) {\n        var decomp = Common.getDecomp(),\n            canDecomp,\n            body,\n            parts,\n            isConvex,\n            isConcave,\n            vertices,\n            i,\n            j,\n            k,\n            v,\n            z;\n\n        // check decomp is as expected\n        canDecomp = Boolean(decomp && decomp.quickDecomp);\n\n        options = options || {};\n        parts = [];\n\n        flagInternal = typeof flagInternal !== 'undefined' ? flagInternal : false;\n        removeCollinear = typeof removeCollinear !== 'undefined' ? removeCollinear : 0.01;\n        minimumArea = typeof minimumArea !== 'undefined' ? minimumArea : 10;\n        removeDuplicatePoints = typeof removeDuplicatePoints !== 'undefined' ? removeDuplicatePoints : 0.01;\n\n        // ensure vertexSets is an array of arrays\n        if (!Common.isArray(vertexSets[0])) {\n            vertexSets = [vertexSets];\n        }\n\n        for (v = 0; v < vertexSets.length; v += 1) {\n            vertices = vertexSets[v];\n            isConvex = Vertices.isConvex(vertices);\n            isConcave = !isConvex;\n\n            if (isConcave && !canDecomp) {\n                Common.warnOnce(\n                    'Bodies.fromVertices: Install the \\'poly-decomp\\' library and use Common.setDecomp or provide \\'decomp\\' as a global to decompose concave vertices.'\n                );\n            }\n\n            if (isConvex || !canDecomp) {\n                if (isConvex) {\n                    vertices = Vertices.clockwiseSort(vertices);\n                } else {\n                    // fallback to convex hull when decomposition is not possible\n                    vertices = Vertices.hull(vertices);\n                }\n\n                parts.push({\n                    position: { x: x, y: y },\n                    vertices: vertices\n                });\n            } else {\n                // initialise a decomposition\n                var concave = vertices.map(function(vertex) {\n                    return [vertex.x, vertex.y];\n                });\n\n                // vertices are concave and simple, we can decompose into parts\n                decomp.makeCCW(concave);\n                if (removeCollinear !== false)\n                    decomp.removeCollinearPoints(concave, removeCollinear);\n                if (removeDuplicatePoints !== false && decomp.removeDuplicatePoints)\n                    decomp.removeDuplicatePoints(concave, removeDuplicatePoints);\n\n                // use the quick decomposition algorithm (Bayazit)\n                var decomposed = decomp.quickDecomp(concave);\n\n                // for each decomposed chunk\n                for (i = 0; i < decomposed.length; i++) {\n                    var chunk = decomposed[i];\n\n                    // convert vertices into the correct structure\n                    var chunkVertices = chunk.map(function(vertices) {\n                        return {\n                            x: vertices[0],\n                            y: vertices[1]\n                        };\n                    });\n\n                    // skip small chunks\n                    if (minimumArea > 0 && Vertices.area(chunkVertices) < minimumArea)\n                        continue;\n\n                    // create a compound part\n                    parts.push({\n                        position: Vertices.centre(chunkVertices),\n                        vertices: chunkVertices\n                    });\n                }\n            }\n        }\n\n        // create body parts\n        for (i = 0; i < parts.length; i++) {\n            parts[i] = Body.create(Common.extend(parts[i], options));\n        }\n\n        // flag internal edges (coincident part edges)\n        if (flagInternal) {\n            var coincident_max_dist = 5;\n\n            for (i = 0; i < parts.length; i++) {\n                var partA = parts[i];\n\n                for (j = i + 1; j < parts.length; j++) {\n                    var partB = parts[j];\n\n                    if (Bounds.overlaps(partA.bounds, partB.bounds)) {\n                        var pav = partA.vertices,\n                            pbv = partB.vertices;\n\n                        // iterate vertices of both parts\n                        for (k = 0; k < partA.vertices.length; k++) {\n                            for (z = 0; z < partB.vertices.length; z++) {\n                                // find distances between the vertices\n                                var da = Vector.magnitudeSquared(Vector.sub(pav[(k + 1) % pav.length], pbv[z])),\n                                    db = Vector.magnitudeSquared(Vector.sub(pav[k], pbv[(z + 1) % pbv.length]));\n\n                                // if both vertices are very close, consider the edge concident (internal)\n                                if (da < coincident_max_dist && db < coincident_max_dist) {\n                                    pav[k].isInternal = true;\n                                    pbv[z].isInternal = true;\n                                }\n                            }\n                        }\n\n                    }\n                }\n            }\n        }\n\n        if (parts.length > 1) {\n            // create the parent body to be returned, that contains generated compound parts\n            body = Body.create(Common.extend({ parts: parts.slice(0) }, options));\n\n            // offset such that body.position is at the centre off mass\n            Body.setPosition(body, { x: x, y: y });\n\n            return body;\n        } else {\n            return parts[0];\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Detector` module contains methods for efficiently detecting collisions between a list of bodies using a broadphase algorithm.\n*\n* @class Detector\n*/\n\nvar Detector = {};\n\nmodule.exports = Detector;\n\nvar Common = __webpack_require__(0);\nvar Collision = __webpack_require__(8);\n\n(function() {\n\n    /**\n     * Creates a new collision detector.\n     * @method create\n     * @param {} options\n     * @return {detector} A new collision detector\n     */\n    Detector.create = function(options) {\n        var defaults = {\n            bodies: [],\n            collisions: [],\n            pairs: null\n        };\n\n        return Common.extend(defaults, options);\n    };\n\n    /**\n     * Sets the list of bodies in the detector.\n     * @method setBodies\n     * @param {detector} detector\n     * @param {body[]} bodies\n     */\n    Detector.setBodies = function(detector, bodies) {\n        detector.bodies = bodies.slice(0);\n    };\n\n    /**\n     * Clears the detector including its list of bodies.\n     * @method clear\n     * @param {detector} detector\n     */\n    Detector.clear = function(detector) {\n        detector.bodies = [];\n        detector.collisions = [];\n    };\n\n    /**\n     * Efficiently finds all collisions among all the bodies in `detector.bodies` using a broadphase algorithm.\n     * \n     * _Note:_ The specific ordering of collisions returned is not guaranteed between releases and may change for performance reasons.\n     * If a specific ordering is required then apply a sort to the resulting array.\n     * @method collisions\n     * @param {detector} detector\n     * @return {collision[]} collisions\n     */\n    Detector.collisions = function(detector) {\n        var pairs = detector.pairs,\n            bodies = detector.bodies,\n            bodiesLength = bodies.length,\n            canCollide = Detector.canCollide,\n            collides = Collision.collides,\n            collisions = detector.collisions,\n            collisionIndex = 0,\n            i,\n            j;\n\n        bodies.sort(Detector._compareBoundsX);\n\n        for (i = 0; i < bodiesLength; i++) {\n            var bodyA = bodies[i],\n                boundsA = bodyA.bounds,\n                boundXMax = bodyA.bounds.max.x,\n                boundYMax = bodyA.bounds.max.y,\n                boundYMin = bodyA.bounds.min.y,\n                bodyAStatic = bodyA.isStatic || bodyA.isSleeping,\n                partsALength = bodyA.parts.length,\n                partsASingle = partsALength === 1;\n\n            for (j = i + 1; j < bodiesLength; j++) {\n                var bodyB = bodies[j],\n                    boundsB = bodyB.bounds;\n\n                if (boundsB.min.x > boundXMax) {\n                    break;\n                }\n\n                if (boundYMax < boundsB.min.y || boundYMin > boundsB.max.y) {\n                    continue;\n                }\n\n                if (bodyAStatic && (bodyB.isStatic || bodyB.isSleeping)) {\n                    continue;\n                }\n\n                if (!canCollide(bodyA.collisionFilter, bodyB.collisionFilter)) {\n                    continue;\n                }\n\n                var partsBLength = bodyB.parts.length;\n\n                if (partsASingle && partsBLength === 1) {\n                    var collision = collides(bodyA, bodyB, pairs);\n\n                    if (collision) {\n                        collisions[collisionIndex++] = collision;\n                    }\n                } else {\n                    var partsAStart = partsALength > 1 ? 1 : 0,\n                        partsBStart = partsBLength > 1 ? 1 : 0;\n                    \n                    for (var k = partsAStart; k < partsALength; k++) {\n                        var partA = bodyA.parts[k],\n                            boundsA = partA.bounds;\n\n                        for (var z = partsBStart; z < partsBLength; z++) {\n                            var partB = bodyB.parts[z],\n                                boundsB = partB.bounds;\n\n                            if (boundsA.min.x > boundsB.max.x || boundsA.max.x < boundsB.min.x\n                                || boundsA.max.y < boundsB.min.y || boundsA.min.y > boundsB.max.y) {\n                                continue;\n                            }\n\n                            var collision = collides(partA, partB, pairs);\n\n                            if (collision) {\n                                collisions[collisionIndex++] = collision;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (collisions.length !== collisionIndex) {\n            collisions.length = collisionIndex;\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns `true` if both supplied collision filters will allow a collision to occur.\n     * See `body.collisionFilter` for more information.\n     * @method canCollide\n     * @param {} filterA\n     * @param {} filterB\n     * @return {bool} `true` if collision can occur\n     */\n    Detector.canCollide = function(filterA, filterB) {\n        if (filterA.group === filterB.group && filterA.group !== 0)\n            return filterA.group > 0;\n\n        return (filterA.mask & filterB.category) !== 0 && (filterB.mask & filterA.category) !== 0;\n    };\n\n    /**\n     * The comparison function used in the broadphase algorithm.\n     * Returns the signed delta of the bodies bounds on the x-axis.\n     * @private\n     * @method _sortCompare\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @return {number} The signed delta used for sorting\n     */\n    Detector._compareBoundsX = function(bodyA, bodyB) {\n        return bodyA.bounds.min.x - bodyB.bounds.min.x;\n    };\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * The array of `Matter.Body` between which the detector finds collisions.\n     * \n     * _Note:_ The order of bodies in this array _is not fixed_ and will be continually managed by the detector.\n     * @property bodies\n     * @type body[]\n     * @default []\n     */\n\n    /**\n     * The array of `Matter.Collision` found in the last call to `Detector.collisions` on this detector.\n     * @property collisions\n     * @type collision[]\n     * @default []\n     */\n\n    /**\n     * Optional. A `Matter.Pairs` object from which previous collision objects may be reused. Intended for internal `Matter.Engine` usage.\n     * @property pairs\n     * @type {pairs|null}\n     * @default null\n     */\n\n})();\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Mouse` module contains methods for creating and manipulating mouse inputs.\n*\n* @class Mouse\n*/\n\nvar Mouse = {};\n\nmodule.exports = Mouse;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a mouse input.\n     * @method create\n     * @param {HTMLElement} element\n     * @return {mouse} A new mouse\n     */\n    Mouse.create = function(element) {\n        var mouse = {};\n\n        if (!element) {\n            Common.log('Mouse.create: element was undefined, defaulting to document.body', 'warn');\n        }\n        \n        mouse.element = element || document.body;\n        mouse.absolute = { x: 0, y: 0 };\n        mouse.position = { x: 0, y: 0 };\n        mouse.mousedownPosition = { x: 0, y: 0 };\n        mouse.mouseupPosition = { x: 0, y: 0 };\n        mouse.offset = { x: 0, y: 0 };\n        mouse.scale = { x: 1, y: 1 };\n        mouse.wheelDelta = 0;\n        mouse.button = -1;\n        mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n        mouse.sourceEvents = {\n            mousemove: null,\n            mousedown: null,\n            mouseup: null,\n            mousewheel: null\n        };\n        \n        mouse.mousemove = function(event) { \n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.sourceEvents.mousemove = event;\n        };\n        \n        mouse.mousedown = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            } else {\n                mouse.button = event.button;\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mousedownPosition.x = mouse.position.x;\n            mouse.mousedownPosition.y = mouse.position.y;\n            mouse.sourceEvents.mousedown = event;\n        };\n        \n        mouse.mouseup = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                event.preventDefault();\n            }\n            \n            mouse.button = -1;\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mouseupPosition.x = mouse.position.x;\n            mouse.mouseupPosition.y = mouse.position.y;\n            mouse.sourceEvents.mouseup = event;\n        };\n\n        mouse.mousewheel = function(event) {\n            mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n            event.preventDefault();\n            mouse.sourceEvents.mousewheel = event;\n        };\n\n        Mouse.setElement(mouse, mouse.element);\n\n        return mouse;\n    };\n\n    /**\n     * Sets the element the mouse is bound to (and relative to).\n     * @method setElement\n     * @param {mouse} mouse\n     * @param {HTMLElement} element\n     */\n    Mouse.setElement = function(mouse, element) {\n        mouse.element = element;\n\n        element.addEventListener('mousemove', mouse.mousemove, { passive: true });\n        element.addEventListener('mousedown', mouse.mousedown, { passive: true });\n        element.addEventListener('mouseup', mouse.mouseup, { passive: true });\n        \n        element.addEventListener('wheel', mouse.mousewheel, { passive: false });\n        \n        element.addEventListener('touchmove', mouse.mousemove, { passive: false });\n        element.addEventListener('touchstart', mouse.mousedown, { passive: false });\n        element.addEventListener('touchend', mouse.mouseup, { passive: false });\n    };\n\n    /**\n     * Clears all captured source events.\n     * @method clearSourceEvents\n     * @param {mouse} mouse\n     */\n    Mouse.clearSourceEvents = function(mouse) {\n        mouse.sourceEvents.mousemove = null;\n        mouse.sourceEvents.mousedown = null;\n        mouse.sourceEvents.mouseup = null;\n        mouse.sourceEvents.mousewheel = null;\n        mouse.wheelDelta = 0;\n    };\n\n    /**\n     * Sets the mouse position offset.\n     * @method setOffset\n     * @param {mouse} mouse\n     * @param {vector} offset\n     */\n    Mouse.setOffset = function(mouse, offset) {\n        mouse.offset.x = offset.x;\n        mouse.offset.y = offset.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n\n    /**\n     * Sets the mouse position scale.\n     * @method setScale\n     * @param {mouse} mouse\n     * @param {vector} scale\n     */\n    Mouse.setScale = function(mouse, scale) {\n        mouse.scale.x = scale.x;\n        mouse.scale.y = scale.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n    \n    /**\n     * Gets the mouse position relative to an element given a screen pixel ratio.\n     * @method _getRelativeMousePosition\n     * @private\n     * @param {} event\n     * @param {} element\n     * @param {number} pixelRatio\n     * @return {}\n     */\n    Mouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n        var elementBounds = element.getBoundingClientRect(),\n            rootNode = (document.documentElement || document.body.parentNode || document.body),\n            scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n            scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n            touches = event.changedTouches,\n            x, y;\n        \n        if (touches) {\n            x = touches[0].pageX - elementBounds.left - scrollX;\n            y = touches[0].pageY - elementBounds.top - scrollY;\n        } else {\n            x = event.pageX - elementBounds.left - scrollX;\n            y = event.pageY - elementBounds.top - scrollY;\n        }\n\n        return { \n            x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n            y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n        };\n    };\n\n})();\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Plugin` module contains functions for registering and installing plugins on modules.\n*\n* @class Plugin\n*/\n\nvar Plugin = {};\n\nmodule.exports = Plugin;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Plugin._registry = {};\n\n    /**\n     * Registers a plugin object so it can be resolved later by name.\n     * @method register\n     * @param plugin {} The plugin to register.\n     * @return {object} The plugin.\n     */\n    Plugin.register = function(plugin) {\n        if (!Plugin.isPlugin(plugin)) {\n            Common.warn('Plugin.register:', Plugin.toString(plugin), 'does not implement all required fields.');\n        }\n\n        if (plugin.name in Plugin._registry) {\n            var registered = Plugin._registry[plugin.name],\n                pluginVersion = Plugin.versionParse(plugin.version).number,\n                registeredVersion = Plugin.versionParse(registered.version).number;\n\n            if (pluginVersion > registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'was upgraded to', Plugin.toString(plugin));\n                Plugin._registry[plugin.name] = plugin;\n            } else if (pluginVersion < registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'can not be downgraded to', Plugin.toString(plugin));\n            } else if (plugin !== registered) {\n                Common.warn('Plugin.register:', Plugin.toString(plugin), 'is already registered to different plugin object');\n            }\n        } else {\n            Plugin._registry[plugin.name] = plugin;\n        }\n\n        return plugin;\n    };\n\n    /**\n     * Resolves a dependency to a plugin object from the registry if it exists. \n     * The `dependency` may contain a version, but only the name matters when resolving.\n     * @method resolve\n     * @param dependency {string} The dependency.\n     * @return {object} The plugin if resolved, otherwise `undefined`.\n     */\n    Plugin.resolve = function(dependency) {\n        return Plugin._registry[Plugin.dependencyParse(dependency).name];\n    };\n\n    /**\n     * Returns a pretty printed plugin name and version.\n     * @method toString\n     * @param plugin {} The plugin.\n     * @return {string} Pretty printed plugin name and version.\n     */\n    Plugin.toString = function(plugin) {\n        return typeof plugin === 'string' ? plugin : (plugin.name || 'anonymous') + '@' + (plugin.version || plugin.range || '0.0.0');\n    };\n\n    /**\n     * Returns `true` if the object meets the minimum standard to be considered a plugin.\n     * This means it must define the following properties:\n     * - `name`\n     * - `version`\n     * - `install`\n     * @method isPlugin\n     * @param obj {} The obj to test.\n     * @return {boolean} `true` if the object can be considered a plugin otherwise `false`.\n     */\n    Plugin.isPlugin = function(obj) {\n        return obj && obj.name && obj.version && obj.install;\n    };\n\n    /**\n     * Returns `true` if a plugin with the given `name` been installed on `module`.\n     * @method isUsed\n     * @param module {} The module.\n     * @param name {string} The plugin name.\n     * @return {boolean} `true` if a plugin with the given `name` been installed on `module`, otherwise `false`.\n     */\n    Plugin.isUsed = function(module, name) {\n        return module.used.indexOf(name) > -1;\n    };\n\n    /**\n     * Returns `true` if `plugin.for` is applicable to `module` by comparing against `module.name` and `module.version`.\n     * If `plugin.for` is not specified then it is assumed to be applicable.\n     * The value of `plugin.for` is a string of the format `'module-name'` or `'module-name@version'`.\n     * @method isFor\n     * @param plugin {} The plugin.\n     * @param module {} The module.\n     * @return {boolean} `true` if `plugin.for` is applicable to `module`, otherwise `false`.\n     */\n    Plugin.isFor = function(plugin, module) {\n        var parsed = plugin.for && Plugin.dependencyParse(plugin.for);\n        return !plugin.for || (module.name === parsed.name && Plugin.versionSatisfies(module.version, parsed.range));\n    };\n\n    /**\n     * Installs the plugins by calling `plugin.install` on each plugin specified in `plugins` if passed, otherwise `module.uses`.\n     * For installing plugins on `Matter` see the convenience function `Matter.use`.\n     * Plugins may be specified either by their name or a reference to the plugin object.\n     * Plugins themselves may specify further dependencies, but each plugin is installed only once.\n     * Order is important, a topological sort is performed to find the best resulting order of installation.\n     * This sorting attempts to satisfy every dependency's requested ordering, but may not be exact in all cases.\n     * This function logs the resulting status of each dependency in the console, along with any warnings.\n     * - A green tick  indicates a dependency was resolved and installed.\n     * - An orange diamond  indicates a dependency was resolved but a warning was thrown for it or one if its dependencies.\n     * - A red cross  indicates a dependency could not be resolved.\n     * Avoid calling this function multiple times on the same module unless you intend to manually control installation order.\n     * @method use\n     * @param module {} The module install plugins on.\n     * @param [plugins=module.uses] {} The plugins to install on module (optional, defaults to `module.uses`).\n     */\n    Plugin.use = function(module, plugins) {\n        module.uses = (module.uses || []).concat(plugins || []);\n\n        if (module.uses.length === 0) {\n            Common.warn('Plugin.use:', Plugin.toString(module), 'does not specify any dependencies to install.');\n            return;\n        }\n\n        var dependencies = Plugin.dependencies(module),\n            sortedDependencies = Common.topologicalSort(dependencies),\n            status = [];\n\n        for (var i = 0; i < sortedDependencies.length; i += 1) {\n            if (sortedDependencies[i] === module.name) {\n                continue;\n            }\n\n            var plugin = Plugin.resolve(sortedDependencies[i]);\n\n            if (!plugin) {\n                status.push(' ' + sortedDependencies[i]);\n                continue;\n            }\n\n            if (Plugin.isUsed(module, plugin.name)) {\n                continue;\n            }\n\n            if (!Plugin.isFor(plugin, module)) {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'is for', plugin.for, 'but installed on', Plugin.toString(module) + '.');\n                plugin._warned = true;\n            }\n\n            if (plugin.install) {\n                plugin.install(module);\n            } else {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'does not specify an install function.');\n                plugin._warned = true;\n            }\n\n            if (plugin._warned) {\n                status.push(' ' + Plugin.toString(plugin));\n                delete plugin._warned;\n            } else {\n                status.push(' ' + Plugin.toString(plugin));\n            }\n\n            module.used.push(plugin.name);\n        }\n\n        if (status.length > 0) {\n            Common.info(status.join('  '));\n        }\n    };\n\n    /**\n     * Recursively finds all of a module's dependencies and returns a flat dependency graph.\n     * @method dependencies\n     * @param module {} The module.\n     * @return {object} A dependency graph.\n     */\n    Plugin.dependencies = function(module, tracked) {\n        var parsedBase = Plugin.dependencyParse(module),\n            name = parsedBase.name;\n\n        tracked = tracked || {};\n\n        if (name in tracked) {\n            return;\n        }\n\n        module = Plugin.resolve(module) || module;\n\n        tracked[name] = Common.map(module.uses || [], function(dependency) {\n            if (Plugin.isPlugin(dependency)) {\n                Plugin.register(dependency);\n            }\n\n            var parsed = Plugin.dependencyParse(dependency),\n                resolved = Plugin.resolve(dependency);\n\n            if (resolved && !Plugin.versionSatisfies(resolved.version, parsed.range)) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(resolved), 'does not satisfy',\n                    Plugin.toString(parsed), 'used by', Plugin.toString(parsedBase) + '.'\n                );\n\n                resolved._warned = true;\n                module._warned = true;\n            } else if (!resolved) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(dependency), 'used by',\n                    Plugin.toString(parsedBase), 'could not be resolved.'\n                );\n\n                module._warned = true;\n            }\n\n            return parsed.name;\n        });\n\n        for (var i = 0; i < tracked[name].length; i += 1) {\n            Plugin.dependencies(tracked[name][i], tracked);\n        }\n\n        return tracked;\n    };\n\n    /**\n     * Parses a dependency string into its components.\n     * The `dependency` is a string of the format `'module-name'` or `'module-name@version'`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * This function can also handle dependencies that are already resolved (e.g. a module object).\n     * @method dependencyParse\n     * @param dependency {string} The dependency of the format `'module-name'` or `'module-name@version'`.\n     * @return {object} The dependency parsed into its components.\n     */\n    Plugin.dependencyParse = function(dependency) {\n        if (Common.isString(dependency)) {\n            var pattern = /^[\\w-]+(@(\\*|[\\^~]?\\d+\\.\\d+\\.\\d+(-[0-9A-Za-z-+]+)?))?$/;\n\n            if (!pattern.test(dependency)) {\n                Common.warn('Plugin.dependencyParse:', dependency, 'is not a valid dependency string.');\n            }\n\n            return {\n                name: dependency.split('@')[0],\n                range: dependency.split('@')[1] || '*'\n            };\n        }\n\n        return {\n            name: dependency.name,\n            range: dependency.range || dependency.version\n        };\n    };\n\n    /**\n     * Parses a version string into its components.  \n     * Versions are strictly of the format `x.y.z` (as in [semver](http://semver.org/)).\n     * Versions may optionally have a prerelease tag in the format `x.y.z-alpha`.\n     * Ranges are a strict subset of [npm ranges](https://docs.npmjs.com/misc/semver#advanced-range-syntax).\n     * Only the following range types are supported:\n     * - Tilde ranges e.g. `~1.2.3`\n     * - Caret ranges e.g. `^1.2.3`\n     * - Greater than ranges e.g. `>1.2.3`\n     * - Greater than or equal ranges e.g. `>=1.2.3`\n     * - Exact version e.g. `1.2.3`\n     * - Any version `*`\n     * @method versionParse\n     * @param range {string} The version string.\n     * @return {object} The version range parsed into its components.\n     */\n    Plugin.versionParse = function(range) {\n        var pattern = /^(\\*)|(\\^|~|>=|>)?\\s*((\\d+)\\.(\\d+)\\.(\\d+))(-[0-9A-Za-z-+]+)?$/;\n\n        if (!pattern.test(range)) {\n            Common.warn('Plugin.versionParse:', range, 'is not a valid version or range.');\n        }\n\n        var parts = pattern.exec(range);\n        var major = Number(parts[4]);\n        var minor = Number(parts[5]);\n        var patch = Number(parts[6]);\n\n        return {\n            isRange: Boolean(parts[1] || parts[2]),\n            version: parts[3],\n            range: range,\n            operator: parts[1] || parts[2] || '',\n            major: major,\n            minor: minor,\n            patch: patch,\n            parts: [major, minor, patch],\n            prerelease: parts[7],\n            number: major * 1e8 + minor * 1e4 + patch\n        };\n    };\n\n    /**\n     * Returns `true` if `version` satisfies the given `range`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * If a version or range is not specified, then any version (`*`) is assumed to satisfy.\n     * @method versionSatisfies\n     * @param version {string} The version string.\n     * @param range {string} The range string.\n     * @return {boolean} `true` if `version` satisfies `range`, otherwise `false`.\n     */\n    Plugin.versionSatisfies = function(version, range) {\n        range = range || '*';\n\n        var r = Plugin.versionParse(range),\n            v = Plugin.versionParse(version);\n\n        if (r.isRange) {\n            if (r.operator === '*' || version === '*') {\n                return true;\n            }\n\n            if (r.operator === '>') {\n                return v.number > r.number;\n            }\n\n            if (r.operator === '>=') {\n                return v.number >= r.number;\n            }\n\n            if (r.operator === '~') {\n                return v.major === r.major && v.minor === r.minor && v.patch >= r.patch;\n            }\n\n            if (r.operator === '^') {\n                if (r.major > 0) {\n                    return v.major === r.major && v.number >= r.number;\n                }\n\n                if (r.minor > 0) {\n                    return v.minor === r.minor && v.patch >= r.patch;\n                }\n\n                return v.patch === r.patch;\n            }\n        }\n\n        return version === range || version === '*';\n    };\n\n})();\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Contact` module contains methods for creating and manipulating collision contacts.\n*\n* @class Contact\n*/\n\nvar Contact = {};\n\nmodule.exports = Contact;\n\n(function() {\n\n    /**\n     * Creates a new contact.\n     * @method create\n     * @param {vertex} [vertex]\n     * @return {contact} A new contact\n     */\n    Contact.create = function(vertex) {\n        return {\n            vertex: vertex,\n            normalImpulse: 0,\n            tangentImpulse: 0\n        };\n    };\n\n})();\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Engine` module contains methods for creating and manipulating engines.\n* An engine is a controller that manages updating the simulation of the world.\n* See `Matter.Runner` for an optional game loop utility.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Engine\n*/\n\nvar Engine = {};\n\nmodule.exports = Engine;\n\nvar Sleeping = __webpack_require__(7);\nvar Resolver = __webpack_require__(18);\nvar Detector = __webpack_require__(13);\nvar Pairs = __webpack_require__(19);\nvar Events = __webpack_require__(5);\nvar Composite = __webpack_require__(6);\nvar Constraint = __webpack_require__(10);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(4);\n\n(function() {\n\n    Engine._deltaMax = 1000 / 60;\n\n    /**\n     * Creates a new engine. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {engine} engine\n     */\n    Engine.create = function(options) {\n        options = options || {};\n\n        var defaults = {\n            positionIterations: 6,\n            velocityIterations: 4,\n            constraintIterations: 2,\n            enableSleeping: false,\n            events: [],\n            plugin: {},\n            gravity: {\n                x: 0,\n                y: 1,\n                scale: 0.001\n            },\n            timing: {\n                timestamp: 0,\n                timeScale: 1,\n                lastDelta: 0,\n                lastElapsed: 0,\n                lastUpdatesPerFrame: 0\n            }\n        };\n\n        var engine = Common.extend(defaults, options);\n\n        engine.world = options.world || Composite.create({ label: 'World' });\n        engine.pairs = options.pairs || Pairs.create();\n        engine.detector = options.detector || Detector.create();\n        engine.detector.pairs = engine.pairs;\n\n        // for temporary back compatibility only\n        engine.grid = { buckets: [] };\n        engine.world.gravity = engine.gravity;\n        engine.broadphase = engine.grid;\n        engine.metrics = {};\n        \n        return engine;\n    };\n\n    /**\n     * Moves the simulation forward in time by `delta` milliseconds.\n     * Triggers `beforeUpdate`, `beforeSolve` and `afterUpdate` events.\n     * Triggers `collisionStart`, `collisionActive` and `collisionEnd` events.\n     * @method update\n     * @param {engine} engine\n     * @param {number} [delta=16.666]\n     */\n    Engine.update = function(engine, delta) {\n        var startTime = Common.now();\n\n        var world = engine.world,\n            detector = engine.detector,\n            pairs = engine.pairs,\n            timing = engine.timing,\n            timestamp = timing.timestamp,\n            i;\n\n        // warn if high delta\n        if (delta > Engine._deltaMax) {\n            Common.warnOnce(\n                'Matter.Engine.update: delta argument is recommended to be less than or equal to', Engine._deltaMax.toFixed(3), 'ms.'\n            );\n        }\n\n        delta = typeof delta !== 'undefined' ? delta : Common._baseDelta;\n        delta *= timing.timeScale;\n\n        // increment timestamp\n        timing.timestamp += delta;\n        timing.lastDelta = delta;\n\n        // create an event object\n        var event = {\n            timestamp: timing.timestamp,\n            delta: delta\n        };\n\n        Events.trigger(engine, 'beforeUpdate', event);\n\n        // get all bodies and all constraints in the world\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world);\n\n        // if the world has changed\n        if (world.isModified) {\n            // update the detector bodies\n            Detector.setBodies(detector, allBodies);\n\n            // reset all composite modified flags\n            Composite.setModified(world, false, false, true);\n        }\n\n        // update sleeping if enabled\n        if (engine.enableSleeping)\n            Sleeping.update(allBodies, delta);\n\n        // apply gravity to all bodies\n        Engine._bodiesApplyGravity(allBodies, engine.gravity);\n\n        // update all body position and rotation by integration\n        if (delta > 0) {\n            Engine._bodiesUpdate(allBodies, delta);\n        }\n\n        Events.trigger(engine, 'beforeSolve', event);\n\n        // update all constraints (first pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, delta);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // find all collisions\n        var collisions = Detector.collisions(detector);\n\n        // update collision pairs\n        Pairs.update(pairs, collisions, timestamp);\n\n        // wake up bodies involved in collisions\n        if (engine.enableSleeping)\n            Sleeping.afterCollisions(pairs.list);\n\n        // trigger collision events\n        if (pairs.collisionStart.length > 0) {\n            Events.trigger(engine, 'collisionStart', { \n                pairs: pairs.collisionStart,\n                timestamp: timing.timestamp,\n                delta: delta\n            });\n        }\n\n        // iteratively resolve position between collisions\n        var positionDamping = Common.clamp(20 / engine.positionIterations, 0, 1);\n        \n        Resolver.preSolvePosition(pairs.list);\n        for (i = 0; i < engine.positionIterations; i++) {\n            Resolver.solvePosition(pairs.list, delta, positionDamping);\n        }\n        Resolver.postSolvePosition(allBodies);\n\n        // update all constraints (second pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, delta);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // iteratively resolve velocity between collisions\n        Resolver.preSolveVelocity(pairs.list);\n        for (i = 0; i < engine.velocityIterations; i++) {\n            Resolver.solveVelocity(pairs.list, delta);\n        }\n\n        // update body speed and velocity properties\n        Engine._bodiesUpdateVelocities(allBodies);\n\n        // trigger collision events\n        if (pairs.collisionActive.length > 0) {\n            Events.trigger(engine, 'collisionActive', { \n                pairs: pairs.collisionActive, \n                timestamp: timing.timestamp,\n                delta: delta\n            });\n        }\n\n        if (pairs.collisionEnd.length > 0) {\n            Events.trigger(engine, 'collisionEnd', {\n                pairs: pairs.collisionEnd,\n                timestamp: timing.timestamp,\n                delta: delta\n            });\n        }\n\n        // clear force buffers\n        Engine._bodiesClearForces(allBodies);\n\n        Events.trigger(engine, 'afterUpdate', event);\n\n        // log the time elapsed computing this update\n        engine.timing.lastElapsed = Common.now() - startTime;\n\n        return engine;\n    };\n    \n    /**\n     * Merges two engines by keeping the configuration of `engineA` but replacing the world with the one from `engineB`.\n     * @method merge\n     * @param {engine} engineA\n     * @param {engine} engineB\n     */\n    Engine.merge = function(engineA, engineB) {\n        Common.extend(engineA, engineB);\n        \n        if (engineB.world) {\n            engineA.world = engineB.world;\n\n            Engine.clear(engineA);\n\n            var bodies = Composite.allBodies(engineA.world);\n\n            for (var i = 0; i < bodies.length; i++) {\n                var body = bodies[i];\n                Sleeping.set(body, false);\n                body.id = Common.nextId();\n            }\n        }\n    };\n\n    /**\n     * Clears the engine pairs and detector.\n     * @method clear\n     * @param {engine} engine\n     */\n    Engine.clear = function(engine) {\n        Pairs.clear(engine.pairs);\n        Detector.clear(engine.detector);\n    };\n\n    /**\n     * Zeroes the `body.force` and `body.torque` force buffers.\n     * @method _bodiesClearForces\n     * @private\n     * @param {body[]} bodies\n     */\n    Engine._bodiesClearForces = function(bodies) {\n        var bodiesLength = bodies.length;\n\n        for (var i = 0; i < bodiesLength; i++) {\n            var body = bodies[i];\n\n            // reset force buffers\n            body.force.x = 0;\n            body.force.y = 0;\n            body.torque = 0;\n        }\n    };\n\n    /**\n     * Applies gravitational acceleration to all `bodies`.\n     * This models a [uniform gravitational field](https://en.wikipedia.org/wiki/Gravity_of_Earth), similar to near the surface of a planet.\n     * \n     * @method _bodiesApplyGravity\n     * @private\n     * @param {body[]} bodies\n     * @param {vector} gravity\n     */\n    Engine._bodiesApplyGravity = function(bodies, gravity) {\n        var gravityScale = typeof gravity.scale !== 'undefined' ? gravity.scale : 0.001,\n            bodiesLength = bodies.length;\n\n        if ((gravity.x === 0 && gravity.y === 0) || gravityScale === 0) {\n            return;\n        }\n        \n        for (var i = 0; i < bodiesLength; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            // add the resultant force of gravity\n            body.force.y += body.mass * gravity.y * gravityScale;\n            body.force.x += body.mass * gravity.x * gravityScale;\n        }\n    };\n\n    /**\n     * Applies `Body.update` to all given `bodies`.\n     * @method _bodiesUpdate\n     * @private\n     * @param {body[]} bodies\n     * @param {number} delta The amount of time elapsed between updates\n     */\n    Engine._bodiesUpdate = function(bodies, delta) {\n        var bodiesLength = bodies.length;\n\n        for (var i = 0; i < bodiesLength; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            Body.update(body, delta);\n        }\n    };\n\n    /**\n     * Applies `Body.updateVelocities` to all given `bodies`.\n     * @method _bodiesUpdateVelocities\n     * @private\n     * @param {body[]} bodies\n     */\n    Engine._bodiesUpdateVelocities = function(bodies) {\n        var bodiesLength = bodies.length;\n\n        for (var i = 0; i < bodiesLength; i++) {\n            Body.updateVelocities(bodies[i]);\n        }\n    };\n\n    /**\n     * A deprecated alias for `Runner.run`, use `Matter.Runner.run(engine)` instead and see `Matter.Runner` for more information.\n     * @deprecated use Matter.Runner.run(engine) instead\n     * @method run\n     * @param {engine} engine\n     */\n\n    /**\n    * Fired just before an update\n    *\n    * @event beforeUpdate\n    * @param {object} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /**\n    * Fired after bodies updated based on their velocity and forces, but before any collision detection, constraints and resolving etc.\n    *\n    * @event beforeSolve\n    * @param {object} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update and all collision events\n    *\n    * @event afterUpdate\n    * @param {object} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have started to collide in the current tick (if any)\n    *\n    * @event collisionStart\n    * @param {object} event An event object\n    * @param {pair[]} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that are colliding in the current tick (if any)\n    *\n    * @event collisionActive\n    * @param {object} event An event object\n    * @param {pair[]} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have ended collision in the current tick (if any)\n    *\n    * @event collisionEnd\n    * @param {object} event An event object\n    * @param {pair[]} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {number} event.delta The delta time in milliseconds value used in the update\n    * @param {engine} event.source The source object of the event\n    * @param {string} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` that specifies the number of position iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property positionIterations\n     * @type number\n     * @default 6\n     */\n\n    /**\n     * An integer `Number` that specifies the number of velocity iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property velocityIterations\n     * @type number\n     * @default 4\n     */\n\n    /**\n     * An integer `Number` that specifies the number of constraint iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     * The default value of `2` is usually very adequate.\n     *\n     * @property constraintIterations\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A flag that specifies whether the engine should allow sleeping via the `Matter.Sleeping` module.\n     * Sleeping can improve stability and performance, but often at the expense of accuracy.\n     *\n     * @property enableSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * An `Object` containing properties regarding the timing systems of the engine. \n     *\n     * @property timing\n     * @type object\n     */\n\n    /**\n     * A `Number` that specifies the global scaling factor of time for all bodies.\n     * A value of `0` freezes the simulation.\n     * A value of `0.1` gives a slow-motion effect.\n     * A value of `1.2` gives a speed-up effect.\n     *\n     * @property timing.timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the current simulation-time in milliseconds starting from `0`. \n     * It is incremented on every `Engine.update` by the given `delta` argument. \n     * \n     * @property timing.timestamp\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the total execution time elapsed during the last `Engine.update` in milliseconds.\n     * It is updated by timing from the start of the last `Engine.update` call until it ends.\n     *\n     * This value will also include the total execution time of all event handlers directly or indirectly triggered by the engine update.\n     * \n     * @property timing.lastElapsed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the `delta` value used in the last engine update.\n     * \n     * @property timing.lastDelta\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Matter.Detector` instance.\n     *\n     * @property detector\n     * @type detector\n     * @default a Matter.Detector instance\n     */\n\n    /**\n     * A `Matter.Grid` instance.\n     *\n     * @deprecated replaced by `engine.detector`\n     * @property grid\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * Replaced by and now alias for `engine.grid`.\n     *\n     * @deprecated replaced by `engine.detector`\n     * @property broadphase\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * The root `Matter.Composite` instance that will contain all bodies, constraints and other composites to be simulated by this engine.\n     *\n     * @property world\n     * @type composite\n     * @default a Matter.Composite instance\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * An optional gravitational acceleration applied to all bodies in `engine.world` on every update.\n     * \n     * This models a [uniform gravitational field](https://en.wikipedia.org/wiki/Gravity_of_Earth), similar to near the surface of a planet. For gravity in other contexts, disable this and apply forces as needed.\n     * \n     * To disable set the `scale` component to `0`.\n     * \n     * This is split into three components for ease of use:  \n     * a normalised direction (`x` and `y`) and magnitude (`scale`).\n     *\n     * @property gravity\n     * @type object\n     */\n\n    /**\n     * The gravitational direction normal `x` component, to be multiplied by `gravity.scale`.\n     * \n     * @property gravity.x\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * The gravitational direction normal `y` component, to be multiplied by `gravity.scale`.\n     *\n     * @property gravity.y\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * The magnitude of the gravitational acceleration.\n     * \n     * @property gravity.scale\n     * @type object\n     * @default 0.001\n     */\n\n})();\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Resolver` module contains methods for resolving collision pairs.\n*\n* @class Resolver\n*/\n\nvar Resolver = {};\n\nmodule.exports = Resolver;\n\nvar Vertices = __webpack_require__(3);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    Resolver._restingThresh = 2;\n    Resolver._restingThreshTangent = Math.sqrt(6);\n    Resolver._positionDampen = 0.9;\n    Resolver._positionWarming = 0.8;\n    Resolver._frictionNormalMultiplier = 5;\n    Resolver._frictionMaxStatic = Number.MAX_VALUE;\n\n    /**\n     * Prepare pairs for position solving.\n     * @method preSolvePosition\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolvePosition = function(pairs) {\n        var i,\n            pair,\n            contactCount,\n            pairsLength = pairs.length;\n\n        // find total contacts on each body\n        for (i = 0; i < pairsLength; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive)\n                continue;\n            \n            contactCount = pair.contactCount;\n            pair.collision.parentA.totalContacts += contactCount;\n            pair.collision.parentB.totalContacts += contactCount;\n        }\n    };\n\n    /**\n     * Find a solution for pair positions.\n     * @method solvePosition\n     * @param {pair[]} pairs\n     * @param {number} delta\n     * @param {number} [damping=1]\n     */\n    Resolver.solvePosition = function(pairs, delta, damping) {\n        var i,\n            pair,\n            collision,\n            bodyA,\n            bodyB,\n            normal,\n            contactShare,\n            positionImpulse,\n            positionDampen = Resolver._positionDampen * (damping || 1),\n            slopDampen = Common.clamp(delta / Common._baseDelta, 0, 1),\n            pairsLength = pairs.length;\n\n        // find impulses required to resolve penetration\n        for (i = 0; i < pairsLength; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n\n            // get current separation between body edges involved in collision\n            pair.separation = \n                collision.depth + normal.x * (bodyB.positionImpulse.x - bodyA.positionImpulse.x)\n                + normal.y * (bodyB.positionImpulse.y - bodyA.positionImpulse.y);\n        }\n        \n        for (i = 0; i < pairsLength; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n            positionImpulse = pair.separation - pair.slop * slopDampen;\n\n            if (bodyA.isStatic || bodyB.isStatic)\n                positionImpulse *= 2;\n            \n            if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                contactShare = positionDampen / bodyA.totalContacts;\n                bodyA.positionImpulse.x += normal.x * positionImpulse * contactShare;\n                bodyA.positionImpulse.y += normal.y * positionImpulse * contactShare;\n            }\n\n            if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                contactShare = positionDampen / bodyB.totalContacts;\n                bodyB.positionImpulse.x -= normal.x * positionImpulse * contactShare;\n                bodyB.positionImpulse.y -= normal.y * positionImpulse * contactShare;\n            }\n        }\n    };\n\n    /**\n     * Apply position resolution.\n     * @method postSolvePosition\n     * @param {body[]} bodies\n     */\n    Resolver.postSolvePosition = function(bodies) {\n        var positionWarming = Resolver._positionWarming,\n            bodiesLength = bodies.length,\n            verticesTranslate = Vertices.translate,\n            boundsUpdate = Bounds.update;\n\n        for (var i = 0; i < bodiesLength; i++) {\n            var body = bodies[i],\n                positionImpulse = body.positionImpulse,\n                positionImpulseX = positionImpulse.x,\n                positionImpulseY = positionImpulse.y,\n                velocity = body.velocity;\n\n            // reset contact count\n            body.totalContacts = 0;\n\n            if (positionImpulseX !== 0 || positionImpulseY !== 0) {\n                // update body geometry\n                for (var j = 0; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n                    verticesTranslate(part.vertices, positionImpulse);\n                    boundsUpdate(part.bounds, part.vertices, velocity);\n                    part.position.x += positionImpulseX;\n                    part.position.y += positionImpulseY;\n                }\n\n                // move the body without changing velocity\n                body.positionPrev.x += positionImpulseX;\n                body.positionPrev.y += positionImpulseY;\n\n                if (positionImpulseX * velocity.x + positionImpulseY * velocity.y < 0) {\n                    // reset cached impulse if the body has velocity along it\n                    positionImpulse.x = 0;\n                    positionImpulse.y = 0;\n                } else {\n                    // warm the next iteration\n                    positionImpulse.x *= positionWarming;\n                    positionImpulse.y *= positionWarming;\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare pairs for velocity solving.\n     * @method preSolveVelocity\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolveVelocity = function(pairs) {\n        var pairsLength = pairs.length,\n            i,\n            j;\n        \n        for (i = 0; i < pairsLength; i++) {\n            var pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            var contacts = pair.contacts,\n                contactCount = pair.contactCount,\n                collision = pair.collision,\n                bodyA = collision.parentA,\n                bodyB = collision.parentB,\n                normal = collision.normal,\n                tangent = collision.tangent;\n    \n            // resolve each contact\n            for (j = 0; j < contactCount; j++) {\n                var contact = contacts[j],\n                    contactVertex = contact.vertex,\n                    normalImpulse = contact.normalImpulse,\n                    tangentImpulse = contact.tangentImpulse;\n    \n                if (normalImpulse !== 0 || tangentImpulse !== 0) {\n                    // total impulse from contact\n                    var impulseX = normal.x * normalImpulse + tangent.x * tangentImpulse,\n                        impulseY = normal.y * normalImpulse + tangent.y * tangentImpulse;\n                    \n                    // apply impulse from contact\n                    if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                        bodyA.positionPrev.x += impulseX * bodyA.inverseMass;\n                        bodyA.positionPrev.y += impulseY * bodyA.inverseMass;\n                        bodyA.anglePrev += bodyA.inverseInertia * (\n                            (contactVertex.x - bodyA.position.x) * impulseY\n                            - (contactVertex.y - bodyA.position.y) * impulseX\n                        );\n                    }\n    \n                    if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                        bodyB.positionPrev.x -= impulseX * bodyB.inverseMass;\n                        bodyB.positionPrev.y -= impulseY * bodyB.inverseMass;\n                        bodyB.anglePrev -= bodyB.inverseInertia * (\n                            (contactVertex.x - bodyB.position.x) * impulseY \n                            - (contactVertex.y - bodyB.position.y) * impulseX\n                        );\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Find a solution for pair velocities.\n     * @method solveVelocity\n     * @param {pair[]} pairs\n     * @param {number} delta\n     */\n    Resolver.solveVelocity = function(pairs, delta) {\n        var timeScale = delta / Common._baseDelta,\n            timeScaleSquared = timeScale * timeScale,\n            timeScaleCubed = timeScaleSquared * timeScale,\n            restingThresh = -Resolver._restingThresh * timeScale,\n            restingThreshTangent = Resolver._restingThreshTangent,\n            frictionNormalMultiplier = Resolver._frictionNormalMultiplier * timeScale,\n            frictionMaxStatic = Resolver._frictionMaxStatic,\n            pairsLength = pairs.length,\n            tangentImpulse,\n            maxFriction,\n            i,\n            j;\n\n        for (i = 0; i < pairsLength; i++) {\n            var pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            var collision = pair.collision,\n                bodyA = collision.parentA,\n                bodyB = collision.parentB,\n                normalX = collision.normal.x,\n                normalY = collision.normal.y,\n                tangentX = collision.tangent.x,\n                tangentY = collision.tangent.y,\n                inverseMassTotal = pair.inverseMass,\n                friction = pair.friction * pair.frictionStatic * frictionNormalMultiplier,\n                contacts = pair.contacts,\n                contactCount = pair.contactCount,\n                contactShare = 1 / contactCount;\n\n            // get body velocities\n            var bodyAVelocityX = bodyA.position.x - bodyA.positionPrev.x,\n                bodyAVelocityY = bodyA.position.y - bodyA.positionPrev.y,\n                bodyAAngularVelocity = bodyA.angle - bodyA.anglePrev,\n                bodyBVelocityX = bodyB.position.x - bodyB.positionPrev.x,\n                bodyBVelocityY = bodyB.position.y - bodyB.positionPrev.y,\n                bodyBAngularVelocity = bodyB.angle - bodyB.anglePrev;\n\n            // resolve each contact\n            for (j = 0; j < contactCount; j++) {\n                var contact = contacts[j],\n                    contactVertex = contact.vertex;\n\n                var offsetAX = contactVertex.x - bodyA.position.x,\n                    offsetAY = contactVertex.y - bodyA.position.y,\n                    offsetBX = contactVertex.x - bodyB.position.x,\n                    offsetBY = contactVertex.y - bodyB.position.y;\n \n                var velocityPointAX = bodyAVelocityX - offsetAY * bodyAAngularVelocity,\n                    velocityPointAY = bodyAVelocityY + offsetAX * bodyAAngularVelocity,\n                    velocityPointBX = bodyBVelocityX - offsetBY * bodyBAngularVelocity,\n                    velocityPointBY = bodyBVelocityY + offsetBX * bodyBAngularVelocity;\n\n                var relativeVelocityX = velocityPointAX - velocityPointBX,\n                    relativeVelocityY = velocityPointAY - velocityPointBY;\n\n                var normalVelocity = normalX * relativeVelocityX + normalY * relativeVelocityY,\n                    tangentVelocity = tangentX * relativeVelocityX + tangentY * relativeVelocityY;\n\n                // coulomb friction\n                var normalOverlap = pair.separation + normalVelocity;\n                var normalForce = Math.min(normalOverlap, 1);\n                normalForce = normalOverlap < 0 ? 0 : normalForce;\n\n                var frictionLimit = normalForce * friction;\n\n                if (tangentVelocity < -frictionLimit || tangentVelocity > frictionLimit) {\n                    maxFriction = (tangentVelocity > 0 ? tangentVelocity : -tangentVelocity);\n                    tangentImpulse = pair.friction * (tangentVelocity > 0 ? 1 : -1) * timeScaleCubed;\n                    \n                    if (tangentImpulse < -maxFriction) {\n                        tangentImpulse = -maxFriction;\n                    } else if (tangentImpulse > maxFriction) {\n                        tangentImpulse = maxFriction;\n                    }\n                } else {\n                    tangentImpulse = tangentVelocity;\n                    maxFriction = frictionMaxStatic;\n                }\n\n                // account for mass, inertia and contact offset\n                var oAcN = offsetAX * normalY - offsetAY * normalX,\n                    oBcN = offsetBX * normalY - offsetBY * normalX,\n                    share = contactShare / (inverseMassTotal + bodyA.inverseInertia * oAcN * oAcN + bodyB.inverseInertia * oBcN * oBcN);\n\n                // raw impulses\n                var normalImpulse = (1 + pair.restitution) * normalVelocity * share;\n                tangentImpulse *= share;\n\n                // handle high velocity and resting collisions separately\n                if (normalVelocity < restingThresh) {\n                    // high normal velocity so clear cached contact normal impulse\n                    contact.normalImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // impulse constraint tends to 0\n                    var contactNormalImpulse = contact.normalImpulse;\n                    contact.normalImpulse += normalImpulse;\n                    if (contact.normalImpulse > 0) contact.normalImpulse = 0;\n                    normalImpulse = contact.normalImpulse - contactNormalImpulse;\n                }\n\n                // handle high velocity and resting collisions separately\n                if (tangentVelocity < -restingThreshTangent || tangentVelocity > restingThreshTangent) {\n                    // high tangent velocity so clear cached contact tangent impulse\n                    contact.tangentImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // tangent impulse tends to -tangentSpeed or +tangentSpeed\n                    var contactTangentImpulse = contact.tangentImpulse;\n                    contact.tangentImpulse += tangentImpulse;\n                    if (contact.tangentImpulse < -maxFriction) contact.tangentImpulse = -maxFriction;\n                    if (contact.tangentImpulse > maxFriction) contact.tangentImpulse = maxFriction;\n                    tangentImpulse = contact.tangentImpulse - contactTangentImpulse;\n                }\n\n                // total impulse from contact\n                var impulseX = normalX * normalImpulse + tangentX * tangentImpulse,\n                    impulseY = normalY * normalImpulse + tangentY * tangentImpulse;\n                \n                // apply impulse from contact\n                if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                    bodyA.positionPrev.x += impulseX * bodyA.inverseMass;\n                    bodyA.positionPrev.y += impulseY * bodyA.inverseMass;\n                    bodyA.anglePrev += (offsetAX * impulseY - offsetAY * impulseX) * bodyA.inverseInertia;\n                }\n\n                if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                    bodyB.positionPrev.x -= impulseX * bodyB.inverseMass;\n                    bodyB.positionPrev.y -= impulseY * bodyB.inverseMass;\n                    bodyB.anglePrev -= (offsetBX * impulseY - offsetBY * impulseX) * bodyB.inverseInertia;\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pairs` module contains methods for creating and manipulating collision pair sets.\n*\n* @class Pairs\n*/\n\nvar Pairs = {};\n\nmodule.exports = Pairs;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new pairs structure.\n     * @method create\n     * @param {object} options\n     * @return {pairs} A new pairs structure\n     */\n    Pairs.create = function(options) {\n        return Common.extend({ \n            table: {},\n            list: [],\n            collisionStart: [],\n            collisionActive: [],\n            collisionEnd: []\n        }, options);\n    };\n\n    /**\n     * Updates pairs given a list of collisions.\n     * @method update\n     * @param {object} pairs\n     * @param {collision[]} collisions\n     * @param {number} timestamp\n     */\n    Pairs.update = function(pairs, collisions, timestamp) {\n        var pairUpdate = Pair.update,\n            pairCreate = Pair.create,\n            pairSetActive = Pair.setActive,\n            pairsTable = pairs.table,\n            pairsList = pairs.list,\n            pairsListLength = pairsList.length,\n            pairsListIndex = pairsListLength,\n            collisionStart = pairs.collisionStart,\n            collisionEnd = pairs.collisionEnd,\n            collisionActive = pairs.collisionActive,\n            collisionsLength = collisions.length,\n            collisionStartIndex = 0,\n            collisionEndIndex = 0,\n            collisionActiveIndex = 0,\n            collision,\n            pair,\n            i;\n\n        for (i = 0; i < collisionsLength; i++) {\n            collision = collisions[i];\n            pair = collision.pair;\n\n            if (pair) {\n                // pair already exists (but may or may not be active)\n                if (pair.isActive) {\n                    // pair exists and is active\n                    collisionActive[collisionActiveIndex++] = pair;\n                }\n\n                // update the pair\n                pairUpdate(pair, collision, timestamp);\n            } else {\n                // pair did not exist, create a new pair\n                pair = pairCreate(collision, timestamp);\n                pairsTable[pair.id] = pair;\n\n                // add the new pair\n                collisionStart[collisionStartIndex++] = pair;\n                pairsList[pairsListIndex++] = pair;\n            }\n        }\n\n        // find pairs that are no longer active\n        pairsListIndex = 0;\n        pairsListLength = pairsList.length;\n\n        for (i = 0; i < pairsListLength; i++) {\n            pair = pairsList[i];\n            \n            // pair is active if updated this timestep\n            if (pair.timeUpdated >= timestamp) {\n                // keep active pairs\n                pairsList[pairsListIndex++] = pair;\n            } else {\n                pairSetActive(pair, false, timestamp);\n\n                // keep inactive pairs if both bodies may be sleeping\n                if (pair.collision.bodyA.sleepCounter > 0 && pair.collision.bodyB.sleepCounter > 0) {\n                    pairsList[pairsListIndex++] = pair;\n                } else {\n                    // remove inactive pairs if either body awake\n                    collisionEnd[collisionEndIndex++] = pair;\n                    delete pairsTable[pair.id];\n                }\n            }\n        }\n\n        // update array lengths if changed\n        if (pairsList.length !== pairsListIndex) {\n            pairsList.length = pairsListIndex;\n        }\n\n        if (collisionStart.length !== collisionStartIndex) {\n            collisionStart.length = collisionStartIndex;\n        }\n\n        if (collisionEnd.length !== collisionEndIndex) {\n            collisionEnd.length = collisionEndIndex;\n        }\n\n        if (collisionActive.length !== collisionActiveIndex) {\n            collisionActive.length = collisionActiveIndex;\n        }\n    };\n\n    /**\n     * Clears the given pairs structure.\n     * @method clear\n     * @param {pairs} pairs\n     * @return {pairs} pairs\n     */\n    Pairs.clear = function(pairs) {\n        pairs.table = {};\n        pairs.list.length = 0;\n        pairs.collisionStart.length = 0;\n        pairs.collisionActive.length = 0;\n        pairs.collisionEnd.length = 0;\n        return pairs;\n    };\n\n})();\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Matter = module.exports = __webpack_require__(21);\r\n\r\nMatter.Axes = __webpack_require__(11);\r\nMatter.Bodies = __webpack_require__(12);\r\nMatter.Body = __webpack_require__(4);\r\nMatter.Bounds = __webpack_require__(1);\r\nMatter.Collision = __webpack_require__(8);\r\nMatter.Common = __webpack_require__(0);\r\nMatter.Composite = __webpack_require__(6);\r\nMatter.Composites = __webpack_require__(22);\r\nMatter.Constraint = __webpack_require__(10);\r\nMatter.Contact = __webpack_require__(16);\r\nMatter.Detector = __webpack_require__(13);\r\nMatter.Engine = __webpack_require__(17);\r\nMatter.Events = __webpack_require__(5);\r\nMatter.Grid = __webpack_require__(23);\r\nMatter.Mouse = __webpack_require__(14);\r\nMatter.MouseConstraint = __webpack_require__(24);\r\nMatter.Pair = __webpack_require__(9);\r\nMatter.Pairs = __webpack_require__(19);\r\nMatter.Plugin = __webpack_require__(15);\r\nMatter.Query = __webpack_require__(25);\r\nMatter.Render = __webpack_require__(26);\r\nMatter.Resolver = __webpack_require__(18);\r\nMatter.Runner = __webpack_require__(27);\r\nMatter.SAT = __webpack_require__(28);\r\nMatter.Sleeping = __webpack_require__(7);\r\nMatter.Svg = __webpack_require__(29);\r\nMatter.Vector = __webpack_require__(2);\r\nMatter.Vertices = __webpack_require__(3);\r\nMatter.World = __webpack_require__(30);\r\n\r\n// temporary back compatibility\r\nMatter.Engine.run = Matter.Runner.run;\r\nMatter.Common.deprecated(Matter.Engine, 'run', 'Engine.run  use Matter.Runner.run(engine) instead');\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n* The `Matter` module is the top level namespace. It also includes a function for installing plugins on top of the library.\r\n*\r\n* @class Matter\r\n*/\r\n\r\nvar Matter = {};\r\n\r\nmodule.exports = Matter;\r\n\r\nvar Plugin = __webpack_require__(15);\r\nvar Common = __webpack_require__(0);\r\n\r\n(function() {\r\n\r\n    /**\r\n     * The library name.\r\n     * @property name\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.name = 'matter-js';\r\n\r\n    /**\r\n     * The library version.\r\n     * @property version\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.version =  true ? \"0.20.0\" : undefined;\r\n\r\n    /**\r\n     * A list of plugin dependencies to be installed. These are normally set and installed through `Matter.use`.\r\n     * Alternatively you may set `Matter.uses` manually and install them by calling `Plugin.use(Matter)`.\r\n     * @property uses\r\n     * @type {Array}\r\n     */\r\n    Matter.uses = [];\r\n\r\n    /**\r\n     * The plugins that have been installed through `Matter.Plugin.install`. Read only.\r\n     * @property used\r\n     * @readOnly\r\n     * @type {Array}\r\n     */\r\n    Matter.used = [];\r\n\r\n    /**\r\n     * Installs the given plugins on the `Matter` namespace.\r\n     * This is a short-hand for `Plugin.use`, see it for more information.\r\n     * Call this function once at the start of your code, with all of the plugins you wish to install as arguments.\r\n     * Avoid calling this function multiple times unless you intend to manually control installation order.\r\n     * @method use\r\n     * @param ...plugin {Function} The plugin(s) to install on `base` (multi-argument).\r\n     */\r\n    Matter.use = function() {\r\n        Plugin.use(Matter, Array.prototype.slice.call(arguments));\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute before the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method before\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain before the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.before = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathBefore(Matter, path, func);\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute after the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method after\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain after the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.after = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathAfter(Matter, path, func);\r\n    };\r\n\r\n})();\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Composites` module contains factory methods for creating composite bodies\n* with commonly used configurations (such as stacks and chains).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composites\n*/\n\nvar Composites = {};\n\nmodule.exports = Composites;\n\nvar Composite = __webpack_require__(6);\nvar Constraint = __webpack_require__(10);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(4);\nvar Bodies = __webpack_require__(12);\nvar deprecated = Common.deprecated;\n\n(function() {\n\n    /**\n     * Create a new composite containing bodies created in the callback in a grid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method stack\n     * @param {number} x Starting position in X.\n     * @param {number} y Starting position in Y.\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.stack = function(x, y, columns, rows, columnGap, rowGap, callback) {\n        var stack = Composite.create({ label: 'Stack' }),\n            currentX = x,\n            currentY = y,\n            lastBody,\n            i = 0;\n\n        for (var row = 0; row < rows; row++) {\n            var maxHeight = 0;\n            \n            for (var column = 0; column < columns; column++) {\n                var body = callback(currentX, currentY, column, row, lastBody, i);\n                    \n                if (body) {\n                    var bodyHeight = body.bounds.max.y - body.bounds.min.y,\n                        bodyWidth = body.bounds.max.x - body.bounds.min.x; \n\n                    if (bodyHeight > maxHeight)\n                        maxHeight = bodyHeight;\n                    \n                    Body.translate(body, { x: bodyWidth * 0.5, y: bodyHeight * 0.5 });\n\n                    currentX = body.bounds.max.x + columnGap;\n\n                    Composite.addBody(stack, body);\n                    \n                    lastBody = body;\n                    i += 1;\n                } else {\n                    currentX += columnGap;\n                }\n            }\n            \n            currentY += maxHeight + rowGap;\n            currentX = x;\n        }\n\n        return stack;\n    };\n    \n    /**\n     * Chains all bodies in the given composite together using constraints.\n     * @method chain\n     * @param {composite} composite\n     * @param {number} xOffsetA\n     * @param {number} yOffsetA\n     * @param {number} xOffsetB\n     * @param {number} yOffsetB\n     * @param {object} options\n     * @return {composite} A new composite containing objects chained together with constraints\n     */\n    Composites.chain = function(composite, xOffsetA, yOffsetA, xOffsetB, yOffsetB, options) {\n        var bodies = composite.bodies;\n        \n        for (var i = 1; i < bodies.length; i++) {\n            var bodyA = bodies[i - 1],\n                bodyB = bodies[i],\n                bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\n                bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x, \n                bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\n                bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\n        \n            var defaults = {\n                bodyA: bodyA,\n                pointA: { x: bodyAWidth * xOffsetA, y: bodyAHeight * yOffsetA },\n                bodyB: bodyB,\n                pointB: { x: bodyBWidth * xOffsetB, y: bodyBHeight * yOffsetB }\n            };\n            \n            var constraint = Common.extend(defaults, options);\n        \n            Composite.addConstraint(composite, Constraint.create(constraint));\n        }\n\n        composite.label += ' Chain';\n        \n        return composite;\n    };\n\n    /**\n     * Connects bodies in the composite with constraints in a grid pattern, with optional cross braces.\n     * @method mesh\n     * @param {composite} composite\n     * @param {number} columns\n     * @param {number} rows\n     * @param {boolean} crossBrace\n     * @param {object} options\n     * @return {composite} The composite containing objects meshed together with constraints\n     */\n    Composites.mesh = function(composite, columns, rows, crossBrace, options) {\n        var bodies = composite.bodies,\n            row,\n            col,\n            bodyA,\n            bodyB,\n            bodyC;\n        \n        for (row = 0; row < rows; row++) {\n            for (col = 1; col < columns; col++) {\n                bodyA = bodies[(col - 1) + (row * columns)];\n                bodyB = bodies[col + (row * columns)];\n                Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n            }\n\n            if (row > 0) {\n                for (col = 0; col < columns; col++) {\n                    bodyA = bodies[col + ((row - 1) * columns)];\n                    bodyB = bodies[col + (row * columns)];\n                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n\n                    if (crossBrace && col > 0) {\n                        bodyC = bodies[(col - 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n\n                    if (crossBrace && col < columns - 1) {\n                        bodyC = bodies[(col + 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n                }\n            }\n        }\n\n        composite.label += ' Mesh';\n        \n        return composite;\n    };\n    \n    /**\n     * Create a new composite containing bodies created in the callback in a pyramid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method pyramid\n     * @param {number} x Starting position in X.\n     * @param {number} y Starting position in Y.\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.pyramid = function(x, y, columns, rows, columnGap, rowGap, callback) {\n        return Composites.stack(x, y, columns, rows, columnGap, rowGap, function(stackX, stackY, column, row, lastBody, i) {\n            var actualRows = Math.min(rows, Math.ceil(columns / 2)),\n                lastBodyWidth = lastBody ? lastBody.bounds.max.x - lastBody.bounds.min.x : 0;\n            \n            if (row > actualRows)\n                return;\n            \n            // reverse row order\n            row = actualRows - row;\n            \n            var start = row,\n                end = columns - 1 - row;\n\n            if (column < start || column > end)\n                return;\n            \n            // retroactively fix the first body's position, since width was unknown\n            if (i === 1) {\n                Body.translate(lastBody, { x: (column + (columns % 2 === 1 ? 1 : -1)) * lastBodyWidth, y: 0 });\n            }\n\n            var xOffset = lastBody ? column * lastBodyWidth : 0;\n            \n            return callback(x + xOffset + column * columnGap, stackY, column, row, lastBody, i);\n        });\n    };\n\n    /**\n     * This has now moved to the [newtonsCradle example](https://github.com/liabru/matter-js/blob/master/examples/newtonsCradle.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to newtonsCradle example\n     * @method newtonsCradle\n     * @param {number} x Starting position in X.\n     * @param {number} y Starting position in Y.\n     * @param {number} number\n     * @param {number} size\n     * @param {number} length\n     * @return {composite} A new composite newtonsCradle body\n     */\n    Composites.newtonsCradle = function(x, y, number, size, length) {\n        var newtonsCradle = Composite.create({ label: 'Newtons Cradle' });\n\n        for (var i = 0; i < number; i++) {\n            var separation = 1.9,\n                circle = Bodies.circle(x + i * (size * separation), y + length, size, \n                    { inertia: Infinity, restitution: 1, friction: 0, frictionAir: 0.0001, slop: 1 }),\n                constraint = Constraint.create({ pointA: { x: x + i * (size * separation), y: y }, bodyB: circle });\n\n            Composite.addBody(newtonsCradle, circle);\n            Composite.addConstraint(newtonsCradle, constraint);\n        }\n\n        return newtonsCradle;\n    };\n\n    deprecated(Composites, 'newtonsCradle', 'Composites.newtonsCradle  moved to newtonsCradle example');\n    \n    /**\n     * This has now moved to the [car example](https://github.com/liabru/matter-js/blob/master/examples/car.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to car example\n     * @method car\n     * @param {number} x Starting position in X.\n     * @param {number} y Starting position in Y.\n     * @param {number} width\n     * @param {number} height\n     * @param {number} wheelSize\n     * @return {composite} A new composite car body\n     */\n    Composites.car = function(x, y, width, height, wheelSize) {\n        var group = Body.nextGroup(true),\n            wheelBase = 20,\n            wheelAOffset = -width * 0.5 + wheelBase,\n            wheelBOffset = width * 0.5 - wheelBase,\n            wheelYOffset = 0;\n    \n        var car = Composite.create({ label: 'Car' }),\n            body = Bodies.rectangle(x, y, width, height, { \n                collisionFilter: {\n                    group: group\n                },\n                chamfer: {\n                    radius: height * 0.5\n                },\n                density: 0.0002\n            });\n    \n        var wheelA = Bodies.circle(x + wheelAOffset, y + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var wheelB = Bodies.circle(x + wheelBOffset, y + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var axelA = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelAOffset, y: wheelYOffset },\n            bodyA: wheelA,\n            stiffness: 1,\n            length: 0\n        });\n                        \n        var axelB = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelBOffset, y: wheelYOffset },\n            bodyA: wheelB,\n            stiffness: 1,\n            length: 0\n        });\n        \n        Composite.addBody(car, body);\n        Composite.addBody(car, wheelA);\n        Composite.addBody(car, wheelB);\n        Composite.addConstraint(car, axelA);\n        Composite.addConstraint(car, axelB);\n\n        return car;\n    };\n\n    deprecated(Composites, 'car', 'Composites.car  moved to car example');\n\n    /**\n     * This has now moved to the [softBody example](https://github.com/liabru/matter-js/blob/master/examples/softBody.js)\n     * and the [cloth example](https://github.com/liabru/matter-js/blob/master/examples/cloth.js), follow those instead as this function is deprecated here.\n     * @deprecated moved to softBody and cloth examples\n     * @method softBody\n     * @param {number} x Starting position in X.\n     * @param {number} y Starting position in Y.\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {boolean} crossBrace\n     * @param {number} particleRadius\n     * @param {} particleOptions\n     * @param {} constraintOptions\n     * @return {composite} A new composite softBody\n     */\n    Composites.softBody = function(x, y, columns, rows, columnGap, rowGap, crossBrace, particleRadius, particleOptions, constraintOptions) {\n        particleOptions = Common.extend({ inertia: Infinity }, particleOptions);\n        constraintOptions = Common.extend({ stiffness: 0.2, render: { type: 'line', anchors: false } }, constraintOptions);\n\n        var softBody = Composites.stack(x, y, columns, rows, columnGap, rowGap, function(stackX, stackY) {\n            return Bodies.circle(stackX, stackY, particleRadius, particleOptions);\n        });\n\n        Composites.mesh(softBody, columns, rows, crossBrace, constraintOptions);\n\n        softBody.label = 'Soft Body';\n\n        return softBody;\n    };\n\n    deprecated(Composites, 'softBody', 'Composites.softBody  moved to softBody and cloth examples');\n})();\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* This module has now been replaced by `Matter.Detector`.\n*\n* All usage should be migrated to `Matter.Detector` or another alternative.\n* For back-compatibility purposes this module will remain for a short term and then later removed in a future release.\n*\n* The `Matter.Grid` module contains methods for creating and manipulating collision broadphase grid structures.\n*\n* @class Grid\n* @deprecated\n*/\n\nvar Grid = {};\n\nmodule.exports = Grid;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\nvar deprecated = Common.deprecated;\n\n(function() {\n\n    /**\n     * Creates a new grid.\n     * @deprecated replaced by Matter.Detector\n     * @method create\n     * @param {} options\n     * @return {grid} A new grid\n     */\n    Grid.create = function(options) {\n        var defaults = {\n            buckets: {},\n            pairs: {},\n            pairsList: [],\n            bucketWidth: 48,\n            bucketHeight: 48\n        };\n\n        return Common.extend(defaults, options);\n    };\n\n    /**\n     * The width of a single grid bucket.\n     *\n     * @property bucketWidth\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * The height of a single grid bucket.\n     *\n     * @property bucketHeight\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * Updates the grid.\n     * @deprecated replaced by Matter.Detector\n     * @method update\n     * @param {grid} grid\n     * @param {body[]} bodies\n     * @param {engine} engine\n     * @param {boolean} forceUpdate\n     */\n    Grid.update = function(grid, bodies, engine, forceUpdate) {\n        var i, col, row,\n            world = engine.world,\n            buckets = grid.buckets,\n            bucket,\n            bucketId,\n            gridChanged = false;\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isSleeping && !forceUpdate)\n                continue;\n\n            // temporary back compatibility bounds check\n            if (world.bounds && (body.bounds.max.x < world.bounds.min.x || body.bounds.min.x > world.bounds.max.x\n                || body.bounds.max.y < world.bounds.min.y || body.bounds.min.y > world.bounds.max.y))\n                continue;\n\n            var newRegion = Grid._getRegion(grid, body);\n\n            // if the body has changed grid region\n            if (!body.region || newRegion.id !== body.region.id || forceUpdate) {\n\n                if (!body.region || forceUpdate)\n                    body.region = newRegion;\n\n                var union = Grid._regionUnion(newRegion, body.region);\n\n                // update grid buckets affected by region change\n                // iterate over the union of both regions\n                for (col = union.startCol; col <= union.endCol; col++) {\n                    for (row = union.startRow; row <= union.endRow; row++) {\n                        bucketId = Grid._getBucketId(col, row);\n                        bucket = buckets[bucketId];\n\n                        var isInsideNewRegion = (col >= newRegion.startCol && col <= newRegion.endCol\n                                                && row >= newRegion.startRow && row <= newRegion.endRow);\n\n                        var isInsideOldRegion = (col >= body.region.startCol && col <= body.region.endCol\n                                                && row >= body.region.startRow && row <= body.region.endRow);\n\n                        // remove from old region buckets\n                        if (!isInsideNewRegion && isInsideOldRegion) {\n                            if (isInsideOldRegion) {\n                                if (bucket)\n                                    Grid._bucketRemoveBody(grid, bucket, body);\n                            }\n                        }\n\n                        // add to new region buckets\n                        if (body.region === newRegion || (isInsideNewRegion && !isInsideOldRegion) || forceUpdate) {\n                            if (!bucket)\n                                bucket = Grid._createBucket(buckets, bucketId);\n                            Grid._bucketAddBody(grid, bucket, body);\n                        }\n                    }\n                }\n\n                // set the new region\n                body.region = newRegion;\n\n                // flag changes so we can update pairs\n                gridChanged = true;\n            }\n        }\n\n        // update pairs list only if pairs changed (i.e. a body changed region)\n        if (gridChanged)\n            grid.pairsList = Grid._createActivePairsList(grid);\n    };\n\n    deprecated(Grid, 'update', 'Grid.update  replaced by Matter.Detector');\n\n    /**\n     * Clears the grid.\n     * @deprecated replaced by Matter.Detector\n     * @method clear\n     * @param {grid} grid\n     */\n    Grid.clear = function(grid) {\n        grid.buckets = {};\n        grid.pairs = {};\n        grid.pairsList = [];\n    };\n\n    deprecated(Grid, 'clear', 'Grid.clear  replaced by Matter.Detector');\n\n    /**\n     * Finds the union of two regions.\n     * @method _regionUnion\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} regionA\n     * @param {} regionB\n     * @return {} region\n     */\n    Grid._regionUnion = function(regionA, regionB) {\n        var startCol = Math.min(regionA.startCol, regionB.startCol),\n            endCol = Math.max(regionA.endCol, regionB.endCol),\n            startRow = Math.min(regionA.startRow, regionB.startRow),\n            endRow = Math.max(regionA.endRow, regionB.endRow);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Gets the region a given body falls in for a given grid.\n     * @method _getRegion\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} grid\n     * @param {} body\n     * @return {} region\n     */\n    Grid._getRegion = function(grid, body) {\n        var bounds = body.bounds,\n            startCol = Math.floor(bounds.min.x / grid.bucketWidth),\n            endCol = Math.floor(bounds.max.x / grid.bucketWidth),\n            startRow = Math.floor(bounds.min.y / grid.bucketHeight),\n            endRow = Math.floor(bounds.max.y / grid.bucketHeight);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Creates a region.\n     * @method _createRegion\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} startCol\n     * @param {} endCol\n     * @param {} startRow\n     * @param {} endRow\n     * @return {} region\n     */\n    Grid._createRegion = function(startCol, endCol, startRow, endRow) {\n        return { \n            id: startCol + ',' + endCol + ',' + startRow + ',' + endRow,\n            startCol: startCol, \n            endCol: endCol, \n            startRow: startRow, \n            endRow: endRow \n        };\n    };\n\n    /**\n     * Gets the bucket id at the given position.\n     * @method _getBucketId\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} column\n     * @param {} row\n     * @return {string} bucket id\n     */\n    Grid._getBucketId = function(column, row) {\n        return 'C' + column + 'R' + row;\n    };\n\n    /**\n     * Creates a bucket.\n     * @method _createBucket\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} buckets\n     * @param {} bucketId\n     * @return {} bucket\n     */\n    Grid._createBucket = function(buckets, bucketId) {\n        var bucket = buckets[bucketId] = [];\n        return bucket;\n    };\n\n    /**\n     * Adds a body to a bucket.\n     * @method _bucketAddBody\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketAddBody = function(grid, bucket, body) {\n        var gridPairs = grid.pairs,\n            pairId = Pair.id,\n            bucketLength = bucket.length,\n            i;\n\n        // add new pairs\n        for (i = 0; i < bucketLength; i++) {\n            var bodyB = bucket[i];\n\n            if (body.id === bodyB.id || (body.isStatic && bodyB.isStatic))\n                continue;\n\n            // keep track of the number of buckets the pair exists in\n            // important for Grid.update to work\n            var id = pairId(body, bodyB),\n                pair = gridPairs[id];\n\n            if (pair) {\n                pair[2] += 1;\n            } else {\n                gridPairs[id] = [body, bodyB, 1];\n            }\n        }\n\n        // add to bodies (after pairs, otherwise pairs with self)\n        bucket.push(body);\n    };\n\n    /**\n     * Removes a body from a bucket.\n     * @method _bucketRemoveBody\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketRemoveBody = function(grid, bucket, body) {\n        var gridPairs = grid.pairs,\n            pairId = Pair.id,\n            i;\n\n        // remove from bucket\n        bucket.splice(Common.indexOf(bucket, body), 1);\n\n        var bucketLength = bucket.length;\n\n        // update pair counts\n        for (i = 0; i < bucketLength; i++) {\n            // keep track of the number of buckets the pair exists in\n            // important for _createActivePairsList to work\n            var pair = gridPairs[pairId(body, bucket[i])];\n\n            if (pair)\n                pair[2] -= 1;\n        }\n    };\n\n    /**\n     * Generates a list of the active pairs in the grid.\n     * @method _createActivePairsList\n     * @deprecated replaced by Matter.Detector\n     * @private\n     * @param {} grid\n     * @return [] pairs\n     */\n    Grid._createActivePairsList = function(grid) {\n        var pair,\n            gridPairs = grid.pairs,\n            pairKeys = Common.keys(gridPairs),\n            pairKeysLength = pairKeys.length,\n            pairs = [],\n            k;\n\n        // iterate over grid.pairs\n        for (k = 0; k < pairKeysLength; k++) {\n            pair = gridPairs[pairKeys[k]];\n\n            // if pair exists in at least one bucket\n            // it is a pair that needs further collision testing so push it\n            if (pair[2] > 0) {\n                pairs.push(pair);\n            } else {\n                delete gridPairs[pairKeys[k]];\n            }\n        }\n\n        return pairs;\n    };\n    \n})();\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.MouseConstraint` module contains methods for creating mouse constraints.\n* Mouse constraints are used for allowing user interaction, providing the ability to move bodies via the mouse or touch.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class MouseConstraint\n*/\n\nvar MouseConstraint = {};\n\nmodule.exports = MouseConstraint;\n\nvar Vertices = __webpack_require__(3);\nvar Sleeping = __webpack_require__(7);\nvar Mouse = __webpack_require__(14);\nvar Events = __webpack_require__(5);\nvar Detector = __webpack_require__(13);\nvar Constraint = __webpack_require__(10);\nvar Composite = __webpack_require__(6);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    /**\n     * Creates a new mouse constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {engine} engine\n     * @param {} options\n     * @return {MouseConstraint} A new MouseConstraint\n     */\n    MouseConstraint.create = function(engine, options) {\n        var mouse = (engine ? engine.mouse : null) || (options ? options.mouse : null);\n\n        if (!mouse) {\n            if (engine && engine.render && engine.render.canvas) {\n                mouse = Mouse.create(engine.render.canvas);\n            } else if (options && options.element) {\n                mouse = Mouse.create(options.element);\n            } else {\n                mouse = Mouse.create();\n                Common.warn('MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected');\n            }\n        }\n\n        var constraint = Constraint.create({ \n            label: 'Mouse Constraint',\n            pointA: mouse.position,\n            pointB: { x: 0, y: 0 },\n            length: 0.01, \n            stiffness: 0.1,\n            angularStiffness: 1,\n            render: {\n                strokeStyle: '#90EE90',\n                lineWidth: 3\n            }\n        });\n\n        var defaults = {\n            type: 'mouseConstraint',\n            mouse: mouse,\n            element: null,\n            body: null,\n            constraint: constraint,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            }\n        };\n\n        var mouseConstraint = Common.extend(defaults, options);\n\n        Events.on(engine, 'beforeUpdate', function() {\n            var allBodies = Composite.allBodies(engine.world);\n            MouseConstraint.update(mouseConstraint, allBodies);\n            MouseConstraint._triggerEvents(mouseConstraint);\n        });\n\n        return mouseConstraint;\n    };\n\n    /**\n     * Updates the given mouse constraint.\n     * @private\n     * @method update\n     * @param {MouseConstraint} mouseConstraint\n     * @param {body[]} bodies\n     */\n    MouseConstraint.update = function(mouseConstraint, bodies) {\n        var mouse = mouseConstraint.mouse,\n            constraint = mouseConstraint.constraint,\n            body = mouseConstraint.body;\n\n        if (mouse.button === 0) {\n            if (!constraint.bodyB) {\n                for (var i = 0; i < bodies.length; i++) {\n                    body = bodies[i];\n                    if (Bounds.contains(body.bounds, mouse.position) \n                            && Detector.canCollide(body.collisionFilter, mouseConstraint.collisionFilter)) {\n                        for (var j = body.parts.length > 1 ? 1 : 0; j < body.parts.length; j++) {\n                            var part = body.parts[j];\n                            if (Vertices.contains(part.vertices, mouse.position)) {\n                                constraint.pointA = mouse.position;\n                                constraint.bodyB = mouseConstraint.body = body;\n                                constraint.pointB = { x: mouse.position.x - body.position.x, y: mouse.position.y - body.position.y };\n                                constraint.angleB = body.angle;\n\n                                Sleeping.set(body, false);\n                                Events.trigger(mouseConstraint, 'startdrag', { mouse: mouse, body: body });\n\n                                break;\n                            }\n                        }\n                    }\n                }\n            } else {\n                Sleeping.set(constraint.bodyB, false);\n                constraint.pointA = mouse.position;\n            }\n        } else {\n            constraint.bodyB = mouseConstraint.body = null;\n            constraint.pointB = null;\n\n            if (body)\n                Events.trigger(mouseConstraint, 'enddrag', { mouse: mouse, body: body });\n        }\n    };\n\n    /**\n     * Triggers mouse constraint events.\n     * @method _triggerEvents\n     * @private\n     * @param {mouse} mouseConstraint\n     */\n    MouseConstraint._triggerEvents = function(mouseConstraint) {\n        var mouse = mouseConstraint.mouse,\n            mouseEvents = mouse.sourceEvents;\n\n        if (mouseEvents.mousemove)\n            Events.trigger(mouseConstraint, 'mousemove', { mouse: mouse });\n\n        if (mouseEvents.mousedown)\n            Events.trigger(mouseConstraint, 'mousedown', { mouse: mouse });\n\n        if (mouseEvents.mouseup)\n            Events.trigger(mouseConstraint, 'mouseup', { mouse: mouse });\n\n        // reset the mouse state ready for the next step\n        Mouse.clearSourceEvents(mouse);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when the mouse has moved (or a touch moves) during the last step\n    *\n    * @event mousemove\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is down (or a touch has started) during the last step\n    *\n    * @event mousedown\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is up (or a touch has ended) during the last step\n    *\n    * @event mouseup\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user starts dragging a body\n    *\n    * @event startdrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user ends dragging a body\n    *\n    * @event enddrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body that has stopped being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * The `Mouse` instance in use. If not supplied in `MouseConstraint.create`, one will be created.\n     *\n     * @property mouse\n     * @type mouse\n     * @default mouse\n     */\n\n    /**\n     * The `Body` that is currently being moved by the user, or `null` if no body.\n     *\n     * @property body\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The `Constraint` object that is used to move the body during interaction.\n     *\n     * @property constraint\n     * @type constraint\n     */\n\n    /**\n     * An `Object` that specifies the collision filter properties.\n     * The collision filter allows the user to define which types of body this mouse constraint can interact with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n})();\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Query` module contains methods for performing collision queries.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Query\n*/\n\nvar Query = {};\n\nmodule.exports = Query;\n\nvar Vector = __webpack_require__(2);\nvar Collision = __webpack_require__(8);\nvar Bounds = __webpack_require__(1);\nvar Bodies = __webpack_require__(12);\nvar Vertices = __webpack_require__(3);\n\n(function() {\n\n    /**\n     * Returns a list of collisions between `body` and `bodies`.\n     * @method collides\n     * @param {body} body\n     * @param {body[]} bodies\n     * @return {collision[]} Collisions\n     */\n    Query.collides = function(body, bodies) {\n        var collisions = [],\n            bodiesLength = bodies.length,\n            bounds = body.bounds,\n            collides = Collision.collides,\n            overlaps = Bounds.overlaps;\n\n        for (var i = 0; i < bodiesLength; i++) {\n            var bodyA = bodies[i],\n                partsALength = bodyA.parts.length,\n                partsAStart = partsALength === 1 ? 0 : 1;\n            \n            if (overlaps(bodyA.bounds, bounds)) {\n                for (var j = partsAStart; j < partsALength; j++) {\n                    var part = bodyA.parts[j];\n\n                    if (overlaps(part.bounds, bounds)) {\n                        var collision = collides(part, body);\n\n                        if (collision) {\n                            collisions.push(collision);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Casts a ray segment against a set of bodies and returns all collisions, ray width is optional. Intersection points are not provided.\n     * @method ray\n     * @param {body[]} bodies\n     * @param {vector} startPoint\n     * @param {vector} endPoint\n     * @param {number} [rayWidth]\n     * @return {collision[]} Collisions\n     */\n    Query.ray = function(bodies, startPoint, endPoint, rayWidth) {\n        rayWidth = rayWidth || 1e-100;\n\n        var rayAngle = Vector.angle(startPoint, endPoint),\n            rayLength = Vector.magnitude(Vector.sub(startPoint, endPoint)),\n            rayX = (endPoint.x + startPoint.x) * 0.5,\n            rayY = (endPoint.y + startPoint.y) * 0.5,\n            ray = Bodies.rectangle(rayX, rayY, rayLength, rayWidth, { angle: rayAngle }),\n            collisions = Query.collides(ray, bodies);\n\n        for (var i = 0; i < collisions.length; i += 1) {\n            var collision = collisions[i];\n            collision.body = collision.bodyB = collision.bodyA;            \n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns all bodies whose bounds are inside (or outside if set) the given set of bounds, from the given set of bodies.\n     * @method region\n     * @param {body[]} bodies\n     * @param {bounds} bounds\n     * @param {bool} [outside=false]\n     * @return {body[]} The bodies matching the query\n     */\n    Query.region = function(bodies, bounds, outside) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                overlaps = Bounds.overlaps(body.bounds, bounds);\n            if ((overlaps && !outside) || (!overlaps && outside))\n                result.push(body);\n        }\n\n        return result;\n    };\n\n    /**\n     * Returns all bodies whose vertices contain the given point, from the given set of bodies.\n     * @method point\n     * @param {body[]} bodies\n     * @param {vector} point\n     * @return {body[]} The bodies matching the query\n     */\n    Query.point = function(bodies, point) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n            \n            if (Bounds.contains(body.bounds, point)) {\n                for (var j = body.parts.length === 1 ? 0 : 1; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n\n                    if (Bounds.contains(part.bounds, point)\n                        && Vertices.contains(part.vertices, point)) {\n                        result.push(body);\n                        break;\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n\n})();\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Render` module is a lightweight, optional utility which provides a simple canvas based renderer for visualising instances of `Matter.Engine`.\n* It is intended for development and debugging purposes, but may also be suitable for simple games.\n* It includes a number of drawing options including wireframe, vector with support for sprites and viewports.\n*\n* @class Render\n*/\n\nvar Render = {};\n\nmodule.exports = Render;\n\nvar Body = __webpack_require__(4);\nvar Common = __webpack_require__(0);\nvar Composite = __webpack_require__(6);\nvar Bounds = __webpack_require__(1);\nvar Events = __webpack_require__(5);\nvar Vector = __webpack_require__(2);\nvar Mouse = __webpack_require__(14);\n\n(function() {\n\n    var _requestAnimationFrame,\n        _cancelAnimationFrame;\n\n    if (typeof window !== 'undefined') {\n        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame\n                                      || function(callback){ window.setTimeout(function() { callback(Common.now()); }, 1000 / 60); };\n\n        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame\n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n    }\n\n    Render._goodFps = 30;\n    Render._goodDelta = 1000 / 60;\n\n    /**\n     * Creates a new renderer. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {render} A new renderer\n     */\n    Render.create = function(options) {\n        var defaults = {\n            engine: null,\n            element: null,\n            canvas: null,\n            mouse: null,\n            frameRequestId: null,\n            timing: {\n                historySize: 60,\n                delta: 0,\n                deltaHistory: [],\n                lastTime: 0,\n                lastTimestamp: 0,\n                lastElapsed: 0,\n                timestampElapsed: 0,\n                timestampElapsedHistory: [],\n                engineDeltaHistory: [],\n                engineElapsedHistory: [],\n                engineUpdatesHistory: [],\n                elapsedHistory: []\n            },\n            options: {\n                width: 800,\n                height: 600,\n                pixelRatio: 1,\n                background: '#14151f',\n                wireframeBackground: '#14151f',\n                wireframeStrokeStyle: '#bbb',\n                hasBounds: !!options.bounds,\n                enabled: true,\n                wireframes: true,\n                showSleeping: true,\n                showDebug: false,\n                showStats: false,\n                showPerformance: false,\n                showBounds: false,\n                showVelocity: false,\n                showCollisions: false,\n                showSeparations: false,\n                showAxes: false,\n                showPositions: false,\n                showAngleIndicator: false,\n                showIds: false,\n                showVertexNumbers: false,\n                showConvexHulls: false,\n                showInternalEdges: false,\n                showMousePosition: false\n            }\n        };\n\n        var render = Common.extend(defaults, options);\n\n        if (render.canvas) {\n            render.canvas.width = render.options.width || render.canvas.width;\n            render.canvas.height = render.options.height || render.canvas.height;\n        }\n\n        render.mouse = options.mouse;\n        render.engine = options.engine;\n        render.canvas = render.canvas || _createCanvas(render.options.width, render.options.height);\n        render.context = render.canvas.getContext('2d');\n        render.textures = {};\n\n        render.bounds = render.bounds || {\n            min: {\n                x: 0,\n                y: 0\n            },\n            max: {\n                x: render.canvas.width,\n                y: render.canvas.height\n            }\n        };\n\n        // for temporary back compatibility only\n        render.controller = Render;\n        render.options.showBroadphase = false;\n\n        if (render.options.pixelRatio !== 1) {\n            Render.setPixelRatio(render, render.options.pixelRatio);\n        }\n\n        if (Common.isElement(render.element)) {\n            render.element.appendChild(render.canvas);\n        }\n\n        return render;\n    };\n\n    /**\n     * Continuously updates the render canvas on the `requestAnimationFrame` event.\n     * @method run\n     * @param {render} render\n     */\n    Render.run = function(render) {\n        (function loop(time){\n            render.frameRequestId = _requestAnimationFrame(loop);\n            \n            _updateTiming(render, time);\n\n            Render.world(render, time);\n\n            render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n\n            if (render.options.showStats || render.options.showDebug) {\n                Render.stats(render, render.context, time);\n            }\n\n            if (render.options.showPerformance || render.options.showDebug) {\n                Render.performance(render, render.context, time);\n            }\n\n            render.context.setTransform(1, 0, 0, 1, 0, 0);\n        })();\n    };\n\n    /**\n     * Ends execution of `Render.run` on the given `render`, by canceling the animation frame request event loop.\n     * @method stop\n     * @param {render} render\n     */\n    Render.stop = function(render) {\n        _cancelAnimationFrame(render.frameRequestId);\n    };\n\n    /**\n     * Sets the pixel ratio of the renderer and updates the canvas.\n     * To automatically detect the correct ratio, pass the string `'auto'` for `pixelRatio`.\n     * @method setPixelRatio\n     * @param {render} render\n     * @param {number} pixelRatio\n     */\n    Render.setPixelRatio = function(render, pixelRatio) {\n        var options = render.options,\n            canvas = render.canvas;\n\n        if (pixelRatio === 'auto') {\n            pixelRatio = _getPixelRatio(canvas);\n        }\n\n        options.pixelRatio = pixelRatio;\n        canvas.setAttribute('data-pixel-ratio', pixelRatio);\n        canvas.width = options.width * pixelRatio;\n        canvas.height = options.height * pixelRatio;\n        canvas.style.width = options.width + 'px';\n        canvas.style.height = options.height + 'px';\n    };\n\n    /**\n     * Sets the render `width` and `height`.\n     * \n     * Updates the canvas accounting for `render.options.pixelRatio`.  \n     * \n     * Updates the bottom right render bound `render.bounds.max` relative to the provided `width` and `height`.\n     * The top left render bound `render.bounds.min` isn't changed.\n     * \n     * Follow this call with `Render.lookAt` if you need to change the render bounds.\n     * \n     * See also `Render.setPixelRatio`.\n     * @method setSize\n     * @param {render} render\n     * @param {number} width The width (in CSS pixels)\n     * @param {number} height The height (in CSS pixels)\n     */\n    Render.setSize = function(render, width, height) {\n        render.options.width = width;\n        render.options.height = height;\n        render.bounds.max.x = render.bounds.min.x + width;\n        render.bounds.max.y = render.bounds.min.y + height;\n\n        if (render.options.pixelRatio !== 1) {\n            Render.setPixelRatio(render, render.options.pixelRatio);\n        } else {\n            render.canvas.width = width;\n            render.canvas.height = height;\n        }\n    };\n\n    /**\n     * Positions and sizes the viewport around the given object bounds.\n     * Objects must have at least one of the following properties:\n     * - `object.bounds`\n     * - `object.position`\n     * - `object.min` and `object.max`\n     * - `object.x` and `object.y`\n     * @method lookAt\n     * @param {render} render\n     * @param {object[]} objects\n     * @param {vector} [padding]\n     * @param {bool} [center=true]\n     */\n    Render.lookAt = function(render, objects, padding, center) {\n        center = typeof center !== 'undefined' ? center : true;\n        objects = Common.isArray(objects) ? objects : [objects];\n        padding = padding || {\n            x: 0,\n            y: 0\n        };\n\n        // find bounds of all objects\n        var bounds = {\n            min: { x: Infinity, y: Infinity },\n            max: { x: -Infinity, y: -Infinity }\n        };\n\n        for (var i = 0; i < objects.length; i += 1) {\n            var object = objects[i],\n                min = object.bounds ? object.bounds.min : (object.min || object.position || object),\n                max = object.bounds ? object.bounds.max : (object.max || object.position || object);\n\n            if (min && max) {\n                if (min.x < bounds.min.x)\n                    bounds.min.x = min.x;\n\n                if (max.x > bounds.max.x)\n                    bounds.max.x = max.x;\n\n                if (min.y < bounds.min.y)\n                    bounds.min.y = min.y;\n\n                if (max.y > bounds.max.y)\n                    bounds.max.y = max.y;\n            }\n        }\n\n        // find ratios\n        var width = (bounds.max.x - bounds.min.x) + 2 * padding.x,\n            height = (bounds.max.y - bounds.min.y) + 2 * padding.y,\n            viewHeight = render.canvas.height,\n            viewWidth = render.canvas.width,\n            outerRatio = viewWidth / viewHeight,\n            innerRatio = width / height,\n            scaleX = 1,\n            scaleY = 1;\n\n        // find scale factor\n        if (innerRatio > outerRatio) {\n            scaleY = innerRatio / outerRatio;\n        } else {\n            scaleX = outerRatio / innerRatio;\n        }\n\n        // enable bounds\n        render.options.hasBounds = true;\n\n        // position and size\n        render.bounds.min.x = bounds.min.x;\n        render.bounds.max.x = bounds.min.x + width * scaleX;\n        render.bounds.min.y = bounds.min.y;\n        render.bounds.max.y = bounds.min.y + height * scaleY;\n\n        // center\n        if (center) {\n            render.bounds.min.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.max.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.min.y += height * 0.5 - (height * scaleY) * 0.5;\n            render.bounds.max.y += height * 0.5 - (height * scaleY) * 0.5;\n        }\n\n        // padding\n        render.bounds.min.x -= padding.x;\n        render.bounds.max.x -= padding.x;\n        render.bounds.min.y -= padding.y;\n        render.bounds.max.y -= padding.y;\n\n        // update mouse\n        if (render.mouse) {\n            Mouse.setScale(render.mouse, {\n                x: (render.bounds.max.x - render.bounds.min.x) / render.canvas.width,\n                y: (render.bounds.max.y - render.bounds.min.y) / render.canvas.height\n            });\n\n            Mouse.setOffset(render.mouse, render.bounds.min);\n        }\n    };\n\n    /**\n     * Applies viewport transforms based on `render.bounds` to a render context.\n     * @method startViewTransform\n     * @param {render} render\n     */\n    Render.startViewTransform = function(render) {\n        var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n            boundsHeight = render.bounds.max.y - render.bounds.min.y,\n            boundsScaleX = boundsWidth / render.options.width,\n            boundsScaleY = boundsHeight / render.options.height;\n\n        render.context.setTransform(\n            render.options.pixelRatio / boundsScaleX, 0, 0, \n            render.options.pixelRatio / boundsScaleY, 0, 0\n        );\n        \n        render.context.translate(-render.bounds.min.x, -render.bounds.min.y);\n    };\n\n    /**\n     * Resets all transforms on the render context.\n     * @method endViewTransform\n     * @param {render} render\n     */\n    Render.endViewTransform = function(render) {\n        render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n    };\n\n    /**\n     * Renders the given `engine`'s `Matter.World` object.\n     * This is the entry point for all rendering and should be called every time the scene changes.\n     * @method world\n     * @param {render} render\n     */\n    Render.world = function(render, time) {\n        var startTime = Common.now(),\n            engine = render.engine,\n            world = engine.world,\n            canvas = render.canvas,\n            context = render.context,\n            options = render.options,\n            timing = render.timing;\n\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world),\n            background = options.wireframes ? options.wireframeBackground : options.background,\n            bodies = [],\n            constraints = [],\n            i;\n\n        var event = {\n            timestamp: engine.timing.timestamp\n        };\n\n        Events.trigger(render, 'beforeRender', event);\n\n        // apply background if it has changed\n        if (render.currentBackground !== background)\n            _applyBackground(render, background);\n\n        // clear the canvas with a transparent fill, to allow the canvas background to show\n        context.globalCompositeOperation = 'source-in';\n        context.fillStyle = \"transparent\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        context.globalCompositeOperation = 'source-over';\n\n        // handle bounds\n        if (options.hasBounds) {\n            // filter out bodies that are not in view\n            for (i = 0; i < allBodies.length; i++) {\n                var body = allBodies[i];\n                if (Bounds.overlaps(body.bounds, render.bounds))\n                    bodies.push(body);\n            }\n\n            // filter out constraints that are not in view\n            for (i = 0; i < allConstraints.length; i++) {\n                var constraint = allConstraints[i],\n                    bodyA = constraint.bodyA,\n                    bodyB = constraint.bodyB,\n                    pointAWorld = constraint.pointA,\n                    pointBWorld = constraint.pointB;\n\n                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);\n                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);\n\n                if (!pointAWorld || !pointBWorld)\n                    continue;\n\n                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))\n                    constraints.push(constraint);\n            }\n\n            // transform the view\n            Render.startViewTransform(render);\n\n            // update mouse\n            if (render.mouse) {\n                Mouse.setScale(render.mouse, {\n                    x: (render.bounds.max.x - render.bounds.min.x) / render.options.width,\n                    y: (render.bounds.max.y - render.bounds.min.y) / render.options.height\n                });\n\n                Mouse.setOffset(render.mouse, render.bounds.min);\n            }\n        } else {\n            constraints = allConstraints;\n            bodies = allBodies;\n\n            if (render.options.pixelRatio !== 1) {\n                render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n            }\n        }\n\n        if (!options.wireframes || (engine.enableSleeping && options.showSleeping)) {\n            // fully featured rendering of bodies\n            Render.bodies(render, bodies, context);\n        } else {\n            if (options.showConvexHulls)\n                Render.bodyConvexHulls(render, bodies, context);\n\n            // optimised method for wireframes only\n            Render.bodyWireframes(render, bodies, context);\n        }\n\n        if (options.showBounds)\n            Render.bodyBounds(render, bodies, context);\n\n        if (options.showAxes || options.showAngleIndicator)\n            Render.bodyAxes(render, bodies, context);\n\n        if (options.showPositions)\n            Render.bodyPositions(render, bodies, context);\n\n        if (options.showVelocity)\n            Render.bodyVelocity(render, bodies, context);\n\n        if (options.showIds)\n            Render.bodyIds(render, bodies, context);\n\n        if (options.showSeparations)\n            Render.separations(render, engine.pairs.list, context);\n\n        if (options.showCollisions)\n            Render.collisions(render, engine.pairs.list, context);\n\n        if (options.showVertexNumbers)\n            Render.vertexNumbers(render, bodies, context);\n\n        if (options.showMousePosition)\n            Render.mousePosition(render, render.mouse, context);\n\n        Render.constraints(constraints, context);\n\n        if (options.hasBounds) {\n            // revert view transforms\n            Render.endViewTransform(render);\n        }\n\n        Events.trigger(render, 'afterRender', event);\n\n        // log the time elapsed computing this update\n        timing.lastElapsed = Common.now() - startTime;\n    };\n\n    /**\n     * Renders statistics about the engine and world useful for debugging.\n     * @private\n     * @method stats\n     * @param {render} render\n     * @param {RenderingContext} context\n     * @param {Number} time\n     */\n    Render.stats = function(render, context, time) {\n        var engine = render.engine,\n            world = engine.world,\n            bodies = Composite.allBodies(world),\n            parts = 0,\n            width = 55,\n            height = 44,\n            x = 0,\n            y = 0;\n        \n        // count parts\n        for (var i = 0; i < bodies.length; i += 1) {\n            parts += bodies[i].parts.length;\n        }\n\n        // sections\n        var sections = {\n            'Part': parts,\n            'Body': bodies.length,\n            'Cons': Composite.allConstraints(world).length,\n            'Comp': Composite.allComposites(world).length,\n            'Pair': engine.pairs.list.length\n        };\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(x, y, width * 5.5, height);\n\n        context.font = '12px Arial';\n        context.textBaseline = 'top';\n        context.textAlign = 'right';\n\n        // sections\n        for (var key in sections) {\n            var section = sections[key];\n            // label\n            context.fillStyle = '#aaa';\n            context.fillText(key, x + width, y + 8);\n\n            // value\n            context.fillStyle = '#eee';\n            context.fillText(section, x + width, y + 26);\n\n            x += width;\n        }\n    };\n\n    /**\n     * Renders engine and render performance information.\n     * @private\n     * @method performance\n     * @param {render} render\n     * @param {RenderingContext} context\n     */\n    Render.performance = function(render, context) {\n        var engine = render.engine,\n            timing = render.timing,\n            deltaHistory = timing.deltaHistory,\n            elapsedHistory = timing.elapsedHistory,\n            timestampElapsedHistory = timing.timestampElapsedHistory,\n            engineDeltaHistory = timing.engineDeltaHistory,\n            engineUpdatesHistory = timing.engineUpdatesHistory,\n            engineElapsedHistory = timing.engineElapsedHistory,\n            lastEngineUpdatesPerFrame = engine.timing.lastUpdatesPerFrame,\n            lastEngineDelta = engine.timing.lastDelta;\n        \n        var deltaMean = _mean(deltaHistory),\n            elapsedMean = _mean(elapsedHistory),\n            engineDeltaMean = _mean(engineDeltaHistory),\n            engineUpdatesMean = _mean(engineUpdatesHistory),\n            engineElapsedMean = _mean(engineElapsedHistory),\n            timestampElapsedMean = _mean(timestampElapsedHistory),\n            rateMean = (timestampElapsedMean / deltaMean) || 0,\n            neededUpdatesPerFrame = Math.round(deltaMean / lastEngineDelta),\n            fps = (1000 / deltaMean) || 0;\n\n        var graphHeight = 4,\n            gap = 12,\n            width = 60,\n            height = 34,\n            x = 10,\n            y = 69;\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(0, 50, gap * 5 + width * 6 + 22, height);\n\n        // show FPS\n        Render.status(\n            context, x, y, width, graphHeight, deltaHistory.length, \n            Math.round(fps) + ' fps', \n            fps / Render._goodFps,\n            function(i) { return (deltaHistory[i] / deltaMean) - 1; }\n        );\n\n        // show engine delta\n        Render.status(\n            context, x + gap + width, y, width, graphHeight, engineDeltaHistory.length,\n            lastEngineDelta.toFixed(2) + ' dt', \n            Render._goodDelta / lastEngineDelta,\n            function(i) { return (engineDeltaHistory[i] / engineDeltaMean) - 1; }\n        );\n\n        // show engine updates per frame\n        Render.status(\n            context, x + (gap + width) * 2, y, width, graphHeight, engineUpdatesHistory.length,\n            lastEngineUpdatesPerFrame + ' upf', \n            Math.pow(Common.clamp((engineUpdatesMean / neededUpdatesPerFrame) || 1, 0, 1), 4),\n            function(i) { return (engineUpdatesHistory[i] / engineUpdatesMean) - 1; }\n        );\n\n        // show engine update time\n        Render.status(\n            context, x + (gap + width) * 3, y, width, graphHeight, engineElapsedHistory.length,\n            engineElapsedMean.toFixed(2) + ' ut', \n            1 - (lastEngineUpdatesPerFrame * engineElapsedMean / Render._goodFps),\n            function(i) { return (engineElapsedHistory[i] / engineElapsedMean) - 1; }\n        );\n\n        // show render time\n        Render.status(\n            context, x + (gap + width) * 4, y, width, graphHeight, elapsedHistory.length,\n            elapsedMean.toFixed(2) + ' rt', \n            1 - (elapsedMean / Render._goodFps),\n            function(i) { return (elapsedHistory[i] / elapsedMean) - 1; }\n        );\n\n        // show effective speed\n        Render.status(\n            context, x + (gap + width) * 5, y, width, graphHeight, timestampElapsedHistory.length, \n            rateMean.toFixed(2) + ' x', \n            rateMean * rateMean * rateMean,\n            function(i) { return (((timestampElapsedHistory[i] / deltaHistory[i]) / rateMean) || 0) - 1; }\n        );\n    };\n\n    /**\n     * Renders a label, indicator and a chart.\n     * @private\n     * @method status\n     * @param {RenderingContext} context\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} count\n     * @param {string} label\n     * @param {string} indicator\n     * @param {function} plotY\n     */\n    Render.status = function(context, x, y, width, height, count, label, indicator, plotY) {\n        // background\n        context.strokeStyle = '#888';\n        context.fillStyle = '#444';\n        context.lineWidth = 1;\n        context.fillRect(x, y + 7, width, 1);\n\n        // chart\n        context.beginPath();\n        context.moveTo(x, y + 7 - height * Common.clamp(0.4 * plotY(0), -2, 2));\n        for (var i = 0; i < width; i += 1) {\n            context.lineTo(x + i, y + 7 - (i < count ? height * Common.clamp(0.4 * plotY(i), -2, 2) : 0));\n        }\n        context.stroke();\n\n        // indicator\n        context.fillStyle = 'hsl(' + Common.clamp(25 + 95 * indicator, 0, 120) + ',100%,60%)';\n        context.fillRect(x, y - 7, 4, 4);\n\n        // label\n        context.font = '12px Arial';\n        context.textBaseline = 'middle';\n        context.textAlign = 'right';\n        context.fillStyle = '#eee';\n        context.fillText(label, x + width, y - 5);\n    };\n\n    /**\n     * Description\n     * @private\n     * @method constraints\n     * @param {constraint[]} constraints\n     * @param {RenderingContext} context\n     */\n    Render.constraints = function(constraints, context) {\n        var c = context;\n\n        for (var i = 0; i < constraints.length; i++) {\n            var constraint = constraints[i];\n\n            if (!constraint.render.visible || !constraint.pointA || !constraint.pointB)\n                continue;\n\n            var bodyA = constraint.bodyA,\n                bodyB = constraint.bodyB,\n                start,\n                end;\n\n            if (bodyA) {\n                start = Vector.add(bodyA.position, constraint.pointA);\n            } else {\n                start = constraint.pointA;\n            }\n\n            if (constraint.render.type === 'pin') {\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n            } else {\n                if (bodyB) {\n                    end = Vector.add(bodyB.position, constraint.pointB);\n                } else {\n                    end = constraint.pointB;\n                }\n\n                c.beginPath();\n                c.moveTo(start.x, start.y);\n\n                if (constraint.render.type === 'spring') {\n                    var delta = Vector.sub(end, start),\n                        normal = Vector.perp(Vector.normalise(delta)),\n                        coils = Math.ceil(Common.clamp(constraint.length / 5, 12, 20)),\n                        offset;\n\n                    for (var j = 1; j < coils; j += 1) {\n                        offset = j % 2 === 0 ? 1 : -1;\n\n                        c.lineTo(\n                            start.x + delta.x * (j / coils) + normal.x * offset * 4,\n                            start.y + delta.y * (j / coils) + normal.y * offset * 4\n                        );\n                    }\n                }\n\n                c.lineTo(end.x, end.y);\n            }\n\n            if (constraint.render.lineWidth) {\n                c.lineWidth = constraint.render.lineWidth;\n                c.strokeStyle = constraint.render.strokeStyle;\n                c.stroke();\n            }\n\n            if (constraint.render.anchors) {\n                c.fillStyle = constraint.render.strokeStyle;\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.arc(end.x, end.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n                c.fill();\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method bodies\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodies = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            showInternalEdges = options.showInternalEdges || !options.wireframes,\n            body,\n            part,\n            i,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                if (!part.render.visible)\n                    continue;\n\n                if (options.showSleeping && body.isSleeping) {\n                    c.globalAlpha = 0.5 * part.render.opacity;\n                } else if (part.render.opacity !== 1) {\n                    c.globalAlpha = part.render.opacity;\n                }\n\n                if (part.render.sprite && part.render.sprite.texture && !options.wireframes) {\n                    // part sprite\n                    var sprite = part.render.sprite,\n                        texture = _getTexture(render, sprite.texture);\n\n                    c.translate(part.position.x, part.position.y);\n                    c.rotate(part.angle);\n\n                    c.drawImage(\n                        texture,\n                        texture.width * -sprite.xOffset * sprite.xScale,\n                        texture.height * -sprite.yOffset * sprite.yScale,\n                        texture.width * sprite.xScale,\n                        texture.height * sprite.yScale\n                    );\n\n                    // revert translation, hopefully faster than save / restore\n                    c.rotate(-part.angle);\n                    c.translate(-part.position.x, -part.position.y);\n                } else {\n                    // part polygon\n                    if (part.circleRadius) {\n                        c.beginPath();\n                        c.arc(part.position.x, part.position.y, part.circleRadius, 0, 2 * Math.PI);\n                    } else {\n                        c.beginPath();\n                        c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                        for (var j = 1; j < part.vertices.length; j++) {\n                            if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                                c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                            } else {\n                                c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                            }\n\n                            if (part.vertices[j].isInternal && !showInternalEdges) {\n                                c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                            }\n                        }\n\n                        c.lineTo(part.vertices[0].x, part.vertices[0].y);\n                        c.closePath();\n                    }\n\n                    if (!options.wireframes) {\n                        c.fillStyle = part.render.fillStyle;\n\n                        if (part.render.lineWidth) {\n                            c.lineWidth = part.render.lineWidth;\n                            c.strokeStyle = part.render.strokeStyle;\n                            c.stroke();\n                        }\n\n                        c.fill();\n                    } else {\n                        c.lineWidth = 1;\n                        c.strokeStyle = render.options.wireframeStrokeStyle;\n                        c.stroke();\n                    }\n                }\n\n                c.globalAlpha = 1;\n            }\n        }\n    };\n\n    /**\n     * Optimised method for drawing body wireframes in one pass\n     * @private\n     * @method bodyWireframes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyWireframes = function(render, bodies, context) {\n        var c = context,\n            showInternalEdges = render.options.showInternalEdges,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render all bodies\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                for (j = 1; j < part.vertices.length; j++) {\n                    if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                        c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                    } else {\n                        c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                    }\n\n                    if (part.vertices[j].isInternal && !showInternalEdges) {\n                        c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                    }\n                }\n\n                c.lineTo(part.vertices[0].x, part.vertices[0].y);\n            }\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = render.options.wireframeStrokeStyle;\n        c.stroke();\n    };\n\n    /**\n     * Optimised method for drawing body convex hull wireframes in one pass\n     * @private\n     * @method bodyConvexHulls\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyConvexHulls = function(render, bodies, context) {\n        var c = context,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render convex hulls\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible || body.parts.length === 1)\n                continue;\n\n            c.moveTo(body.vertices[0].x, body.vertices[0].y);\n\n            for (j = 1; j < body.vertices.length; j++) {\n                c.lineTo(body.vertices[j].x, body.vertices[j].y);\n            }\n\n            c.lineTo(body.vertices[0].x, body.vertices[0].y);\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = 'rgba(255,255,255,0.2)';\n        c.stroke();\n    };\n\n    /**\n     * Renders body vertex numbers.\n     * @private\n     * @method vertexNumbers\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.vertexNumbers = function(render, bodies, context) {\n        var c = context,\n            i,\n            j,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            var parts = bodies[i].parts;\n            for (k = parts.length > 1 ? 1 : 0; k < parts.length; k++) {\n                var part = parts[k];\n                for (j = 0; j < part.vertices.length; j++) {\n                    c.fillStyle = 'rgba(255,255,255,0.2)';\n                    c.fillText(i + '_' + j, part.position.x + (part.vertices[j].x - part.position.x) * 0.8, part.position.y + (part.vertices[j].y - part.position.y) * 0.8);\n                }\n            }\n        }\n    };\n\n    /**\n     * Renders mouse position.\n     * @private\n     * @method mousePosition\n     * @param {render} render\n     * @param {mouse} mouse\n     * @param {RenderingContext} context\n     */\n    Render.mousePosition = function(render, mouse, context) {\n        var c = context;\n        c.fillStyle = 'rgba(255,255,255,0.8)';\n        c.fillText(mouse.position.x + '  ' + mouse.position.y, mouse.position.x + 5, mouse.position.y - 5);\n    };\n\n    /**\n     * Draws body bounds\n     * @private\n     * @method bodyBounds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyBounds = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.render.visible) {\n                var parts = bodies[i].parts;\n                for (var j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    var part = parts[j];\n                    c.rect(part.bounds.min.x, part.bounds.min.y, part.bounds.max.x - part.bounds.min.x, part.bounds.max.y - part.bounds.min.y);\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,255,255,0.08)';\n        } else {\n            c.strokeStyle = 'rgba(0,0,0,0.1)';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Draws body angle indicators and axes\n     * @private\n     * @method bodyAxes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyAxes = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                parts = body.parts;\n\n            if (!body.render.visible)\n                continue;\n\n            if (options.showAxes) {\n                // render all axes\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        var axis = part.axes[k];\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo(part.position.x + axis.x * 20, part.position.y + axis.y * 20);\n                    }\n                }\n            } else {\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        // render a single axis indicator\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo((part.vertices[0].x + part.vertices[part.vertices.length-1].x) / 2,\n                            (part.vertices[0].y + part.vertices[part.vertices.length-1].y) / 2);\n                    }\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'indianred';\n            c.lineWidth = 1;\n        } else {\n            c.strokeStyle = 'rgba(255, 255, 255, 0.4)';\n            c.globalCompositeOperation = 'overlay';\n            c.lineWidth = 2;\n        }\n\n        c.stroke();\n        c.globalCompositeOperation = 'source-over';\n    };\n\n    /**\n     * Draws body positions\n     * @private\n     * @method bodyPositions\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyPositions = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            body,\n            part,\n            i,\n            k;\n\n        c.beginPath();\n\n        // render current positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n                c.arc(part.position.x, part.position.y, 3, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'indianred';\n        } else {\n            c.fillStyle = 'rgba(0,0,0,0.5)';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render previous positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n            if (body.render.visible) {\n                c.arc(body.positionPrev.x, body.positionPrev.y, 2, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        c.fillStyle = 'rgba(255,165,0,0.8)';\n        c.fill();\n    };\n\n    /**\n     * Draws body velocity\n     * @private\n     * @method bodyVelocity\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyVelocity = function(render, bodies, context) {\n        var c = context;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            var velocity = Body.getVelocity(body);\n\n            c.moveTo(body.position.x, body.position.y);\n            c.lineTo(body.position.x + velocity.x, body.position.y + velocity.y);\n        }\n\n        c.lineWidth = 3;\n        c.strokeStyle = 'cornflowerblue';\n        c.stroke();\n    };\n\n    /**\n     * Draws body ids\n     * @private\n     * @method bodyIds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyIds = function(render, bodies, context) {\n        var c = context,\n            i,\n            j;\n\n        for (i = 0; i < bodies.length; i++) {\n            if (!bodies[i].render.visible)\n                continue;\n\n            var parts = bodies[i].parts;\n            for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                var part = parts[j];\n                c.font = \"12px Arial\";\n                c.fillStyle = 'rgba(255,255,255,0.5)';\n                c.fillText(part.id, part.position.x + 10, part.position.y - 10);\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method collisions\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.collisions = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render collision positions\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            for (j = 0; j < pair.contactCount; j++) {\n                var contact = pair.contacts[j],\n                    vertex = contact.vertex;\n                c.rect(vertex.x - 1.5, vertex.y - 1.5, 3.5, 3.5);\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'rgba(255,255,255,0.7)';\n        } else {\n            c.fillStyle = 'orange';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render collision normals\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n\n            if (pair.contactCount > 0) {\n                var normalPosX = pair.contacts[0].vertex.x,\n                    normalPosY = pair.contacts[0].vertex.y;\n\n                if (pair.contactCount === 2) {\n                    normalPosX = (pair.contacts[0].vertex.x + pair.contacts[1].vertex.x) / 2;\n                    normalPosY = (pair.contacts[0].vertex.y + pair.contacts[1].vertex.y) / 2;\n                }\n\n                if (collision.bodyB === collision.supports[0].body || collision.bodyA.isStatic === true) {\n                    c.moveTo(normalPosX - collision.normal.x * 8, normalPosY - collision.normal.y * 8);\n                } else {\n                    c.moveTo(normalPosX + collision.normal.x * 8, normalPosY + collision.normal.y * 8);\n                }\n\n                c.lineTo(normalPosX, normalPosY);\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.7)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method separations\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.separations = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render separations\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.bodyA;\n            bodyB = collision.bodyB;\n\n            var k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyB.isStatic) k = 0;\n\n            c.moveTo(bodyB.position.x, bodyB.position.y);\n            c.lineTo(bodyB.position.x - collision.penetration.x * k, bodyB.position.y - collision.penetration.y * k);\n\n            k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyA.isStatic) k = 0;\n\n            c.moveTo(bodyA.position.x, bodyA.position.y);\n            c.lineTo(bodyA.position.x + collision.penetration.x * k, bodyA.position.y + collision.penetration.y * k);\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.5)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method inspector\n     * @param {inspector} inspector\n     * @param {RenderingContext} context\n     */\n    Render.inspector = function(inspector, context) {\n        var engine = inspector.engine,\n            selected = inspector.selected,\n            render = inspector.render,\n            options = render.options,\n            bounds;\n\n        if (options.hasBounds) {\n            var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n                boundsHeight = render.bounds.max.y - render.bounds.min.y,\n                boundsScaleX = boundsWidth / render.options.width,\n                boundsScaleY = boundsHeight / render.options.height;\n\n            context.scale(1 / boundsScaleX, 1 / boundsScaleY);\n            context.translate(-render.bounds.min.x, -render.bounds.min.y);\n        }\n\n        for (var i = 0; i < selected.length; i++) {\n            var item = selected[i].data;\n\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.9)';\n            context.setLineDash([1,2]);\n\n            switch (item.type) {\n\n            case 'body':\n\n                // render body selections\n                bounds = item.bounds;\n                context.beginPath();\n                context.rect(Math.floor(bounds.min.x - 3), Math.floor(bounds.min.y - 3),\n                    Math.floor(bounds.max.x - bounds.min.x + 6), Math.floor(bounds.max.y - bounds.min.y + 6));\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            case 'constraint':\n\n                // render constraint selections\n                var point = item.pointA;\n                if (item.bodyA)\n                    point = item.pointB;\n                context.beginPath();\n                context.arc(point.x, point.y, 10, 0, 2 * Math.PI);\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            }\n\n            context.setLineDash([]);\n            context.translate(-0.5, -0.5);\n        }\n\n        // render selection region\n        if (inspector.selectStart !== null) {\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.6)';\n            context.fillStyle = 'rgba(255,165,0,0.1)';\n            bounds = inspector.selectBounds;\n            context.beginPath();\n            context.rect(Math.floor(bounds.min.x), Math.floor(bounds.min.y),\n                Math.floor(bounds.max.x - bounds.min.x), Math.floor(bounds.max.y - bounds.min.y));\n            context.closePath();\n            context.stroke();\n            context.fill();\n            context.translate(-0.5, -0.5);\n        }\n\n        if (options.hasBounds)\n            context.setTransform(1, 0, 0, 1, 0, 0);\n    };\n\n    /**\n     * Updates render timing.\n     * @method _updateTiming\n     * @private\n     * @param {render} render\n     * @param {number} time\n     */\n    var _updateTiming = function(render, time) {\n        var engine = render.engine,\n            timing = render.timing,\n            historySize = timing.historySize,\n            timestamp = engine.timing.timestamp;\n\n        timing.delta = time - timing.lastTime || Render._goodDelta;\n        timing.lastTime = time;\n\n        timing.timestampElapsed = timestamp - timing.lastTimestamp || 0;\n        timing.lastTimestamp = timestamp;\n\n        timing.deltaHistory.unshift(timing.delta);\n        timing.deltaHistory.length = Math.min(timing.deltaHistory.length, historySize);\n\n        timing.engineDeltaHistory.unshift(engine.timing.lastDelta);\n        timing.engineDeltaHistory.length = Math.min(timing.engineDeltaHistory.length, historySize);\n\n        timing.timestampElapsedHistory.unshift(timing.timestampElapsed);\n        timing.timestampElapsedHistory.length = Math.min(timing.timestampElapsedHistory.length, historySize);\n\n        timing.engineUpdatesHistory.unshift(engine.timing.lastUpdatesPerFrame);\n        timing.engineUpdatesHistory.length = Math.min(timing.engineUpdatesHistory.length, historySize);\n\n        timing.engineElapsedHistory.unshift(engine.timing.lastElapsed);\n        timing.engineElapsedHistory.length = Math.min(timing.engineElapsedHistory.length, historySize);\n\n        timing.elapsedHistory.unshift(timing.lastElapsed);\n        timing.elapsedHistory.length = Math.min(timing.elapsedHistory.length, historySize);\n    };\n\n    /**\n     * Returns the mean value of the given numbers.\n     * @method _mean\n     * @private\n     * @param {Number[]} values\n     * @return {Number} the mean of given values\n     */\n    var _mean = function(values) {\n        var result = 0;\n        for (var i = 0; i < values.length; i += 1) {\n            result += values[i];\n        }\n        return (result / values.length) || 0;\n    };\n\n    /**\n     * @method _createCanvas\n     * @private\n     * @param {} width\n     * @param {} height\n     * @return canvas\n     */\n    var _createCanvas = function(width, height) {\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        canvas.oncontextmenu = function() { return false; };\n        canvas.onselectstart = function() { return false; };\n        return canvas;\n    };\n\n    /**\n     * Gets the pixel ratio of the canvas.\n     * @method _getPixelRatio\n     * @private\n     * @param {HTMLElement} canvas\n     * @return {Number} pixel ratio\n     */\n    var _getPixelRatio = function(canvas) {\n        var context = canvas.getContext('2d'),\n            devicePixelRatio = window.devicePixelRatio || 1,\n            backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio\n                                      || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio\n                                      || context.backingStorePixelRatio || 1;\n\n        return devicePixelRatio / backingStorePixelRatio;\n    };\n\n    /**\n     * Gets the requested texture (an Image) via its path\n     * @method _getTexture\n     * @private\n     * @param {render} render\n     * @param {string} imagePath\n     * @return {Image} texture\n     */\n    var _getTexture = function(render, imagePath) {\n        var image = render.textures[imagePath];\n\n        if (image)\n            return image;\n\n        image = render.textures[imagePath] = new Image();\n        image.src = imagePath;\n\n        return image;\n    };\n\n    /**\n     * Applies the background to the canvas using CSS.\n     * @method applyBackground\n     * @private\n     * @param {render} render\n     * @param {string} background\n     */\n    var _applyBackground = function(render, background) {\n        var cssBackground = background;\n\n        if (/(jpg|gif|png)$/.test(background))\n            cssBackground = 'url(' + background + ')';\n\n        render.canvas.style.background = cssBackground;\n        render.canvas.style.backgroundSize = \"contain\";\n        render.currentBackground = background;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired before rendering\n    *\n    * @event beforeRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after rendering\n    *\n    * @event afterRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A back-reference to the `Matter.Render` module.\n     *\n     * @deprecated\n     * @property controller\n     * @type render\n     */\n\n    /**\n     * A reference to the `Matter.Engine` instance to be used.\n     *\n     * @property engine\n     * @type engine\n     */\n\n    /**\n     * A reference to the element where the canvas is to be inserted (if `render.canvas` has not been specified)\n     *\n     * @property element\n     * @type HTMLElement\n     * @default null\n     */\n\n    /**\n     * The canvas element to render to. If not specified, one will be created if `render.element` has been specified.\n     *\n     * @property canvas\n     * @type HTMLCanvasElement\n     * @default null\n     */\n\n    /**\n     * A `Bounds` object that specifies the drawing view region.\n     * Rendering will be automatically transformed and scaled to fit within the canvas size (`render.options.width` and `render.options.height`).\n     * This allows for creating views that can pan or zoom around the scene.\n     * You must also set `render.options.hasBounds` to `true` to enable bounded rendering.\n     *\n     * @property bounds\n     * @type bounds\n     */\n\n    /**\n     * The 2d rendering context from the `render.canvas` element.\n     *\n     * @property context\n     * @type CanvasRenderingContext2D\n     */\n\n    /**\n     * The sprite texture cache.\n     *\n     * @property textures\n     * @type {}\n     */\n\n    /**\n     * The mouse to render if `render.options.showMousePosition` is enabled.\n     *\n     * @property mouse\n     * @type mouse\n     * @default null\n     */\n\n    /**\n     * The configuration options of the renderer.\n     *\n     * @property options\n     * @type {}\n     */\n\n    /**\n     * The target width in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.width\n     * @type number\n     * @default 800\n     */\n\n    /**\n     * The target height in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.height\n     * @type number\n     * @default 600\n     */\n\n    /**\n     * The [pixel ratio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio) to use when rendering.\n     *\n     * @property options.pixelRatio\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A CSS background color string to use when `render.options.wireframes` is disabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.background\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A CSS color string to use for background when `render.options.wireframes` is enabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.wireframeBackground\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A CSS color string to use for stroke when `render.options.wireframes` is enabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.wireframeStrokeStyle\n     * @type string\n     * @default '#bbb'\n     */\n\n    /**\n     * A flag that specifies if `render.bounds` should be used when rendering.\n     *\n     * @property options.hasBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable all debug information overlays together.  \n     * This includes and has priority over the values of:\n     *\n     * - `render.options.showStats`\n     * - `render.options.showPerformance`\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the engine stats info overlay.  \n     * From left to right, the values shown are:\n     *\n     * - body parts total\n     * - body total\n     * - constraints total\n     * - composites total\n     * - collision pairs total\n     *\n     * @property options.showStats\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable performance charts.  \n     * From left to right, the values shown are:\n     *\n     * - average render frequency (e.g. 60 fps)\n     * - exact engine delta time used for last update (e.g. 16.66ms)\n     * - average updates per frame (e.g. 1)\n     * - average engine execution duration (e.g. 5.00ms)\n     * - average render execution duration (e.g. 0.40ms)\n     * - average effective play speed (e.g. '1.00x' is 'real-time')\n     *\n     * Each value is recorded over a fixed sample of past frames (60 frames).\n     *\n     * A chart shown below each value indicates the variance from the average over the sample.\n     * The more stable or fixed the value is the flatter the chart will appear.\n     *\n     * @property options.showPerformance\n     * @type boolean\n     * @default false\n     */\n    \n    /**\n     * A flag to enable or disable rendering entirely.\n     *\n     * @property options.enabled\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to toggle wireframe rendering otherwise solid fill rendering is used.\n     *\n     * @property options.wireframes\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable sleeping bodies indicators.\n     *\n     * @property options.showSleeping\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable the debug information overlay.\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision broadphase debug overlay.\n     *\n     * @deprecated no longer implemented\n     * @property options.showBroadphase\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body bounds debug overlay.\n     *\n     * @property options.showBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body velocity debug overlay.\n     *\n     * @property options.showVelocity\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body collisions debug overlay.\n     *\n     * @property options.showCollisions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision resolver separations debug overlay.\n     *\n     * @property options.showSeparations\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body axes debug overlay.\n     *\n     * @property options.showAxes\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body positions debug overlay.\n     *\n     * @property options.showPositions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body angle debug overlay.\n     *\n     * @property options.showAngleIndicator\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body and part ids debug overlay.\n     *\n     * @property options.showIds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body vertex numbers debug overlay.\n     *\n     * @property options.showVertexNumbers\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body convex hulls debug overlay.\n     *\n     * @property options.showConvexHulls\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body internal edges debug overlay.\n     *\n     * @property options.showInternalEdges\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the mouse position debug overlay.\n     *\n     * @property options.showMousePosition\n     * @type boolean\n     * @default false\n     */\n\n})();\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Runner` module is an optional utility that provides a game loop for running a `Matter.Engine` inside a browser environment.\n* A runner will continuously update a `Matter.Engine` whilst synchronising engine updates with the browser frame rate.\n* This runner favours a smoother user experience over perfect time keeping.\n* This runner is optional and is used for development and debugging but could be useful as a starting point for implementing some games and experiences.\n* Alternatively see `Engine.update` to step the engine directly inside your own game loop implementation as may be needed inside other environments.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Runner\n*/\n\nvar Runner = {};\n\nmodule.exports = Runner;\n\nvar Events = __webpack_require__(5);\nvar Engine = __webpack_require__(17);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Runner._maxFrameDelta = 1000 / 15;\n    Runner._frameDeltaFallback = 1000 / 60;\n    Runner._timeBufferMargin = 1.5;\n    Runner._elapsedNextEstimate = 1;\n    Runner._smoothingLowerBound = 0.1;\n    Runner._smoothingUpperBound = 0.9;\n\n    /**\n     * Creates a new Runner. \n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     */\n    Runner.create = function(options) {\n        var defaults = {\n            delta: 1000 / 60,\n            frameDelta: null,\n            frameDeltaSmoothing: true,\n            frameDeltaSnapping: true,\n            frameDeltaHistory: [],\n            frameDeltaHistorySize: 100,\n            frameRequestId: null,\n            timeBuffer: 0,\n            timeLastTick: null,\n            maxUpdates: null,\n            maxFrameTime: 1000 / 30,\n            lastUpdatesDeferred: 0,\n            enabled: true\n        };\n\n        var runner = Common.extend(defaults, options);\n\n        // for temporary back compatibility only\n        runner.fps = 0;\n\n        return runner;\n    };\n\n    /**\n     * Runs a `Matter.Engine` whilst synchronising engine updates with the browser frame rate. \n     * See module and properties descriptions for more information on this runner.\n     * Alternatively see `Engine.update` to step the engine directly inside your own game loop implementation.\n     * @method run\n     * @param {runner} runner\n     * @param {engine} [engine]\n     * @return {runner} runner\n     */\n    Runner.run = function(runner, engine) {\n        // initial time buffer for the first frame\n        runner.timeBuffer = Runner._frameDeltaFallback;\n\n        (function onFrame(time){\n            runner.frameRequestId = Runner._onNextFrame(runner, onFrame);\n\n            if (time && runner.enabled) {\n                Runner.tick(runner, engine, time);\n            }\n        })();\n\n        return runner;\n    };\n\n    /**\n     * Performs a single runner tick as used inside `Runner.run`.\n     * See module and properties descriptions for more information on this runner.\n     * Alternatively see `Engine.update` to step the engine directly inside your own game loop implementation.\n     * @method tick\n     * @param {runner} runner\n     * @param {engine} engine\n     * @param {number} time\n     */\n    Runner.tick = function(runner, engine, time) {\n        var tickStartTime = Common.now(),\n            engineDelta = runner.delta,\n            updateCount = 0;\n\n        // find frame delta time since last call\n        var frameDelta = time - runner.timeLastTick;\n\n        // fallback for unusable frame delta values (e.g. 0, NaN, on first frame or long pauses)\n        if (!frameDelta || !runner.timeLastTick || frameDelta > Math.max(Runner._maxFrameDelta, runner.maxFrameTime)) {\n            // reuse last accepted frame delta else fallback\n            frameDelta = runner.frameDelta || Runner._frameDeltaFallback;\n        }\n\n        if (runner.frameDeltaSmoothing) {\n            // record frame delta over a number of frames\n            runner.frameDeltaHistory.push(frameDelta);\n            runner.frameDeltaHistory = runner.frameDeltaHistory.slice(-runner.frameDeltaHistorySize);\n\n            // sort frame delta history\n            var deltaHistorySorted = runner.frameDeltaHistory.slice(0).sort();\n\n            // sample a central window to limit outliers\n            var deltaHistoryWindow = runner.frameDeltaHistory.slice(\n                deltaHistorySorted.length * Runner._smoothingLowerBound, \n                deltaHistorySorted.length * Runner._smoothingUpperBound\n            );\n\n            // take the mean of the central window\n            var frameDeltaSmoothed = _mean(deltaHistoryWindow);\n            frameDelta = frameDeltaSmoothed || frameDelta;\n        }\n\n        if (runner.frameDeltaSnapping) {\n            // snap frame delta to the nearest 1 Hz\n            frameDelta = 1000 / Math.round(1000 / frameDelta);\n        }\n\n        // update runner values for next call\n        runner.frameDelta = frameDelta;\n        runner.timeLastTick = time;\n\n        // accumulate elapsed time\n        runner.timeBuffer += runner.frameDelta;\n\n        // limit time buffer size to a single frame of updates\n        runner.timeBuffer = Common.clamp(\n            runner.timeBuffer, 0, runner.frameDelta + engineDelta * Runner._timeBufferMargin\n        );\n\n        // reset count of over budget updates\n        runner.lastUpdatesDeferred = 0;\n\n        // get max updates per frame\n        var maxUpdates = runner.maxUpdates || Math.ceil(runner.maxFrameTime / engineDelta);\n\n        // create event object\n        var event = {\n            timestamp: engine.timing.timestamp\n        };\n\n        // tick events before update\n        Events.trigger(runner, 'beforeTick', event);\n        Events.trigger(runner, 'tick', event);\n\n        var updateStartTime = Common.now();\n\n        // simulate time elapsed between calls\n        while (engineDelta > 0 && runner.timeBuffer >= engineDelta * Runner._timeBufferMargin) {\n            // update the engine\n            Events.trigger(runner, 'beforeUpdate', event);\n            Engine.update(engine, engineDelta);\n            Events.trigger(runner, 'afterUpdate', event);\n\n            // consume time simulated from buffer\n            runner.timeBuffer -= engineDelta;\n            updateCount += 1;\n\n            // find elapsed time during this tick\n            var elapsedTimeTotal = Common.now() - tickStartTime,\n                elapsedTimeUpdates = Common.now() - updateStartTime,\n                elapsedNextEstimate = elapsedTimeTotal + Runner._elapsedNextEstimate * elapsedTimeUpdates / updateCount;\n\n            // defer updates if over performance budgets for this frame\n            if (updateCount >= maxUpdates || elapsedNextEstimate > runner.maxFrameTime) {\n                runner.lastUpdatesDeferred = Math.round(Math.max(0, (runner.timeBuffer / engineDelta) - Runner._timeBufferMargin));\n                break;\n            }\n        }\n\n        // track timing metrics\n        engine.timing.lastUpdatesPerFrame = updateCount;\n\n        // tick events after update\n        Events.trigger(runner, 'afterTick', event);\n\n        // show useful warnings if needed\n        if (runner.frameDeltaHistory.length >= 100) {\n            if (runner.lastUpdatesDeferred && Math.round(runner.frameDelta / engineDelta) > maxUpdates) {\n                Common.warnOnce('Matter.Runner: runner reached runner.maxUpdates, see docs.');\n            } else if (runner.lastUpdatesDeferred) {\n                Common.warnOnce('Matter.Runner: runner reached runner.maxFrameTime, see docs.');\n            }\n\n            if (typeof runner.isFixed !== 'undefined') {\n                Common.warnOnce('Matter.Runner: runner.isFixed is now redundant, see docs.');\n            }\n\n            if (runner.deltaMin || runner.deltaMax) {\n                Common.warnOnce('Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs.');\n            }\n\n            if (runner.fps !== 0) {\n                Common.warnOnce('Matter.Runner: runner.fps was replaced by runner.delta, see docs.');\n            }\n        }\n    };\n\n    /**\n     * Ends execution of `Runner.run` on the given `runner` by canceling the frame loop.\n     * Alternatively to temporarily pause the runner, see `runner.enabled`.\n     * @method stop\n     * @param {runner} runner\n     */\n    Runner.stop = function(runner) {\n        Runner._cancelNextFrame(runner);\n    };\n\n    /**\n     * Schedules the `callback` on this `runner` for the next animation frame.\n     * @private\n     * @method _onNextFrame\n     * @param {runner} runner\n     * @param {function} callback\n     * @return {number} frameRequestId\n     */\n    Runner._onNextFrame = function(runner, callback) {\n        if (typeof window !== 'undefined' && window.requestAnimationFrame) {\n            runner.frameRequestId = window.requestAnimationFrame(callback);\n        } else {\n            throw new Error('Matter.Runner: missing required global window.requestAnimationFrame.');\n        }\n\n        return runner.frameRequestId;\n    };\n\n    /**\n     * Cancels the last callback scheduled by `Runner._onNextFrame` on this `runner`.\n     * @private\n     * @method _cancelNextFrame\n     * @param {runner} runner\n     */\n    Runner._cancelNextFrame = function(runner) {\n        if (typeof window !== 'undefined' && window.cancelAnimationFrame) {\n            window.cancelAnimationFrame(runner.frameRequestId);\n        } else {\n            throw new Error('Matter.Runner: missing required global window.cancelAnimationFrame.');\n        }\n    };\n\n    /**\n     * Returns the mean of the given numbers.\n     * @method _mean\n     * @private\n     * @param {Number[]} values\n     * @return {Number} the mean of given values.\n     */\n    var _mean = function(values) {\n        var result = 0,\n            valuesLength = values.length;\n\n        for (var i = 0; i < valuesLength; i += 1) {\n            result += values[i];\n        }\n\n        return (result / valuesLength) || 0;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired once at the start of the browser frame, before any engine updates.\n    *\n    * @event beforeTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired once at the start of the browser frame, after `beforeTick`.\n    *\n    * @event tick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired once at the end of the browser frame, after `beforeTick`, `tick` and after any engine updates.\n    *\n    * @event afterTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired before each and every engine update in this browser frame (if any). \n    * There may be multiple engine update calls per browser frame (or none) depending on framerate and timestep delta.\n    *\n    * @event beforeUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after each and every engine update in this browser frame (if any). \n    * There may be multiple engine update calls per browser frame (or none) depending on framerate and timestep delta.\n    *\n    * @event afterUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * The fixed timestep size used for `Engine.update` calls in milliseconds, known as `delta`.\n     * \n     * This value is recommended to be `1000 / 60` ms or smaller (i.e. equivalent to at least 60hz).\n     * \n     * Smaller `delta` values provide higher quality results at the cost of performance.\n     * \n     * You should usually avoid changing `delta` during running, otherwise quality may be affected. \n     * \n     * For smoother frame pacing choose a `delta` that is an even multiple of each display FPS you target, i.e. `1000 / (n * fps)` as this helps distribute an equal number of updates over each display frame.\n     * \n     * For example with a 60 Hz `delta` i.e. `1000 / 60` the runner will on average perform one update per frame on displays running 60 FPS and one update every two frames on displays running 120 FPS, etc.\n     * \n     * Where as e.g. using a 240 Hz `delta` i.e. `1000 / 240` the runner will on average perform four updates per frame on displays running 60 FPS and two updates per frame on displays running 120 FPS, etc.\n     * \n     * Therefore `Runner.run` will call multiple engine updates (or none) as needed to simulate the time elapsed between browser frames. \n     * \n     * In practice the number of updates in any particular frame may be restricted to respect the runner's performance budgets. These are specified by `runner.maxFrameTime` and `runner.maxUpdates`, see those properties for details.\n     * \n     * @property delta\n     * @type number\n     * @default 1000 / 60\n     */\n\n    /**\n     * A flag that can be toggled to enable or disable tick calls on this runner, therefore pausing engine updates and events while the runner loop remains running.\n     *\n     * @property enabled\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * The accumulated time elapsed that has yet to be simulated in milliseconds.\n     * This value is clamped within certain limits (see `Runner.tick` code).\n     *\n     * @private\n     * @property timeBuffer\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * The measured time elapsed between the last two browser frames measured in milliseconds.\n     * This is useful e.g. to estimate the current browser FPS using `1000 / runner.frameDelta`.\n     *\n     * @readonly\n     * @property frameDelta\n     * @type number\n     */\n\n    /**\n     * Enables averaging to smooth frame rate measurements and therefore stabilise play rate.\n     *\n     * @property frameDeltaSmoothing\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * Rounds measured browser frame delta to the nearest 1 Hz.\n     * This option can help smooth frame rate measurements and simplify handling hardware timing differences e.g. 59.94Hz and 60Hz displays.\n     * For best results you should also round your `runner.delta` equivalent to the nearest 1 Hz.\n     *\n     * @property frameDeltaSnapping\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A performance budget that limits execution time allowed for this runner per browser frame in milliseconds.\n     * \n     * To calculate the effective browser FPS at which this throttle is applied use `1000 / runner.maxFrameTime`.\n     * \n     * This performance budget is intended to help maintain browser interactivity and help improve framerate recovery during temporary high CPU usage.\n     * \n     * This budget only covers the measured time elapsed executing the functions called in the scope of the runner tick, including `Engine.update` and its related user event callbacks.\n     * \n     * You may also reduce this budget to allow for any significant additional processing you perform on the same thread outside the scope of this runner tick, e.g. rendering time.\n     * \n     * See also `runner.maxUpdates`.\n     *\n     * @property maxFrameTime\n     * @type number\n     * @default 1000 / 30\n     */\n\n    /**\n     * An optional limit for maximum engine update count allowed per frame tick in addition to `runner.maxFrameTime`.\n     * \n     * Unless you set a value it is automatically chosen based on `runner.delta` and `runner.maxFrameTime`.\n     * \n     * See also `runner.maxFrameTime`.\n     * \n     * @property maxUpdates\n     * @type number\n     * @default null\n     */\n\n    /**\n     * The timestamp of the last call to `Runner.tick` used to measure `frameDelta`.\n     *\n     * @private\n     * @property timeLastTick\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * The id of the last call to `Runner._onNextFrame`.\n     *\n     * @private\n     * @property frameRequestId\n     * @type number\n     * @default null\n     */\n\n})();\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* This module has now been replaced by `Matter.Collision`.\n*\n* All usage should be migrated to `Matter.Collision`.\n* For back-compatibility purposes this module will remain for a short term and then later removed in a future release.\n*\n* The `Matter.SAT` module contains methods for detecting collisions using the Separating Axis Theorem.\n*\n* @class SAT\n* @deprecated\n*/\n\nvar SAT = {};\n\nmodule.exports = SAT;\n\nvar Collision = __webpack_require__(8);\nvar Common = __webpack_require__(0);\nvar deprecated = Common.deprecated;\n\n(function() {\n\n    /**\n     * Detect collision between two bodies using the Separating Axis Theorem.\n     * @deprecated replaced by Collision.collides\n     * @method collides\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @return {collision} collision\n     */\n    SAT.collides = function(bodyA, bodyB) {\n        return Collision.collides(bodyA, bodyB);\n    };\n\n    deprecated(SAT, 'collides', 'SAT.collides  replaced by Collision.collides');\n\n})();\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Svg` module contains methods for converting SVG images into an array of vector points.\n*\n* To use this module you also need the SVGPathSeg polyfill: https://github.com/progers/pathseg\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Svg\n*/\n\nvar Svg = {};\n\nmodule.exports = Svg;\n\nvar Bounds = __webpack_require__(1);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Converts an SVG path into an array of vector points.\n     * If the input path forms a concave shape, you must decompose the result into convex parts before use.\n     * See `Bodies.fromVertices` which provides support for this.\n     * Note that this function is not guaranteed to support complex paths (such as those with holes).\n     * You must load the `pathseg.js` polyfill on newer browsers.\n     * @method pathToVertices\n     * @param {SVGPathElement} path\n     * @param {Number} [sampleLength=15]\n     * @return {Vector[]} points\n     */\n    Svg.pathToVertices = function(path, sampleLength) {\n        if (typeof window !== 'undefined' && !('SVGPathSeg' in window)) {\n            Common.warn('Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.');\n        }\n\n        // https://github.com/wout/svg.topoly.js/blob/master/svg.topoly.js\n        var i, il, total, point, segment, segments, \n            segmentsQueue, lastSegment, \n            lastPoint, segmentIndex, points = [],\n            lx, ly, length = 0, x = 0, y = 0;\n\n        sampleLength = sampleLength || 15;\n\n        var addPoint = function(px, py, pathSegType) {\n            // all odd-numbered path types are relative except PATHSEG_CLOSEPATH (1)\n            var isRelative = pathSegType % 2 === 1 && pathSegType > 1;\n\n            // when the last point doesn't equal the current point add the current point\n            if (!lastPoint || px != lastPoint.x || py != lastPoint.y) {\n                if (lastPoint && isRelative) {\n                    lx = lastPoint.x;\n                    ly = lastPoint.y;\n                } else {\n                    lx = 0;\n                    ly = 0;\n                }\n\n                var point = {\n                    x: lx + px,\n                    y: ly + py\n                };\n\n                // set last point\n                if (isRelative || !lastPoint) {\n                    lastPoint = point;\n                }\n\n                points.push(point);\n\n                x = lx + px;\n                y = ly + py;\n            }\n        };\n\n        var addSegmentPoint = function(segment) {\n            var segType = segment.pathSegTypeAsLetter.toUpperCase();\n\n            // skip path ends\n            if (segType === 'Z') \n                return;\n\n            // map segment to x and y\n            switch (segType) {\n\n            case 'M':\n            case 'L':\n            case 'T':\n            case 'C':\n            case 'S':\n            case 'Q':\n                x = segment.x;\n                y = segment.y;\n                break;\n            case 'H':\n                x = segment.x;\n                break;\n            case 'V':\n                y = segment.y;\n                break;\n            }\n\n            addPoint(x, y, segment.pathSegType);\n        };\n\n        // ensure path is absolute\n        Svg._svgPathToAbsolute(path);\n\n        // get total length\n        total = path.getTotalLength();\n\n        // queue segments\n        segments = [];\n        for (i = 0; i < path.pathSegList.numberOfItems; i += 1)\n            segments.push(path.pathSegList.getItem(i));\n\n        segmentsQueue = segments.concat();\n\n        // sample through path\n        while (length < total) {\n            // get segment at position\n            segmentIndex = path.getPathSegAtLength(length);\n            segment = segments[segmentIndex];\n\n            // new segment\n            if (segment != lastSegment) {\n                while (segmentsQueue.length && segmentsQueue[0] != segment)\n                    addSegmentPoint(segmentsQueue.shift());\n\n                lastSegment = segment;\n            }\n\n            // add points in between when curving\n            // TODO: adaptive sampling\n            switch (segment.pathSegTypeAsLetter.toUpperCase()) {\n\n            case 'C':\n            case 'T':\n            case 'S':\n            case 'Q':\n            case 'A':\n                point = path.getPointAtLength(length);\n                addPoint(point.x, point.y, 0);\n                break;\n\n            }\n\n            // increment by sample value\n            length += sampleLength;\n        }\n\n        // add remaining segments not passed by sampling\n        for (i = 0, il = segmentsQueue.length; i < il; ++i)\n            addSegmentPoint(segmentsQueue[i]);\n\n        return points;\n    };\n\n    Svg._svgPathToAbsolute = function(path) {\n        // http://phrogz.net/convert-svg-path-to-all-absolute-commands\n        // Copyright (c) Gavin Kistner\n        // http://phrogz.net/js/_ReuseLicense.txt\n        // Modifications: tidy formatting and naming\n        var x0, y0, x1, y1, x2, y2, segs = path.pathSegList,\n            x = 0, y = 0, len = segs.numberOfItems;\n\n        for (var i = 0; i < len; ++i) {\n            var seg = segs.getItem(i),\n                segType = seg.pathSegTypeAsLetter;\n\n            if (/[MLHVCSQTA]/.test(segType)) {\n                if ('x' in seg) x = seg.x;\n                if ('y' in seg) y = seg.y;\n            } else {\n                if ('x1' in seg) x1 = x + seg.x1;\n                if ('x2' in seg) x2 = x + seg.x2;\n                if ('y1' in seg) y1 = y + seg.y1;\n                if ('y2' in seg) y2 = y + seg.y2;\n                if ('x' in seg) x += seg.x;\n                if ('y' in seg) y += seg.y;\n\n                switch (segType) {\n\n                case 'm':\n                    segs.replaceItem(path.createSVGPathSegMovetoAbs(x, y), i);\n                    break;\n                case 'l':\n                    segs.replaceItem(path.createSVGPathSegLinetoAbs(x, y), i);\n                    break;\n                case 'h':\n                    segs.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(x), i);\n                    break;\n                case 'v':\n                    segs.replaceItem(path.createSVGPathSegLinetoVerticalAbs(y), i);\n                    break;\n                case 'c':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicAbs(x, y, x1, y1, x2, y2), i);\n                    break;\n                case 's':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(x, y, x2, y2), i);\n                    break;\n                case 'q':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(x, y, x1, y1), i);\n                    break;\n                case 't':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(x, y), i);\n                    break;\n                case 'a':\n                    segs.replaceItem(path.createSVGPathSegArcAbs(x, y, seg.r1, seg.r2, seg.angle, seg.largeArcFlag, seg.sweepFlag), i);\n                    break;\n                case 'z':\n                case 'Z':\n                    x = x0;\n                    y = y0;\n                    break;\n\n                }\n            }\n\n            if (segType == 'M' || segType == 'm') {\n                x0 = x;\n                y0 = y;\n            }\n        }\n    };\n\n})();\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* This module has now been replaced by `Matter.Composite`.\n*\n* All usage should be migrated to the equivalent functions found on `Matter.Composite`.\n* For example `World.add(world, body)` now becomes `Composite.add(world, body)`.\n*\n* The property `world.gravity` has been moved to `engine.gravity`.\n*\n* For back-compatibility purposes this module will remain as a direct alias to `Matter.Composite` in the short term during migration.\n* Eventually this alias module will be marked as deprecated and then later removed in a future release.\n*\n* @class World\n*/\n\nvar World = {};\n\nmodule.exports = World;\n\nvar Composite = __webpack_require__(6);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * See above, aliases for back compatibility only\n     */\n    World.create = Composite.create;\n    World.add = Composite.add;\n    World.remove = Composite.remove;\n    World.clear = Composite.clear;\n    World.addComposite = Composite.addComposite;\n    World.addBody = Composite.addBody;\n    World.addConstraint = Composite.addConstraint;\n\n})();\n\n\n/***/ })\n/******/ ]);\n});","'use client';\n\nimport React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport Image from 'next/image';\nimport Matter from 'matter-js';\n\n// --- Tipos ---\ninterface PhysicsItem {\n  id: string;\n  type: 'link' | 'image';\n  text?: string;\n  href?: string;\n  src?: string;\n  alt?: string;\n  width: number;\n  height: number;\n  color?: string;\n}\n\ninterface ElementState {\n  id: string;\n  x: number;\n  y: number;\n  rotation: number;\n}\n\nconst COLORS = ['#0494B5', '#FFC002', '#EA0303'];\n\nconst Menu = ({ hiddeOnDesktop }: { hiddeOnDesktop?: boolean }) => {\n  const [openMenu, setOpenMenu] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const engineRef = useRef<Matter.Engine | null>(null);\n  const [elements, setElements] = useState<ElementState[]>([]);\n  const [hoveredId, setHoveredId] = useState<string | null>(null); // Estado para el hover\n\n  const physicsItems = useMemo<PhysicsItem[]>(() => [\n    { id: 'l1', type: 'link', text: 'Home', width: 180, height: 45, color: COLORS[0] },\n    { id: 'l2', type: 'link', text: 'About', width: 180, height: 45, color: COLORS[1] },\n    { id: 'l3', type: 'link', text: 'Archivo', width: 180, height: 45, color: COLORS[2] },\n    { id: 'l4', type: 'link', text: 'Services', width: 180, height: 45, color: COLORS[0] },\n    { id: 'l5', type: 'link', text: 'Contact', width: 180, height: 45, color: COLORS[1] },\n    { id: 'l6', type: 'link', text: 'Directors', width: 180, height: 45, color: COLORS[2] },\n    { id: 'l7', type: 'link', text: 'Photography', width: 180, height: 45, color: COLORS[0] },\n    { id: 'img1', type: 'image', src: '/assets/images/kids/kidblack1.png', alt: 'logo', width: 50, height: 50 },\n    { id: 'img2', type: 'image', src: '/assets/images/kids/kidblack2.png', alt: 'logo', width: 50, height: 50 },\n    { id: 'img3', type: 'image', src: '/assets/images/kids/kidblack3.png', alt: 'logo', width: 50, height: 50 },\n  ], []);\n\n  const setupMatter = useCallback(() => {\n    if (!containerRef.current || !openMenu) return;\n\n    const { Engine, Runner, Bodies, Composite, Mouse, MouseConstraint, Events, Body } = Matter;\n    const engine = Engine.create();\n    engineRef.current = engine;\n    engine.gravity.y = 0.5;\n\n    const rect = containerRef.current.getBoundingClientRect();\n    const width = rect.width;\n    const height = rect.height;\n\n    const wallThickness = 60;\n    const walls = [\n      Bodies.rectangle(width / 2, -wallThickness / 2, width, wallThickness, { isStatic: true }),\n      Bodies.rectangle(width / 2, height + wallThickness / 2, width, wallThickness, { isStatic: true }),\n      Bodies.rectangle(-wallThickness / 2, height / 2, wallThickness, height, { isStatic: true }),\n      Bodies.rectangle(width + wallThickness / 2, height / 2, wallThickness, height, { isStatic: true }),\n    ];\n\n    const bodies = physicsItems.map((item) => {\n      const x = Math.random() * (width - 40) + 20;\n      const y = Math.random() * (height / 2);\n      const body = Bodies.rectangle(x, y, item.width, item.height, {\n        chamfer: { radius: item.type === 'image' ? 15 : 22 },\n        restitution: 0.7,\n        frictionAir: 0.03,\n        label: item.id,\n      });\n\n      Body.applyForce(body, body.position, {\n        x: (Math.random() - 0.5) * 0.01,\n        y: (Math.random() - 0.5) * 0.01\n      });\n      return body;\n    });\n\n    Composite.add(engine.world, [...walls, ...bodies]);\n\n    const mouse = Mouse.create(containerRef.current);\n    const mouseConstraint = MouseConstraint.create(engine, {\n      mouse: mouse,\n      constraint: { stiffness: 0.2, render: { visible: false } },\n    });\n    Composite.add(engine.world, mouseConstraint);\n\n    Events.on(engine, 'afterUpdate', () => {\n      setElements(bodies.map(b => ({\n        id: b.label,\n        x: b.position.x,\n        y: b.position.y,\n        rotation: b.angle,\n      })));\n    });\n\n    const runner = Runner.create();\n    Runner.run(runner, engine);\n\n    return () => {\n      Runner.stop(runner);\n      Engine.clear(engine);\n    };\n  }, [openMenu, physicsItems]);\n\n  useEffect(() => {\n    const cleanup = setupMatter();\n    return () => cleanup?.();\n  }, [setupMatter]);\n\n  return (\n    <div className={`${hiddeOnDesktop ? 'lg:hidden block' : ''} fixed flex items-center top-0 right-0 z-40`}>\n      <button \n        className='fixed z-50 px-1 py-1 duration-500 cursor-pointer top-7 right-10 rounded-xl outline-none'\n        onClick={() => setOpenMenu(!openMenu)}\n      >\n        <svg width=\"35\" height=\"35\" viewBox=\"0 0 30 15\" fill=\"none\">\n          <rect className={`duration-500 transition-all origin-center ${openMenu ? 'rotate-45 translate-y-[6px] translate-x-[2px] fill-black' : 'fill-white'}`} y=\"0\" width=\"25\" height=\"2.25\" rx=\"1.125\" />\n          <rect className={`duration-500 ${openMenu ? 'opacity-0' : 'opacity-100'} fill-white`} y=\"6.125\" width=\"25\" height=\"2.25\" rx=\"1.125\" />\n          <rect className={`duration-500 transition-all origin-center ${openMenu ? '-rotate-45 -translate-y-[6.5px] translate-x-[2px] fill-black' : 'fill-white'}`} y=\"12.25\" width=\"25\" height=\"2.25\" rx=\"1.125\" />\n        </svg>\n      </button>\n\n      <div className='fixed z-50 w-10 h-10 top-7 left-10'>\n        <Image src={'/kid.png'} alt='KidCanibal logo' fill className='object-contain' />\n      </div>\n\n      <nav \n        ref={containerRef}\n        className={`\n          fixed top-0 right-0 bg-white w-full h-screen md:w-[350px] 2xl:w-[400px] md:h-[600px] md:top-6 md:right-6 \n          transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)] overflow-hidden\n          ${openMenu ? 'opacity-100 translate-x-0' : 'opacity-0 translate-x-full pointer-events-none'}\n          md:rounded-3xl shadow-2xl touch-none\n        `}\n      >\n        {openMenu && physicsItems.map((item) => {\n          const state = elements.find((el) => el.id === item.id);\n          if (!state) return null;\n\n          const isHovered = hoveredId === item.id;\n\n          return (\n            <div\n              key={item.id}\n              onMouseEnter={() => setHoveredId(item.id)}\n              onMouseLeave={() => setHoveredId(null)}\n              style={{\n                position: 'absolute',\n                left: 0,\n                top: 0,\n                width: item.width,\n                height: item.height,\n                transform: `translate3d(${state.x - item.width / 2}px, ${state.y - item.height / 2}px, 0) rotate(${state.rotation}rad)`,\n                // Cambio dinmico de colores\n                backgroundColor: isHovered ? '#FDF9F4' : (item.color || 'transparent'),\n                border: item.type === 'link' ? `2px solid ${item.color}` : 'none',\n                zIndex: 10,\n              }}\n              className={`\n                transition-colors duration-200\n                ${item.type === 'link' ? 'rounded-full flex items-center justify-center shadow-lg cursor-pointer' : 'cursor-grab'}\n              `}\n            >\n              {item.type === 'link' ? (\n                <div className=\"w-full h-full flex items-center justify-center text-black font-bold font-thunder text-3xl uppercase px-4 select-none\">\n                  {item.text}\n                </div>\n              ) : (\n                <div className=\"relative w-full h-full p-1\">\n                  <Image src={item.src!} alt={item.alt!} fill className=\"object-contain pointer-events-none\" />\n                </div>\n              )}\n            </div>\n          );\n        })}\n\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-[0.03] select-none\">\n          <span className=\"text-8xl font-black rotate-90\">MENU</span>\n        </div>\n      </nav>\n    </div>\n  );\n};\n\nexport default Menu;"],"names":["warnOnce","_","process","env","NODE_ENV","warnings","Set","msg","has","console","warn","add","getDeploymentId","getDeploymentIdQueryOrEmptyString","NEXT_DEPLOYMENT_ID","deploymentId","getImageBlurSvg","widthInt","heightInt","blurWidth","blurHeight","blurDataURL","objectFit","std","svgWidth","svgHeight","viewBox","preserveAspectRatio","VALID_LOADERS","imageConfigDefault","deviceSizes","imageSizes","path","loader","loaderFile","domains","disableStaticImages","minimumCacheTTL","formats","maximumRedirects","maximumResponseBody","dangerouslyAllowLocalIP","dangerouslyAllowSVG","contentSecurityPolicy","contentDispositionType","localPatterns","undefined","remotePatterns","qualities","unoptimized","getImgProps","VALID_LOADING_VALUES","INVALID_BACKGROUND_SIZE_VALUES","isStaticRequire","src","default","isStaticImageData","isStaticImport","allImgs","Map","perfObserver","getInt","x","Number","isFinite","NaN","test","parseInt","getWidths","allSizes","width","sizes","viewportWidthRe","percentSizes","match","exec","push","length","smallestRatio","Math","min","widths","filter","s","kind","map","w","find","p","generateImgAttrs","config","quality","startsWith","sep","includes","srcSet","last","i","join","priority","preload","loading","className","height","fill","style","overrideSrc","onLoad","onLoadingComplete","placeholder","fetchPriority","decoding","layout","objectPosition","lazyBoundary","lazyRoot","rest","_state","imgConf","showAltText","blurComplete","defaultLoader","c","sort","a","b","Error","isDefaultLoader","customImageLoader","obj","opts","layoutToStyle","intrinsic","maxWidth","responsive","layoutToSizes","layoutStyle","layoutSizes","staticSrc","staticImageData","JSON","stringify","ratio","round","isLazy","split","endsWith","qualityInt","output","position","isNaN","String","VALID_BLUR_EXT","urlStr","url","URL","err","pathname","search","legacyKey","legacyValue","Object","entries","window","PerformanceObserver","entryList","entry","getEntries","imgSrc","element","lcpImage","get","observe","type","buffered","error","imgStyle","assign","left","top","right","bottom","color","backgroundImage","backgroundSize","placeholderStyle","backgroundPosition","backgroundRepeat","imgAttributes","loadingFinal","fullUrl","e","location","href","set","props","meta","SideEffect","isServer","useClientOnlyLayoutEffect","useLayoutEffect","useClientOnlyEffect","useEffect","headManager","reduceComponentsToState","emitChange","mountedInstances","headElements","Children","toArray","Array","from","Boolean","updateHead","children","delete","_pendingUpdate","module","exports","require","vendored","HeadManagerContext","defaultHead","head","charSet","name","content","onlyReactElement","list","child","React","Fragment","concat","reduce","fragmentList","fragmentChild","METATYPES","unique","keys","tags","metaTypes","metaCategories","h","isUnique","hasKey","key","indexOf","slice","len","metatype","hasOwnProperty","category","categories","reduceComponents","headChildrenElements","reverse","srcMessage","cloneElement","Head","useContext","Effect","ImageConfigContext","RouterContext","findClosestQuality","q","prev","cur","abs","missingValues","NEXT_RUNTIME","hasLocalMatch","parsedSrc","hasRemoteMatch","hostname","encodeURIComponent","__next_img_default","useMergedRef","refA","refB","cleanupA","useRef","cleanupB","useCallback","current","cleanupFnA","cleanupFnB","applyRef","cleanup","Image","configEnv","__NEXT_IMAGE_OPTS","globalThis","__NEXT_IMAGE_IMPORTED","handleLoading","img","onLoadRef","onLoadingCompleteRef","setBlurComplete","sizesInput","decode","Promise","resolve","catch","then","parentElement","isConnected","event","Event","defineProperty","writable","value","prevented","stopped","nativeEvent","currentTarget","target","isDefaultPrevented","isPropagationStopped","persist","preventDefault","stopPropagation","origSrc","searchParams","getAttribute","widthViewportRatio","getBoundingClientRect","innerWidth","getComputedStyle","valid","heightModified","toString","widthModified","getDynamicProps","use","fetchpriority","ImageElement","forwardRef","setShowAltText","onError","forwardedRef","ownRef","complete","ref","data-nimg","ImagePreload","isAppRouter","as","imageSrcSet","crossOrigin","referrerPolicy","ReactDOM","link","rel","pagesRouter","configContext","useMemo","useState","imgMeta","getImageProps","imgProps","searchParamsToUrlQuery","urlQueryToSearchParams","query","existing","isArray","stringifyUrlQueryParam","param","URLSearchParams","item","append","searchParamsList","formatUrl","formatWithValidation","urlObjectKeys","slashedProtocols","urlObj","auth","protocol","hash","host","replace","port","querystring","slashes","forEach","DecodeError","MiddlewareNotFoundError","MissingStaticPage","NormalizeError","PageNotFoundError","SP","ST","WEB_VITALS","execOnce","getDisplayName","getLocationOrigin","getURL","isAbsoluteUrl","isResSent","loadGetInitialProps","normalizeRepeatedSlashes","stringifyError","fn","used","result","args","ABSOLUTE_URL_REGEX","origin","substring","Component","displayName","res","finished","headersSent","urlParts","urlNoQuery","App","ctx","prototype","getInitialProps","message","pageProps","performance","every","method","constructor","page","code","stack","parsePath","hashIndex","queryIndex","hasQuery","addPathPrefix","prefix","removeTrailingSlash","route","normalizePathTrailingSlash","__NEXT_MANUAL_TRAILING_SLASH","__NEXT_TRAILING_SLASH","addBasePath","basePath","__NEXT_ROUTER_BASEPATH","required","__NEXT_MANUAL_CLIENT_BASE_PATH","FetchStrategy","NavigationResultTag","PrefetchPriority","createCacheKey","originalHref","nextUrl","originalUrl","cacheKey","HasLoadingBoundary","matchSegment","existingSegment","segment","ACTION_HEADER","FLIGHT_HEADERS","NEXT_ACTION_NOT_FOUND_HEADER","NEXT_ACTION_REVALIDATED_HEADER","NEXT_DID_POSTPONE_HEADER","NEXT_HMR_REFRESH_HASH_COOKIE","NEXT_HMR_REFRESH_HEADER","NEXT_HTML_REQUEST_ID_HEADER","NEXT_IS_PRERENDER_HEADER","NEXT_REQUEST_ID_HEADER","NEXT_REWRITTEN_PATH_HEADER","NEXT_REWRITTEN_QUERY_HEADER","NEXT_ROUTER_PREFETCH_HEADER","NEXT_ROUTER_SEGMENT_PREFETCH_HEADER","NEXT_ROUTER_STALE_TIME_HEADER","NEXT_ROUTER_STATE_TREE_HEADER","NEXT_RSC_UNION_QUERY","NEXT_URL","RSC_CONTENT_TYPE_HEADER","RSC_HEADER","ACTION_HMR_REFRESH","ACTION_NAVIGATE","ACTION_REFRESH","ACTION_RESTORE","ACTION_SERVER_ACTION","ACTION_SERVER_PATCH","PrefetchKind","isThenable","promise","dispatchAppRouterAction","useActionQueue","dispatch","action","__DEV__","promisesWithDebugInfo","WeakMap","actionQueue","state","setState","useAppDevRenderingIndicator","appDevRenderingIndicator","stateWithDebugInfo","promiseWithDebugInfo","debugInfo","asyncState","_debugInfo","callServer","actionId","actionArgs","reject","startTransition","findSourceMapURL","filename","document","DEFAULT_SEGMENT_KEY","NOT_FOUND_SEGMENT_KEY","PAGE_SEGMENT_KEY","addSearchParamsIfPageSegment","computeSelectedLayoutSegment","getSegmentValue","getSelectedLayoutSegmentPath","isGroupSegment","isParallelRouteSegment","isPageSegment","stringifiedQuery","segments","parallelRouteKey","rawSegment","tree","first","segmentPath","node","parallelRoutes","values","segmentValue","HEAD_REQUEST_KEY","ROOT_SEGMENT_REQUEST_KEY","appendSegmentRequestKeyPart","convertSegmentPathToStaticExportFilename","createSegmentRequestKeyPart","safeName","encodeToFilesystemAndURLSafeString","paramType","encodedName","parentRequestKey","childRequestKeyPart","slotKey","simpleParamValueRegex","base64url","btoa","doesStaticSegmentAppearInURL","getCacheKeyForDynamicParam","getParamValueFromCacheKey","getRenderedPathname","getRenderedSearch","parseDynamicParamFromURLPart","urlSearchParamsToParsedUrlQuery","urlToUrlWithoutFlightMarker","response","rewrittenQuery","headers","rewrittenPath","pathnameParts","partIndex","paramValue","renderedSearch","pageSegmentWithSearchParams","fromEntries","urlWithoutFlightParameters","__NEXT_CONFIG_OUTPUT","paramCacheKey","isCatchAll","createHrefFromUrl","includeHash","createInitialRSCPayloadFromFallbackPrerender","getFlightDataPartsFromPath","getNextFlightSegmentPath","normalizeFlightData","prepareFlightRouterStateForRequest","flightDataPath","flightDataPathLength","seedData","isHeadPartial","pathToSegment","isRootRender","fallbackInitialRSCPayload","renderedPathname","canonicalUrl","originalFlightDataPath","f","originalFlightRouterState","fillInFallbackFlightRouterState","m","G","S","flightRouterState","index","fillInFallbackFlightRouterStateImpl","pathnamePartsIndex","originalSegment","newSegment","doesAppearInURL","paramName","childPathnamePartsIndex","newChildren","childFlightRouterState","newState","flightSegmentPath","flightData","isHmrRefresh","stripClientOnlyDataFromFlightRouterState","_url","refreshMarker","isRootLayout","hasLoadingBoundary","cleanedSegment","stripSearchParamsFromPageSegment","cleanedParallelRoutes","childState","shouldPreserveRefreshMarker","getAppBuildId","setAppBuildId","globalBuildId","buildId","djb2Hash","hexHash","str","char","charCodeAt","computeCacheBustingSearchParam","prefetchHeader","segmentPrefetchHeader","stateTreeHeader","nextUrlHeader","setCacheBustingSearchParam","setCacheBustingSearchParamWithHash","uniqueCacheKey","existingSearch","rawQuery","pairs","pair","createFetch","createFromNextReadableStream","fetchServerResponse","createFromReadableStream","createFromReadableStreamBrowser","createFromFetch","createFromFetchBrowser","createDebugChannel","__NEXT_REACT_DEBUG_CHANNEL","doMpaNavigation","isPageUnloading","addEventListener","options","isLegacyPPR","__NEXT_PPR","__NEXT_CACHE_COMPONENTS","shouldImmediatelyDecode","responseUrl","redirected","contentType","interception","postponed","staleTimeHeaderSeconds","staleTime","isFlightResponse","ok","body","TURBOPACK","waitForWebpackRuntimeHotUpdate","flightResponsePromise","flightResponse","flightStream","createUnclosingPrefetchStream","normalizedFlightData","couldBeIntercepted","prerendered","signal","__NEXT_TEST_MODE","self","__next_r","crypto","getRandomValues","Uint32Array","fetchOptions","credentials","fetchUrl","fetchPromise","fetch","createFromNextFetch","browserResponse","__NEXT_CLIENT_VALIDATE_RSC_REQUEST_HEADERS","MAX_REDIRECTS","n","rscResponse","status","requestHeaders","debugChannel","promiseForResponse","originalFlightStream","reader","getReader","ReadableStream","pull","controller","done","read","enqueue","deleteFromLru","lruPut","updateLruSize","didScheduleCleanup","lruSize","maxLruSize","next","size","ensureCleanupIsScheduled","tail","newNodeSize","prevNodeSize","deleted","requestCleanupCallback","ninetyPercentMax","deleteMapEntry","requestIdleCallback","cb","setTimeout","Fallback","createCacheMap","deleteFromCacheMap","getFromCacheMap","isValueExpired","setInCacheMap","setSizeInCacheMap","Revalidation","cacheMap","parent","getOrInitialize","isRevalidation","remainingKeys","previousKey","existingEntry","newEntry","now","currentCacheVersion","rootEntry","getEntryWithFallbackImpl","staleAt","version","lazilyEvictIfNeeded","fallbackEntry","setMapEntryValue","dropRef","oldEntry","parentMap","revalidatingEntry","appendLayoutVaryPath","clonePageVaryPathWithNewSearchParams","finalizeLayoutVaryPath","finalizeMetadataVaryPath","finalizePageVaryPath","getFulfilledRouteVaryPath","getRouteVaryPath","getSegmentVaryPathForRequest","varyPath","parentPath","varyPathPart","requestKey","layoutVaryPath","pageVaryPath","pageRequestKey","fetchStrategy","originalVaryPath","isPage","doesVaryOnSearchParams","Full","PPRRuntime","searchParamsVaryPath","pathParamsVaryPath","patchedVaryPath","newSearch","clonedVaryPath","ensureLeadingSlash","normalizeAppPath","normalizeRscURL","INTERCEPTION_ROUTE_MARKERS","extractInterceptionRouteInformation","isInterceptionRouteAppPath","interceptingRoute","marker","interceptedRoute","splitInterceptingRoute","computeChangedPath","extractPathFromFlightRouterState","getSelectedParams","removeLeadingSlash","segmentToPathname","normalizeSegments","acc","some","childrenPath","childPath","computeChangedPathImpl","treeA","treeB","segmentA","parallelRoutesA","segmentB","parallelRoutesB","normalizedSegmentA","normalizedSegmentB","parallelRouterKey","changedPath","currentTree","params","parallelRoute","isDynamicParameter","handleMutable","isNotUndefined","mutable","shouldScroll","previousNextUrl","patchedTree","pushRef","pendingPush","mpaNavigation","preserveCustomHistoryState","focusAndScrollRef","apply","scrollableSegments","onlyHashChange","hashFragment","decodeURIComponent","segmentPaths","cache","collectedDebugInfo","createRouterCacheKey","withoutSearchParameters","isNavigatingToNewRootLayout","nextTree","currentTreeSegment","nextTreeSegment","currentTreeChild","nextTreeChild","FreshnessPolicy","createInitialCacheNodeForHydration","isDeferredRsc","spawnDynamicRequests","startPPRNavigation","noop","navigatedAt","initialTree","seedHead","accumulation","separateRefreshUrls","task","createCacheNodeOnNavigation","oldUrl","oldCacheNode","oldRouterState","newRouterState","freshness","prefetchData","prefetchHead","isPrefetchHeadPartial","isSamePageNavigation","didFindRootLayout","parentNeedsDynamicRequest","parentRefreshUrl","updateCacheNodeOnNavigation","parentSegmentPath","parentParallelRouteKey","oldSegment","newRouterStateChildren","oldRouterStateChildren","seedDataChildren","prefetchDataChildren","childDidFindRootLayout","oldParallelRoutes","shouldDropSiblingCaches","shouldRefreshDynamicData","newParallelRoutes","isLeafSegment","newCacheNode","needsDynamicRequest","dropPrefetchRsc","reuseDynamicCacheNode","seedRsc","seedLoading","isSeedRscPartial","isSeedHeadPartial","readCacheNodeFromSeedData","prefetchRsc","prefetchLoading","isPrefetchRSCPartial","spawnNewCacheNode","refreshUrl","accumulateRefreshUrl","patchedRouterStateChildren","taskChildren","childNeedsDynamicRequest","dynamicRequestTreeChildren","newRouterStateChild","oldRouterStateChild","oldSegmentMapChild","seedDataChild","prefetchDataChild","newSegmentChild","seedHeadChild","prefetchHeadChild","isPrefetchHeadPartialChild","reuseActiveSegmentInDefaultSlot","newSegmentKeyChild","oldCacheNodeChild","taskChild","newCacheNodeChild","newSegmentMapChild","taskChildRoute","dynamicRequestTreeChild","dynamicRequestTree","patchRouterStateWithNewChildren","createDynamicRequestTree","DYNAMIC_STALETIME_MS","oldRsc","rsc","oldRscDidResolve","baseRouterState","clone","reusedRouterState","oldRefreshMarker","existingCacheNode","cacheNode","createDeferredRsc","isHydration","previousNavigationDidMismatch","primaryUrl","freshnessPolicy","primaryRequestPromise","fetchMissingDynamicData","refreshRequestPromises","scopedDynamicRequestTree","voidPromise","finishNavigationTask","exitStatus","waitForRequestsToFinish","abortRemainingPendingTasks","isHardRetry","primaryRequestResult","dispatchRetryDueToTreeMismatch","seed","onFulfill","remainingCount","onReject","refreshRequestPromise","retryUrl","retryNextUrl","baseTree","retryAction","previousTree","mpa","convertServerPatchToFullTree","didReceiveUnknownParallelRoute","writeDynamicDataIntoNavigationTask","data","serverRouterState","dynamicData","dynamicHead","finishPendingCacheNode","serverChildren","dynamicDataChildren","serverRouterStateChild","dynamicDataChild","taskSegment","childDidReceiveUnknownParallelRoute","dynamicSegmentData","dynamicLoading","abortPendingCacheNode","childExitStatus","DEFERRED","Symbol","tag","pendingRsc","rej","responseDebugInfo","fulfilledRsc","rejectedRsc","reason","navigate","navigateToSeededRoute","currentUrl","currentCacheNode","currentFlightRouterState","Date","readRouteCacheEntry","EntryStatus","Fulfilled","snapshot","readRenderSnapshotFromCache","prefetchFlightRouterState","prefetchSeedData","headSnapshot","readHeadSnapshotFromCache","isPartial","newCanonicalUrl","navigateUsingPrefetchedRouteTree","Rejected","optimisticRoute","requestOptimisticRouteCacheEntry","newRenderedSearch","Async","navigateDynamicallyWithNoPrefetch","navigationSeed","navigationTaskToResult","MPA","Success","childRouterStates","childSeedDatas","slots","childTree","childResult","segmentEntry","readSegmentCacheEntry","Pending","promiseForFulfilledEntry","waitForSegmentCacheEntry","Empty","hasRuntimePrefetch","metadata","DynamicRequestTreeForEntireRoute","Default","HistoryTraversal","Hydration","RefreshAll","HMRRefresh","promiseForDynamicServerResponse","newUrl","debugInfoFromResponse","baseData","treePatch","dataPatch","headPatch","convertServerPatchToFullTreeImpl","updatedParallelRouteKey","baseTreeChildren","baseSeedDataChildren","newTreeChildren","newSeedDataChildren","childBaseRouterState","childBaseSeedData","clonedTree","clonedSeedData","isEmptySeedDataPartial","STATIC_STALETIME_MS","generateSegmentsFromPatch","handleExternalUrl","handleNavigationResult","navigateReducer","__NEXT_CLIENT_ROUTER_DYNAMIC_STALETIME","getStaleTimeMs","__NEXT_CLIENT_ROUTER_STATIC_STALETIME","flightRouterPatch","childSegment","asyncResult","isExternalUrl","navigateType","getElementById","navigateUsingSegmentCache","createPromiseWithResolvers","canNewFetchStrategyProvideMoreContent","convertRouteTreeToFlightRouterState","createDetachedSegmentCacheEntry","fetchRouteOnCacheMiss","fetchSegmentOnCacheMiss","fetchSegmentPrefetchesUsingDynamicRequest","getCurrentCacheVersion","overwriteRevalidatingSegmentCacheEntry","pingInvalidationListeners","readOrCreateRevalidatingSegmentEntry","readOrCreateRouteCacheEntry","readOrCreateSegmentCacheEntry","revalidateEntireCache","upgradeToPendingSegment","upsertSegmentEntry","staleTimeSeconds","max","isOutputExportMode","MetadataOnlyRequestTree","routeCacheMap","segmentCacheMap","invalidationListeners","startRevalidationCooldown","pingVisibleLinks","attachInvalidationListener","onInvalidate","notifyInvalidationListener","reportError","tasks","isPrefetchTaskDirty","readRevalidatingSegmentCacheEntry","pendingEntry","promiseWithResolvers","blockedTasks","isPPREnabled","Infinity","requestedUrl","requestedSearch","urlWithoutSearchParams","routeWithNoSearchParams","createPrefetchRequestKey","canonicalUrlForRouteWithNoSearchParams","optimisticCanonicalSearch","optimisticRenderedSearch","optimisticUrl","optimisticCanonicalUrl","optimisticRouteTree","createOptimisticRouteTree","optimisticMetadataTree","optimisticEntry","clonedSlots","originalSlots","varyPathForRequest","candidateEntry","rejectedEntry","emptyEntry","PPR","pingBlockedTasks","pingPrefetchTask","fulfillRouteCacheEntry","metadataVaryPath","SubtreeHasNoLoadingBoundary","fulfilledEntry","fulfillSegmentCacheEntry","segmentCacheEntry","rejectRouteCacheEntry","rejectSegmentCacheEntry","convertRootTreePrefetchToRouteTree","rootTree","rootSegment","convertTreePrefetchToRouteTree","prefetch","partialVaryPath","prefetchSlots","childPrefetch","childParamName","childParamType","childServerSentParamKey","paramKey","childDoesAppearInURL","childPartialVaryPath","childParamValue","childParamKey","childRequestKey","SegmentHasLoadingBoundary","convertRootFlightRouterStateToRouteTree","convertFlightRouterStateToRouteTree","parentPartialVaryPath","childRouterState","routeTree","urlAfterRedirects","headResponse","fetchPrefetchResponse","addSegmentPathToUrlInOutputExportMode","varyHeader","closed","routeIsPPREnabled","prefetchStream","createPrefetchResponseStream","onResponseSizeUpdate","serverData","staleTimeMs","writeDynamicTreeResponseIntoCache","LoadingBoundary","fulfilledVaryPath","routeKey","normalizedRequestKey","requestUrl","spawnedEntries","rejectSegmentEntriesIfStillPending","fulfilledEntries","totalBytesReceivedSoFar","averageSize","isResponsePartial","rp","writeDynamicRenderResponseIntoCache","normalizedFlightDataResult","flightDatas","writeSeedDataIntoCache","fulfillEntrySpawnedByRuntimePrefetch","entriesOwnedByCurrentTask","childSeedData","ownedEntry","possiblyNewEntry","onStreamClose","totalByteLength","byteLength","staticUrl","routeDir","staticExportFilename","currentStrategy","newStrategy","cancelPrefetchTask","reschedulePrefetchTask","schedulePrefetchTask","scheduleMicrotask","queueMicrotask","taskHeap","inProgressRequests","sortIdCounter","didScheduleMicrotask","mostRecentlyHoveredLink","REVALIDATION_COOLDOWN_MS","revalidationCooldownTimeoutHandle","clearTimeout","ensureWorkIsScheduled","treeAtTimeOfPrefetch","cacheVersion","phase","hasBackgroundWork","spawnedRuntimePrefetches","sortId","isCanceled","_heapIndex","trackMostRecentlyHoveredLink","heapPush","heapDelete","Intent","heapResift","Background","processQueueInMicrotask","hasNetworkBandwidth","spawnPrefetchSubtask","prefetchSubtask","onPrefetchConnectionClosed","heapPeek","pingRoute","heapPop","background","pingRootRouteTree","keyWithoutSearch","routeWithoutSearch","pingStaticHead","pingSharedPartOfCacheComponentsTree","pingRuntimeHead","requestTree","pingRuntimePrefetches","diffRouteTreeAgainstCurrent","pingStaticSegmentData","pingRouteTreeAndIncludeDynamicData","oldTree","newTree","oldTreeChildren","newTreeChild","newTreeChildSegment","oldTreeChild","oldTreeChildSegment","doesCurrentSegmentMatchCachedSegment","pingNewPartOfCacheComponentsTree","requestTreeChildren","requestTreeChild","subtreeHasLoadingBoundary","pingPPRDisabledRouteTreeUpToLoadingBoundary","refetchMarkerContext","refetchMarker","segmentHasLoadingBoundary","isInsideRefetchingParent","spawnedSegment","pingFullSegmentRevalidation","pingPPRSegmentRevalidation","revalidatingSegment","upsertSegmentOnCompletion","pendingSegment","nonEmptyRevalidatingSegment","emptySegment","fulfilled","currentSegment","cachedSegment","compareQueuePriority","priorityDiff","phaseDiff","heap","heapSiftUp","pop","heapSiftDown","parentIndex","halfLength","leftIndex","rightIndex","IDLE_LINK_STATUS","PENDING_LINK_STATUS","mountFormInstance","mountLinkInstance","onLinkVisibilityChanged","onNavigationIntent","setLinkForCurrentNavigation","unmountLinkForCurrentNavigation","unmountPrefetchableInstance","linkForMostRecentNavigation","pending","setOptimisticLinkStatus","prefetchable","prefetchableAndVisible","observer","IntersectionObserver","handleIntersect","rootMargin","observeVisibility","instance","existingInstance","coercePrefetchableUrl","createPrefetchURL","reportErrorFn","router","prefetchEnabled","prefetchURL","isVisible","prefetchTask","prefetchHref","unobserve","intersectionRatio","rescheduleLinkPrefetch","unstable_upgradeToDynamicPrefetch","__NEXT_DYNAMIC_ON_HOVER","existingPrefetchTask","getCurrentAppRouterState","appRouterState","scheduleSegmentPrefetchTask","pathHasPrefix","hasBasePath","isLocalURL","locationOrigin","resolved","errorOnce","errors","LinkComponent","useLinkStatus","isModifiedEvent","eventTarget","metaKey","ctrlKey","shiftKey","altKey","which","linkClicked","linkInstanceRef","scroll","onNavigate","nodeName","isAnchorNodeName","toUpperCase","hasAttribute","dispatchNavigateAction","formatStringOrUrl","urlObjOrString","linkStatus","useOptimistic","hrefProp","asProp","childrenProp","prefetchProp","passHref","shallow","onClick","onMouseEnter","onMouseEnterProp","onTouchStart","onTouchStartProp","legacyBehavior","unstable_dynamicOnHover","restProps","AppRouterContext","getFetchStrategyFromPrefetchProp","createPropError","expected","actual","requiredPropsGuard","requiredProps","optionalPropsGuard","optionalProps","valType","locale","hasDynamicSegment","resolvedHref","$$typeof","for","only","childRef","observeLinkVisibilityOnMount","mergedRef","childProps","defaultPrevented","upgradeToDynamicPrefetch","__NEXT_LINK_NO_TOUCH_START","LinkStatusContext","Provider","createContext"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,70,71,72,73,74,75,76,77,78,79]}